{"categories":[{"title":"å­¦ä¹ ç¬”è®°","uri":"https://senjianlu.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"},{"title":"æ•™ç¨‹ç¿»æ–°","uri":"https://senjianlu.com/categories/%E6%95%99%E7%A8%8B%E7%BF%BB%E6%96%B0/"},{"title":"è¸©å‘è®°å½•","uri":"https://senjianlu.com/categories/%E8%B8%A9%E5%9D%91%E8%AE%B0%E5%BD%95/"}],"posts":[{"content":"æœ‰ä¸”åªåœ¨è¿™ç¯‡åšæ–‡å†…æ·»åŠ å¹¿å‘Šä½œä¸ºæ ·ä¾‹ã€‚\n \r\r\r(adsbygoogle = window.adsbygoogle || []).push({});\r  1ã€æ³¨å†Œ Google AdSense\nå®˜æ–¹é“¾æ¥ï¼šGoogle AdSense\nå¡«å…¥é“¾æ¥å’Œé‚®ç®±ï¼š\næ¥ç€ä½¿ç”¨ Google è´¦å·ç™»å½•ä»¥å®Œæˆç»‘å®šï¼š\n2ã€é€‰æ‹©åˆé€‚çš„å¹¿å‘Šç±»å‹\nå®˜æ–¹ç»™äº† 3 ç§å¹¿å‘Šå•å…ƒå¯ä¾›é€‰æ‹©ï¼š\næˆ‘æ˜¯ç»™åšæ–‡æ·»åŠ çš„ï¼Œç†è®ºä¸Šä¿¡æ¯æµå’Œæ–‡ç« å†…åµŒç±»å‹çš„ç‚¹å‡»ç‡æ›´é«˜ï¼šå‰è€…å’Œæ–‡ç« æˆ–ç½‘é¡µå†…å®¹ä¼šæœ‰æ‰€å…³è”ï¼Œåè€…å¤šæ•°æƒ…å†µä¼šä»¥å¤§å›¾å½¢å¼èå…¥æ–‡ç« ä¸­ã€‚ä½†æ˜¯æˆ‘ä¸ªäººæ˜¯æåº¦åŒæ¶æŠ€æœ¯åšå®¢å†…æ’å…¥å¹¿å‘Šçš„ï¼Œè¿™é‡Œåªæ‹¿æ™®é€šçš„å±•ç¤ºå¹¿å‘Šåšä¾‹å­ï¼š\næ¥ç€å°±èƒ½æ‹¿åˆ°ä»£ç æ®µäº†ï¼š\nå¦‚æœä½ æ˜¯ç»™è‡ªå·±ç½‘ç«™çš„å‰ç«¯é¡µé¢æ·»åŠ å¹¿å‘Šçš„è¯ï¼Œç›´æ¥å¤åˆ¶åˆ° HTML é¡µé¢ä¸­çš„æŒ‡å®šä½ç½®åšè°ƒæ•´å°±è¡Œäº†ã€‚\n3ã€ä¸º Hugo é™æ€åšå®¢æ–°å»º Shortcodes å¹¿å‘Šæ¨¡æ¿ä»¥æ–¹ä¾¿ Markdown çš„ä¹¦å†™å’Œæ¸²æŸ“\nHugo Shortcodes å®˜æ–¹ä»‹ç»ï¼šShortcodes\nå¼•å…¥ YouTube è§†é¢‘çš„å®˜æ–¹æ¡ˆä¾‹ï¼šsingle-positional-example-youtube\nå¦‚æœä½ åªæƒ³å®ç°å¹¿å‘Šæˆ–å…¶ä»–å·®ä¸å¤šçš„ç®€å•åŠŸèƒ½ï¼Œç›´æ¥å’Œæˆ‘ç»§ç»­æ“ä½œä¸‹å»ä¹Ÿå¯ä»¥ã€‚\næ˜ç¡®ä¸€ä¸‹ï¼ŒHugoæ¨¡æ¿çš„æŸ¥æ‰¾é¡ºåºæ˜¯ï¼š\n /layouts/shortcodes/.html /themes//layouts/shortcodes/.html  å³ä¼˜å…ˆä½¿ç”¨ä¸»ç›®å½•ä¸‹çš„æ¨¡æ¿ã€‚\nçŸ¥é“äº†æ¨¡æ¿å­˜æ”¾è·¯å¾„ï¼Œé‚£ä¹ˆå‘½åå‘¢ï¼Ÿå‘½åä¹Ÿå¾ˆç®€å•ï¼Œæ¨¡æ¿çš„ .html æ–‡ä»¶åå­—å¯ä»¥è‡ªå®šä¹‰ï¼Œåœ¨ Markdown ä¸­ä¹¦å†™çš„æ—¶å€™ä½¿ç”¨ç›¸åŒçš„åå­—å°±è¡Œäº†ï¼Œä¾‹å¦‚æˆ‘åˆ›å»ºäº† google-adsense.html è¿™ä¸ªæ¨¡æ¿ï¼š\né‚£ä¹ˆæˆ‘åœ¨æ–‡ç« çš„ .md æ–‡ä»¶ä¸­è¿™æ ·è°ƒç”¨ï¼ŒåæœŸ Hugo å°±ä¼šè‡ªåŠ¨æ¸²æŸ“äº†ï¼š\nå°†åˆšåˆšçš„ Google AdSense çš„å¹¿å‘Šä»£ç å¤åˆ¶æ¥ï¼Œå¹¶è®¾å®šä¸€ä¸‹å‚æ•°ä½ç½®ï¼Œæœ€ç»ˆ google-adsense.html çš„å†…å®¹å°±å˜æˆäº†è¿™ä¸ªæ ·å­ï¼š\n\u0026lt;script async src=\u0026quot;https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-{{ index .Params 0 }}\u0026quot;\rcrossorigin=\u0026quot;anonymous\u0026quot;\u0026gt;\u0026lt;/script\u0026gt;\r\u0026lt;!-- æµ‹è¯•å¹¿å‘Š --\u0026gt;\r\u0026lt;ins class=\u0026quot;adsbygoogle\u0026quot;\rstyle=\u0026quot;display:block\u0026quot;\rdata-ad-client=\u0026quot;ca-pub-{{ index .Params 0 }}\u0026quot;\rdata-ad-slot=\u0026quot;{{ index .Params 1 }}\u0026quot;\rdata-ad-format=\u0026quot;auto\u0026quot;\rdata-full-width-responsive=\u0026quot;true\u0026quot;\u0026gt;\u0026lt;/ins\u0026gt;\r\u0026lt;script\u0026gt;\r(adsbygoogle = window.adsbygoogle || []).push({});\r\u0026lt;/script\u0026gt;\r è°ƒç”¨çš„æ—¶å€™å°†å¹¿å‘Šå‚æ•°ä¼ å…¥ï¼š\nç»“æŸã€‚\n","id":0,"section":"posts","summary":"æœ‰ä¸”åªåœ¨è¿™ç¯‡åšæ–‡å†…æ·»åŠ å¹¿å‘Šä½œä¸ºæ ·ä¾‹ã€‚ (adsbygoogle = window.adsbygoogle || []).push({}); 1ã€æ³¨å†Œ Google AdSense å®˜æ–¹é“¾æ¥ï¼šGoogle AdSense å¡«å…¥é“¾æ¥å’Œé‚®ç®±ï¼š æ¥ç€ä½¿ç”¨ Google è´¦å·ç™»å½•ä»¥å®Œæˆç»‘å®šï¼š 2ã€é€‰æ‹©åˆé€‚","tags":["å»ºç«™"],"title":"ç”³è¯· Google AdSense å¹¶ä¸º Hugo é™æ€åšå®¢é…ç½® Shortcodes å¹¿å‘Šæ¨¡æ¿é¡µé¢æ–¹ä¾¿ Markdown çš„ä¹¦å†™å’Œæ¸²æŸ“","uri":"https://senjianlu.com/2021/12/hugo-google-adsense/","year":"2021"},{"content":"ç¬¬ä¸€æ¬¡æ¥è§¦ MongoDB è¿™ç§éå…³ç³»å‹æ•°æ®åº“çš„è¡¨ç»“æ„è®¾è®¡ã€‚\n MongoDB çš„å±‚çº§åè¯ç¿»è¯‘è¿‡æ¥ä¼šæœ‰ç‚¹éš¾ç†è§£ï¼Œæ‰€ä»¥æˆ‘å°†å®ƒå’Œ PostgreSQL æ•°æ®åº“çš„å¯¹åº”èµ·æ¥ï¼š\n   PostgreSQL MongoDB     Databaseï¼ˆæ•°æ®åº“ï¼‰ Databaseï¼ˆæ•°æ®åº“ï¼‰   Tableï¼ˆè¡¨ï¼‰ Collectionï¼ˆé›†åˆï¼‰   Tuple/Rowï¼ˆè¡Œï¼‰ Documentï¼ˆæ–‡æ¡£ï¼‰   Columnï¼ˆåˆ—ï¼‰ Fieldï¼ˆå­—æ®µï¼‰     å‚è€ƒæ–‡ç« ï¼šMongoDB çš„æ–‡æ¡£ã€é›†åˆã€æ•°æ®åº“\nä¸€ã€Database æ•°æ®åº“ å¤šä¸ªæ–‡æ¡£æ„æˆé›†åˆï¼Œå¤šä¸ªé›†åˆç»„æˆæ•°æ®åº“ã€‚ä¸€ä¸ª MongoDB å®ä¾‹å¯ä»¥æ‰¿è½½å¤šä¸ªæ•°æ®åº“ï¼Œæ¯ä¸ªæ•°æ®åº“å¯ä»¥æ‹¥æœ‰ 0 åˆ°å¤šä¸ªé›†åˆã€‚\nå®˜æ–¹æ–‡æ¡£ï¼šDatabases\n1ã€è¯´æ˜\n æ¯ä¸ªæ•°æ®åº“æœ‰ç›¸åº”çš„æ•°æ®æ–‡ä»¶å’Œå‘½åç©ºé—´æ–‡ä»¶ã€‚æ–‡ä»¶çš„å‰ç¼€æ˜¯æ•°æ®åº“çš„åç§°ï¼Œåç¼€ .ns è¡¨ç¤ºå‘½åç©ºé—´æ–‡ä»¶ï¼Œåç¼€ä»¥ 0ã€1 ç­‰æ•°å­—ç»“å°¾çš„ï¼Œè¡¨ç¤ºæ•°æ®æ–‡ä»¶ã€‚ æ•°æ®æ–‡ä»¶çš„å¤§å°ä» 64MB å¼€å§‹ï¼Œæ–°çš„æ•°æ®æ–‡ä»¶å¤§å°æ˜¯ä¸Šä¸€ä¸ªæ–‡ä»¶çš„ 2 å€ã€‚æ‰€ä»¥èƒ½çœ‹åˆ°ï¼Œä¸‹å›¾ä¸­ chen.0 çš„å¤§å°æ˜¯ 64MBï¼Œchen.1 çš„å¤§å°æ˜¯ 128MBï¼Œchen.2 çš„æ˜¯ 256MBã€‚ æ–‡ä»¶ä½¿ç”¨MAPè¿›è¡Œå†…å­˜æ˜ å°„ï¼Œä¼šå°†æ‰€æœ‰çš„æ•°æ®æ–‡ä»¶æ˜ å°„åˆ°å†…å­˜ä¸­ï¼Œä½†æ˜¯åªæ˜¯è™šæ‹Ÿå†…å­˜ï¼Œåªæœ‰è®¿é—®åˆ°è¿™å—æ•°æ®æ—¶æ‰ä¼šäº¤æ¢åˆ°ç‰©ç†å†…å­˜ä¸­ã€‚ æ¯ä¸ªæ•°æ®æ–‡ä»¶ä¼šè¢«åˆ†æˆä¸€ä¸ªä¸€ä¸ªçš„æ•°æ®å—ï¼Œå—ä¸å—ä¹‹é—´ç”¨åŒå‘é“¾è¡¨é“¾æ¥ã€‚ åœ¨å‘½åç©ºé—´æ–‡ä»¶ä¸­ï¼Œä¿å­˜äº†æ¯ä¸ªå‘½åç©ºé—´çš„å­˜å‚¨ä¿¡æ¯å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬å…¶å¤§å°ã€å—æ•°ã€ç¬¬ä¸€å—çš„ä½ç½®ã€æœ€åä¸€å—çš„ä½ç½®ã€è¢«åˆ é™¤çš„å—çš„é“¾è¡¨ä»¥åŠç´¢å¼•ä¿¡æ¯ã€‚ã€€  2ã€å¸¸ç”¨å‘½ä»¤\nâ‘  æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“ï¼š\nshow dbs\r â‘¡ æŸ¥çœ‹å½“å‰æ•°æ®åº“ï¼š\ndb\r â‘¢ åˆ‡æ¢åˆ°æŒ‡å®šæ•°æ®åº“ï¼š\næ³¨ï¼šå½“æ•°æ®åº“ä¸å­˜åœ¨çš„æ—¶å€™ï¼Œä¸ä¼šç«‹åˆ»åˆ›å»ºæ•°æ®åº“çš„æ•°æ®æ–‡ä»¶å’Œå‘½åç©ºé—´æ–‡ä»¶ï¼Œåªæœ‰åœ¨ç¬¬ä¸€æ¬¡å‘æ•°æ®åº“ä¸­æ’å…¥ä¸€ä¸ªæ–‡ä»¶çš„æ—¶å€™æ‰å»åˆ›å»ºå¯¹åº”çš„æ•°æ®åº“ã€‚åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œé›†åˆä¹Ÿæœ‰ç±»ä¼¼çš„ç‰¹æ€§ã€‚\nuse $database_name\r â‘£ åˆ é™¤å½“å‰åœ¨ä½¿ç”¨çš„è¿™ä¸ªæ•°æ®åº“ï¼š\næ³¨ï¼šåœ¨åˆ é™¤å½“å‰ä½¿ç”¨çš„æ•°æ®åº“ä¹‹åï¼Œdb ä»»ç„¶æŒ‡å‘è¢«åˆ é™¤çš„é‚£ä¸ªæ•°æ®åº“åç§°ï¼Œå¯ä»¥é€šè¿‡ use åˆ‡æ¢ï¼›å¦‚æœä¸åˆ‡æ¢å°±åšæ•°æ®æ’å…¥æ“ä½œï¼Œä¼šé‡æ–°å»ºç«‹ç›¸åŒåå­—çš„ä¸€ä¸ªæ•°æ®åº“ï¼Œä½†æ˜¯å·²ç»ä¸æ˜¯åŸæ¥çš„æ•°æ®åº“äº†ï¼Œå°½ç®¡æœ‰ç›¸åŒçš„åç§°ï¼Œä¹Ÿæœ‰å¯èƒ½æœ‰ç›¸åŒçš„é›†åˆå’Œæ–‡æ¡£ã€‚\ndb.dropDatabase()\r 3ã€å…¶ä»–\nç³»ç»Ÿä¿ç•™æ•°æ®åº“ï¼š\n adminï¼šroot æ•°æ®åº“ localï¼šè¿™ä¸ªæ•°æ®åº“ä¸­çš„æ•°æ®æ°¸è¿œä¸ä¼šè¢«å¤åˆ¶ï¼Œå¯ä»¥ç”¨äºå­˜å‚¨é™äºæœ¬åœ°æ•°æ®å•å°æœåŠ¡å™¨çš„ä»»æ„é›†åˆ configï¼šåˆ†ç‰‡æ—¶ï¼Œconfig æ•°æ®åº“åœ¨å†…éƒ¨ä½¿ç”¨ï¼Œä¿å­˜åˆ†ç‰‡ä¿¡æ¯  äºŒã€Collectionï¼ˆé›†åˆï¼‰ é›†åˆæ˜¯ä¸€ç»„æ–‡æ¡£çš„é›†ï¼Œç»“æ„å±‚çº§ç›¸å½“äºå…³ç³»å‹æ•°æ®åº“ä¸­çš„æ•°æ®è¡¨ã€‚\nå®˜æ–¹æ–‡æ¡£ï¼šCollections\n1ã€è¯´æ˜\nå’Œå…³ç³»å‹æ•°æ®åº“çš„è¡¨ä¸åŒï¼Œé›†åˆå†…çš„æ–‡æ¡£ç»“æ„å¯ä»¥å„ä¸ç›¸åŒï¼Œåªè¦æ˜¯ JOSN æ ¼å¼å³å¯ã€‚ä¾‹å¦‚ï¼š\n{\u0026quot;title\u0026quot;: \u0026quot;hello!\u0026quot;}\r{\u0026quot;recommend\u0026quot;: 5}\r è¿™ä¸¤ä¸ªæ–‡æ¡£æ˜¯å¯ä»¥å­˜æ”¾åœ¨åŒä¸€ä¸ªé›†åˆä¸­çš„ï¼Œä½†æœ€å¥½è¿˜æ˜¯ç¡®ä¿åŒé›†åˆå†…æ–‡æ¡£çš„æ ¼å¼ç»Ÿä¸€ã€‚\n2ã€å¸¸ç”¨å‘½ä»¤\nâ‘  æŸ¥çœ‹å½“æ—¶æ•°æ®åº“ä¸‹æ‰€æœ‰é›†åˆï¼š\nshow collections\r â‘¡ åˆ›å»ºé›†åˆï¼š\ndb.createCollection(\u0026quot;$collection_name\u0026quot;)\r å¸¦å‚æ•°åˆ›å»ºï¼š\næ³¨ï¼šå‚æ•°æ„ä¸ºåˆ›å»ºå›ºå®šé›†åˆ test_collection_02ï¼Œæ•´ä¸ªé›†åˆç©ºé—´å¤§å° 6142800B, æ–‡æ¡£æœ€å¤§ä¸ªæ•°ä¸º 10000 ä¸ªã€‚\ndb.createCollection(\u0026quot;test_collection_02\u0026quot;, {capped: true, autoIndexId: true, size: 6142800, max: 10000 } )\r  ä½†åœ¨å®é™…æ“ä½œä¸­ï¼Œä½ å¹¶ä¸éœ€è¦ç‰¹æ„çš„å»åˆ›å»ºï¼Œå¦‚æœä½ æ’å…¥ä¸€äº›æ–‡æ¡£æ—¶æŒ‡å®šé›†åˆä¸å­˜åœ¨ï¼ŒMongoDB ä¼šè‡ªåŠ¨ä¸ºä½ åˆ›å»ºï¼š\ndb.test_collection_03.insert({\u0026quot;name\u0026quot;: \u0026quot;è‡ªåŠ¨åˆ›å»ºé›†åˆæµ‹è¯•\u0026quot;})\r æ£€æŸ¥ä¸€ä¸‹ï¼š\n â‘¢ åˆ é™¤é›†åˆï¼š\ndb.$collection_name.drop()\r â‘£ æ›´å¤šæŒ‡ä»¤ï¼š\ndb.$collection_name.help()\r æ³¨ï¼šä¸‹å›¾ä¸­æˆªå–äº†ä¸€å°éƒ¨åˆ†ã€‚ ä¸‰ã€Documentï¼ˆæ–‡æ¡£ï¼‰ æ–‡æ¡£æ˜¯ MongoDB çš„æ ¸å¿ƒæ¦‚å¿µï¼Œä¹Ÿæ˜¯æ•°æ®çš„åŸºæœ¬å•å…ƒï¼Œéå¸¸ç±»ä¼¼äºå…³ç³»æ•°æ®åº“ä¸­çš„è¡Œã€‚åœ¨ MongoDB ä¸­ï¼Œæ–‡æ¡£è¡¨ç¤ºä¸ºé”®å€¼å¯¹çš„ä¸€ä¸ªæœ‰åºé›†ã€‚\nä¸¾ä¸€äº›ä¾‹å­ï¼š\n{\u0026quot;title\u0026quot;: \u0026quot;hello!\u0026quot;}\r{\u0026quot;title\u0026quot;: \u0026quot;hello!\u0026quot;, \u0026quot;recommend\u0026quot;: 5}\r{\u0026quot;title\u0026quot;: \u0026quot;hello!\u0026quot;, \u0026quot;recommend\u0026quot;: 5, \u0026quot;author\u0026quot;: {\u0026quot;firstname\u0026quot;: \u0026quot;paul\u0026quot;, \u0026quot;lastname\u0026quot;: \u0026quot;frank\u0026quot;}}\r ä»ä¸Šé¢çš„ä¾‹å­å¯ä»¥çœ‹åˆ°ï¼Œæ–‡æ¡£çš„å€¼æœ‰ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œç”šè‡³å¯ä»¥æ˜¯ä¸€ä¸ªå®Œæ•´çš„å†…åµŒæ–‡æ¡£ï¼ˆæœ€åä¸€ä¸ªç¤ºä¾‹çš„ author å€¼æ˜¯ä¸€ä¸ªå®Œæ•´çš„æ–‡æ¡£ï¼Œæ–‡æ¡£é‡Œé¢å®šä¹‰äº† firstname å’Œ lastname ã€‚å½“ç„¶è¿˜å¯ä»¥åŒ…å«æ›´å¤šå…¶ä»–ä¿¡æ¯ç”šè‡³äºåœ¨å†…åµŒæ–‡æ¡£ä¸­è¿˜å¯ä»¥æœ‰å†…åµŒæ–‡æ¡£ï¼‰ã€‚\n1ã€è¯´æ˜\n æ–‡æ¡£åŒºåˆ†å¤§å°å†™å’Œæ•°æ®ç±»å‹ï¼Œæ‰€ä»¥ä»¥ä¸‹ä¸¤ç»„æ–‡æ¡£æ˜¯ä¸åŒçš„ï¼š  // å€¼ç±»å‹ä¸åŒ\r{\u0026quot;recommend\u0026quot;: \u0026quot;5\u0026quot;}\r{\u0026quot;recommend\u0026quot;: 5}\r// é”®å¤§å°å†™åŒºåˆ†\r{\u0026quot;Recommend\u0026quot;: \u0026quot;5\u0026quot;}\r{\u0026quot;recommend\u0026quot;: \u0026quot;5\u0026quot;}\r MongoDB çš„æ–‡æ¡£ä¸­çš„é”®å€¼å¯¹æ˜¯æœ‰åºçš„ï¼Œå› æ­¤ä¸‹é¢çš„æ–‡æ¡£æ˜¯ä¸åŒçš„ï¼š  {\u0026quot;title1\u0026quot;: \u0026quot;hello!\u0026quot;, \u0026quot;title2\u0026quot;: \u0026quot;Mongo\u0026quot;}\r{\u0026quot;title2\u0026quot;: \u0026quot;Mongo\u0026quot;, \u0026quot;title1\u0026quot;: \u0026quot;hello!\u0026quot;}\r MongoDB çš„æ–‡æ¡£ä¸­ä¸èƒ½æœ‰é‡å¤çš„é”®ï¼Œå› æ­¤ä¸‹é¢çš„æ–‡æ¡£æ˜¯éæ³•çš„ï¼š  {\u0026quot;title\u0026quot;:\u0026quot;hello!\u0026quot;,\u0026quot;title\u0026quot;:\u0026quot;Mongo\u0026quot;}\r 2ã€å¸¸ç”¨å‘½ä»¤\nâ‘  æŸ¥çœ‹é›†åˆå†…çš„æ‰€æœ‰æ–‡æ¡£ï¼š\n# æœç´¢ä¸€ä¸ªæ–‡æ¡£ï¼Œåœ¨æˆ‘çš„æµ‹è¯•ä¸­è¿”å›çš„æ˜¯æœ€å…ˆæ’å…¥çš„æ–‡æ¡£\rdb.$collection_name.findOne().pretty()\r# ä¸å¸¦æœç´¢æ¡ä»¶ä»¥æŸ¥è¯¢æ•´ä¸ªé›†åˆæ‰€æœ‰çš„æ–‡æ¡£ï¼Œ.pretty() ä½œç”¨ä¸ºæ ¼å¼åŒ–è¾“å‡º\rdb.$collection_name.find().pretty()\r# å¸¦æœç´¢æ¡ä»¶\rdb.$collection_name.find($query, $projection)\r    å‚æ•° è¯´æ˜ ç¤ºä¾‹     query ã€é€‰å¡«ã€‘ä½¿ç”¨æŸ¥è¯¢æ“ä½œç¬¦æŒ‡å®šæŸ¥è¯¢æ¡ä»¶ {\u0026ldquo;recommend\u0026rdquo;: {$lt: 50}}   projection ã€é€‰å¡«ã€‘ä½¿ç”¨æŠ•å½±æ“ä½œç¬¦æŒ‡å®šè¿”å›çš„é”®ï¼Œä¸å¡«åˆ™è¿”å›ç¬¦åˆæœç´¢æ¡ä»¶çš„æ–‡æ¡£çš„æ‰€æœ‰é”®å€¼å¯¹     æŸ¥è¯¢æ–¹æ³•åœ¨åé¢ä¼šå±•å¼€æ¥è®²ï¼Œç°åœ¨å…ˆæ”¾èœé¸Ÿçš„æ•™ç¨‹é“¾æ¥ä¾›å‚è€ƒï¼šMongoDB æŸ¥è¯¢æ–‡æ¡£\nâ‘¡ å‘é›†åˆä¸­æ’å…¥æ–‡æ¡£ï¼š\ndb.$collection_name.insert($document_value)\r â‘¢ åˆ é™¤æ–‡æ¡£ï¼š\n# åˆ é™¤é›†åˆä¸­çš„æ‰€æœ‰æ–‡æ¡£\rdb.$collection_name.remove()\r# åˆ é™¤æ»¡è¶³è¦æ±‚çš„æ–‡æ¡£ï¼ˆ2.6 åŠä»¥åçš„ç‰ˆæœ¬é€‚ç”¨ï¼‰\rdb.$collection_name.remove($query, {justOne: $justOne_value, writeConcern: $writeConcern_value})\r    å‚æ•° è¯´æ˜ ç¤ºä¾‹     justOne ã€é€‰å¡«ã€‘å¦‚æœè®¾ä¸º true æˆ– 1ï¼Œåˆ™åªåˆ é™¤ä¸€ä¸ªæ–‡æ¡£ï¼›å¦‚æœä¸è®¾ç½®è¯¥å‚æ•°ï¼Œæˆ–ä½¿ç”¨é»˜è®¤å€¼ falseï¼Œåˆ™åˆ é™¤æ‰€æœ‰åŒ¹é…æ¡ä»¶çš„æ–‡æ¡£ true   writeConcern ã€é€‰å¡«ã€‘æŠ›å‡ºå¼‚å¸¸çš„çº§åˆ«     â‘£ æ›´æ–°æ–‡æ¡£ï¼š\ndb.$collection_name.update($query, $update, {upsert: $upsert_value, multi: $multi_value, writeConcern: $writeConcern_value})\r    å‚æ•° è¯´æ˜ ç¤ºä¾‹     update ã€å¿…å¡«ã€‘update çš„å¯¹è±¡å’Œä¸€äº›æ›´æ–°çš„æ“ä½œç¬¦ï¼Œå¦‚ $, $inc ç­‰ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸º sql update æŸ¥è¯¢å†… set åé¢çš„æ“ä½œ {$set: {\u0026ldquo;title\u0026rdquo;: \u0026ldquo;MongoDB\u0026rdquo;}}   upsert ã€é€‰å¡«ã€‘å¦‚æœä¸å­˜åœ¨æ»¡è¶³æœç´¢æ¡ä»¶çš„è®°å½•ï¼Œæ˜¯å¦å°† update çš„æ–‡æ¡£ä½œä¸ºæ–°æ–‡æ¡£æ’å…¥ã€‚é»˜è®¤æ˜¯ false å³ä¸æ’å…¥ï¼Œtrue åˆ™ä¸ºæ’å…¥ true   multi ã€é€‰å¡«ã€‘ æ˜¯å¦æ›´æ–°å¤šæ¡è®°å½•ã€‚é»˜è®¤æ˜¯ falseï¼Œåªæ›´æ–°æ‰¾åˆ°çš„ç¬¬ä¸€æ¡è®°å½•ï¼›å¦‚æœè¿™ä¸ªå‚æ•°ä¸º trueï¼Œå°±æŠŠæŒ‰æ¡ä»¶æŸ¥å‡ºæ¥çš„æ‰€æœ‰è®°å½•å…¨éƒ¨æ›´æ–° true    æœ¬ç« ç»“æŸã€‚\n","id":1,"section":"posts","summary":"ç¬¬ä¸€æ¬¡æ¥è§¦ MongoDB è¿™ç§éå…³ç³»å‹æ•°æ®åº“çš„è¡¨ç»“æ„è®¾è®¡ã€‚ MongoDB çš„å±‚çº§åè¯ç¿»è¯‘è¿‡æ¥ä¼šæœ‰ç‚¹éš¾ç†è§£ï¼Œæ‰€ä»¥æˆ‘å°†å®ƒå’Œ PostgreSQL æ•°æ®åº“çš„å¯¹åº”èµ·æ¥ï¼š PostgreSQL MongoDB Databaseï¼ˆæ•°æ®åº“ï¼‰","tags":["MongoDB"],"title":"MongoDB å­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰ MongoDB å±‚çº§å…³ç³»çš„æ¢³ç†å’ŒåŸºç¡€æ“ä½œ","uri":"https://senjianlu.com/2021/11/mongodb-note-02/","year":"2021"},{"content":"åº”è¯¥ä¹Ÿç®—ç¡¬ä»¶ç›¸å…³å§\u0026hellip;\u0026hellip;\n 1ã€å°†ç³»ç»Ÿåœ°åŒºåˆ‡æ¢è‡³ç¾å›½å¹¶å¼€å¯è™šæ‹ŸåŒ–\nå› ä¸ºæ˜¯ç³»ç»Ÿå±‚é¢çš„é…ç½®å› æ­¤æ”¾åœ¨ä¸€èµ·è®²ã€‚\nâ‘  è®¾ç½® -\u0026gt; æ—¶é—´å’Œè¯­è¨€ -\u0026gt; è¯­è¨€ \u0026amp; åŒºåŸŸ -\u0026gt; å›½å®¶æˆ–åœ°åŒº -\u0026gt; åˆ‡æ¢åˆ°ç¾å›½\n ä¸åˆ‡æ¢åœ°åŒºç»“æœå¦‚ä¸‹ï¼š  â‘¡ å¼€å¯ Windows è™šæ‹ŸåŒ–\nè¿™é‡Œåªéœ€è¦å¼€å¯ Windows è™šæ‹Ÿæœºç›‘æ§ç¨‹åºå¹³å° å’Œ è™šæ‹Ÿæœºå¹³å° å°±å¤Ÿäº†ï¼Œæ²¡æœ‰ Hyper-V ä¸å‹¾é€‰ä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œå¯¹å®é™…è¿è¡Œä¸ä¼šæœ‰å½±å“ï¼š\n2ã€å®‰è£…å®‰å“å­ç³»ç»Ÿ\nå½“å‰åœ¨å¾®è½¯å•†åº—å®‰è£…Amazon Appstore ä¼šè‡ªåŠ¨å¸®ä½ ä¸‹è½½å®‰å“å­ç³»ç»Ÿï¼Œè€ƒè™‘åˆ°æˆ‘å·²ç»åœ¨è·¯ç”±å™¨ä¸Šé…ç½®äº†ä»£ç†ï¼Œèƒ½æ­£å¸¸è®¿é—®äºšé©¬é€ŠæœåŠ¡ï¼Œä¾¿é‡‡ç”¨è¿™ä¸ªè¾ƒä¸ºå®˜æ–¹çš„æ–¹å¼ï¼š\n å¦‚æœä½ å¹¶ä¸æƒ³å®‰è£… Amazon Appstoreï¼Œå¹¶ä¸”åç»­åªå‡†å¤‡åœ¨å®‰å“è™šæ‹Ÿæœºä¸­å®‰è£…ä¸€äº›æœ‰ .apk å®‰è£…æ–‡ä»¶æä¾›çš„å›½äº§åº”ç”¨ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥ç›´æ¥å‰å¾€ï¼šWindows Subsystem for Androidâ„¢ with Amazon Appstore è¿›è¡Œä¸‹è½½ï¼š\n 3ã€é…ç½®å®‰å“å­ç³»ç»Ÿ\næ‰“å¼€å…¶ç³»ç»Ÿè®¾ç½®ï¼š\né…ç½®éœ€åšå¦‚ä¸‹ä¿®æ”¹ï¼š\nâ‘  å°†å­ç³»ç»Ÿèµ„æºæ”¹ä¸ºè¿ç»­ä»¥è¿›è¡Œç¬¬ä¸‰æ–¹åº”ç”¨å®‰è£…ï¼ˆå®‰è£…å®Œä¹‹åå¯æ”¹å›æŒ‰éœ€è¦ï¼‰\nâ‘¡ å¼€å¯å¼€å‘äººå‘˜æ¨¡å¼å¹¶è®°å½•ä¸‹è¿æ¥ç”¨çš„ä¿¡æ¯\n4ã€ä» .apk æ–‡ä»¶å®‰è£…åº”ç”¨\nè¿™é‡Œå°±ä¸æ¼”ç¤ºä»å®˜æ–¹ Amazon Appstore å®‰è£…åº”ç”¨äº†ï¼Œæ²¡æœ‰æ„ä¹‰ã€‚\næˆ‘éœ€è¦å®‰è£…çš„ç½‘æ˜“ UU åŠ é€Ÿå™¨ï¼Œç”¨æ¥æ§åˆ¶åŒä¸€ç½‘ç»œç¯å¢ƒä¸‹ OpenWrt ä¸Šçš„ UU åŠ é€Ÿå™¨è·¯ç”±å™¨æ’ä»¶ï¼Œä»¥æ­¤ä¸ºä¾‹ã€‚\nâ‘  ä»å®˜æ–¹ä¸‹å¾—å®‰è£…æ–‡ä»¶\nâ‘¡ ä¸‹è½½å®‰è£… ADB å·¥å…·\n å®˜æ–¹æè¿°ï¼šAndroid SDK Platform Tools æ˜¯ Android SDK çš„ä¸€ä¸ªç»„ä»¶ã€‚å®ƒåŒ…å«ä¸ Android å¹³å°è¿›è¡Œäº¤äº’çš„å·¥å…·ï¼Œä¾‹å¦‚ adbã€fastboot å’Œ systraceã€‚å¼€å‘ Android åº”ç”¨æ—¶éœ€è¦ä½¿ç”¨è¿™äº›å·¥å…·ã€‚å¦‚æœæ‚¨æƒ³è¦è§£é”è®¾å¤‡çš„å¼•å¯¼åŠ è½½ç¨‹åºå¹¶ä¸ºå…¶åˆ·å…¥æ–°çš„ç³»ç»Ÿæ˜ åƒï¼ŒåŒæ ·éœ€è¦ä½¿ç”¨è¿™äº›å·¥å…·ã€‚\n ä¸‹è½½åœ°å€ï¼šplatform-tools-latest-windows.zip\nå°†è§£å‹åçš„æ–‡ä»¶å¤¹ç§»è‡³ä»»æ„ä½ç½®ï¼š\nâ‘¢ ä½¿ç”¨ ADB è¿æ¥å®‰å“è™šæ‹Ÿæœº\nåœ¨ ADB å·¥å…·åŒ…ç›®å½•ä¸‹å¯åŠ¨ Windows ç»ˆç«¯ï¼Œå¹¶è¿æ¥è‡³å®‰å“è™šæ‹Ÿæœºï¼ˆåœ°å€ä¸ºä½ å¼€å¯å¼€å‘äººå‘˜æ¨¡å¼æ—¶è®°å½•çš„é‚£ä¸ªï¼‰ï¼š\n# æŸ¥çœ‹å½“å‰æ˜¯å¦æœ‰èƒ½è¿æ¥çš„è®¾å¤‡\radb devices\r# è¿æ¥è‡³å®‰å“è™šæ‹Ÿæœº\radb connect 127.0.0.1:58526\r â‘£ å®‰è£…åº”ç”¨\næ‰¾åˆ°ä½  .apk å­˜æ”¾çš„è·¯å¾„å¹¶ä½œä¸ºå‚æ•°ä¼ å…¥ï¼š\n.\\adb install C:\\Users\\m112233\\Downloads\\uu-6.2.6.1115.apk\r å®Œæˆåï¼Œå°±èƒ½åœ¨ä½ æœ€è¿‘æ·»åŠ çš„é¡¹ç›®å¤„çœ‹è§äº†ï¼š\næ­£å¸¸æ‰“å¼€æ²¡æœ‰é—®é¢˜ï¼š\nä¹‹åä½ å¯ä»¥æŠŠåœ°åŒºæ”¹å›ä¸­å›½ã€è™šæ‹Ÿæœºå­ç³»ç»Ÿæ”¹å›æŒ‰éœ€æ±‚ï¼ˆè¿™æ · Android è™šæ‹Ÿæœºä¸ä¼šä¸€ç›´åœ¨åå°è¿è¡Œç€ï¼‰ã€‚\nå†å®‰è£…å…¶ä»–è½¯ä»¶æ—¶å¦‚æœå‡ºç°è¿ä¸ä¸Šè™šæ‹Ÿæœºçš„é—®é¢˜ï¼Œéœ€è¦å°†æ­¥éª¤ 3 çš„é…ç½®é‡æ–°åšä¸€éã€‚\nç»“æŸã€‚\n","id":2,"section":"posts","summary":"åº”è¯¥ä¹Ÿç®—ç¡¬ä»¶ç›¸å…³å§\u0026hellip;\u0026hellip; 1ã€å°†ç³»ç»Ÿåœ°åŒºåˆ‡æ¢è‡³ç¾å›½å¹¶å¼€å¯è™šæ‹ŸåŒ– å› ä¸ºæ˜¯ç³»ç»Ÿå±‚é¢çš„é…ç½®å› æ­¤æ”¾åœ¨ä¸€èµ·è®²ã€‚ â‘  è®¾ç½® -\u0026gt; æ—¶é—´å’Œè¯­è¨€","tags":["ç¡¬ä»¶"],"title":"Windows11 æŠ¢å…ˆä½“éªŒ Android è™šæ‹Ÿæœºå¹¶å®‰è£…ç¬¬ä¸‰æ–¹åº”ç”¨","uri":"https://senjianlu.com/2021/11/windows11-android/","year":"2021"},{"content":"å¯¹ä»·æ ¼å­—æ®µè¿›è¡Œå¢é‡åŒæ­¥ã€‚\n  ç®€å•é˜è¿°å…¨é‡åŒæ­¥å’Œå¢é‡åŒæ­¥åŒºåˆ«ï¼š\nå…¨é‡åŒæ­¥ï¼šå°±æ˜¯æ¯å¤©å®šæ—¶ï¼ˆé¿å¼€ä¸šåŠ¡é«˜å³°æœŸï¼‰æˆ–è€…å‘¨æœŸæ€§å…¨é‡æŠŠæ•°æ®ä»ä¸€ä¸ªåœ°æ–¹æ‹·è´åˆ°å¦å¤–ä¸€ä¸ªåœ°æ–¹ï¼Œå¯ä»¥é‡‡ç”¨ç›´æ¥å…¨éƒ¨è¦†ç›–ï¼ˆä½¿ç”¨æ–°æ•°æ®è¦†ç›–æ—§æ•°æ®ï¼‰æˆ–è€…èµ°æ›´æ–°é€»è¾‘ï¼ˆè¦†ç›–å‰åˆ¤æ–­ä¸‹ï¼Œå¦‚æœæ–°æ—§ä¸ä¸€è‡´ï¼Œå°±æ›´æ–°ï¼‰ã€‚\nå¢é‡åŒæ­¥ï¼šå°±æ˜¯æŒ‡æŠ“å–æŸä¸ªæ—¶åˆ»ï¼ˆæ›´æ–°æ—¶é—´ï¼‰æˆ–è€…æ£€æŸ¥ç‚¹ä»¥åçš„æ•°æ®æ¥åŒæ­¥ï¼Œä¸æ˜¯æ— è§„å¾‹çš„å…¨é‡åŒæ­¥ã€‚\n  1ã€åŸºç¡€çš„é…ç½®æ–‡ä»¶\nMongoDB å†™æ’ä»¶çš„å®˜æ–¹æ–‡æ¡£ï¼šDatax MongoDBWriter\n{\r\u0026quot;job\u0026quot;: {\r\u0026quot;setting\u0026quot;: {\r\u0026quot;speed\u0026quot;: {\r\u0026quot;channel\u0026quot;: 3\r},\r\u0026quot;errorLimit\u0026quot;: {}\r},\r\u0026quot;content\u0026quot;: [\r{\r\u0026quot;reader\u0026quot;: {\r\u0026quot;name\u0026quot;: \u0026quot;postgresqlreader\u0026quot;,\r\u0026quot;parameter\u0026quot;: {\r\u0026quot;username\u0026quot;: \u0026quot;{from_username}\u0026quot;,\r\u0026quot;password\u0026quot;: \u0026quot;{from_password}\u0026quot;,\r\u0026quot;where\u0026quot;: \u0026quot;\u0026quot;,\r\u0026quot;column\u0026quot;: [\r\u0026quot;{from_column_01}\u0026quot;,\r\u0026quot;{from_column_02}\u0026quot;\r],\r\u0026quot;connection\u0026quot;: [\r{\r\u0026quot;table\u0026quot;: [\r\u0026quot;{from_table}\u0026quot;\r],\r\u0026quot;jdbcUrl\u0026quot;: [\r\u0026quot;jdbc:postgresql://{from_host}:{from_port}/{from_database}\u0026quot;\r]\r}\r]\r}\r},\r\u0026quot;writer\u0026quot;: {\r\u0026quot;name\u0026quot;: \u0026quot;mongodbwriter\u0026quot;,\r\u0026quot;parameter\u0026quot;: {\r\u0026quot;address\u0026quot;: [\r\u0026quot;{to_host}:{to_port}\u0026quot;\r],\r\u0026quot;userName\u0026quot;: \u0026quot;{to_username}\u0026quot;,\r\u0026quot;userPassword\u0026quot;: \u0026quot;{to_password}\u0026quot;,\r\u0026quot;dbName\u0026quot;: \u0026quot;{to_database}\u0026quot;,\r\u0026quot;collectionName\u0026quot;: \u0026quot;smr_{web}_{mode}_history\u0026quot;,\r\u0026quot;column\u0026quot;: [\r{\r\u0026quot;name\u0026quot;: \u0026quot;{from_column_01}\u0026quot;,\r\u0026quot;type\u0026quot;: \u0026quot;string\u0026quot;\r},\r{\r\u0026quot;name\u0026quot;: \u0026quot;{from_column_02}\u0026quot;,\r\u0026quot;type\u0026quot;: \u0026quot;string\u0026quot;\r}\r]\r}\r}\r}\r]\r}\r}\r 2ã€æˆ‘çš„éœ€æ±‚å’Œè§£å†³\næˆ‘çš„éœ€æ±‚æ˜¯ï¼šå®šæ—¶å°† PostgreSQL è¡¨ä¸­çš„ä»·æ ¼å­—æ®µå’Œæ›´æ–°æ—¶é—´å­—æ®µï¼Œä»¥æ›´æ–°æ—¶é—´çš„æ—¶é—´æˆ³ä½œä¸ºä¸»é”®ï¼Œä¿å­˜åˆ° MongoDB ä¸­ã€‚\nå†™èµ·æ¥è¿˜æ˜¯å¾ˆç®€å•çš„ï¼Œåªè¦æ³¨æ„ä¸€ä¸‹ PostgreSQL æ—¶é—´æˆ³çš„è½¬æ¢å°±è¡Œäº†ã€‚\næœ€åçš„é…ç½®æ–‡ä»¶ï¼š\n{\r\u0026quot;job\u0026quot;: {\r\u0026quot;setting\u0026quot;: {\r\u0026quot;speed\u0026quot;: {\r\u0026quot;channel\u0026quot;: 10\r},\r\u0026quot;errorLimit\u0026quot;: {\r\u0026quot;record\u0026quot;: 2,\r\u0026quot;percentage\u0026quot;: 0.02\r}\r},\r\u0026quot;content\u0026quot;: [\r{\r\u0026quot;reader\u0026quot;: {\r\u0026quot;name\u0026quot;: \u0026quot;postgresqlreader\u0026quot;,\r\u0026quot;parameter\u0026quot;: {\r\u0026quot;username\u0026quot;: \u0026quot;{from_username}\u0026quot;,\r\u0026quot;password\u0026quot;: \u0026quot;{from_password}\u0026quot;,\r\u0026quot;where\u0026quot;: \u0026quot;\u0026quot;,\r\u0026quot;column\u0026quot;: [\r\u0026quot;update_time\u0026quot;,\r\u0026quot;price\u0026quot;\r],\r\u0026quot;connection\u0026quot;: [\r{\r\u0026quot;table\u0026quot;: [\r\u0026quot;test_table\u0026quot;\r],\r\u0026quot;jdbcUrl\u0026quot;: [\r\u0026quot;jdbc:postgresql://{from_host}:{from_port}/{from_database}\u0026quot;\r]\r}\r]\r}\r},\r\u0026quot;writer\u0026quot;: {\r\u0026quot;name\u0026quot;: \u0026quot;mongodbwriter\u0026quot;,\r\u0026quot;parameter\u0026quot;: {\r\u0026quot;address\u0026quot;: [\r\u0026quot;{to_host}:{to_port}\u0026quot;\r],\r\u0026quot;userName\u0026quot;: \u0026quot;{to_username}\u0026quot;,\r\u0026quot;userPassword\u0026quot;: \u0026quot;{to_password}\u0026quot;,\r\u0026quot;dbName\u0026quot;: \u0026quot;{to_database}\u0026quot;,\r\u0026quot;collectionName\u0026quot;: \u0026quot;test_table_price_history\u0026quot;,\r\u0026quot;column\u0026quot;: [\r{\r\u0026quot;name\u0026quot;: \u0026quot;time\u0026quot;,\r\u0026quot;type\u0026quot;: \u0026quot;int\u0026quot;\r},\r{\r\u0026quot;name\u0026quot;: \u0026quot;price\u0026quot;,\r\u0026quot;type\u0026quot;: \u0026quot;double\u0026quot;\r}\r],\r\u0026quot;upsertInfo\u0026quot;: {\r\u0026quot;isUpsert\u0026quot;: \u0026quot;false\u0026quot;\r}\r}\r}\r}\r]\r}\r}\r ç»“æŸã€‚\n","id":3,"section":"posts","summary":"å¯¹ä»·æ ¼å­—æ®µè¿›è¡Œå¢é‡åŒæ­¥ã€‚ ç®€å•é˜è¿°å…¨é‡åŒæ­¥å’Œå¢é‡åŒæ­¥åŒºåˆ«ï¼š å…¨é‡åŒæ­¥ï¼šå°±æ˜¯æ¯å¤©å®šæ—¶ï¼ˆé¿å¼€ä¸šåŠ¡é«˜å³°æœŸï¼‰æˆ–è€…å‘¨æœŸæ€§å…¨é‡æŠŠæ•°æ®ä»ä¸€ä¸ªåœ°æ–¹æ‹·è´åˆ°å¦å¤–ä¸€ä¸ª","tags":["DataX"],"title":"DataX å®è·µï¼ˆä¸‰ï¼‰ä» PostgreSQL è¯»æ•°æ®åº“å¢é‡åŒæ­¥è¡¨åˆ° MongoDB å†™æ•°æ®åº“","uri":"https://senjianlu.com/2021/11/datax-note-03/","year":"2021"},{"content":"åœ¨å¼€å±• PostgreSQL å¢é‡åŒæ­¥åˆ° MongoDB çš„å·¥ä½œä¹‹å‰ï¼Œå…ˆå°è¯•ä¸ªç®€å•ç‚¹çš„å…¨é‡åŒæ­¥ï¼Œä¹Ÿèƒ½ç†Ÿæ‚‰ä¸€ä¸‹ DataX çš„å„ä¸ªé…ç½®é¡¹å’Œå…¶ä½œç”¨ã€‚\n  é™„ä¸‹ DataX çš„å·¥ä½œåŸç†ï¼š\nå®˜æ–¹æ–‡æ¡£ä¸­ä¹Ÿç»™äº†ä¸€ä¸ª MySQL åŒæ­¥åˆ° HDFS çš„ä¾‹å­ï¼Œå’Œä¸Šé¢çš„æµç¨‹å›¾ä¸€èµ·çœ‹ä¼šæ›´å®¹æ˜“ç†è§£ï¼š DataX æœ¬èº«ä½œä¸ºç¦»çº¿æ•°æ®åŒæ­¥æ¡†æ¶ï¼Œé‡‡ç”¨ Framework+plugin æ¶æ„æ„å»ºã€‚å°†æ•°æ®æºè¯»å–å’Œå†™å…¥æŠ½è±¡æˆä¸º Reader/Writer æ’ä»¶ï¼Œçº³å…¥åˆ°æ•´ä¸ªåŒæ­¥æ¡†æ¶ä¸­ã€‚\n Readerï¼šReader ä¸ºæ•°æ®é‡‡é›†æ¨¡å—ï¼Œè´Ÿè´£é‡‡é›†æ•°æ®æºçš„æ•°æ®ï¼Œå°†æ•°æ®å‘é€ç»™ Frameworkã€‚ Writerï¼š Writer ä¸ºæ•°æ®å†™å…¥æ¨¡å—ï¼Œè´Ÿè´£ä¸æ–­å‘ Framework å–æ•°æ®ï¼Œå¹¶å°†æ•°æ®å†™å…¥åˆ°ç›®çš„ç«¯ã€‚ Frameworkï¼šFramework ç”¨äºè¿æ¥ reader å’Œ writerï¼Œä½œä¸ºä¸¤è€…çš„æ•°æ®ä¼ è¾“é€šé“ï¼Œå¹¶å¤„ç†ç¼“å†²ï¼Œæµæ§ï¼Œå¹¶å‘ï¼Œæ•°æ®è½¬æ¢ç­‰æ ¸å¿ƒæŠ€æœ¯é—®é¢˜ã€‚    1ã€åŸºç¡€çš„é…ç½®æ–‡ä»¶\nè¦å®ç°ä¸åŒçš„æºæ•°æ®åº“è¯»å–å’Œç›®æ ‡æ•°æ®åº“å†™å…¥åŠŸèƒ½ï¼Œåªéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­è£…è½½ä¸åŒæ’ä»¶å³å¯ã€‚\næ’ä»¶åˆ—è¡¨ï¼šSupport Data Channels\nè¿™é‡Œä»¥ PostgreSQL è¯»å†™ä¸ºä¾‹ï¼Œåªè¦æ³¨æ„ä¸€ä¸‹æºåˆ—å’Œç›®æ ‡åˆ—æ˜¯é ç´¢å¼•å¯¹é½çš„ï¼Œå­—æ®µåå¯ä»¥ä¸ä¸€æ ·å°±è¡Œäº†ï¼š\n{\r\u0026quot;job\u0026quot;: {\r\u0026quot;setting\u0026quot;: {\r\u0026quot;speed\u0026quot;: {\r\u0026quot;channel\u0026quot;: 3\r},\r\u0026quot;errorLimit\u0026quot;: {\r\u0026quot;record\u0026quot;: 2,\r\u0026quot;percentage\u0026quot;: 0.02\r}\r},\r\u0026quot;content\u0026quot;: [\r{\r\u0026quot;reader\u0026quot;: {\r\u0026quot;name\u0026quot;: \u0026quot;postgresqlreader\u0026quot;,\r\u0026quot;parameter\u0026quot;: {\r\u0026quot;username\u0026quot;: \u0026quot;{from_username}\u0026quot;,\r\u0026quot;password\u0026quot;: \u0026quot;{from_password}\u0026quot;,\r\u0026quot;where\u0026quot;: \u0026quot;\u0026quot;,\r\u0026quot;column\u0026quot;: [\r\u0026quot;{from_column_01}\u0026quot;,\r\u0026quot;{from_column_02}\u0026quot;\r],\r\u0026quot;connection\u0026quot;: [\r{\r\u0026quot;table\u0026quot;: [\r\u0026quot;{from_table}\u0026quot;\r],\r\u0026quot;jdbcUrl\u0026quot;: [\r\u0026quot;jdbc:postgresql://{from_host}:{from_port}/{from_database}\u0026quot;\r]\r}\r]\r}\r},\r\u0026quot;writer\u0026quot;: {\r\u0026quot;name\u0026quot;: \u0026quot;postgresqlwriter\u0026quot;,\r\u0026quot;parameter\u0026quot;: {\r\u0026quot;username\u0026quot;: \u0026quot;{to_username}\u0026quot;,\r\u0026quot;password\u0026quot;: \u0026quot;{to_password}\u0026quot;,\r\u0026quot;column\u0026quot;: [\r\u0026quot;{from_column_01}\u0026quot;,\r\u0026quot;{from_column_02}\u0026quot;\r],\r\u0026quot;preSql\u0026quot;: [\r\u0026quot;DELETE FROM {to_table};\u0026quot;\r],\r\u0026quot;connection\u0026quot;: [\r{\r\u0026quot;jdbcUrl\u0026quot;: \u0026quot;jdbc:postgresql://{to_host}:{to_port}/{to_database}\u0026quot;,\r\u0026quot;table\u0026quot;: [\r\u0026quot;{to_table}\u0026quot;\r]\r}\r]\r}\r}\r}\r]\r}\r}\r é™¤å¼€ Python3 èƒ½ä½¿ç”¨ .format() æ–¹æ³•ç›´æ¥æ›¿æ¢çš„å‚æ•°å¤–ï¼Œå®Œæ•´çš„å‚æ•°ä»‹ç»å¯ä»¥å‚ç…§ä»¥ä¸‹çš„å®˜æ–¹æ–‡æ¡£ã€‚\nPostgreSQL è¯»æ’ä»¶ï¼šPostgreSQLReader\nPostgreSQL å†™æ’ä»¶ï¼šPostgreSQLWriter\n2ã€æˆ‘çš„éœ€æ±‚å’Œè§£å†³\næˆ‘çš„éœ€æ±‚å¾ˆç®€å•ï¼šå®šæ—¶åŒæ­¥æ•´è¡¨æ•°æ®ï¼Œä¸éœ€è¦ä»€ä¹ˆæœç´¢æ¡ä»¶ã€‚\nä½†æ˜¯åœ¨æˆ‘å®é™…è¿›è¡ŒåŒæ­¥çš„æ—¶å€™ï¼Œç¢°åˆ°äº†è¿™ä¸ªé—®é¢˜ï¼š\nException in thread \u0026quot;taskGroup-0\u0026quot; com.alibaba.datax.common.exception.DataXException: Code:[DBUtilErrorCode-06], Description:[æ‰§è¡Œæ•°æ®åº“ Sql å¤±è´¥, è¯·æ£€æŸ¥æ‚¨çš„é…ç½®çš„ column/table/where/querySqlæˆ–è€…å‘ DBA å¯»æ±‚å¸®åŠ©.]. - æ‰§è¡Œçš„SQLä¸º: select id,name,price,detail from test_table å…·ä½“é”™è¯¯ä¿¡æ¯ä¸ºï¼šcom.alibaba.datax.common.exception.DataXException: Code:[DBUtilErrorCode-12], Description:[ä¸æ”¯æŒçš„æ•°æ®åº“ç±»å‹. è¯·æ³¨æ„æŸ¥çœ‹ DataX å·²ç»æ”¯æŒçš„æ•°æ®åº“ç±»å‹ä»¥åŠæ•°æ®åº“ç‰ˆæœ¬.]. - æ‚¨çš„é…ç½®æ–‡ä»¶ä¸­çš„åˆ—é…ç½®ä¿¡æ¯æœ‰è¯¯. å› ä¸ºDataX ä¸æ”¯æŒæ•°æ®åº“è¯»å–è¿™ç§å­—æ®µç±»å‹. å­—æ®µå:[detail], å­—æ®µåç§°:[1111], å­—æ®µJavaç±»å‹:[java.lang.Object]. è¯·å°è¯•ä½¿ç”¨æ•°æ®åº“å‡½æ•°å°†å…¶è½¬æ¢dataxæ”¯æŒçš„ç±»å‹ æˆ–è€…ä¸åŒæ­¥è¯¥å­—æ®µ .\r æ£€æŸ¥äº†ä¸€ä¸‹ï¼Œdetail å­—æ®µæ˜¯ JSONB ç±»å‹çš„ï¼Œæ— è®ºæ˜¯è¯»è¿˜æ˜¯å†™æ’ä»¶æ–‡æ¡£ä¸­éƒ½æ²¡æœ‰æ ‡æ³¨æ”¯æŒè¯¥ç±»å‹ï¼Œè€ƒè™‘äº†ä¸€ä¸‹å¯èƒ½åªæœ‰ 4 ä¸ªé€‰æ‹©äº†ï¼š\n æ›´æ”¹æ•°æ®åº“å­—æ®µç±»å‹ åœ¨è¯»çš„è¿‡ç¨‹ä¸­ä½¿ç”¨å‡½æ•°å°† JSONB ç±»å‹æ”¹ä¸ºå­—ç¬¦ä¸²ï¼Œå†™çš„æ—¶å€™ä¾é  PosrgreSQL è‡ªåŠ¨å°†å­—ç¬¦ä¸²ç±»å‹è½¬ä¸º JSONB å­˜å…¥æ•°æ®åº“ åœ¨è¯»çš„è¿‡ç¨‹ä¸­ä½¿ç”¨å‡½æ•°å°† JSONB ç±»å‹æ”¹ä¸ºå­—ç¬¦ä¸²ï¼Œå†™å…¥ä¸´æ—¶åˆ—ï¼Œç­‰åŒæ­¥ç»“æŸåå†æ‰§è¡Œè¯­å¥å°†ä¸´æ—¶åˆ—æ•°æ®è½¬ä¸º JSONB å­˜å›åŸåˆ— æ‘†çƒ‚ï¼Œä¸åŒæ­¥è¿™ä¸ªå­—æ®µ  JSONB å­˜å­˜æ— ç”¨ä¿¡æ¯å¾ˆæ–¹ä¾¿ï¼Œä¸”å½“å‰å·²ç»æœ‰å¾ˆå¤šåŸºäº JSONB ç‰¹æ€§å†™çš„ SQL è¯­å¥äº†ï¼Œæ’é™¤äº† 1ã€‚\nåœ¨å¤šæ¬¡å°è¯•ä¹‹åå‘ç°æ— æ³•å®ç°ï¼Œæ’é™¤æ‰äº† 2ã€‚\n å…³äº 2 çš„å°è¯•ï¼Œè¯»çš„è¿‡ç¨‹ä¸­ç±»å‹è½¬æ¢æ˜¯å¾ˆé¡ºåˆ©çš„ï¼Œå†™å…¥ä¹‹å‰å€¼å·²ç»æ˜¯ç±»ä¼¼ '{\u0026quot;111\u0026quot;: 222}' çš„æ ¼å¼äº†ï¼Œä½†æ˜¯åˆ°äº†æ­£å¼å†™å…¥ï¼šå¦‚æœä½ ä¸å¼ºåˆ¶æŒ‡å®šç±»å‹ï¼Œé‚£ä¹ˆä¼šæŠ¥ PostgreSQLWriter æ’ä»¶ä¸æ”¯æŒ JSON ç±»å‹å†™å…¥çš„é”™è¯¯ï¼ŒçŒœæµ‹æ˜¯è¯»å–äº†æ•°æ®åº“ä¸­çš„åˆ—ç±»å‹è€Œå¹¶éç›´æ¥è¯»å–å€¼çš„ç±»å‹ï¼›å¼ºåˆ¶æŒ‡å®šç±»å‹ \u0026quot;detail::VARCHAR\u0026quot; ä¹‹ååˆä¼šæŠ¥ PostgreSQL æ’å…¥é”™è¯¯ï¼Œæ— æ³•å°† VARCHAR ç±»å‹çš„æ•°æ®æ’å…¥ JSONB ç±»å‹çš„åˆ—ã€‚\n æœ€ç»ˆåªå‰©æ–¹æ¡ˆ 3ï¼Œåº†å¹¸åœ¨è¡¨è®¾è®¡ä¹‹åˆå°±å‡†å¤‡äº†å¤‡ç”¨å­—æ®µï¼Œç°åœ¨è¿˜æœ‰ 2 ä¸ªèƒ½ç”¨ï¼Œå¹¶ä¸”åç»­å¦‚æœ DataX æ’ä»¶æ”¯æŒ JSONB ç±»å‹ï¼Œåªéœ€è¦æ”¹é…ç½®æ–‡ä»¶å°±è¡Œäº†ï¼Œå¾ˆæ–¹ä¾¿ã€‚\nä¿®æ”¹åçš„é…ç½®æ–‡ä»¶ï¼ˆåŠ ä¸Šäº†æˆ‘è‡ªå·±è¡¨çš„ç»“æ„ä¿¡æ¯ï¼‰ï¼š\n{\r\u0026quot;job\u0026quot;: {\r\u0026quot;setting\u0026quot;: {\r\u0026quot;speed\u0026quot;: {\r\u0026quot;channel\u0026quot;: 10\r},\r\u0026quot;errorLimit\u0026quot;: {\r\u0026quot;record\u0026quot;: 2,\r\u0026quot;percentage\u0026quot;: 0.02\r}\r},\r\u0026quot;content\u0026quot;: [\r{\r\u0026quot;reader\u0026quot;: {\r\u0026quot;name\u0026quot;: \u0026quot;postgresqlreader\u0026quot;,\r\u0026quot;parameter\u0026quot;: {\r\u0026quot;username\u0026quot;: \u0026quot;{from_username}\u0026quot;,\r\u0026quot;password\u0026quot;: \u0026quot;{from_password}\u0026quot;,\r\u0026quot;where\u0026quot;: \u0026quot;\u0026quot;,\r\u0026quot;column\u0026quot;: [\r\u0026quot;id\u0026quot;,\r\u0026quot;name\u0026quot;,\r\u0026quot;price\u0026quot;,\r\u0026quot;detail:VARCHAR:\u0026quot;\r],\r\u0026quot;connection\u0026quot;: [\r{\r\u0026quot;table\u0026quot;: [\r\u0026quot;test_table\u0026quot;\r],\r\u0026quot;jdbcUrl\u0026quot;: [\r\u0026quot;jdbc:postgresql://{from_host}:{from_port}/{from_database}\u0026quot;\r]\r}\r]\r}\r},\r\u0026quot;writer\u0026quot;: {\r\u0026quot;name\u0026quot;: \u0026quot;postgresqlwriter\u0026quot;,\r\u0026quot;parameter\u0026quot;: {\r\u0026quot;username\u0026quot;: \u0026quot;{to_username}\u0026quot;,\r\u0026quot;password\u0026quot;: \u0026quot;{to_password}\u0026quot;,\r\u0026quot;column\u0026quot;: [\r\u0026quot;id\u0026quot;,\r\u0026quot;name\u0026quot;,\r\u0026quot;price\u0026quot;,\r\u0026quot;spare\u0026quot;\r],\r\u0026quot;preSql\u0026quot;: [\r\u0026quot;DELETE FROM test_table;\u0026quot;\r],\r\u0026quot;postSql\u0026quot;: [\r\u0026quot;UPDATE test_table SET detail = spare::JSONB;\u0026quot;,\r\u0026quot;UPDATE test_table SET spare = NULL;\u0026quot;\r],\r\u0026quot;connection\u0026quot;: [\r{\r\u0026quot;jdbcUrl\u0026quot;: \u0026quot;jdbc:postgresql://{to_host}:{to_port}/{to_database}\u0026quot;,\r\u0026quot;table\u0026quot;: [\r\u0026quot;test_table\u0026quot;\r]\r}\r]\r}\r}\r}\r]\r}\r}\r ä¼šæ…¢ä¸€ç‚¹ï¼Œé€‚å½“è°ƒé«˜ channel å¹¶å‘ä¹‹åè¿˜èƒ½æ¥å—ï¼Œç­‰æ•°æ®é‡ä¸Šæ¥äº†å†è¡¥æ€§èƒ½è°ƒä¼˜ã€‚\næœ¬ç« ç»“æŸã€‚\n","id":4,"section":"posts","summary":"åœ¨å¼€å±• PostgreSQL å¢é‡åŒæ­¥åˆ° MongoDB çš„å·¥ä½œä¹‹å‰ï¼Œå…ˆå°è¯•ä¸ªç®€å•ç‚¹çš„å…¨é‡åŒæ­¥ï¼Œä¹Ÿèƒ½ç†Ÿæ‚‰ä¸€ä¸‹ DataX çš„å„ä¸ªé…ç½®é¡¹å’Œå…¶ä½œç”¨ã€‚ é™„ä¸‹ DataX çš„å·¥ä½œåŸç†ï¼š å®˜æ–¹æ–‡æ¡£ä¸­ä¹Ÿç»™äº†ä¸€ä¸ª MySQL åŒæ­¥åˆ°","tags":["DataX"],"title":"DataX å®è·µï¼ˆäºŒï¼‰ä» PostgreSQL è¯»æ•°æ®åº“å…¨é‡åŒæ­¥è¡¨åˆ° PostgreSQL å†™æ•°æ®åº“","uri":"https://senjianlu.com/2021/11/datax-note-02/","year":"2021"},{"content":"éœ€è¦ä» PostgreSQL åŒæ­¥æ•°æ®åˆ° MongoDBï¼Œçœ‹äº†ä¸€åœˆé€‰æ‹©äº† DataX å·¥å…·ï¼Œé˜¿é‡Œçš„å¼€æºé¡¹ç›®è¿˜æ˜¯è›®å€¼å¾—ä¿¡èµ–çš„ã€‚\nå®˜æ–¹å¹¶æœªæä¾› Docker é•œåƒï¼Œä½†æ˜¯è€ƒè™‘åˆ°æˆ‘ç°åœ¨å·²ç»éƒ¨ç½²äº† K3s é›†ç¾¤ï¼Œæ‰€ä»¥å†³å®šæŠ˜è…¾ä¸‹ï¼Œè‡ªå·±æ„å»ºä¸ªé•œåƒæ¥ç”¨ã€‚\n å‚è€ƒæ–‡ç« ï¼šDocker è¿è¡Œ DataX å®ç°æ•°æ®åŒæ­¥æ–¹æ¡ˆ\næˆ‘çš„ Dockerfile æ–‡ä»¶ï¼šDataX-docker\næˆ‘æ„å»ºå®Œçš„ Docker é•œåƒï¼šrabbir/datax\n1ã€å®‰è£…å’Œé…ç½® DataX è¿è¡Œç¯å¢ƒ\n å®˜æ–¹æè¿°çš„è¿è¡Œç¯å¢ƒï¼š\n Linux JDKï¼ˆ1.8 ä»¥ä¸Šï¼Œæ¨è 1.8ï¼‰ Pythonï¼ˆæ¨è Python2.6.Xï¼‰ Apache Maven 3.x ï¼ˆCompile DataXï¼‰   â‘  ç›´æ¥æ‹‰å– CentOS7 çš„é•œåƒï¼Œè§£å†³ Linux å’Œ Python éœ€æ±‚ï¼ˆCentOS7 å®˜æ–¹é•œåƒè‡ªå¸¦ Python2.7.5ï¼‰ï¼š\n# æ‹‰å–é•œåƒ\rdocker pull centos:centos7\r# è¿è¡Œé•œåƒ\rdocker run -it docker.io/centos:centos7 /bin/bash\r ä¹‹åçš„å‘½ä»¤éƒ½æ˜¯åœ¨å®¹å™¨å†…æ‰§è¡Œï¼\nâ‘¡ å®‰è£… JDK1.8ï¼š\n# å®‰è£…ä½ç½®\rcd /usr/local/\r# ä¸‹è½½å‹ç¼©åŒ…\rwget --no-check-certificate --no-cookies --header \u0026quot;Cookie: oraclelicense=accept-securebackup-cookie\u0026quot; http://download.oracle.com/otn-pub/java/jdk/8u131-b11/d54c1d3a095b4ff2b6607d096fa80163/jdk-8u131-linux-x64.tar.gz\r# è§£å‹å¹¶é‡å‘½å\rtar -zxvf jdk-8u131-linux-x64.tar.gz\rmv jdk1.8.0_131 jdk1.8\r# åˆ é™¤å‹ç¼©åŒ…\rrm -f jdk-8u131-linux-x64.tar.gz\r# é…ç½®ç¯å¢ƒå˜é‡\rvi ~/.bashrc\r æ–°å¢ä»¥ä¸‹ä¸¤è¡Œï¼š\n...\r...\r# Java ç›¸å…³\rexport JAVA_HOME=/usr/local/jdk1.8\rexport PATH=$PATH:$JAVA_HOME/bin\rexport CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar\r...\r...\r ä½¿é…ç½®ç”Ÿæ•ˆï¼š\nsource ~/.bashrc\r# ç¡®è®¤ Java ç‰ˆæœ¬\rjava -version\r â‘¢ å®‰è£… Apache Mavenï¼š\n# å®‰è£…ä½ç½®\rcd /usr/local/\r# ä¸‹è½½å‹ç¼©åŒ…\rwget --no-check-certificate https://dlcdn.apache.org/maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.tar.gz\r# è§£å‹å¹¶é‡å‘½å\rtar -zxvf apache-maven-3.6.3-bin.tar.gz\rmv apache-maven-3.6.3 maven\r# åˆ é™¤å‹ç¼©åŒ…\rrm -f apache-maven-3.6.3-bin.tar.gz\r# é…ç½®ç¯å¢ƒå˜é‡\rvi ~/.bashrc\r ...\r...\r# Maven ç›¸å…³\rexport MAVEN_HOME=/usr/local/maven\rexport PATH=$PATH:$MAVEN_HOME/bin\r...\r...\r ä½¿é…ç½®ç”Ÿæ•ˆï¼š\nsource ~/.bashrc\r# ç¡®è®¤ Java ç‰ˆæœ¬\rmvn -v\r è‡³æ­¤ç¯å¢ƒå®‰è£…å’Œé…ç½®å®Œæˆã€‚\n2ã€ä¸‹è½½å¹¶ç¼–è¯‘ DataX\nå®˜æ–¹æ–‡æ¡£ï¼šQuick Start\ncd /usr/local/\ryum -y install git\r# å…‹éš†æºç \rgit clone https://github.com/alibaba/DataX.git\r# ç¼–è¯‘\rcd DataX\rmvn -U clean package assembly:assembly -Dmaven.test.skip=true\r  æˆ‘ç¢°åˆ°çš„é—®é¢˜ï¼š\nâ‘  oscarwriter JAR åŒ…çš„ç¼ºå¤±ï¼š\n[ERROR] Failed to execute goal on project oscarwriter: Could not resolve dependencies for project com.alibaba.datax:oscarwriter:jar:0.0.1-SNAPSHOT: Could not find artifact com.oscar:oscar:jar:7.0.8 at specified path /usr/local/DataX/oscarwriter/src/main/lib/oscarJDBC.jar -\u0026gt; [Help 1]\r è§£å†³æ–¹æ³•å°±æ˜¯å» pom.xml ä¸­æ³¨é‡Šæ‰ï¼Œåæ­£ä¹Ÿç”¨ä¸åˆ°ã€‚ç¼–è¾‘æºç æ ¹ç›®å½•çš„ pom.xml æ–‡ä»¶ï¼š\nvi pom.xml\r æ³¨é‡Šæ‰ oscarwriter é‚£è¡Œï¼š\n...\r...\r\u0026lt;!-- \u0026lt;module\u0026gt;oscarwriter\u0026lt;/module\u0026gt; --\u0026gt;\r...\r...\r  Docker å®¹å™¨æ€§èƒ½å—é™ï¼Œæ•´ä½“ç¼–è¯‘å¤§æ¦‚éœ€è¦ 10 åˆ†é’Ÿå·¦å³ï¼ˆæˆ‘æ˜¯å› ä¸ºå‡ºäº†é”™é‡æ–°ç¼–è¯‘è·³è¿‡äº†ç¼–è¯‘æˆåŠŸçš„åŒ…ï¼Œæ‰€ä»¥åªç”¨äº† 3 åˆ†é’Ÿï¼‰ã€‚\nç¼–è¯‘å®Œæˆåï¼ŒDataX çš„å¯è¿è¡Œçš„ .py æ–‡ä»¶ä¼šåœ¨ /usr/local/DataX/target/datax/datax/bin/ è·¯å¾„ä¸‹ï¼Œæµ‹è¯•ä¸€ä¸‹ï¼š\ncd /usr/local/DataX/target/datax/datax/bin/\r# æŸ¥çœ‹é…ç½®æ¨¡æ¿\rpython datax.py -r streamreader -w streamwriter\r å¦‚ä¸‹è¾“å‡ºè¯´æ˜ DataX å®‰è£…å®Œæˆï¼š\n3ã€æ„å»º Docker å®¹å™¨é•œåƒå¹¶è¿è¡Œ\nâ‘  é¦–å…ˆå†™ä¸ªæ­£å¸¸èƒ½è·‘çš„æµ‹è¯•ç”¨é…ç½®æ–‡ä»¶ï¼š\n# æ”¾åœ¨ä¸åŒè·¯å¾„ä¸‹\rvi /root/stream2stream.json\r {\r\u0026quot;job\u0026quot;: {\r\u0026quot;content\u0026quot;: [\r{\r\u0026quot;reader\u0026quot;: {\r\u0026quot;name\u0026quot;: \u0026quot;streamreader\u0026quot;,\r\u0026quot;parameter\u0026quot;: {\r\u0026quot;sliceRecordCount\u0026quot;: 10,\r\u0026quot;column\u0026quot;: [\r{\r\u0026quot;type\u0026quot;: \u0026quot;long\u0026quot;,\r\u0026quot;value\u0026quot;: \u0026quot;10\u0026quot;\r},\r{\r\u0026quot;type\u0026quot;: \u0026quot;string\u0026quot;,\r\u0026quot;value\u0026quot;: \u0026quot;Hello DataX!\u0026quot;\r}\r]\r}\r},\r\u0026quot;writer\u0026quot;: {\r\u0026quot;name\u0026quot;: \u0026quot;streamwriter\u0026quot;,\r\u0026quot;parameter\u0026quot;: {\r\u0026quot;encoding\u0026quot;: \u0026quot;UTF-8\u0026quot;,\r\u0026quot;print\u0026quot;: true\r}\r}\r}\r],\r\u0026quot;setting\u0026quot;: {\r\u0026quot;speed\u0026quot;: {\r\u0026quot;channel\u0026quot;: 5\r}\r}\r}\r}\r è·‘ä¸€ä¸‹ï¼š\npython datax.py /root/stream2stream.json   datax.py è‡ªå¸¦å¯¹è·¯å¾„çš„åˆ¤æ–­ï¼Œå› æ­¤åœ¨ä»»ä½•ç›®å½•ä¸‹å»æ‰§è¡Œéƒ½æ²¡æœ‰é—®é¢˜ï¼Œå¦‚ä¸‹å‘½ä»¤ä¼šæ”¶è·ä¸€æ ·æ­£å¸¸è¿è¡Œçš„ç»“æœï¼š\ncd /root\rpython /usr/local/DataX/target/datax/datax/bin/datax.py stream2stream.json\r  â‘¡ å°†ä¸Šè¿°æ‰€æœ‰å‘½ä»¤å†™å…¥ Dockerfileï¼ˆéƒ¨åˆ†å‘½ä»¤å¦‚ç¯å¢ƒå˜é‡çš„é…ç½®ä¼šæœ‰æ‰€ä¸åŒï¼‰ï¼š\n# åŸºç¡€é•œåƒç³»ç»Ÿç‰ˆæœ¬ä¸º CentOS:7\rFROM centos:7\r# ç»´æŠ¤è€…ä¿¡æ¯\rLABEL maintainer=\u0026quot;Rabbir admin@cs.cheap\u0026quot;\r# Docker å†…ç”¨æˆ·åˆ‡æ¢åˆ° root\rUSER root\r# è®¾ç½®æ—¶åŒºä¸ºä¸œå…«åŒº\rENV TZ Asia/Shanghai\rRUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime \u0026gt; /etc/timezone\r# å®‰è£… Git å’Œ Wget\rRUN yum -y install wget\rRUN yum -y install git\r# åˆ‡æ¢åˆ° /usr/local/ ç›®å½•ä¸‹\rWORKDIR /usr/local/\r# ä¸‹è½½è§£å‹ JDK\rRUN wget --no-check-certificate --no-cookies --header \u0026quot;Cookie: oraclelicense=accept-securebackup-cookie\u0026quot; http://download.oracle.com/otn-pub/java/jdk/8u131-b11/d54c1d3a095b4ff2b6607d096fa80163/jdk-8u131-linux-x64.tar.gz\rRUN tar -zxvf jdk-8u131-linux-x64.tar.gz\rRUN mv jdk1.8.0_131 jdk1.8\rRUN rm -f jdk-8u131-linux-x64.tar.gz\r# ä¸‹è½½è§£å‹ Maven\rRUN wget https://dlcdn.apache.org/maven/maven-3/3.6.3/binaries/apache-maven-3.6.3-bin.tar.gz --no-check-certificate\rRUN tar -zxvf apache-maven-3.6.3-bin.tar.gz\rRUN mv apache-maven-3.6.3 maven\rRUN rm -f apache-maven-3.6.3-bin.tar.gz\r# æ·»åŠ å®¹å™¨å†…çš„æ°¸ä¹…ç¯å¢ƒå˜é‡\rRUN sed -i \u0026quot;2 a export JAVA_HOME=/usr/local/jdk1.8\u0026quot; /etc/profile\rRUN sed -i \u0026quot;3 a export PATH=\\$PATH:\\$JAVA_HOME/bin\u0026quot; /etc/profile\rRUN sed -i \u0026quot;4 a export CLASSPATH=.:\\$JAVA_HOME/lib/dt.jar:\\$JAVA_HOME/lib/tools.jar\u0026quot; /etc/profile\rRUN sed -i \u0026quot;5 a export MAVEN_HOME=/usr/local/maven\u0026quot; /etc/profile\rRUN sed -i \u0026quot;6 a export PATH=\\$PATH:\\$MAVEN_HOME/bin\u0026quot; /etc/profile\rRUN source /etc/profile\rRUN sed -i '1 a source /etc/profile' ~/.bashrc\rRUN source ~/.bashrc\r# æ·»åŠ æ„å»ºç”¨çš„ä¸´æ—¶ç¯å¢ƒå˜é‡\rENV JAVA_HOME /usr/local/jdk1.8\rENV PATH $PATH:$JAVA_HOME/bin\rENV CLASSPATH .:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar\rENV MAVEN_HOME /usr/local/maven\rENV PATH $PATH:$MAVEN_HOME/bin\r# å…‹éš†å¹¶ç¼–è¯‘ DataX çš„æºç \rWORKDIR /usr/local/\rRUN git clone https://github.com/alibaba/DataX.git\rWORKDIR /usr/local/DataX/\rRUN sed -i \u0026quot;s#\u0026lt;module\u0026gt;oscarwriter\u0026lt;/module\u0026gt;#\u0026lt;!-- \u0026lt;module\u0026gt;oscarwriter\u0026lt;/module\u0026gt; --\u0026gt;#\u0026quot; pom.xml\rRUN mvn -U clean package assembly:assembly -Dmaven.test.skip=true\r# åˆ›å»ºé…ç½®æ–‡ä»¶å­˜æ”¾ç”¨æ–‡ä»¶å¤¹\rRUN mkdir /data\rWORKDIR /data\r# å¯åŠ¨å‘½ä»¤\rENTRYPOINT [\u0026quot;/usr/bin/python\u0026quot;, \u0026quot;/usr/local/DataX/target/datax/datax/bin/datax.py\u0026quot;]\rCMD [\u0026quot;\u0026quot;]\r æ„å»ºï¼ˆé•œåƒåå’Œç‰ˆæœ¬è‡ªè¡Œæ›¿æ¢ï¼‰ï¼š\ndocker build -t rabbir/datax:latest .\r å› ä¸ºéœ€è¦è¯»å–é…ç½®æ–‡ä»¶ï¼Œè€Œ Docker è¿è¡Œæ—¶æ˜¯ä¸æ”¯æŒå°†æœ¬åœ°æ–‡ä»¶ä½œä¸ºå‚æ•°ä¼ å…¥çš„ï¼Œå› æ­¤éœ€è¦é…ç½®ä¸€ä¸‹å®¿ä¸»æœºå’Œå®¹å™¨å†… /data æ–‡ä»¶å¤¹çš„æ˜ å°„ï¼Œå‚è€ƒä»¥ä¸‹å‘½ä»¤ï¼š\ndocker run --name datax_test_container -v /rab/docker/datax/data:/data rabbir/datax:latest test/stream2stream.json\r  è§£é‡Šï¼šé…ç½®æ–‡ä»¶åœ¨å®¿ä¸»æœºå†…çš„å®Œæ•´è·¯å¾„ä¸ºï¼š/rab/docker/datax/data/test/stream2stream.jsonï¼Œé‚£ä¹ˆé€šè¿‡æ˜ å°„å®ƒåœ¨å®¹å™¨å†…çš„è·¯å¾„åˆ™ä¸ºï¼š/data/test/stream2stream.jsonï¼Œæ­¤æ—¶å°±åªéœ€è¦ä¼ å…¥ test/stream2stream.json ä½œä¸ºå‚æ•°å°±å¯ä»¥äº†ã€‚\n è¿è¡Œå®Œåå®¹å™¨ä¼šè‡ªåŠ¨é€€å‡ºï¼š\næœ¬ç« ç»“æŸã€‚\n","id":5,"section":"posts","summary":"éœ€è¦ä» PostgreSQL åŒæ­¥æ•°æ®åˆ° MongoDBï¼Œçœ‹äº†ä¸€åœˆé€‰æ‹©äº† DataX å·¥å…·ï¼Œé˜¿é‡Œçš„å¼€æºé¡¹ç›®è¿˜æ˜¯è›®å€¼å¾—ä¿¡èµ–çš„ã€‚ å®˜æ–¹å¹¶æœªæä¾› Docker é•œåƒï¼Œä½†æ˜¯è€ƒè™‘åˆ°æˆ‘ç°åœ¨å·²ç»éƒ¨ç½²äº† K3s é›†ç¾¤","tags":["DataX"],"title":"DataX å®è·µï¼ˆä¸€ï¼‰æ„å»º DataX çš„ Docker å®¹å™¨é•œåƒå¹¶æµ‹è¯•è¿è¡Œ","uri":"https://senjianlu.com/2021/11/datax-note-01/","year":"2021"},{"content":"è™½ç„¶æˆ‘å¾ˆæ—©ä¹‹å‰å°±å®Œæˆäº†æ•°æ®åº“ç‰ˆæœ¬çš„å‡çº§ï¼ˆ9.2.4 -\u0026gt; 12.8ï¼‰ï¼Œä½†æ˜¯ç”±äºè€ƒè™‘åˆ°æ•™ç¨‹å¯¹æ–°æ‰‹çš„å‹å¥½å°±ä¸€ç›´æ²¡æœ‰å»æ›´æ–°ç¬¬ä¸€ç« ï¼Œè¿™æ¬¡ä½œä¸ºè¡¥è¶³æ”¾å‡ºå§ã€‚\næ–°çš„ç‰¹æ€§å¯ä»¥å‚ç…§è¿™ç¯‡æ–‡ç« ï¼šPostgreSQL 12 æ–°ç‰¹æ€§æ±‡æ€»ï¼Œå¯¹äºè¿™ç§å¤§å‹å¼€æºé¡¹ç›®å¹¶æœ‰ä¸“ä¸šçš„å›¢é˜Ÿå’Œå®Œå–„çš„ç¤¾åŒºåšç»´æŠ¤ï¼Œæˆ‘æ˜¯æ¨èæ— è„‘ä¸Šæ–°ç‰ˆæœ¬çš„ã€‚\n å‚è€ƒæ–‡ç« ï¼šåœ¨CentOS 7ä¸Šå®‰è£…\u0026amp;é…ç½®PostgreSQL 12\n1ã€å¯¼å…¥ yum æºå¹¶å®‰è£… PostgreSQL æœåŠ¡\nå¯¼å…¥ yum æºï¼š\nsudo yum install -y https://download.postgresql.org/pub/repos/yum/reporpms/EL-7-x86_64/pgdg-redhat-repo-latest.noarch.rpm\r å®‰è£… PostgreSQL æœåŠ¡ï¼š\nsudo yum install -y postgresql12 postgresql12-server\r 2ã€åˆå§‹åŒ–å’Œå¯åŠ¨æ•°æ®åº“\nåˆå§‹åŒ–ï¼š æ³¨ï¼šå¦‚æœä½ æ˜¯åœ¨å®‰è£…ä¸»ä»åŒæ­¥ä¸­çš„ä»æ•°æ®åº“çš„è¯ï¼Œè¯·ä¸è¦åˆå§‹åŒ–æ•°æ®åº“ã€‚\nsudo /usr/pgsql-12/bin/postgresql-12-setup initdb\r å¯åŠ¨æ•°æ®åº“ï¼š\n# å¯åŠ¨æ•°æ®åº“æœåŠ¡\rsudo systemctl start postgresql-12\r# è®¾ç½®ä¸ºå¼€æœºè‡ªå¯åŠ¨\rsudo systemctl enable postgresql-12\r 3ã€ä¿®æ”¹åˆå§‹ç”¨æˆ· postgres çš„å¯†ç \nLinux ç³»ç»Ÿä¸­åˆ‡æ¢åˆ° postgres ç”¨æˆ·ï¼Œå¹¶è¿›å…¥ psql å‘½ä»¤è¡Œï¼š\nsu postgres\rpsql\r æ‰§è¡Œ SQL è¯­å¥ï¼š\nALTER USER postgres WITH PASSWORD 'new_postgres_password';\r  é€€å‡º psql å‘½ä»¤è¡Œä½¿ç”¨ï¼šCtrl + D\n 4ã€é…ç½®æ•°æ®åº“å…è®¸è¿œç¨‹è®¿é—®\né¦–å…ˆå¼€æ”¾é˜²ç«å¢™å’Œç«¯å£ï¼Œè¿™é‡Œå°±ä¸åšæ¼”ç¤ºäº†ï¼Œé»˜è®¤ PostgreSQL æœåŠ¡ä¼šå¯åŠ¨åœ¨ 5432 ç«¯å£ä¸Šã€‚\nâ‘  ä¿®æ”¹å…è®¸è®¿é—®çš„ IPï¼š\nvi /var/lib/pgsql/12/data/postgresql.conf\r å°† listen_addresses è§£æ³¨å¹¶å°†å€¼æ”¹ä¸º *ï¼š\n...\r...\rlisten_addresses='*'\r...\r...\r â‘¡ å…è®¸æ‰€æœ‰ IP ä½¿ç”¨å¯†ç éªŒè¯è®¿é—®ï¼š\nvi /var/lib/pgsql/12/data/pg_hba.conf\r åœ¨å°¾éƒ¨æ·»åŠ ï¼š\n...\r...\rhost all all 0.0.0.0/0 md5\r  ç¨å¾®è®²ä¸‹é»˜è®¤é…ç½®ä¸­ç”¨åˆ°çš„è®¤è¯æ¨¡å¼ï¼š\n trust: ä¿¡ä»»ä»»ä½•è¿æ¥ï¼Œä¸éœ€è¦è¾“å…¥å¯†ç ï¼Œå³ä½¿æ•°æ®åº“ä¸­æ²¡æœ‰è¿™ä¸ªç”¨æˆ·ã€‚ peer: ä¿¡ä»»ä»»ä½•è¿æ¥ï¼Œä¸éœ€è¦è¾“å…¥å¯†ç ï¼Œä½†æ˜¯éœ€è¦æ•°æ®åº“ä¸­å­˜åœ¨è¿™ä¸ªç”¨æˆ·ã€‚ md5: éœ€è¦è¾“å…¥å¯†ç ï¼Œä¸”éœ€è¦æ•°æ®åº“ä¸­å­˜åœ¨è¿™ä¸ªç”¨æˆ·ã€‚  æƒ³è¯¦ç»†äº†è§£æ•°æ®åº“çš„è®¤è¯æ–¹å¼å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šThe pg_hba.conf File\n ä¹‹åé‡å¯æ•°æ®åº“ï¼š\nsudo systemctl restart postgresql-12\r ç»“æŸã€‚\n","id":6,"section":"posts","summary":"è™½ç„¶æˆ‘å¾ˆæ—©ä¹‹å‰å°±å®Œæˆäº†æ•°æ®åº“ç‰ˆæœ¬çš„å‡çº§ï¼ˆ9.2.4 -\u0026gt; 12.8ï¼‰ï¼Œä½†æ˜¯ç”±äºè€ƒè™‘åˆ°æ•™ç¨‹å¯¹æ–°æ‰‹çš„å‹å¥½å°±ä¸€ç›´æ²¡æœ‰å»æ›´æ–°ç¬¬ä¸€ç« ï¼Œè¿™æ¬¡ä½œä¸ºè¡¥è¶³æ”¾å‡ºå§ã€‚ æ–°","tags":["PostgreSQL"],"title":"PostgreSQL å­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰ è¡¥è¶³ï¼šCentOS7 ä¸‹ 12.8 ç‰ˆæœ¬æ•°æ®åº“çš„å®‰è£…","uri":"https://senjianlu.com/2021/11/postgresql-note-01-supplement/","year":"2021"},{"content":"1ã€é”™è¯¯ä¿¡æ¯\nMissing or invalid credentials.\rError: connect ECONNREFUSED /run/user/0/vscode-git-02xxxeed11.sock\rat PipeConnectWrap.afterConnect [as oncomplete] (net.js:1146:16) {\rerrno: -111,\rcode: 'ECONNREFUSED',\rsyscall: 'connect',\raddress: '/run/user/0/vscode-git-02xxxeed11.sock'\r}\rMissing or invalid credentials.\rError: connect ECONNREFUSED /run/user/0/vscode-git-02xxxeed11.sock\rat PipeConnectWrap.afterConnect [as oncomplete] (net.js:1146:16) {\rerrno: -111,\rcode: 'ECONNREFUSED',\rsyscall: 'connect',\raddress: '/run/user/0/vscode-git-02xxxeed11.sock'\r}\rremote: Repository not found.\rfatal: Authentication failed for 'https://github.com/username/repo.git/'\r 2ã€è§£å†³åŠæ³•\nå‚è€ƒæ–‡ç« ï¼šGit push: Missing or invalid credentials. fatal: Authentication failed for \u0026lsquo;https://github.com/username/repo.git\u0026rsquo;\nâ‘  ä¾æ¬¡é€‰æ‹©ï¼šæ–‡ä»¶ -\u0026gt; é¦–é€‰é¡¹ -\u0026gt; è®¾ç½®\nâ‘¡ æœç´¢ git.terminalAuthentication å¹¶å–æ¶ˆå‹¾é€‰ï¼š\nâ‘¢ é‡å¯ VS Code å¹¶é‡æ–° Pushï¼š\nè¿™æ ·æ“ä½œä¹‹åæœ‰ä¸€ä¸ªåå¤„ï¼Œå°±æ˜¯ä½  VS Code å¯¹ GitHub è®¤è¯ä¿¡æ¯ä¿å­˜çš„åŠŸèƒ½ä¼šå¤±æ•ˆï¼Œä½ çš„æ¯æ¬¡ Push éƒ½å¿…é¡»è¾“å…¥ç”¨æˆ·å’Œå¯†ç ã€‚\nç»“æŸã€‚\n","id":7,"section":"posts","summary":"1ã€é”™è¯¯ä¿¡æ¯ Missing or invalid credentials. Error: connect ECONNREFUSED /run/user/0/vscode-git-02xxxeed11.sock at PipeConnectWrap.afterConnect [as oncomplete] (net.js:1146:16) { errno: -111, code: 'ECONNREFUSED', syscall: 'connect', address: '/run/user/0/vscode-git-02xxxeed11.sock' } Missing or invalid credentials. Error: connect ECONNREFUSED /run/user/0/vscode-git-02xxxeed11.sock at PipeConnectWrap.afterConnect [as oncomplete] (net.js:1146:16) { errno: -111, code: 'ECONNREFUSED', syscall: 'connect', address: '/run/user/0/vscode-git-02xxxeed11.sock' } remote: Repository not found. fatal: Authentication failed for 'https://github.com/username/repo.git/' 2ã€è§£å†³åŠæ³• å‚è€ƒæ–‡","tags":["linux"],"title":"VS Code ä½¿ç”¨ Remote è¿æ¥æœåŠ¡å™¨å¹¶ Push åˆ° GitHub ç§æœ‰ä»“åº“æ—¶æŠ¥é”™ï¼šMissing or invalid credentials. çš„è§£å†³åŠæ³•","uri":"https://senjianlu.com/2021/11/vscode-github-push-error/","year":"2021"},{"content":"1ã€å®šæ—¶æ›´æ–°æœºåœºèŠ‚ç‚¹\næ³¨æ„ï¼šå®šæ—¶æ›´æ–°æœºåœºèŠ‚ç‚¹é…ç½®ä¸­å¡«å…¥çš„é“¾æ¥ï¼Œä¸€å®šæ˜¯è¦èƒ½è¢« Clash æ­£å¸¸è¯»å–çš„é…ç½®æ–‡ä»¶å½¢å¼ã€‚\nä¸ä»…æ˜¯ç±»ä¼¼åŸç”Ÿ SSR ç­‰çš„è®¢é˜…é“¾æ¥æ— æ³•è¢« Clash æ­£å¸¸è¯»å–ï¼Œå°±è¿ä¸€èˆ¬æœºåœºæä¾›çš„åŠ å¯†çš„ Clash è®¢é˜…é“¾æ¥ä¹Ÿä¸è¡Œï¼Œå¿…é¡»ç»è¿‡è®¢é˜…è½¬æ¢ä¸ºé…ç½®æ–‡ä»¶å½¢å¼æ‰èƒ½ç”Ÿæ•ˆã€‚\n ä¸¤ç§è½¬æ¢æ–¹æ³•ï¼š\nâ‘  åœ¨çº¿è®¢é˜…åœ°å€è½¬æ¢\nå¸¸ç”¨ï¼šå“äº‘è®¢é˜…è½¬æ¢ï¼ˆéƒ¨åˆ†åœ°åŒºè¢«å¢™ï¼‰\næ³¨ï¼›æ¨èè¿™ä¸ªåªæ˜¯å› ä¸ºæˆ‘ä¹Ÿåœ¨ç”¨ï¼Œå¦‚æœå‡ºé—®é¢˜ä¸€èµ·å½“å—å®³è€…\u0026hellip;\u0026hellip;\nâ‘¡ è‡ªå»ºè®¢é˜…è½¬æ¢\né¡¹ç›®ï¼štindy2013/subconverter\nä½¿ç”¨ Docker éƒ¨ç½²ï¼ˆå®˜æ–¹æ–‡æ¡£ï¼šREADME-docker.mdï¼‰ï¼š\n# ä¸‹è½½é•œåƒ\rdocker pull tindy2013/subconverter:latest\r# éƒ¨ç½²\rdocker run -d --restart=always -p 25500:25500 tindy2013/subconverter:latest\r# æµ‹è¯•æ˜¯å¦éƒ¨ç½²æˆåŠŸ\rcurl http://localhost:25500/version\r å¼€æ”¾é˜²ç«å¢™å’Œå®‰å…¨ç»„ååœ¨å¤–éƒ¨è®¿é—®ï¼šhttp://IP:25500/sub?target=clash\u0026amp;url=https%3A%2F%2Fmojie.info%2Fapi%2Fv1%2Fclient%2Fsubscribe%3Ftoken%3D4fxxxxxxxxxxxxxxxxxxx4c6f6\u0026amp;insert=false ä»¥è·å–è½¬æ¢å®Œæˆçš„é…ç½®æ–‡ä»¶ï¼Œç®€å•åœ°è¯´æ˜ä¸€ä¸‹å‚æ•°ï¼ˆå®˜æ–¹è¯¦ç»†æ–‡æ¡£ï¼šREADME-cn.mdï¼‰ï¼š\n   å‚æ•°å è§£æ æ ·ä¾‹     target æŒ‡æƒ³è¦ç”Ÿæˆçš„é…ç½®ç±»å‹ã€‚ clash   url ç»è¿‡URLEncode å¤„ç†åçš„è®¢é˜…é“¾æ¥ã€‚ https%3A%2F%2Fmojie.info%2\u0026hellip;\u0026hellip;   insert ç”¨äºè®¾ç½®æ˜¯å¦å°†é…ç½®æ–‡ä»¶ä¸­çš„ insert_url æ’å…¥ï¼ˆæ„ä¹‰ä¸æ˜ï¼Œæˆ‘çš„ç†è§£æ˜¯æ˜¯å¦å¼•å…¥å…¶ä»–å¤–éƒ¨èŠ‚ç‚¹ï¼‰ã€‚ false     ...\r...\r# ä»£ç†æä¾›å•†\rproxy-providers:\r# æœºåœº-é­”æˆ’æ‰€ç”¨è®¢é˜…\rMojie-sub:\r# å¯¹è®¢é˜…åœ°å€çš„è®¿é—®æ–¹å¼\rtype: http\r# è®¢é˜…åœ°å€\rurl: \u0026quot;https://sub.id9.cc/sub?target=clash\u0026amp;url=https%3A%2F%2Fmojie.info%2Fapi%2Fv1%2Fclient%2Fsubscribe%3Ftoken%3D4fxxxxxxxxxxxxxxxxxxx4c6f6\u0026amp;insert=false\u0026quot;\r# è®¢é˜…åèŠ‚ç‚¹å­˜æ”¾ç”¨çš„é…ç½®æ–‡ä»¶ï¼ˆä¸åŒæœºåœºéœ€ä½¿ç”¨ä¸åŒæ–‡ä»¶ï¼‰\rpath: ./sub/Mojie.yaml\r# æ›´æ–°è®¢é˜…é—´éš”æ—¶é—´ï¼ˆç§’ï¼‰\rinterval: 3600\r# èŠ‚ç‚¹æ£€æŸ¥\rhealth-check:\renable: true\rinterval: 600\rurl: http://www.gstatic.com/generate_204\r...\r...\r# èŠ‚ç‚¹ç»„\rproxy-groups:\r# æ‰‹åŠ¨é€‰æ‹©\r- name: æ‰‹åŠ¨é€‰æ‹©\rtype: select\rproxies:\r- å¥‡å¼‚ä¹‹æ—…\r- é­”æˆ’\r# æœºåœº-é­”æˆ’\r- name: é­”æˆ’\rtype: select\r# æ³¨æ„ï¼šè¿™é‡Œä½¿ç”¨è®¢é˜…çš„åŠ¨ä½œä¸º use\ruse:\r- Mojie-sub\r...\r...\r é‡å¯åï¼Œåˆ°æ§åˆ¶å°å°±èƒ½çœ‹è§è‡ªåŠ¨æ›´æ–°çš„èŠ‚ç‚¹äº†ï¼š\n2ã€å¯¼å…¥å¤–éƒ¨è§„åˆ™\nå¤§ä½¬ä»¬å†™çš„è§„åˆ™åŸºæœ¬éƒ½æ˜¯é€‚é…å¤§ä¼—éœ€æ±‚çš„ï¼Œä¾‹å¦‚æµåª’ä½“ç­‰ã€‚å°ä¼—è§„åˆ™è¿˜æ˜¯è‡ªå·±åŠ¨æ‰‹å§ï¼\næ¨èçš„å¤–éƒ¨è§„åˆ™å¼€æºé¡¹ç›®ï¼šLoyalsoldier/clash-rules\nå‚ç…§æ ¼å¼ï¼š\n...\r...\r# è§„åˆ™æä¾›å•†\rrule-providers:\r# è§„åˆ™é›†çš„åå­—\rgoogle:\r# å¯¹å¤–éƒ¨è§„åˆ™çš„è®¿é—®æ–¹å¼\rtype: http\r# æœ´ç´ è§„åˆ™ï¼ˆæ— æŸ¥è¯¢ä¼˜åŒ–ï¼‰\rbehavior: classical\r# å¤–éƒ¨è§„åˆ™åœ°å€\rurl: \u0026quot;https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/google.txt\u0026quot;\r# è§„åˆ™æ–‡ä»¶å­˜æ”¾è·¯å¾„\rpath: ./ruleset/google.yaml\r# æ›´æ–°è§„åˆ™é—´éš”æ—¶é—´ï¼ˆç§’ï¼‰\rinterval: 86400\r# è§„åˆ™\rrules:\r...\r...\r# ä½¿ç”¨å¤–éƒ¨è§„åˆ™ï¼Œä¸­é—´å¡«è§„åˆ™é›†çš„åå­—\r- RULE-SET,google,å¥‡å¼‚ä¹‹æ—…\r# å¢ƒå†…ç«™ç‚¹\r- GEOIP,CN,ç›´è¿\r# å¢ƒå¤–ç«™ç‚¹\r- MATCH,å¥‡å¼‚ä¹‹æ—…\r  å¦‚æœå¯¹ behavior è¿™ä¸ªå‚æ•°æœ‰å›°æƒ‘ï¼Œä½ å¯ä»¥å‚è€ƒä»¥ä¸‹è¿™ä¸ª Issueï¼šè¯·é—®ç”¨rule-providersæ—¶behaviorå¦‚ä½•é€‰æ‹©ï¼Ÿ classical/ipcidr/domain ä¸‰è€…åˆæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ\n å¾ˆå¯æƒœçš„æ˜¯ OpenWrt ä¸Šçš„ Clash æš‚æ—¶ä¸æ”¯æŒ RULE-SET è§„åˆ™ï¼Œå°±ä¸åšå…·ä½“æ¼”ç¤ºäº†ã€‚ ç»“æŸã€‚\n","id":8,"section":"posts","summary":"1ã€å®šæ—¶æ›´æ–°æœºåœºèŠ‚ç‚¹ æ³¨æ„ï¼šå®šæ—¶æ›´æ–°æœºåœºèŠ‚ç‚¹é…ç½®ä¸­å¡«å…¥çš„é“¾æ¥ï¼Œä¸€å®šæ˜¯è¦èƒ½è¢« Clash æ­£å¸¸è¯»å–çš„é…ç½®æ–‡ä»¶å½¢å¼ã€‚ ä¸ä»…æ˜¯ç±»ä¼¼åŸç”Ÿ SSR ç­‰çš„è®¢é˜…é“¾æ¥æ— æ³•è¢« Clash æ­£å¸¸è¯»","tags":["Clash"],"title":"Clash å­¦ä¹ ï¼ˆä¸‰ï¼‰è¿›é˜¶é…ç½®ï¼šåœ¨ Clash ä¸­å®šæ—¶æ›´æ–°æœºåœºèŠ‚ç‚¹å’Œå¯¼å…¥å¤–éƒ¨è§„åˆ™","uri":"https://senjianlu.com/2021/11/clash-note-03/","year":"2021"},{"content":"åœ¨è·¯ç”±å™¨ä¸Šçš„ Clash ä¸­é…ç½®ç½‘æ˜“äº‘éŸ³ä¹ç°æ­Œè§£é”çš„æ—¶å€™å‘ç°ï¼šUWP ç‰ˆçš„ç½‘æ˜“äº‘éŸ³ä¹è¯·æ±‚æŒ‡å‘çš„ä¼¼ä¹ä¸æ˜¯ music.163.com ç­‰åŸŸåï¼ˆäº‹å®ä¸Šèµ°çš„æ˜¯ music.163.com åŸŸåï¼Œåªæ˜¯æˆ‘ Clash é…ç½®çš„æœ‰é—®é¢˜ç½¢äº†ğŸ˜“ï¼‰ï¼Œæ²¡æ³•ç…§æŠ„ç½‘ç»œä¸Šçš„ Clash é…ç½®æ–‡ä»¶ï¼Œæ±‚äººä¸å¦‚æ±‚å·±è¿˜æ˜¯è‡ªå·±æŠ“åŒ…çœ‹ä¸‹å§ã€‚\n 1ã€å®‰è£… Fiddler\nå®˜æ–¹ä¸‹è½½åœ°å€ï¼šDownload Fiddler Classic\nç„¶åå®‰è£…ï¼š\næ˜¾ç¤ºå¦‚ä¸Šç•Œé¢ä¾¿è¯´æ˜å®‰è£…æˆåŠŸäº†ã€‚\n2ã€åŸºç¡€é…ç½®\nè¿™ä¸€æ­¥çš„é…ç½®éå¸¸åŸºç¡€ï¼Œæ˜¯å‡ ä¹æ‰€æœ‰äººéƒ½ä¼šè¿›è¡Œä¿®æ”¹çš„ï¼Œä¸»è¦æ˜¯ä¸ºäº†è¾¾åˆ° 2 ä¸ªç›®çš„ï¼š\n è§£å¯† HTTPS æµé‡ï¼ˆå½“ç„¶æ— æ³•å®Œå…¨è§£å¯†ï¼Œä½†æ˜¯èµ·ç çœ‹èµ·æ¥ä¼šæ›´è½»æ¾äº†ï¼‰ å…è®¸å±€åŸŸç½‘å†…è®¾å¤‡è¿æ¥ Fiddlerï¼ˆå®‰å“ç­‰ç§»åŠ¨è®¾å¤‡æŠ“åŒ…æ—¶ä¼šç”¨åˆ°ï¼‰  é…ç½®é€‰é¡¹ä½ç½®å¦‚ä¸‹ï¼š\nâ‘  è®¾ç½®è§£å¯† HTTPS æµé‡ï¼ˆå¯èƒ½ä¼šå¼¹å‡º Windows å®‰è£…è¯ä¹¦çš„ç¡®è®¤æ¡†ï¼ŒåŒæ„å³å¯ï¼‰ï¼š\nå¿½ç•¥æœåŠ¡å™¨è¯ä¹¦çš„é”™è¯¯ï¼Œè¿™åœ¨æœåŠ¡å™¨ç«¯é…ç½®äº†ä¸å¯ä¿¡è¯ä¹¦æ—¶ä¼šç”Ÿæ•ˆï¼Œæ¯”å¦‚è¯´åŸŸåç»‘å®šçš„æ˜¯è‡ªç­¾è¯ä¹¦ï¼š\nâ‘¡ é…ç½®ä»£ç†ç«¯å£å¹¶å…è®¸å±€åŸŸç½‘å†…è¿æ¥ï¼š\nä¹‹åç§»åŠ¨ç«¯é…ç½®ä»£ç†ä¸ºä½ ä¸»æœºçš„ IP:8888ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„æµé‡å°±éƒ½ä¼šèµ° Fiddler äº†ã€‚\n3ã€å®è·µæŠ“å– UWP ç‰ˆç½‘æ˜“äº‘éŸ³ä¹çš„è¯·æ±‚åŸŸå\né¦–å…ˆè®¾ç½®ä¸‹ç½‘æ˜“äº‘éŸ³ä¹ä½¿ç”¨ Fiddler çš„ç«¯å£ä½œä»£ç†ï¼š\næ‹–åŠ¨è¿›ç¨‹é€‰æ‹©å™¨åˆ°ç½‘æ˜“äº‘éŸ³ä¹çª—å£ï¼Œç›®çš„æ˜¯åªç›‘å¬è¿™ä¸€ä¸ªè¿›ç¨‹çš„æµé‡ï¼š\næ¸…ç©ºï¼š\nç„¶ååœ¨ç½‘æ˜“äº‘éŸ³ä¹æ‰§è¡Œä¸€ä¸‹æ“ä½œï¼Œæˆ‘è¿™é‡Œæ‰§è¡Œçš„æ˜¯æœç´¢æ­Œæ›²ï¼Œä¸€ç‚¹æŒ‰é’®å°±èƒ½çœ‹åˆ° Fiddler æŠ“å–åˆ°å‘å‡ºçš„è¯·æ±‚äº†ï¼š\næˆ‘è¿™æ¬¡åªæƒ³çŸ¥é“ UWP ç‰ˆç½‘æ˜“äº‘éŸ³ä¹æ˜¯å¯¹å“ªä¸ªåŸŸåå‘å‡ºè¯·æ±‚çš„ï¼Œäºæ˜¯åªè¦æ³¨æ„ Host åˆ—å³å¯ï¼šæœç´¢éŸ³ä¹çš„ä½¿ç”¨çš„æ˜¯ interface.music.163.comï¼\nå½“ç„¶è¿™è¿˜ä¸å¤Ÿï¼Œå†è¯•è¯•å…¶ä»–æ“ä½œï¼š\næ’­æ”¾éŸ³ä¹èµ°çš„æ˜¯ *.music.126.netï¼š\nè§†é¢‘èµ°çš„æ˜¯ *.vod.126.netï¼š\næœ‰ä¸€ä¸ªå¥‡æ€ªçš„åŸŸå clientlog.music.163.comï¼ŒçŒœæµ‹æ˜¯è®°å½•è¿æ¥çš„æ—¥å¿—ç”¨çš„ï¼Œåæ­£ä¼šè¢« *.music.163.com é€šé…ç¬¦è¦†ç›–åˆ°ï¼Œå°±ä¸ç”¨ç®¡äº†ã€‚\nè¿˜æœ‰ä¸ªç½‘æ˜“äº‘ç›¾ ac.dun.163yun.comï¼Œæƒ³äº†æƒ³å°±ä¸åŠ è¿› Clash é…ç½®é‡Œäº†ï¼š\né‚£ä¹ˆåº”è¯¥å°±å·®ä¸å¤šäº†ï¼ŒUWP ç‰ˆçš„ç½‘æ˜“äº‘éŸ³ä¹åœ¨ Clash ä¸­çš„è§„åˆ™å°±æ˜¯ä¸‹é¢è¿™æ ·çš„ï¼š\n å…·ä½“çš„ç½‘æ˜“äº‘ç°æ­Œæ•™ç¨‹å¯ä»¥å‚ç…§è¿™ç¯‡æ–‡ç« ï¼šCentOS7 ä¸‹ç”¨ Docker éƒ¨ç½² UnblockNeteaseMusic å¹¶åœ¨ Clash ä¸­é…ç½®åˆ†æµä»¥åœ¨å±€åŸŸç½‘å†…è§£é”ç½‘æ˜“äº‘éŸ³ä¹å˜ç°çš„æ­Œæ›²\nä¸æ‡‚ Clash çš„é…ç½®è¯·å»çœ‹è¿™ç¯‡æ–‡ç« ï¼šClash å­¦ä¹ ï¼ˆä¸€ï¼‰é…ç½®æ–‡ä»¶å„é¡¹åœ¨å®é™…ä½¿ç”¨ä¸­çš„ç”¨å¤„å’Œåˆ›å»ºè‡ªå·±çš„ç¬¬ä¸€ä¸ªé…ç½®æ–‡ä»¶\n ...\r...\rrules:\r- DOMAIN-SUFFIX,music.163.com,ç½‘æ˜“äº‘éŸ³ä¹\r- DOMAIN-SUFFIX,music.126.net,ç½‘æ˜“äº‘éŸ³ä¹\r# å¦‚æœç°æ­Œè§£é”æœåŠ¡å™¨é€Ÿåº¦ä¸è¡Œçš„è¯å°±ä¸è¦ä»£ç†è§†é¢‘äº†\r- DOMAIN-SUFFIX,vod.126.net,ç½‘æ˜“äº‘éŸ³ä¹\r...\r...\r ç»“æŸã€‚\n","id":9,"section":"posts","summary":"åœ¨è·¯ç”±å™¨ä¸Šçš„ Clash ä¸­é…ç½®ç½‘æ˜“äº‘éŸ³ä¹ç°æ­Œè§£é”çš„æ—¶å€™å‘ç°ï¼šUWP ç‰ˆçš„ç½‘æ˜“äº‘éŸ³ä¹è¯·æ±‚æŒ‡å‘çš„ä¼¼ä¹ä¸æ˜¯ music.163.com ç­‰åŸŸåï¼ˆäº‹å®ä¸Šèµ°çš„æ˜¯ music.163.com åŸŸåï¼Œåªæ˜¯æˆ‘ Clash é…ç½®çš„æœ‰é—®é¢˜ç½¢","tags":["Fiddler"],"title":"Fiddler å­¦ä¹ ï¼ˆä¸€ï¼‰å®‰è£…ã€é…ç½®å’Œå°è¯•æŠ“å– UWP ç‰ˆç½‘æ˜“äº‘éŸ³ä¹çš„è¯·æ±‚åŸŸå","uri":"https://senjianlu.com/2021/11/fiddler-note-01/","year":"2021"},{"content":"ä¹‹å‰ä¹Ÿæ˜¯éƒ¨ç½²è¿‡è¿™ä¸ªé¡¹ç›®çš„ï¼Œä½†æ˜¯åæ¥å«Œ PC ç«¯å’Œæ‰‹æœºç«¯çš„ç½‘æ˜“äº‘éŸ³ä¹éƒ½è¦æ‰‹åŠ¨é…ç½®æœ‰ç‚¹éº»çƒ¦ï¼Œäºæ˜¯å°±æ”¾å¼ƒäº†ã€‚\nç°åœ¨åœ¨è·¯ç”±å™¨ä¸Šå®‰è£…äº† Clashï¼Œæƒ³åˆ°æ—¢ç„¶å®ƒèƒ½åšæŒ‡å®šåŸŸåçš„åˆ†æµï¼Œé‚£ä¹ˆåº”è¯¥ä¹Ÿèƒ½æŒ‡å®šç½‘æ˜“äº‘çš„æµé‡èµ°è§£é”ç”¨çš„æœåŠ¡å™¨æ¥è¾¾åˆ°ç°æ­Œè§£é”çš„åŠŸèƒ½å§ï¼ˆæœ€åå‘ç°ï¼šåªæœ‰åœ¨ Clash ä¸ºç½‘å…³çš„æƒ…å†µä¸‹æ‰å¯ä»¥å®ç°æ— éœ€ä»»ä½•å¤šä½™é…ç½®çš„å…¨å®¢æˆ·ç«¯ç°æ­Œè§£é”ï¼Œæ™®é€šæ¨¡å¼ä»éœ€é…ç½® Clash ä¸º HTTP ä»£ç†ï¼‰ï¼Œå°è¯•ä¸€ä¸‹ï¼\n 1ã€æœåŠ¡å™¨ç«¯çš„å®‰è£…\nå‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šUnblockNeteaseMusicï¼Œæ‰§è¡Œæ‰§è¡Œå³å¯ï¼š\ndocker run --name unblock-netease-music -d -p 18080:8080 nondanee/unblockneteasemusic -o kugou kuwo xiami migu\r  å¦‚æœéœ€è¦åŠ  HTTP ä»£ç†çš„è®¤è¯å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š\ndocker run --name unblock-netease-music -d -p 18080:8080 nondanee/unblockneteasemusic -o kugou kuwo xiami migu -t your_username:your_password\r éœ€è¦æ³¨æ„ï¼šWindows ç«¯å’Œ macOS ç«¯è®¤è¯åŠŸèƒ½æ— æ³•ç”Ÿæ•ˆï¼Œè™½ç„¶èƒ½æµ‹è¯•é€šè¿‡ï¼Œä½†æ˜¯æ— æ³•æ’­æ”¾æ­Œæ›²ä¸”ä¼šæŠ¥è¿æ¥é”™è¯¯ï¼å¦‚æœè¦åœ¨è¿™ä¸¤ä¸ªç«¯ä½¿ç”¨ï¼Œä½ å¿…é¡»ä½¿ç”¨ GOST æˆ– Clash ç­‰å·¥å…·å°†éœ€è¦è®¤è¯çš„ä»£ç†è½¬æ¢ä¸ºæœ¬åœ°ä¸éœ€è¦è®¤è¯çš„ä»£ç†ã€‚\n ä¹‹åè®°å¾—é˜²ç«å¢™å’Œå®‰å…¨ç»„éƒ½å¼€æ”¾æŒ‡å®šç«¯å£ã€‚\n2ã€æµ‹è¯•è§£é”æ˜¯å¦ç”Ÿæ•ˆ\nPC ç«¯çš„ç½‘æ˜“äº‘ä»£ç†è®¾ç½®æ–¹æ³•å¦‚ä¸‹ï¼š\nå¡«å…¥ä½ çš„ä»£ç†åç‚¹å‡»æµ‹è¯•ï¼š\næ˜¾ç¤ºè¯¥ä»£ç†å¯ç”¨ï¼Œå†æ¥çœ‹çœ‹ç°æ­Œçš„è§£é”æƒ…å†µã€‚\nè¿™æ˜¯é…ç½®å‰çš„æˆªå›¾ï¼š\né…ç½®åï¼š\næˆåŠŸï¼\n3ã€åœ¨è·¯ç”±å™¨çš„ Clash æ’ä»¶ä¸Šè¿›è¡Œé…ç½®\næ—¢ç„¶æ˜¯åœ¨è·¯ç”±å™¨ä¸Šé…ç½®ï¼Œé‚£ä¹ˆè¯¥å±€åŸŸç½‘å†…æ‰€æœ‰è®¾å¤‡çš„ç½‘æ˜“äº‘éŸ³ä¹éƒ½ä¼šè‡ªåŠ¨è§£é”ç°æ­Œï¼ˆéœ€è¦ Clash åœ¨ç½‘å…³æ¨¡å¼ä¸‹æ‰èƒ½å®ç°ï¼‰ï¼Œæ¯”èµ·åœ¨æ¯ä¸ªè®¾å¤‡ä¸Šéƒ½é…ç½®ä¸€éä»£ç†æ¥çš„æ–¹ä¾¿çš„å¤šã€‚\nä»£ç ç‰‡æ®µï¼š\nproxies:\r# æ— éœ€è®¤è¯\r- {name: ç½‘æ˜“äº‘éŸ³ä¹ç°æ­Œè§£é”èŠ‚ç‚¹, type: http, server: 63.225.10.10, port: 18080 }\r# éœ€è¦è®¤è¯\r# - {name: ç½‘æ˜“äº‘éŸ³ä¹ç°æ­Œè§£é”èŠ‚ç‚¹, type: http, server: 63.225.10.10, port: 18080, username: your_username, password: your_password }\rproxy-groups:\r- name: ç½‘æ˜“äº‘éŸ³ä¹\rtype: select\rproxies:\r- ç½‘æ˜“äº‘éŸ³ä¹ç°æ­Œè§£é”èŠ‚ç‚¹\r# å¤šé…ç½®ä¸ªç›´è¿ä»¥é˜²ä¸æµ‹\r- DIRECT\rrules:\r# ç½‘æ˜“äº‘éŸ³ä¹åŸŸåå’Œ IP æ®µ\r# UWP ç‰ˆåªä½¿ç”¨ä»¥ä¸‹ä¸¤ä¸ªå³å¯\r- DOMAIN-SUFFIX,music.163.com,ç½‘æ˜“äº‘éŸ³ä¹\r- DOMAIN-SUFFIX,music.126.net,ç½‘æ˜“äº‘éŸ³ä¹\r# ä¸ºä¿é™©æ·»åŠ ä»¥ä¸‹æ‰€æœ‰åŸŸåå’Œ IP æ®µ\r- DOMAIN-SUFFIX,163yun.com,ç½‘æ˜“äº‘éŸ³ä¹\r- DOMAIN-SUFFIX,api.iplay.163.com,ç½‘æ˜“äº‘éŸ³ä¹\r- DOMAIN-SUFFIX,apm.music.163.com,ç½‘æ˜“äº‘éŸ³ä¹\r- DOMAIN-SUFFIX,apm3.music.163.com,ç½‘æ˜“äº‘éŸ³ä¹\r- DOMAIN-SUFFIX,interface.music.163.com,ç½‘æ˜“äº‘éŸ³ä¹\r- DOMAIN-SUFFIX,interface3.music.163.com,ç½‘æ˜“äº‘éŸ³ä¹\r- DOMAIN-SUFFIX,mam.netease.com,ç½‘æ˜“äº‘éŸ³ä¹\r- DOMAIN-SUFFIX,hz.netease.com,ç½‘æ˜“äº‘éŸ³ä¹\r- IP-CIDR,39.105.63.80/32,ç½‘æ˜“äº‘éŸ³ä¹\r- IP-CIDR,45.254.48.1/32,ç½‘æ˜“äº‘éŸ³ä¹\r- IP-CIDR,47.100.127.239/32,ç½‘æ˜“äº‘éŸ³ä¹\r- IP-CIDR,59.111.21.14/31,ç½‘æ˜“äº‘éŸ³ä¹\r- IP-CIDR,59.111.179.214/32,ç½‘æ˜“äº‘éŸ³ä¹\r- IP-CIDR,59.111.181.38/32,ç½‘æ˜“äº‘éŸ³ä¹\r- IP-CIDR,59.111.181.60/32,ç½‘æ˜“äº‘éŸ³ä¹\r- IP-CIDR,59.111.160.195/32,ç½‘æ˜“äº‘éŸ³ä¹\r- IP-CIDR,59.111.160.197/32,ç½‘æ˜“äº‘éŸ³ä¹\r- IP-CIDR,59.111.181.35/32,ç½‘æ˜“äº‘éŸ³ä¹\r- IP-CIDR,59.111.238.29/32,ç½‘æ˜“äº‘éŸ³ä¹\r- IP-CIDR,101.71.154.241/32,ç½‘æ˜“äº‘éŸ³ä¹\r- IP-CIDR,103.126.92.132/32,ç½‘æ˜“äº‘éŸ³ä¹\r- IP-CIDR,103.126.92.133/32,ç½‘æ˜“äº‘éŸ³ä¹\r- IP-CIDR,112.13.119.17/32,ç½‘æ˜“äº‘éŸ³ä¹\r- IP-CIDR,112.13.122.1/32,ç½‘æ˜“äº‘éŸ³ä¹\r- IP-CIDR,115.236.118.33/32,ç½‘æ˜“äº‘éŸ³ä¹\r- IP-CIDR,115.236.121.1/32,ç½‘æ˜“äº‘éŸ³ä¹\r- IP-CIDR,118.24.63.156/32,ç½‘æ˜“äº‘éŸ³ä¹\r- IP-CIDR,193.112.159.225/32,ç½‘æ˜“äº‘éŸ³ä¹\r- IP-CIDR,223.252.199.66/32,ç½‘æ˜“äº‘éŸ³ä¹\r- IP-CIDR,223.252.199.67/32,ç½‘æ˜“äº‘éŸ³ä¹\r  æŠ“åŒ…æ­¥éª¤å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼šFiddler å­¦ä¹ ï¼ˆä¸€ï¼‰å®‰è£…ã€é…ç½®å’Œå°è¯•æŠ“å– UWP ç‰ˆç½‘æ˜“äº‘éŸ³ä¹çš„è¯·æ±‚åŸŸå\n åè¯ï¼ˆåœ¨æˆ‘å‘ç°è·¯ç”±å™¨ç«¯çš„ Clash æ’ä»¶å¹¶æ²¡æœ‰é‚£ä¹ˆä¸‡èƒ½çš„æƒ…å†µä¸‹åšçš„è¡¥å……ï¼‰ï¼šå¦‚æœä½ å·²ç»å°† Clash è®¾ç½®ä¸ºç½‘å…³ï¼Œå®ç°äº†é€æ˜ä»£ç†çš„è¯ï¼Œé‚£ä¹ˆ Windows å’Œå®‰å“ç«¯éƒ½ä¸å†éœ€è¦é…ç½®ä»£ç†äº†ï¼Œç›´æ¥ä½¿ç”¨å³å¯ï¼š\nä½†å¦‚æœä½ å’Œæˆ‘ä¸€æ ·åªæ˜¯åœ¨è·¯ç”±å™¨ä¸Šå®‰è£…äº† Clashï¼Œå¹¶æ²¡æœ‰å®ç°é€æ˜ä»£ç†ï¼Œé‚£ä¹ˆä½ ä»éœ€è¦å°†ç½‘æ˜“äº‘éŸ³ä¹çš„ä»£ç†æ‰‹åŠ¨æŒ‡å‘è·¯ç”±å™¨ä¸Š Clashï¼š\n é”™è¯¯æ’æŸ¥ç”¨ï¼š\nâ‘  Clash æ—¥å¿—ä¸­å¯ä»¥çœ‹åˆ°ç½‘æ˜“äº‘éŸ³ä¹æµé‡çš„èµ°å‘ï¼Œå¦‚æœå‘ç°æ˜æ˜åœ¨ç½‘æ˜“äº‘éŸ³ä¹å®¢æˆ·ç«¯è¿›è¡Œäº†æ“ä½œï¼ŒClash å´æ²¡æ•æ‰åˆ°æµé‡ï¼Œè¯´æ˜ä½  Clash å¹¶éé€æ˜ä»£ç†æ¨¡å¼ã€‚ä½ éœ€è¦å°†è·¯ç”±å™¨ä¸Šçš„ Clash è®¾ç½®ä¸ºå…è®¸å±€åŸŸç½‘å†…è®¾å¤‡è®¿é—®ï¼Œå¹¶æ‰‹åŠ¨åœ¨ç½‘æ˜“äº‘éŸ³ä¹ä¸­é…ç½®å…¶ HTTP ç«¯å£ï¼Œå°±å’Œæˆ‘ä¸Šé¢æ¼”ç¤ºçš„ä¸€æ ·ã€‚\nâ‘¡ æ­Œæ›²æ˜¯å¦æˆåŠŸè§£é”äº†ï¼Ÿä½ å¯ä»¥é€šè¿‡åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼ŒæŸ¥çœ‹ Docker å®¹å™¨å†…çš„æ—¥å¿—æ¥ç¡®å®šï¼š\ndocker logs unblock-netease-music\r  ç»“æŸã€‚\n","id":10,"section":"posts","summary":"ä¹‹å‰ä¹Ÿæ˜¯éƒ¨ç½²è¿‡è¿™ä¸ªé¡¹ç›®çš„ï¼Œä½†æ˜¯åæ¥å«Œ PC ç«¯å’Œæ‰‹æœºç«¯çš„ç½‘æ˜“äº‘éŸ³ä¹éƒ½è¦æ‰‹åŠ¨é…ç½®æœ‰ç‚¹éº»çƒ¦ï¼Œäºæ˜¯å°±æ”¾å¼ƒäº†ã€‚ ç°åœ¨åœ¨è·¯ç”±å™¨ä¸Šå®‰è£…äº† Clashï¼Œæƒ³åˆ°æ—¢ç„¶å®ƒèƒ½","tags":["Docker"],"title":"CentOS7 ä¸‹ç”¨ Docker éƒ¨ç½² UnblockNeteaseMusic å¹¶åœ¨ Clash ä¸­é…ç½®åˆ†æµä»¥åœ¨å±€åŸŸç½‘å†…è§£é”ç½‘æ˜“äº‘éŸ³ä¹å˜ç°çš„æ­Œæ›²","uri":"https://senjianlu.com/2021/11/centos7-docker-unblock-netease-music/","year":"2021"},{"content":"åªæè¿°å¯¹èŠ‚ç‚¹è®¢é˜…ä¿¡æ¯çš„è§£ç å’Œåœ¨ Clash ä¸­çš„é…ç½®æ–¹æ³•ã€‚\n 1ã€HTTP åè®®çš„èŠ‚ç‚¹\n æœåŠ¡å™¨ç«¯å®‰è£…è„šæœ¬ï¼šCentOS7 ä¸‹ä¸€é”®å®‰è£… GOST å¹¶å¯åŠ¨ HTTP å’Œ SOCKS5 ä»£ç†æœåŠ¡\ncurl -s https://gitee.com/senjianlu/one-click-scripts/raw/main/CentOS7%20ä¸‹ä¸€é”®å®‰è£…%20GOST%20å¹¶å¯åŠ¨%20HTTP%20å’Œ%20SOCKS5%20ä»£ç†æœåŠ¡/install.sh | bash -s $proxy_port $proxy_username $proxy_password\r  å®˜æ–¹é…ç½®æ–‡ä»¶æ¨¡æ¿ä¸­çš„ä»£ç ç‰‡æ®µï¼š\nproxies:\r# http\r- name: \u0026quot;http\u0026quot;\rtype: http\rserver: server\rport: 443\r# username: username\r# password: password\r# tls: true # https\r# skip-cert-verify: true\r# sni: custom.com\r HTTP èŠ‚ç‚¹ä»£ç†çš„é…ç½®åº”è¯¥ç®—æ˜¯æœ€åŸºç¡€ä¹Ÿæœ€å¥½ç†è§£çš„äº†ï¼Œä½†è¿˜æ˜¯åˆ—å¼ è¡¨æ ¼å°†ä»¥ä¸‹ï¼Œä¹Ÿä¸ºåé¢å‡ ç« å¤æ‚èŠ‚ç‚¹çš„é…ç½®è§£æåšé“ºï¼š    å‚æ•°å è§£æ æ ·ä¾‹     name è‡ªå®šä¹‰ã€‚è¯¥èŠ‚ç‚¹çš„åç§°ï¼Œä¹Ÿæ˜¯ä¸»é”®ï¼Œåç»­åœ¨ä»£ç†ç»„ä¸­é€šè¿‡è¿™ä¸ªå±æ€§æ¥é€‰å®šè¯¥èŠ‚ç‚¹ã€‚ myhttp   type å¯é€‰ httpã€socks5ã€ssã€ssrã€vmess å’Œ trojanã€‚èŠ‚ç‚¹çš„åè®®ã€‚ http   server èŠ‚ç‚¹æ‰€åœ¨æœåŠ¡å™¨çš„ IP æˆ–è§£æçš„åŸŸåã€‚ http.proxy.com   port èŠ‚ç‚¹æ‰€åœ¨æœåŠ¡å™¨ä¸Šï¼Œä»£ç†æœåŠ¡æ‰€åœ¨çš„ç«¯å£ã€‚ 443   username ã€é€‰å¡«ã€‘ç”¨æˆ·åã€‚ç”¨ä»¥ä»£ç†è®¤è¯ç”¨ã€‚ myusername   password ã€é€‰å¡«ã€‘ç”¨æˆ·å¯†ç ã€‚ç”¨ä»¥ä»£ç†è®¤è¯ç”¨ã€‚ mypassword   tls ã€é€‰å¡«ã€‘å¯é€‰ true æˆ– falseã€‚æ˜¯å¦å¼€å¯ HTTPSï¼Œå¼€å¯çš„è¯éœ€è¦æœåŠ¡å™¨é…ç½® SSL è¯ä¹¦ã€‚ false   skip-cert-verify ã€é€‰å¡«ã€‘å¯é€‰ true æˆ– falseã€‚æ˜¯å¦è·³è¿‡å¯¹ SSL è¯ä¹¦çš„è®¤è¯ï¼Œè‡ªç­¾è¯ä¹¦ç­‰ä¸è¢«ä¿¡ä»»å› æ­¤ä¸€èˆ¬é€‰ trueã€‚ true   sni ã€é€‰å¡«ã€‘ä¸€èˆ¬å¡« server çš„åŸŸåå³å¯ã€‚é¢å¯¹ä¸€å°æœåŠ¡å™¨ä¸Šæœ‰å¤šä¸ª SSL è¯ä¹¦çš„æ—¶å€™éœ€è¦ç”¨åˆ° sni æ¥è¾¨åˆ«ä½¿ç”¨å“ªä¸ªã€‚ http.proxy.com    ä¸¾ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼Œå½“æˆ‘åœ¨æŸå®ä¹°åˆ°äº†æœ‰æ•ˆæœŸä¸º 1 ä¸ªä¸çš„ HTTP ä»£ç†æ—¶ï¼Œå–å®¶å‘ç»™æˆ‘çš„æ ¼å¼æ˜¯è¿™æ ·çš„ï¼š\nhttp://99999:22222@63.225.10.10:20800\r é‚£æˆ‘è¯¥æ€ä¹ˆå¡«ï¼Ÿå¾ˆç®€å•å…ˆè§£æï¼ŒHTTP ä»£ç†å’Œ SOCKS5 ä»£ç†éƒ½æ˜¯ä¸€ä¸ªæ ¼å¼ï¼š\nåè®®://ç”¨æˆ·å:ç”¨æˆ·å¯†ç @æœåŠ¡å™¨ IP æˆ–åŸŸå:ç«¯å£\r äºæ˜¯åœ¨ Clash ä¸­è¿™æ ·é…ç½®å°±å¥½äº†ï¼š\nproxies:\r# http\r- name: \u0026quot;æ·˜å®è´­ä¹°çš„èŠ‚ç‚¹ 01\u0026quot;\rtype: http\rserver: 63.225.10.10\rport: 20800\rusername: 99999\rpassword: 22222\r# tls: true # https\r# skip-cert-verify: true\r# sni: custom.com\r ç®€å•å§ï¼Œå½“ç„¶äº†è¿™æ˜¯æœ€åŸºç¡€çš„ä»£ç†é…ç½®ï¼Œå®ƒçš„åŠŸèƒ½åŒæ ·ç®€å•ç”šè‡³å¯ä»¥è¯´æ˜¯ç®€é™‹ï¼Œå†…å®¹ä¸ä¼šç»è¿‡æ··æ·†åŠ å¯†ï¼Œä»»ä½•äººæˆªå–åˆ°äº†é€šè¿‡è¿™ä¸ªä»£ç†çš„è¯·æ±‚å°±èƒ½çŸ¥é“ä½ åœ¨åšä»€ä¹ˆï¼ŒSOCKS5 ä¹Ÿä¸€æ ·ï¼Œæ— æ³•ç¡®ä¿å®‰å…¨æ€§ã€‚å› æ­¤ä½¿ç”¨ HTTP å’Œ SOCKS5 ä»£ç†å‰è¯·æ…é‡è€ƒè™‘è‡ªå·±çš„æ•°æ®æ˜¯å¦é‡è¦ï¼\n2ã€SOCKS5 åè®®çš„èŠ‚ç‚¹\nå®˜æ–¹é…ç½®æ–‡ä»¶æ¨¡æ¿ä¸­çš„ä»£ç ç‰‡æ®µï¼š\nproxies:\r# socks5\r- name: \u0026quot;socks\u0026quot;\rtype: socks5\rserver: server\rport: 443\r# username: username\r# password: password\r# tls: true\r# skip-cert-verify: true\r# udp: true\r å’Œ HTTP ä»£ç†çš„å‚æ•°ä¸€è‡´ï¼Œä¸å†èµ˜è¿°é…ç½®æ–¹æ³•ã€‚\nç»“æŸã€‚\n","id":11,"section":"posts","summary":"åªæè¿°å¯¹èŠ‚ç‚¹è®¢é˜…ä¿¡æ¯çš„è§£ç å’Œåœ¨ Clash ä¸­çš„é…ç½®æ–¹æ³•ã€‚ 1ã€HTTP åè®®çš„èŠ‚ç‚¹ æœåŠ¡å™¨ç«¯å®‰è£…è„šæœ¬ï¼šCentOS7 ä¸‹ä¸€é”®å®‰è£… GOST å¹¶å¯åŠ¨ HTTP å’Œ SOCKS5 ä»£ç†æœåŠ¡ curl -s ht","tags":["Clash"],"title":"Clash å­¦ä¹ ï¼ˆå››ï¼‰åœ¨ Clash ä¸­é…ç½®ä½¿ç”¨ HTTP åè®®æˆ– SOCKS5 åè®®çš„èŠ‚ç‚¹","uri":"https://senjianlu.com/2021/11/clash-note-04/","year":"2021"},{"content":"è‹¦ JSONB ä¹…çŸ£ã€‚\n  ä»‹ç»ä¸‹å®éªŒç”¨è¡¨ item çš„è¡¨ç»“æ„ï¼š\n   å ç±»å‹ é•¿åº¦ å°æ•°ç‚¹ ä¸æ˜¯ null é”® æ³¨é‡Š     id int4 32 0 âˆš ğŸ”‘ å•†å“ ID   name varchar 255 0   å•†å“å   property jsonb 0 0   å±æ€§    è¡¨ä¸­æ•°æ®ï¼š    id name property     1 æ¯›å·¾ {\u0026ldquo;price\u0026rdquo;: 5.88, \u0026ldquo;num\u0026rdquo;: 20, \u0026ldquo;type\u0026rdquo;: \u0026ldquo;å¨å«\u0026rdquo;, \u0026ldquo;discount\u0026rdquo;: false}   2 é¥¼å¹² {\u0026ldquo;price\u0026rdquo;: 3.00, \u0026ldquo;num\u0026rdquo;: 55, \u0026ldquo;type\u0026rdquo;: \u0026ldquo;é£Ÿå“\u0026rdquo;, \u0026ldquo;discount\u0026rdquo;: true}    æ³¨ï¼šå½“ç„¶å®é™…å¼€å‘ä¸­ç»å¯¹ä¸ä¼šæŠŠä»·æ ¼ç­‰ä¿¡æ¯å†™åœ¨ JSONB ä¸­ï¼Œè¿™é‡Œçš„ç»“æ„å’Œæ•°æ®ä»…ä½œæµ‹è¯•ç”¨ã€‚\n ç„¶åè€ƒè™‘äº†ä¸€ä¸‹ä»‹ç»å„æ“ä½œçš„é¡ºåºï¼Œå¯¹äº JSON ç±»å‹ï¼Œå¢åŠ ã€åˆ é™¤ã€ä¿®æ”¹ã€æŸ¥çœ‹çš„é¡ºåºå±…ç„¶æ„å¤–çš„åˆç†ï¼Œé‚£å°±æŒ‰è¿™ä¸ªé¡ºåºæ¥å§ã€‚\n1ã€å¢åŠ æ“ä½œ\nâ‘  ä¸º JSONB ç±»å‹æ•°æ®æ–°å¢é”®å€¼å¯¹çš„æ“ä½œç¬¦ä¸º ||ï¼Œå³åŒç«–æ ã€‚\nå…·ä½“æ“ä½œï¼š\nUPDATE item SET property = property::JSONB || '{\u0026quot;discount_percent\u0026quot;: \u0026quot;90%\u0026quot;}'::JSONB WHERE id = 2;\r è¿™é‡Œä¸ºé¥¼å¹²æ–°å¢äº†å…·ä½“æŠ˜æ‰£æ•°å€¼è¿™ä¸ªå±æ€§ï¼ŒåŒå†’å· :: èµ·åˆ°äº†ç±»å‹è½¬æ¢çš„ä½œç”¨ã€‚\n    id name property     2 é¥¼å¹² {\u0026ldquo;num\u0026rdquo;: 55, \u0026ldquo;type\u0026rdquo;: \u0026ldquo;é£Ÿå“\u0026rdquo;, \u0026ldquo;price\u0026rdquo;: 3.00, \u0026ldquo;discount\u0026rdquo;: true, \u0026ldquo;discount_percent\u0026rdquo;: \u0026ldquo;90%\u0026quot;}     â‘¡ ä½¿ç”¨ jsonb_insert è¿™ä¸ªå‡½æ•°ã€‚\nå®˜æ–¹å¯¹è¿™ä¸ªå‡½æ•°çš„ä»‹ç»ï¼š\njsonb_insert(target jsonb, path text[], new_value jsonb [, insert_after boolean])\r ç¬¬ä¸€ä¸ªå‚æ•° target ä¸ºéœ€è¦æ’å…¥æ–°å±æ€§çš„ JSONB ç±»å‹çš„å¯¹è±¡ï¼›\nç¬¬äºŒä¸ªå‚æ•° path ä¸ºè·¯å¾„ï¼Œåˆ—è¡¨ç±»å‹ï¼Œç”¨ [] æˆ– {} åŒ…è£¹å…ƒç´ éƒ½å¯ä»¥ï¼Œé”®ä¸€èˆ¬å°±å†™åœ¨è¿™ä¸ªåˆ—è¡¨çš„æœ€åä¸€ä½ï¼›\nç¬¬ä¸‰ä¸ªå‚æ•° new_value å°±æ˜¯è¯¥é”®å€¼å¯¹çš„å€¼äº†ï¼›\nç¬¬å››ä¸ªå‚æ•°æ˜¯ä¸ªå¯é€‰å‚æ•° insert_afterï¼Œç”¨ä»¥åˆ¤æ–­æ˜¯å°†å€¼æ’åœ¨æŒ‡å®šä½ç½®ä¹‹å‰è¿˜æ˜¯ä¹‹åï¼Œè¿™ä¸ªåœ¨è·¯å¾„æœ€åä¸€ä½ä¸ºç´¢å¼•è€Œéé”®çš„æƒ…å†µä¸‹å¸¸ç”¨ï¼Œé»˜è®¤ä¸º falseã€‚\nå…·ä½“æ“ä½œï¼š\n-- æ–°å»ºé”®å€¼å¯¹\rUPDATE item SET property = jsonb_insert(property, '{oriented}', '[\u0026quot;è€äºº\u0026quot;, \u0026quot;å°å­©\u0026quot;]'::JSONB, false) WHERE id = 1;\r-- ä¸ºé”®å€¼å¯¹çš„å€¼åšæ·»åŠ ï¼Œæ·»åŠ åœ¨ç´¢å¼• 1 çš„å…ƒç´ åé¢ï¼Œå³æœ€ç»ˆé¡ºåºä¸ºï¼š[\u0026quot;è€äºº\u0026quot;, \u0026quot;å°å­©\u0026quot;, \u0026quot;é’å¹´\u0026quot;]\rUPDATE item SET property = jsonb_insert(property, '{oriented, 1}', '\u0026quot;é’å¹´\u0026quot;'::JSONB, true) WHERE id = 1;\r-- ç”±äº jsonb_insert æ— æ³•è‡ªåŠ¨è®¾ç½®çˆ¶èŠ‚ç‚¹ï¼Œå› æ­¤åœ¨åˆ›å»º country ä¸‹çš„ city å±æ€§æ—¶ï¼Œé¦–å…ˆå¾—ç¡®ä¿ country å±æ€§å­˜åœ¨ï¼\rUPDATE item SET property = jsonb_insert(property, '{country}', '{\u0026quot;country\u0026quot;: \u0026quot;China\u0026quot;}'::JSONB, false) WHERE id = 1;\rUPDATE item SET property = jsonb_insert(property, '{from, city}', '\u0026quot;Changzhou\u0026quot;'::JSONB, false) WHERE id = 1;\r     id name property     1 æ¯›å·¾ {\u0026ldquo;num\u0026rdquo;: 20, \u0026ldquo;from\u0026rdquo;: {\u0026ldquo;city\u0026rdquo;: \u0026ldquo;Changzhou\u0026rdquo;, \u0026ldquo;country\u0026rdquo;: \u0026ldquo;China\u0026rdquo;}, \u0026ldquo;type\u0026rdquo;: \u0026ldquo;å¨å«\u0026rdquo;, \u0026ldquo;price\u0026rdquo;: 5.88, \u0026ldquo;discount\u0026rdquo;: false, \u0026ldquo;oriented\u0026rdquo;: [\u0026ldquo;è€äºº\u0026rdquo;, \u0026ldquo;å°å­©\u0026rdquo;, \u0026ldquo;é’å¹´\u0026rdquo;]}     2ã€åˆ é™¤æ“ä½œ\nåˆ é™¤çš„æ“ä½œç¬¦ä¸º -ï¼Œå³å‡å·ã€‚\nå…·ä½“æ“ä½œï¼š\n-- å•ä¸ªå±æ€§\rUPDATE item SET property = property::JSONB - 'discount_percent' WHERE id = 2;\r-- å¤šä¸ªå±æ€§\rUPDATE item SET property = property::JSONB - '{\u0026quot;discount\u0026quot;, \u0026quot;type\u0026quot;}'::text[] WHERE id = 1;\r     id name property     1 æ¯›å·¾ {\u0026ldquo;num\u0026rdquo;: 20, \u0026ldquo;from\u0026rdquo;: {\u0026ldquo;city\u0026rdquo;: \u0026ldquo;Changzhou\u0026rdquo;, \u0026ldquo;country\u0026rdquo;: \u0026ldquo;China\u0026rdquo;}, \u0026ldquo;price\u0026rdquo;: 5.88, \u0026ldquo;country\u0026rdquo;: {\u0026ldquo;country\u0026rdquo;: \u0026ldquo;China\u0026rdquo;}, \u0026ldquo;oriented\u0026rdquo;: [\u0026ldquo;è€äºº\u0026rdquo;, \u0026ldquo;å°å­©\u0026rdquo;, \u0026ldquo;é’å¹´\u0026rdquo;]}   2 é¥¼å¹² {\u0026ldquo;num\u0026rdquo;: 55, \u0026ldquo;type\u0026rdquo;: \u0026ldquo;é£Ÿå“\u0026rdquo;, \u0026ldquo;price\u0026rdquo;: 3.00, \u0026ldquo;discount\u0026rdquo;: true}     3ã€æ›´æ–°æ“ä½œ\nä½¿ç”¨ jsonb_set è¿™ä¸ªå‡½æ•°ã€‚\nå®˜æ–¹å¯¹è¿™ä¸ªå‡½æ•°çš„ä»‹ç»ï¼š\njsonb_set(target jsonb, path text[], new_value jsonb[, create_missing boolean])\r ç¬¬ä¸€ä¸ªå‚æ•° target ä¸ºéœ€è¦ä¿®æ”¹çš„ JSONB ç±»å‹çš„å¯¹è±¡ï¼›\nç¬¬äºŒä¸ªå‚æ•° path ä¸ºè·¯å¾„ï¼Œåˆ—è¡¨ç±»å‹ï¼Œç”¨ [] æˆ– {} åŒ…è£¹å…ƒç´ éƒ½å¯ä»¥ï¼Œé”®ä¸€èˆ¬å°±å†™åœ¨è¿™ä¸ªåˆ—è¡¨çš„æœ€åä¸€ä½ï¼›\nç¬¬ä¸‰ä¸ªå‚æ•° new_value å°±æ˜¯è¯¥é”®å€¼å¯¹çš„å€¼äº†ï¼›\nç¬¬å››ä¸ªå‚æ•°æ˜¯ä¸ªå¯é€‰å‚æ•° create_missingï¼Œæ˜¯å¦åœ¨æ²¡æœ‰è¯¥å€¼æ—¶åˆ›å»ºï¼Œç”±æ­¤ä½ ä¹ŸçŸ¥é“äº† jsonb_set åœ¨æ’å…¥æ“ä½œæ—¶ä¹Ÿå¯ä½¿ç”¨ï¼Œé»˜è®¤ä¸º trueã€‚\nå…·ä½“æ“ä½œï¼š\n-- æ’å…¥æ–°å€¼\rUPDATE item SET property = jsonb_set(property, '{discount_percent}', '\u0026quot;100%\u0026quot;'::JSONB, true) WHERE id = 1;\r-- ä¿®æ”¹æ—§å€¼\rUPDATE item SET property = jsonb_set(property, '{price}', '4.88'::JSONB, false) WHERE id = 1; -- å¯¹æ›´æ·±å±‚çš„å€¼è¿›è¡Œä¿®æ”¹\rUPDATE item SET property = jsonb_set(property, '{\u0026quot;from\u0026quot;, \u0026quot;city\u0026quot;}', '\u0026quot;Suzhou\u0026quot;'::JSONB, false) WHERE id = 1; -- ç”¨ä¸€ä¸ªæ–°çš„ JSONB ç±»å‹æ•°æ®æ¥æ›´æ–°è¡¨ä¸­çš„å­—æ®µï¼Œé‡å¤çš„é”®ä¼šä½¿ç”¨æ–°çš„æ•°æ®ï¼Œä¸é‡å¤çš„é”®å€¼å¯¹ä¼šè¢«æ·»åŠ ï¼ˆè¿™é‡Œæ˜¯æ·»åŠ ç¬¦å· || çš„å¦ä¸€ç§ç”¨æ³•ï¼‰\rUPDATE item SET property = property || '{\u0026quot;num\u0026quot;: 108, \u0026quot;sell_num\u0026quot;: 1}'::JSONB WHERE id = 1;\r     id name property     1 æ¯›å·¾ {\u0026ldquo;num\u0026rdquo;: 108, \u0026ldquo;sell_num\u0026rdquo;: 1, \u0026ldquo;from\u0026rdquo;: {\u0026ldquo;city\u0026rdquo;: \u0026ldquo;Suzhou\u0026rdquo;, \u0026ldquo;country\u0026rdquo;: \u0026ldquo;China\u0026rdquo;}, \u0026ldquo;price\u0026rdquo;: 4.88, \u0026ldquo;oriented\u0026rdquo;: [\u0026ldquo;è€äºº\u0026rdquo;, \u0026ldquo;å°å­©\u0026rdquo;, \u0026ldquo;é’å¹´\u0026rdquo;], \u0026ldquo;discount_percent\u0026rdquo;: \u0026ldquo;100%\u0026quot;}     4ã€æŸ¥æ‰¾æ“ä½œ\næŸ¥æ‰¾ä½œä¸ºæœ€åŸºç¡€çš„æ“ä½œï¼Œå¯å†™çš„ä¹Ÿæœ€å¤šï¼Œå‡ ä¹æ‰€æœ‰èƒ½è¿”å› Boolean çš„å‡½æ•°éƒ½èƒ½ä½œä¸ºæŸ¥æ‰¾æ¡ä»¶ï¼Œè¿™é‡Œå°±åªå†™å‡ ä¸ªæˆ‘æœ€å¸¸ç”¨çš„ä¾‹å­å§ï¼\nâ‘  æŸ¥æ‰¾å‡ºå­˜åœ¨è¿™ä¸ªå±æ€§çš„æ•°æ®ï¼š\n-- åŒ…å«æŒ‡å®šå±æ€§\rSELECT * FROM item WHERE property::JSONB ? 'from';\r-- åªéœ€åŒ…å«åˆ—è¡¨ä¸­çš„ä»»æ„å±æ€§\rSELECT * FROM item WHERE property::JSONB ?| array['discount_percent', 'discount'];\r-- éœ€è¦åŒ…å«åˆ—è¡¨ä¸­çš„æ‰€æœ‰å±æ€§\rSELECT * FROM item WHERE property::JSONB ?\u0026amp; array['discount_percent', 'discount'];\r â‘¡ æŸ¥æ‰¾æŸå±æ€§å€¼ç¬¦åˆæ¡ä»¶çš„æ•°æ®ï¼š\n-- æŸå±æ€§ç­‰äºæŸä¸ªå€¼\rSELECT * FROM item WHERE property::JSONB @\u0026gt; '{\u0026quot;discount\u0026quot;: true}'::JSONB;\r-- æ›´æ·±å±‚çš„å±æ€§ç›¸ç­‰\rSELECT * FROM item WHERE property::JSONB @\u0026gt; '{\u0026quot;from\u0026quot;: {\u0026quot;country\u0026quot;: \u0026quot;China\u0026quot;}}'::JSONB;\r-- å¤§äºæŸä¸ªå€¼\rSELECT * FROM item WHERE (property::JSONB -\u0026gt;\u0026gt; 'price')::NUMERIC \u0026gt;= 4;\r-- æ›´æ·±å±‚çš„å€¼å¤§äº\rSELECT * FROM item WHERE (property::JSONB #\u0026gt;\u0026gt; '{\u0026quot;from\u0026quot;, \u0026quot;zip_code\u0026quot;}')::INT \u0026gt;= 213000;\r-- åˆ—è¡¨åŒ…å«ï¼ˆå±äºåˆ—è¡¨ç±»å‹æ“ä½œï¼‰\rSELECT * FROM item WHERE property::JSONB -\u0026gt; 'oriented' @\u0026gt; '\u0026quot;è€äºº\u0026quot;';\r å¦‚æœä¸Šé¢è¿™äº›æ“ä½œæ— æ³•æ»¡è¶³ä½ ï¼Œé‚£ä¹ˆè¯·å‰å¾€å®˜æ–¹æ–‡æ¡£ï¼šJSON Functions and Operators ç»§ç»­å­¦ä¹ ã€‚\nç»“æŸã€‚\n","id":12,"section":"posts","summary":"è‹¦ JSONB ä¹…çŸ£ã€‚ ä»‹ç»ä¸‹å®éªŒç”¨è¡¨ item çš„è¡¨ç»“æ„ï¼š å ç±»å‹ é•¿åº¦ å°æ•°ç‚¹ ä¸æ˜¯ null é”® æ³¨é‡Š id int4 32 0 âˆš ğŸ”‘ å•†å“ ID name varchar 255 0 å•†å“å property jsonb 0 0 å±æ€§ è¡¨ä¸­æ•°æ®ï¼š id name property 1 æ¯›å·¾ {\u0026ldquo;price\u0026rdquo;: 5.88, \u0026ldquo;num\u0026rdquo;: 20, \u0026ldquo;type\u0026rdquo;:","tags":["PostgreSQL"],"title":"PostgreSQL å­¦ä¹ ç¬”è®°ï¼ˆå…­ï¼‰å¯¹ JSONB ç±»å‹å­—æ®µçš„å¢åˆ æ”¹æŸ¥æ“ä½œ","uri":"https://senjianlu.com/2021/11/postgresql-note-06/","year":"2021"},{"content":"åœ¨æ²¡å¥— Cloudflare ä¹‹å‰æœ‰åœ¨ Nginx ä¸­é…ç½® HTTP è®¿é—® 301 é‡å®šå‘åˆ° HTTPS çš„ä¹ æƒ¯ï¼Œä½†æ˜¯åœ¨å¥—äº† CF ä¹‹åå¸¸å¸¸å‡ºç° 301 é‡å®šå‘æ¬¡æ•°è¿‡å¤šçš„æƒ…å†µï¼Œä¸æ˜ç™½åŸç†åœ°çè°ƒè¯•èµ°äº†å¾ˆå¤šå¼¯è·¯ï¼Œé‡æ–°å®è·µä¸€éå¹¶æ•´ç†ä¸ºç¬”è®°æ–¹ä¾¿è‡ªå·±å›é¡¾ã€‚\n è¿™é‡Œå°±ä»¥å„æ¨¡å¼ä½œä¸ºåŒºåˆ†ï¼Œæ€»å…± 4 ç§æ¨¡å¼å°±åˆ†ä¸º 4 ä¸ªå°ç« èŠ‚ã€‚\næ³¨æ„ï¼šè¿™å››ç§æ¨¡å¼ä»…åœ¨å¼€å¯äº† Cloudflare çš„ CDN åæ‰æœ‰æ•ˆï¼Œä»…æŠŠ Cloudflare ä½œ DNS ä½¿ç”¨æ—¶ä»¥ä¸‹åŠ å¯†æ¨¡å¼å‡ä¸ä¼šç”Ÿæ•ˆï¼ 1ã€æ¨¡å¼ï¼šå…³é—­ï¼ˆä¸å®‰å…¨ï¼‰\nè¿™ä¸ªæ¨¡å¼ä¼šå°†æ‰€æœ‰ç”¨æˆ·å¯¹ä½ ç«™ç‚¹çš„ HTTPS è¯·æ±‚é‡å®šå‘åˆ° HTTPï¼Œå®˜æ–¹æè¿°ï¼š\n Setting your encryption mode to Off (not recommended) redirects any HTTPS request to plaintext HTTP.\n ä¼˜ç‚¹ï¼šæ²¡æœ‰\nç¼ºç‚¹ï¼š\n å®¹æ˜“é­å—åˆ°ä¸­é—´äººæ”»å‡» Chrome ç­‰æµè§ˆå™¨ä¼šæ˜¾ç¤ºè¯¥ç½‘ç«™ä¸å®‰å…¨ å½±å“æœç´¢å¼•æ“æ”¶å½•   å®è·µï¼š\nâ‘  HTTP è®¿é—®ï¼ˆæœªåœ¨ Nginx é…ç½®ä¸­å¼€å¯ HTTP è®¿é—®é‡å®šå‘åˆ° HTTPSï¼‰ï¼š\nâ‘¡ HTTPS è®¿é—®ï¼ˆæœªåœ¨ Nginx é…ç½®ä¸­å¼€å¯ HTTP è®¿é—®é‡å®šå‘åˆ° HTTPSï¼‰ï¼š\næ³¨ï¼šè¿™é‡Œæˆ‘å·²ç»æ‰‹åŠ¨æ”¹ä¸º https://ssl.ceshiku.cn ä½†æ˜¯è¢«é‡å®šå‘å›äº† HTTPã€‚\nâ‘¢ HTTP è®¿é—®ï¼ˆå·²ç»åœ¨ Nginx é…ç½®äº† HTTP è®¿é—®é‡å®šå‘åˆ° HTTPSï¼‰ï¼š\næ³¨ï¼šå¾ªç¯é‡å®šå‘äº†ï¼Œæ¯”è¾ƒå¥½ç†è§£ï¼šHTTP è®¿é—®åˆ° Nginx è¢«é‡å®šå‘åˆ°äº† HTTPSï¼ŒHTTPS åˆ° Cloudflare åˆè¢«é‡å®šå‘åˆ°äº† HTTPï¼Œå¾ªç¯å¾€å¤\u0026hellip;\u0026hellip;\nâ‘£ HTTPS è®¿é—®ï¼ˆå·²ç»åœ¨ Nginx é…ç½®äº† HTTP è®¿é—®é‡å®šå‘åˆ° HTTPSï¼‰ï¼š\næ³¨ï¼šåŒ HTTP è®¿é—®ä¸€æ ·å¾ªç¯é‡å®šå‘ã€‚\n 2ã€æ¨¡å¼ï¼šçµæ´»\nè¿™ä¸ªçµæ´»å¹¶ä¸æ˜¯æŒ‡ Cloudflare ä¼šè‡ªåŠ¨è¾¨åˆ«å¯¹æºç«™ä½¿ç”¨ HTTP æˆ– HTTPS è®¿é—®ï¼Œè€Œæ˜¯æŒ‡ï¼šç”¨æˆ·åˆ° Cloudflare çš„è®¿é—®æ˜¯å¼ºåˆ¶ HTTPS åŠ å¯†çš„ï¼Œè¯ä¹¦ç”± Cloudflare æä¾›ï¼›è€Œ Cloudflare åˆ°æºæœåŠ¡å™¨çš„è®¿é—®æ˜¯å¼ºåˆ¶ HTTP çš„ï¼Œå› æ­¤æºç«™ä¸éœ€è¦é…ç½®è¯ä¹¦ã€‚\næˆ‘è§‰å¾—ç¿»è¯‘ä¸ºåŠç¨‹åŠ å¯†ä¼šæ›´åˆç†ä¸€äº›ï¼Œå®˜æ–¹æè¿°ï¼š\n Setting your encryption mode to Flexible makes your site partially secure. Cloudflare enforces HTTPS between your visitor and Cloudflare, but all connections between Cloudflare and your origin are made through HTTP. As a result, an SSL certificate is not required on your origin.\n ä¼˜ç‚¹ï¼š\n ç®€å•ï¼Œæºç«™ä¸éœ€è¦é…ç½® HTTPS è¯ä¹¦  ç¼ºç‚¹ï¼š\n åœ¨ Cloudflare åˆ°æºç«™ä¸­ä»å­˜åœ¨ä¸­é—´äººæ”»å‡»çš„é£é™©   å®è·µï¼š\nâ‘  HTTP è®¿é—®ï¼ˆæœªåœ¨ Nginx é…ç½®ä¸­å¼€å¯ HTTP è®¿é—®é‡å®šå‘åˆ° HTTPSï¼‰ï¼š\næ³¨ï¼šæˆåŠŸå˜æˆäº† HTTPS è®¿é—®ï¼Œè¯ä¹¦æ˜¯ Cloudflare æä¾›çš„ã€‚\nâ‘¡ HTTPS è®¿é—®ï¼ˆæœªåœ¨ Nginx é…ç½®ä¸­å¼€å¯ HTTP è®¿é—®é‡å®šå‘åˆ° HTTPSï¼‰ï¼š\næ³¨ï¼šæºç«™é…ç½®äº†è¯ä¹¦ä½†æœªä½¿ç”¨ã€‚\nâ‘¢ HTTP è®¿é—®ï¼ˆå·²ç»åœ¨ Nginx é…ç½®äº† HTTP è®¿é—®é‡å®šå‘åˆ° HTTPSï¼‰ï¼š\næ³¨ï¼šå¾ªç¯é‡å®šå‘ï¼šCloudflare åˆ°æºç«™çš„ HTTP è¯·æ±‚è¢« Nginx é‡å®šå‘åˆ°äº† HTTPSï¼Œæ¥ç€ HTTPS è¯·æ±‚ç»è¿‡ Cloudflare åˆå˜å›äº†å¯¹æºç«™çš„ HTTP è¯·æ±‚\u0026hellip;\u0026hellip;\nâ‘£ HTTPS è®¿é—®ï¼ˆå·²ç»åœ¨ Nginx é…ç½®äº† HTTP è®¿é—®é‡å®šå‘åˆ° HTTPSï¼‰ï¼š\næ³¨ï¼šåŒ HTTP è®¿é—®ä¸€æ ·å¾ªç¯é‡å®šå‘ã€‚\n 3ã€æ¨¡å¼ï¼šå®Œå…¨\nå…¨ç¨‹åŠ å¯†ä½†ä¸å®Œå…¨ï¼šå¦‚æœç”¨æˆ·å‘å‡ºçš„æ˜¯ HTTP è¯·æ±‚ï¼Œé‚£ä¹ˆç”¨æˆ·åˆ° Cloudflare å’Œ Cloudflare åˆ°æºç«™å‡ä¼šä½¿ç”¨ HTTP åè®®ï¼›å¦‚æœç”¨æˆ·å‘å‡ºçš„æ˜¯ HTTPS è¯·æ±‚ï¼Œé‚£ä¹ˆç”¨æˆ·åˆ° Cloudflare ä¼šä½¿ç”¨ Cloudflare æä¾›çš„è¯ä¹¦è¿›è¡ŒåŠ å¯†ï¼Œè€Œ Cloudflare åˆ°æºç«™ä¼šä½¿ç”¨æºç«™çš„è¯ä¹¦è¿›è¡ŒåŠ å¯†ã€‚\nå®˜æ–¹æè¿°ï¼š\n When you set your encryption mode to Full, Cloudflare enforces HTTPS between your visitor and Cloudflare and makes connections to the origin using the scheme requested by the visitor. If your visitor uses http, then Cloudflare connects to the origin using plaintext HTTP and vice versa.\n ä¼˜ç‚¹ï¼š\n ä½¿ç”¨æ­¤æ¨¡å¼å¯ä»¥å…¼å®¹ Nginx é…ç½® HTTP é‡å®šå‘åˆ° HTTPS æºç«™å¯ä»¥ä½¿ç”¨è‡ªç­¾è¯ä¹¦  ç¼ºç‚¹ï¼š\n åœ¨ Cloudflare åˆ°æºç«™ä¸­ä»å­˜åœ¨ä¸­é—´äººæ”»å‡»çš„é£é™©ï¼ˆåŒ…æ‹¬é€šè¿‡è¯ä¹¦åŠ«æŒå’Œä¼ªé€ ç­‰æ–¹å¼ï¼Œä¸åŒäºä¸¥æ ¼æ¨¡å¼ï¼ŒCloudflare ä¸ä¼šå¯¹æºç«™çš„è¯ä¹¦è¿›è¡Œå®¡æ ¸ï¼‰   å®è·µï¼š\nâ‘  HTTP è®¿é—®ï¼ˆæœªåœ¨ Nginx é…ç½®ä¸­å¼€å¯ HTTP è®¿é—®é‡å®šå‘åˆ° HTTPSï¼‰ï¼š\nâ‘¡ HTTPS è®¿é—®ï¼ˆæœªåœ¨ Nginx é…ç½®ä¸­å¼€å¯ HTTP è®¿é—®é‡å®šå‘åˆ° HTTPSï¼‰ï¼š\næ³¨ï¼šæºç«™é…ç½®äº†è¯ä¹¦ï¼Œä½†åœ¨æµè§ˆå™¨ç«¯æ˜¾ç¤ºçš„æ˜¯ç”¨æˆ·å’Œ Cloudflare ä¹‹é—´åŠ å¯†æ‰€ç”¨çš„è¯ä¹¦ã€‚\nâ‘¢ HTTP è®¿é—®ï¼ˆå·²ç»åœ¨ Nginx é…ç½®äº† HTTP è®¿é—®é‡å®šå‘åˆ° HTTPSï¼‰ï¼š\næ³¨ï¼šè·³è½¬åˆ°äº† HTTPSã€‚\nâ‘£ HTTPS è®¿é—®ï¼ˆå·²ç»åœ¨ Nginx é…ç½®äº† HTTP è®¿é—®é‡å®šå‘åˆ° HTTPSï¼‰ï¼š\n 4ã€æ¨¡å¼ï¼šå®Œå…¨ï¼ˆä¸¥æ ¼ï¼‰\nå’Œå®Œå…¨æ¨¡å¼å®ç°çš„åŠŸèƒ½ä¸€æ ·ï¼Œä½†æ˜¯æ–°å¢äº†å¯¹è¯ä¹¦çš„è®¤è¯ï¼šæºç«™å¦‚æœé…ç½®äº†è‡ªç­¾è¯ä¹¦ã€éå¯ä¿¡è¯ä¹¦æˆ–è¿‡æœŸè¯ä¹¦ï¼Œé‚£ä¹ˆ Cloudflare ä¼šå›å¤å®¢æˆ·ç«¯è®¿é—®å¤±è´¥å¹¶è¿”å›526 å“åº”ä»£ç ã€‚\nå®˜æ–¹æè¿°ï¼š\n When you set your encryption mode to Full (strict), Cloudflare does everything in Full mode but also enforces more stringent requirements for origin certificates.\n ä¼˜ç‚¹ï¼š\n ä½¿ç”¨æ­¤æ¨¡å¼å¯ä»¥å…¼å®¹ Nginx é…ç½® HTTP é‡å®šå‘åˆ° HTTPS å®‰å…¨ï¼Œåªè¦ç”¨æˆ·ä½¿ç”¨ HTTPS è®¿é—®å¯ä»¥å®Œå…¨æœç»ä¸­é—´äººæ”»å‡»  ç¼ºç‚¹ï¼š\n å››ç§æ¨¡å¼ä¸­å·¥ä½œé‡æœ€å¤§ï¼Œéœ€è¦ç»´æŠ¤æœåŠ¡å™¨ç«¯çš„è¯ä¹¦   å®è·µç»“æœå’Œç¬¬ 3 ç§æ¨¡å¼å®Œå…¨ä¸€æ ·ï¼Œä¸æ”¾ä¸Šæ¥äº†ã€‚\n 5ã€æ€»ç»“\nâ‘  å¦‚æœä½ è¿˜åœ¨å›°æƒ‘è¯¥é€‰å“ªç§æ¨¡å¼ï¼Œæˆ‘å¸®ä½ æ•´ç†äº†å¸¸ç”¨éœ€æ±‚å¯¹åº”çš„æ¨¡å¼ï¼Œè¯·å‚ç…§ï¼š\nâ‘¡ è¿˜æœ‰éœ€è¦æ³¨æ„çš„ä¼šå‡ºç° 301 é‡å®šå‘æ¬¡æ•°è¿‡å¤šçš„ 2 ç§æƒ…å†µï¼š\n å…³é—­æ¨¡å¼ä¸‹åœ¨ Nginx å¼€å¯äº†å¼ºåˆ¶é‡å®šå‘ï¼ˆHTTPS -(Cloudflare)-\u0026gt; HTTP -(Nginx)-\u0026gt; HTTPS -(Cloudflare)-\u0026gt; HTTP\u0026hellip;\u0026hellip;ï¼‰ çµæ´»æ¨¡å¼ä¸‹åœ¨ Nginx å¼€å¯äº†å¼ºåˆ¶é‡å®šå‘ï¼ˆHTTP -(Cloudflare)-\u0026gt; HTTP -(Nginx)-\u0026gt; HTTPS -(Cloudflare)-\u0026gt; HTTP\u0026hellip;\u0026hellip;ï¼‰  â‘¢ æœ€åæ”¾ä¸Šå®Œå…¨å’Œå®Œå…¨ï¼ˆä¸¥æ ¼ï¼‰æ¨¡å¼ä¸‹å¯ä»¥å‚è€ƒçš„ Nginx é…ç½®ï¼š\n...\r...\rserver {\rlisten 80;\rlisten [::]:80;\rserver_name _;\rroot /usr/share/nginx/html;\rinclude /etc/nginx/default.d/*.conf;\r# è¯ä¹¦ç”³è¯·ç”¨\rlocation ~ /.well-known {\rroot /usr/share/nginx;\rallow all;\r}\r# å¼ºåˆ¶é‡å®šå‘åˆ° HTTPS\rlocation / {\rreturn 301 https://$host$request_uri;\r}\r}\rserver {\rlisten 443 ssl;\rserver_name _;\rroot /usr/share/nginx/html;\r# SSL é…ç½®\rssl_certificate /etc/letsencrypt/live/ssl.ceshiku.cn/fullchain.pem;\rssl_certificate_key /etc/letsencrypt/live/ssl.ceshiku.cn/privkey.pem;\rssl_protocols TLSv1 TLSv1.1 TLSv1.2;\rssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;\r# ä»¥ä¸‹å¡«ä½ çš„åä»£ç­‰é…ç½®\r...\r...\r}\r...\r...\r ç»“æŸã€‚\n","id":13,"section":"posts","summary":"åœ¨æ²¡å¥— Cloudflare ä¹‹å‰æœ‰åœ¨ Nginx ä¸­é…ç½® HTTP è®¿é—® 301 é‡å®šå‘åˆ° HTTPS çš„ä¹ æƒ¯ï¼Œä½†æ˜¯åœ¨å¥—äº† CF ä¹‹åå¸¸å¸¸å‡ºç° 301 é‡å®šå‘æ¬¡æ•°è¿‡å¤šçš„æƒ…å†µï¼Œä¸æ˜ç™½åŸç†åœ°çè°ƒè¯•èµ°äº†å¾ˆå¤šå¼¯è·¯ï¼Œé‡æ–°å®è·µä¸€","tags":["ç½‘ç«™å»ºè®¾"],"title":"Cloudflare å››ç§ SSL/TLS åŠ å¯†æ¨¡å¼çš„åŠŸèƒ½è§£æåŠå®è·µ","uri":"https://senjianlu.com/2021/11/cloudflare-ssl-tls/","year":"2021"},{"content":"ç»´åŸºä¸»æœºå®¶ CN2 è™šæ‹Ÿç©ºé—´ä¸Šçš„ Nextcloud ç®¡ç†å‘˜å¯†ç å¿˜äº†ï¼Œå¹¶ä¸”å› ä¸ºå½“åˆæ²¡æœ‰é…ç½®é‚®ç®±ä¿¡æ¯ï¼Œå¯¼è‡´æ²¡æ³•æ”¶åˆ°é‡ç½®å¯†ç é‚®ä»¶ï¼Œåæ­£ä¹Ÿæ²¡å•¥é‡è¦æ–‡ä»¶ç´¢æ€§é‡è£…ä¸‹ï¼Œä»¥æ­¤è®°å½•ä¸‹æµç¨‹ã€‚\n æ³¨ï¼šæ‰€æœ‰å®‰è£…æµç¨‹æˆªå›¾å‡ä»¥ Plesk ä¸ºä¾‹ï¼Œä¸åŒè™šæ‹Ÿä¸»æœºè¯·è‡ªè¡Œæ¢ç´¢å®é™…æ“ä½œæ–¹æ³•ã€‚\n1ã€ä¸‹è½½ Nextcloud å®‰è£…åŒ…\nå®˜æ–¹ä¸‹è½½åœ°å€ï¼šDownload for server\né€‰æ‹© Web Installerï¼š\næ¥ç€ä¸Šä¼ åˆ°è™šæ‹Ÿä¸»æœºç©ºé—´å†…ï¼Œæ”¾åœ¨å¯¹åº”åŸŸåæ–‡ä»¶å¤¹çš„æ ¹ç›®å½•ä¸‹å³å¯ï¼š\n2ã€é…ç½®åŸŸåè§£æå’Œä¸ºå®‰è£…æ¸…ç©ºè‡³å°‘ 500MB ç©ºé—´\nåŸŸåè§£æè‡ªè¡Œé…ç½®ã€‚\nå®‰è£…éœ€è¦è‡³å°‘ 500MB ç©ºé—´ï¼Œäº‘æœåŠ¡å•†çš„ç©ºé—´ç›‘æ§ä¸€èˆ¬æ˜¯ä¸åŒ…æ‹¬åƒåœ¾ç«™å†…æ–‡ä»¶çš„ï¼Œä½†æ˜¯å®é™…åƒåœ¾ç«™å†…å®¹é‡ä¹Ÿä¼šç®—è¿›è™šæ‹Ÿç©ºé—´æ€»é™åˆ¶å®¹é‡å†…ï¼Œå› æ­¤ä¹Ÿè¯·æ¸…ç©ºã€‚\n åƒä¸‹å›¾ä¸€æ ·çš„æƒ…å†µå®é™…ä¸Šå°±æ˜¯å®‰è£…å¤±è´¥ï¼Œæ—¥å¿—å†…å®¹å¤§æ¦‚ä¸ºï¼š\nWarning: ZipArchive::extractTo(): Invalid or uninitialized Zip object in /var/www/vhosts/.../.../setup-nextcloud.php on line 156 Warning: ZipArchive::close(): Invalid or uninitialized Zip object in /var/www/vhosts/.../.../setup-nextcloud.php on line 157 Warning: scandir(tmp-nextcloud1635676707/nextcloud): failed to open dir: No such file or directory in /var/www/vhosts/.../.../setup-nextcloud.php on line 161 Warning: scandir(): (errno 2): No such file or directory in /var/www/vhosts/.../.../setup-nextcloud.php on line 161 Warning: array_diff(): Expected parameter 1 to be an array, bool given in /var/www/vhosts/.../.../setup-nextcloud.php on line 161 Warning: Invalid argument supplied for foreach() in /var/www/vhosts/.../.../setup-nextcloud.php on line 161 Warning: rmdir(tmp-nextcloud1635676707/nextcloud): No such file or directory in /var/www/vhosts/.../.../setup-nextcloud.php on line 164  ä¸‰ä¸ªåŸå› éƒ½æœ‰å¯èƒ½é€ æˆå¤±è´¥ï¼š\n ç©ºé—´ä¸å¤Ÿã€‚ ä¸å®‰è£…ç•Œé¢æ–­è¿å¯¼è‡´ç¨‹åºå¼‚å¸¸å‡ºé”™ï¼Œè¿™åœ¨ä½¿ç”¨å¢ƒå¤–è™šæ‹Ÿç©ºé—´å®‰è£…æ—¶å¾ˆå¸¸è§ã€‚ éƒ¨åˆ†æ–‡ä»¶ä¸‹è½½å‡ºé”™ï¼Œä¸»è¦ä»¥ä¸‹é¢å‡ ä¸ªæ–‡ä»¶ä¸ºä¸»ï¼š     æ–‡ä»¶ è·¯å¾„ ä¸‹è½½åœ°å€     nc.zip . https://download.nextcloud.com/server/releases/latest.zip    å› æ­¤è¯·æå‰æ¸…ç†å¥½ç©ºé—´å¹¶å‡†å¤‡å¥½ä»£ç†ã€‚å½“ç„¶å¯¹ä»¥ä¸Šæ–‡ä»¶ï¼Œä½ å¯ä»¥æå‰ä¸‹è½½äº†æ”¾åœ¨ç›®å½•ä¸‹ï¼ˆç›®å½• . æ„ä¸º setup-nextcloud.php æ‰€åœ¨ç›®å½•ï¼‰ã€‚\n 3ã€å¼€å§‹å®‰è£…\nè®¿é—®ï¼šä½ çš„åŸŸå + /setup-nextcloud.php\né€‰æ‹© Nextï¼š\né€‰æ‹©ç›®å½•ï¼Œæˆ‘è¿™é‡Œé€‰äº† . å³ä¸ºå®‰è£…åœ¨å½“å‰ pan.cscheap.com/ ç›®å½•ä¸‹ï¼š\nå®‰è£…æˆåŠŸï¼š\né…ç½®ç®¡ç†å‘˜è´¦æˆ·å¯†ç å¹¶ä½¿ç”¨ SQLiteï¼š\nå®Œæˆï¼\n å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å¤–ç½®çš„æ•°æ®åº“ï¼Œæˆ‘ä¸ä½¿ç”¨çš„åŸå› æ˜¯è¿™å®¶çš„æ•°æ®åº“å®¹æ˜“å‡ºç°æ–­è¿ï¼Œå¯¼è‡´å®‰è£…ä¸æ–­å¡åœ¨ç®¡ç†å‘˜è´¦å·é…ç½®é˜¶æ®µã€‚\nPlesk æ–°å»ºæ•°æ®åº“æ–¹å¼å¦‚ä¸‹ï¼š\nè¾“å…¥æ•°æ®åº“ååç¼€ã€ç”¨æˆ·ååç¼€å’Œå¯†ç ï¼š\nåˆ›å»ºæˆåŠŸåå‰å¾€ Nextcloud ç®¡ç†å‘˜é…ç½®ç•Œé¢é€‰æ‹©å¤–ç½®æ•°æ®åº“å³å¯ï¼š\n æœ€åæé†’è™šæ‹Ÿç©ºé—´çš„ç½‘ç›˜è¯·å®šæ—¶å‹ç¼©å¤‡ä»½åˆ°æœ¬åœ°ï¼Œè¿™æ˜¯ç»´åŸºä¸»æœº 2021 å¹´ 6 æœˆä»½å‡ºçš„äº‹æ•…ï¼Œè¡¥å¿è™½ç„¶è›®åˆ°ä½çš„ï¼Œä½†æ˜¯æ•°æ®å¯¹æŸäº›äººæ˜¯æ— ä»·çš„ï¼š\nç»“æŸã€‚\n","id":14,"section":"posts","summary":"ç»´åŸºä¸»æœºå®¶ CN2 è™šæ‹Ÿç©ºé—´ä¸Šçš„ Nextcloud ç®¡ç†å‘˜å¯†ç å¿˜äº†ï¼Œå¹¶ä¸”å› ä¸ºå½“åˆæ²¡æœ‰é…ç½®é‚®ç®±ä¿¡æ¯ï¼Œå¯¼è‡´æ²¡æ³•æ”¶åˆ°é‡ç½®å¯†ç é‚®ä»¶ï¼Œåæ­£ä¹Ÿæ²¡å•¥é‡è¦æ–‡ä»¶ç´¢æ€§é‡è£…ä¸‹ï¼Œä»¥æ­¤è®°å½•ä¸‹æµ","tags":["ç½‘ç«™å»ºè®¾"],"title":"Pleskï¼ˆè™šæ‹Ÿä¸»æœºç©ºé—´ï¼‰ä¸‹å®‰è£… Nextcloud ç½‘ç›˜ç³»ç»Ÿ","uri":"https://senjianlu.com/2021/10/plesk-install-nextcloud/","year":"2021"},{"content":"éƒ¨åˆ†å¢ƒå¤–ä»£ç†ç”¨çš„æœåŠ¡å™¨è¿å…¥ Zabbix å®åœ¨æ˜¯å¤ªåƒèµ„æºäº†ï¼Œè¿‡é«˜çš„å»¶è¿Ÿä¹Ÿä½¿å¾—è¿æ¥ä¸€ç›´ä¸­æ–­ï¼Œè€ƒè™‘äº†ä¸€ä¸‹å†³å®šå°†è¾¹ç¼˜ä¸šåŠ¡ç”¨çš„æœåŠ¡å™¨å…¨æŠ½ç¦»å‡ºæ¥ï¼Œå•ç‹¬ç”¨å“ªå’ç›‘æ§åšç®¡ç†ã€‚\n 1ã€é¦–å…ˆæ³¨å†Œä¸€ä¸ªæ–°çš„ GitHub åº”ç”¨\nå“ªå’ç›‘æ§ç®¡ç†å‘˜åå°çš„ç™»å½•è®¤è¯ä½¿ç”¨çš„æ˜¯ GitHub OAuthï¼Œå³ï¼šå°†è®¤è¯æ­¥éª¤äº¤ç»™ GitHubï¼Œé¢æ¿åªè´Ÿè´£æ¥æ”¶å›è°ƒå¹¶åˆ¤æ–­æ˜¯å¦æ˜¯æœ¬äººã€‚\næ³¨å†Œæ–°çš„åº”ç”¨ï¼š\nå›è°ƒåœ°å€åœ¨åŸŸååŸºç¡€ä¸ŠåŠ ä¸Š /oauth2/callback å³å¯ï¼š\næ¥ç€åˆ›å»ºä¸€ä¸‹ç§é’¥ï¼š\nå°† Client ID å’Œæ–°å»ºçš„ Client secret éƒ½ä¿å­˜ä¸€ä¸‹ï¼ŒClient secret ä¹‹åå°±å†ä¹Ÿä¸ä¼šå®Œæ•´å‡ºç°äº†ï¼  æ³¨ï¼šOAuth ä¸åŒäºéƒ¨åˆ†åº”ç”¨å¯¹ä½  GitHub è´¦å·çš„ç»‘å®šï¼ŒOAuth æ˜¯ä¸ä¼šåƒä¸‹é¢çš„å›¾ä¸€æ ·å‘ä½ è¯·æ±‚ä»“åº“çš„æƒé™çš„:\nå®ƒåªä¼šéœ€è¦ä¸€äº›ä¸ªäººå…¬å¼€ä¿¡æ¯ï¼ˆç¬¬ 2 æ­¥é¢æ¿ç«¯å®‰è£…ç»“æŸåæœ‰æˆªå›¾ï¼‰ï¼Œå› æ­¤ä½¿ç”¨ä¸Šå¯ä»¥æ”¾å¿ƒã€‚\næ›´å¤šè¯¦æƒ…è¯·å‚ç…§ï¼šæˆæƒ OAuth åº”ç”¨ç¨‹åº\n 2ã€å®‰è£…é¢æ¿ç«¯ï¼ˆç›¸å½“äº Zabbix çš„ server + nginx ç«¯ï¼‰\nå‚ç…§å®˜æ–¹æ–‡æ¡£ï¼Œæ‰§è¡Œï¼š\ncurl -L https://raw.githubusercontent.com/naiba/nezha/master/script/install.sh -o nezha.sh \u0026amp;\u0026amp; chmod +x nezha.sh\rsudo ./nezha.sh\r  å¢ƒå†…æœåŠ¡å™¨å®‰è£…ä½¿ç”¨åŠ é€Ÿæºï¼š\ncurl -L https://cdn.jsdelivr.net/gh/naiba/nezha@master/script/install.sh -o nezha.sh \u0026amp;\u0026amp; chmod +x nezha.sh\rsudo ./nezha.sh\r ä¾æ—§æ— æ³•ä¸‹è½½è„šæœ¬æˆ–ç«¯å®‰è£…æ–‡ä»¶çš„æƒ…å†µä¸‹ï¼Œè¯·ä½¿ç”¨ä¸´æ—¶ä»£ç†ï¼ˆä»£ç†è¯·è‡ªè¡Œå‡†å¤‡ï¼Œå…³é—­è¿æ¥åæ­¤é…ç½®ä¼šå¤±æ•ˆï¼‰ï¼š\nexport http_proxy=socks5://99999:22222@63.225.10.10:20800\r  é€‰æ‹©å®‰è£…é¢æ¿ç«¯ï¼š\næœŸé—´éœ€è¦å®‰è£… Dockerï¼Œä¹‹åä»¥æ­¤è¾“å…¥ Client IDã€Client Secret å’Œ GitHub ç”¨æˆ·åå’Œç«™ç‚¹æ ‡é¢˜å³å¯ï¼Œç«¯å£ç”¨é»˜è®¤çš„å°±è¡Œï¼š\nåˆ«å¿˜äº†å¼€æ”¾é˜²ç«å¢™å’Œå®‰å…¨ç»„ï¼Œä¹‹åå¯åŠ¨é¢æ¿å³å¯ï¼š\n å¦‚æœä½ å’Œæˆ‘ä¸€æ ·æ˜¯ä½¿ç”¨ Certbot ç”³è¯·å…è´¹çš„ Let\u0026rsquo;s encrypt è¯ä¹¦ï¼Œä¸”ä½¿ç”¨çš„æ˜¯åœ¨ç½‘ç«™ç›®å½•ä¸‹æ”¾éªŒè¯æ–‡ä»¶çš„æ–¹æ³•ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥å‚è€ƒæˆ‘çš„ Nginx é…ç½®ï¼š\n...\r...\rserver {\rlisten 80;\rserver_name status.example.com;\r# Let's Encrypt è¯ä¹¦è®¤è¯\rlocation ~ /.well-known {\rroot /usr/share/nginx;\rallow all;\r}\r# éå¼ºåˆ¶è·³è½¬ HTTPS\rlocation / {\r# å¥— CDN é‡å®šå‘æ¬¡æ•°è¿‡å¤šåˆ™æ”¾å¼€ 301 è·³è½¬\rproxy_pass http://localhost:8008;\rproxy_set_header Host $host;\r# ä¸å¥— CDN æ—¶ 301 è·³è½¬ HTTPS\r# return 301 https://$host$request_uri;\r}\r}\rserver {\rlisten 443 ssl;\rserver_name status.example.com;\r# SSL é…ç½®\rssl_certificate /etc/letsencrypt/live/status.example.com/fullchain.pem;\rssl_certificate_key /etc/letsencrypt/live/status.example.com/privkey.pem;\rssl_protocols TLSv1 TLSv1.1 TLSv1.2;\rssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;\rlocation / {\rproxy_pass http://localhost:8008;\rproxy_set_header Host $host;\r}\rlocation /ws {\rproxy_pass http://127.0.0.1:8008;\rproxy_http_version 1.1;\rproxy_set_header Upgrade $http_upgrade;\rproxy_set_header Connection \u0026quot;Upgrade\u0026quot;;\rproxy_set_header Host $host;\r}\rlocation /terminal {\rproxy_pass http://127.0.0.1:8008;\rproxy_http_version 1.1;\rproxy_set_header Upgrade $http_upgrade;\rproxy_set_header Connection \u0026quot;Upgrade\u0026quot;;\rproxy_set_header Host $host;\r}\r}\r...\r...\r  å‰å¾€é¡µé¢æˆæƒç™»å½•å³å¯ï¼š\n3ã€å®‰è£…è¢«ç›‘æ§ç«¯ï¼ˆå³ Zabbix agent ç«¯ï¼‰\né¦–å…ˆåœ¨ç®¡ç†é¢æ¿æ–°å»ºè¢«ç›‘æ§æœåŠ¡å™¨ï¼š\nè·å–å¯†é’¥ç•™ç”¨ï¼š\næ¥ç€å‰å¾€è¢«ç›‘æ§æœåŠ¡å™¨ï¼Œæ‰§è¡Œçš„å‘½ä»¤å’Œé¢æ¿ç«¯çš„ä¸€æ ·ï¼š\ncurl -L https://raw.githubusercontent.com/naiba/nezha/master/script/install.sh -o nezha.sh \u0026amp;\u0026amp; chmod +x nezha.sh\rsudo ./nezha.sh\r è¿™é‡Œçš„åŸŸåå¯ä»¥ç›´æ¥è¾“å…¥ç›‘æ§ç«¯çš„å¤–ç½‘ IP è€Œä¸ä¸€å®šè¦æ˜¯åŸŸåï¼Œåæ­£ä¸æ˜¯å¥— CDN å°±è¡Œäº†ï¼š\nå›åˆ°é¡µé¢ä¸Šï¼Œå°±èƒ½çœ‹åˆ°æœåŠ¡å™¨æ•°æ®äº†ï¼š\nç»“æŸã€‚\n","id":15,"section":"posts","summary":"éƒ¨åˆ†å¢ƒå¤–ä»£ç†ç”¨çš„æœåŠ¡å™¨è¿å…¥ Zabbix å®åœ¨æ˜¯å¤ªåƒèµ„æºäº†ï¼Œè¿‡é«˜çš„å»¶è¿Ÿä¹Ÿä½¿å¾—è¿æ¥ä¸€ç›´ä¸­æ–­ï¼Œè€ƒè™‘äº†ä¸€ä¸‹å†³å®šå°†è¾¹ç¼˜ä¸šåŠ¡ç”¨çš„æœåŠ¡å™¨å…¨æŠ½ç¦»å‡ºæ¥ï¼Œå•ç‹¬ç”¨å“ªå’ç›‘æ§åšç®¡","tags":["Linux"],"title":"CentOS7 ä¸‹å“ªå’ç›‘æ§é¢æ¿çš„æ­å»ºçš„ç›‘æ§ç«¯çš„å®‰è£…","uri":"https://senjianlu.com/2021/10/centos7-nezha-monitor/","year":"2021"},{"content":"åœ¨å’Œèˆå‹äº¤æµä¹‹åæ‰å‘ç°æ‹¿ JSONB å­˜å‚¨å†å²ä»·æ ¼ä¿¡æ¯çš„æˆ‘å¯èƒ½æ˜¯ä¸ªå¤©æ‰å§\u0026hellip;\u0026hellip;\nå›å»æ£€æŸ¥äº†ä¸€ä¸‹ PostgreSQL ä¸­çš„å¯¹åº”å­—æ®µï¼Œæœç„¶è¾¾åˆ°äº† 65535 å­—èŠ‚çš„æœ€å¤§é™åˆ¶ï¼Œèµ¶ç´§ç€æ‰‹è¿ç§»æ•°æ®ã€‚\n é€‰ MongoDB æœ€ä¸»è¦çš„åŸå› æ˜¯å®ƒçš„ä¸€ä¸ªé›†åˆï¼ˆä¸ PostgreSQL ä¸­çš„è¡¨åŒæ¦‚å¿µï¼‰å¯ä»¥è¢«å½“ä½œä¸€ä¸ªé˜Ÿåˆ—ï¼Œæ— é™åˆ¶çš„æ’å…¥ JSON æ ¼å¼çš„æ•°æ®ï¼Œæ”¾ä¸‹å›¾æ–¹ä¾¿ç†è§£ï¼š\nè¿™å¯¹å­˜å‚¨æœªçŸ¥é•¿åº¦çš„å†å²ä»·æ ¼æ•°æ®çœŸçš„å¾ˆå‹å¥½ï¼Œå¹¶ä¸”æ ¹æ®æ—¥æœŸå»ºç«‹ç´¢å¼•åï¼ŒæŸ¥è¯¢çš„é€Ÿåº¦ä¹Ÿä¼šå¾ˆå¿«ã€‚\n è¯ä¸å¤šè¯´å¼€å§‹å®‰è£…ï¼Œå®˜æ–¹æ–‡æ¡£ï¼šInstall MongoDB Community Edition on Red Hat or CentOS\n1ã€é…ç½® repo ä»“åº“ä¸º Yum å®‰è£…æä¾›æº\nåˆ›å»º mongodb-org-5.0.repoï¼š\nvi /etc/yum.repos.d/mongodb-org-5.0.repo\r å†…å®¹ï¼š\n[mongodb-org-5.0]\rname=MongoDB Repository\rbaseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/5.0/x86_64/\rgpgcheck=1\renabled=1\rgpgkey=https://www.mongodb.org/static/pgp/server-5.0.asc\r 2ã€ä½¿ç”¨ Yum è¿›è¡Œå®‰è£…\næ‰§è¡Œï¼š\nsudo yum install -y mongodb-org\r å®‰è£…å®Œæˆä¼šè¾“å‡ºå¦‚ä¸‹ä¿¡æ¯ï¼š\n ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸï¼š\nrpm -qa |grep mongodb\rrpm -ql mongodb-org-server\r  3ã€å¯åŠ¨ MongoDB\nå¯åŠ¨ï¼š\nsystemctl start mongod.service\r çœ‹ä¸‹æ•°æ®åº“è¿›ç¨‹æ˜¯å¦å¯åŠ¨æˆåŠŸäº†ï¼š\nps -ef|grep mongod\r 4ã€é…ç½®ç®¡ç†å‘˜å¯†ç \nè¿›å…¥æ•°æ®åº“ä¸­ï¼š\n# è¿›å…¥æ•°æ®åº“ä¸­\rmongo\r ä¿®æ”¹ root ç”¨æˆ·çš„å¯†ç ï¼š\n# åˆ‡æ¢åˆ° admin æ•°æ®åº“ä¸­\r\u0026gt; use admin\rswitched to db admin\r\u0026gt; db.createUser({user:\u0026quot;root\u0026quot;, pwd:\u0026quot;mypassword\u0026quot;, roles:[\u0026quot;root\u0026quot;] })\rSuccessfully added user: { \u0026quot;user\u0026quot; : \u0026quot;root\u0026quot;, \u0026quot;roles\u0026quot; : [ \u0026quot;root\u0026quot; ] }\r ç¼–è¾‘ mongodb.conf ä½¿ç™»å½•éœ€è¦éªŒè¯èº«ä»½ï¼š\nvi /etc/mongod.conf\r ä¿®æ”¹å¦‚ä¸‹å†…å®¹ï¼š\n...\r...\r# è§£é™¤æ³¨é‡Š\rsecurity:\r# æ–°å¢è¿™ä¸€è¡Œ\rauthorization: \u0026quot;enabled\u0026quot; # disable or enabled\r...\r...\r é‡å¯ä¸‹æ•°æ®åº“ï¼š\nsudo service mongod restart   å¦‚æœä½ æƒ³éªŒè¯æ˜¯å¦å·²ç»å¼€å¯äº†å¯†ç éªŒè¯ï¼Œé¦–å…ˆ mongo è¿›å…¥æ•°æ®åº“ï¼Œæ¥ç€ï¼š\n# åˆ‡æ¢åˆ° admin æ•°æ®åº“\r\u0026gt; use admin\rswitched to db admin\r# æ–°å»º test_collection é›†åˆ\r\u0026gt; db.createCollection(\u0026quot;test_collection\u0026quot;)\r# å› ä¸ºæ²¡æœ‰è®¤è¯æ‰€ä»¥å¤±è´¥\r{\r\u0026quot;ok\u0026quot; : 0,\r\u0026quot;errmsg\u0026quot; : \u0026quot;command create requires authentication\u0026quot;,\r\u0026quot;code\u0026quot; : 13,\r\u0026quot;codeName\u0026quot; : \u0026quot;Unauthorized\u0026quot;\r}\r# ç™»å½•\r\u0026gt; db.auth(\u0026quot;root\u0026quot;, \u0026quot;mypassword\u0026quot;)\r1\r\u0026gt; db.createCollection(\u0026quot;test_collection\u0026quot;)\r# è¿™æ¬¡åˆ›å»º test_collection é›†åˆå°±æˆåŠŸäº†\r{ \u0026quot;ok\u0026quot; : 1 }\r  å…³äº MongoDB è¯¦ç»†çš„æƒé™ç®¡ç†å¯ä»¥å‚è€ƒæˆ‘çš„è¿™ç¯‡æ–‡ç« ï¼šMongoDB å­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰ MongoDB æƒé™ç®¡ç†åŠå®è·µ\n5ã€é…ç½®è¿œç¨‹è®¿é—®\nç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š\nvi /etc/mongod.conf\r é»˜è®¤ bindIp ä¸º 127.0.0.1ï¼Œå³åªå…è®¸æœ¬åœ°è¿æ¥ï¼Œä¿®æ”¹ä¸º 0.0.0.0 å³å¯ï¼š\n...\r...\r# network interfaces\rnet:\rport: 27017\rbindIp: 0.0.0.0 # Enter 0.0.0.0,:: to bind to all IPv4 and IPv6 addresses or, alternatively, use the net.bindIpAll setting.\r...\r...\r ä¹‹åé‡å¯æ•°æ®åº“ï¼š\nsudo service mongod restart  åˆ«å¿˜äº†å¼€å‘é˜²ç«å¢™å’Œäº‘æœåŠ¡å™¨å‚å•†å®‰å…¨ç»„ã€‚\n è¿œç¨‹è¿æ¥æ–¹æ³•ï¼š\nmongo $mongodb_host:27017/$database -u $username -p $password\r  æœ¬ç« ç»“æŸã€‚\n","id":16,"section":"posts","summary":"åœ¨å’Œèˆå‹äº¤æµä¹‹åæ‰å‘ç°æ‹¿ JSONB å­˜å‚¨å†å²ä»·æ ¼ä¿¡æ¯çš„æˆ‘å¯èƒ½æ˜¯ä¸ªå¤©æ‰å§\u0026hellip;\u0026hellip; å›å»æ£€æŸ¥äº†ä¸€ä¸‹ PostgreSQL ä¸­çš„å¯¹åº”å­—æ®µï¼Œæœç„¶è¾¾åˆ°äº† 65535 å­—èŠ‚çš„","tags":["MongoDB"],"title":"MongoDB å­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰ CentOS7 ä¸‹å®‰è£… MongoDB","uri":"https://senjianlu.com/2021/10/mongodb-note-01/","year":"2021"},{"content":"Clash çš„ä¼˜ç‚¹å¤ªå¤šäº†ä¸èµ˜è¿°äº†ï¼Œæˆ‘é€‰æ‹©å®ƒçš„ç†ç”±æ˜¯ OpenWrt çš„ Clash æ’ä»¶å¯ä»¥åœ¨è½¯è·¯ç”±å±‚é¢å°†æµé‡åˆ†æµåˆ°ä¸åŒèŠ‚ç‚¹ï¼Œæ¯”å¦‚è¯´ï¼šYouTube ä½¿ç”¨é¦™æ¸¯èŠ‚ç‚¹ã€Netflix èµ°æ—¥æœ¬èŠ‚ç‚¹åŒæ—¶è°·æ­Œå­¦æœ¯ä½¿ç”¨è‡ªå»ºèŠ‚ç‚¹ï¼Œè¿™å¯ä»¥å¸®åŠ©æˆ‘å¤§å¹…åº¦é™ä½å»¶è¿Ÿå’Œå¢å¼ºè‡ªå»ºèŠ‚ç‚¹å¯ç”¨æ€§ï¼ˆä¸ä¼šå› ä¸ºä½¿ç”¨å¤§é‡æµé‡è€Œè¢«ä¾¦æµ‹åˆ°ï¼‰ã€‚\n æœ¬ç« å†…å®¹å’Œæ ‡é¢˜æè¿°çš„ä¸€æ ·ï¼Œä¼šå°½é‡å¸®åŠ©ä½ äº†è§£é…ç½®æ–‡ä»¶å„é¡¹åœ¨ Clash å®é™…ä½¿ç”¨ä¸­çš„ç”¨å¤„ï¼Œæœ€åä¹Ÿä¼šä»é›¶ä¹¦å†™ä¸€ä¸ªè‡ªå·±çš„é…ç½®æ–‡ä»¶ã€‚\næˆ‘ä¼šæ¨èåœ¨å¼€å§‹é˜…è¯»ä¹‹å‰å…ˆçœ‹å®Œè¿™ä¸ªå¾ˆæ£’çš„ä»‹ç» Clash é…ç½®çš„è§†é¢‘ï¼šClash é…ç½®æ–‡ä»¶è¯¦è§£ï¼Œçœ‹å®Œä½ è‡ªå·±ä¹Ÿå¯ä»¥å†™è§„åˆ™\n1ã€é…ç½®æ–‡ä»¶å„é¡¹çš„ç”¨å¤„\nä¸€ä¸ªé…ç½®æ–‡ä»¶æœ€ç®€å•çš„æ¨¡æ¿ï¼š\n# HTTP åè®®ä»£ç†æ‰€åœ¨ç«¯å£\rport: 7890\r# SOCKS5 åè®®ä»£ç†æ‰€åœ¨ç«¯å£\rsocks-port: 7891\r# å…è®¸å±€åŸŸç½‘å†…å…¶ä»–è®¾å¤‡è¿æ¥ä»¥ä¸Š 2 ä¸ªä»£ç†ç«¯å£\rallow-lan: true\r# è§„åˆ™æ¨¡å¼ï¼ˆå¯é€‰ï¼šå…¨å±€ã€è§„åˆ™å’Œç›´è¿ 3 ç§æ¨¡å¼ï¼‰\rmode: Rule\r# æ—¥å¿—çº§åˆ«\rlog-level: info\r# RESTful é£æ ¼çš„æ§åˆ¶ API æœåŠ¡åœ°å€ï¼ˆä½ å¯ä»¥è‡ªå·±å†™ç¨‹åºè°ƒç”¨æ¥å£ä»¥åˆ‡æ¢ä»£ç†èŠ‚ç‚¹ç­‰ï¼‰\rexternal-controller: 0.0.0.0:9090\r# ä»£ç†èŠ‚ç‚¹æ± \rproxies:\r- {name: è‡ªå»ºèŠ‚ç‚¹ 1, type: ss, server: proxy.example.com, port: 12345, cipher: aes-256-cfb, password: mypassword }\r# ä»£ç†èŠ‚ç‚¹ç»„\rproxy-groups:\r# type: select æ„ä¸ºç€è¿™ä¸ªèŠ‚ç‚¹ç»„å†…çš„èŠ‚ç‚¹éœ€è¦ä½ æ‰‹åŠ¨é€‰æ‹©åˆ‡æ¢\r- name: ä½¿ç”¨ä»£ç†çš„ç»„å\rtype: select\rproxies:\r- è‡ªå»ºèŠ‚ç‚¹ 1\r# ä¸ä½¿ç”¨ä»£ç†ç›´è¿\r- name: ç›´è¿çš„ç»„å\rtype: select\rproxies:\r# DIRECT æ„ä¸ºç›´è¿\r- DIRECT\r# è§„åˆ™ï¼Œâ€œè§„åˆ™æ¨¡å¼â€ä¸‹éœ€è¦é…ç½®ï¼Œä½ è®¾å¤‡æ¯ä¸€æ¬¡å‘é€çš„è¯·æ±‚éƒ½ä¼šç»ç”±è¯¥è§„åˆ™åˆ—è¡¨ç”±ä¸Šè‡³ä¸‹ç­›é€‰\r# æ ¼å¼ä¸ºï¼š- $åŒ¹é…æ¨¡å¼,$åŒ¹é…å‚æ•°,$ä»£ç†èŠ‚ç‚¹ç»„\rrules:\r- DOMAIN-SUFFIX,google.com,ä½¿ç”¨ä»£ç†çš„ç»„å\r- GEOIP,CN,ç›´è¿çš„ç»„å\r- MATCH,ä½¿ç”¨ä»£ç†çš„ç»„å\r  éƒ¨åˆ†é…ç½®é€‰é¡¹è§£é‡Šï¼ˆå„ç§åè®®çš„èŠ‚ç‚¹é…ç½®ä¸åœ¨è¿™ç« è§£é‡Šï¼‰ï¼š\nproxy-groups ä¸­å„ç»„ type å¯é€‰ï¼šselectã€url-test å’Œ fallback ç­‰ã€‚\næ³¨ï¼šfallback å’Œ url-test éƒ½ä¸ºæµ‹é€Ÿå¹¶è‡ªåŠ¨é€‰æ‹©èŠ‚ç‚¹ï¼Œfallback éœ€è¦äº‹å‰é…ç½®å¥½åŸŸåæœåŠ¡å™¨ä»¥é˜²æ­¢ DNS æ±¡æŸ“ç­‰é€ æˆçš„æµ‹é€Ÿå¤±è´¥ã€‚\nrules ä¸­å„è§„åˆ™åŒ¹é…æ¨¡å¼å¯é€‰ï¼šDOMAINã€DOMAIN-KEYWORDã€DOMAIN-SUFFIXã€GEOIP å’Œ MATCH ç­‰ï¼Œå…·ä½“åŠŸèƒ½å¯ä»¥å‚ç…§ä¸‹è¡¨ï¼š\n   åŒ¹é…è§„åˆ™ åŠŸèƒ½     DOMAIN è¡¨ç¤ºåŒ…å«å®Œæ•´çš„åŸŸå   DOMAIN-SUFFIX è¡¨ç¤ºåŒ…å«ä»€ä¹ˆåç¼€çš„åŸŸå   DOMAIN-KEYWORD è¡¨ç¤ºåŒ…å« xxxåŸŸåå…³é”®å­—çš„é“¾æ¥   IP-CIDR IPV4 åŒ¹é…   IP-CIDR6 IPV6 åŒ¹é…   PROCESS-NAME è¡¨ç¤ºè¿›ç¨‹åç§°   GEOIP æ•°æ®åº“ï¼ˆå›½å®¶ä»£ç ï¼‰åŒ¹é…   MATCH å…¨åŒ¹é…ï¼ˆä¸€èˆ¬æ”¾åœ¨æœ€åï¼‰     å½“å¯åŠ¨äº† Clash å¹¶è½½å…¥äº†ä»¥ä¸Šçš„é…ç½®æ–‡ä»¶ï¼Œä½ å°è¯•è®¿é—® Googleï¼ŒèŠ‚ç‚¹é…ç½®æ— è¯¯çš„æƒ…å†µä¸‹ä½ ä¼šæƒŠå–œçš„å‘ç°è¿æ¥ä¸Šäº†ï¼Œé‚£ä¹ˆå®ƒæ˜¯æ€ä¹ˆå·¥ä½œçš„å‘¢ï¼Ÿ\né¦–å…ˆå› ä¸ºæ˜¯ Rule è§„åˆ™æ¨¡å¼ï¼Œç›®æ ‡åŸŸåä¸º www.google.com çš„è¯·æ±‚æ²¡æœ‰ç®¡èŠ‚ç‚¹å’ŒèŠ‚ç‚¹ç»„ï¼Œç›´å¥” rules è§„åˆ™ç»„æŸ¥æ‰¾æœ‰æ²¡æœ‰è‡ªèº«åŒ¹é…çš„\u0026hellip;\u0026hellip;\nä¼¼ä¹æ˜¯æœ‰çš„ï¼å°±åœ¨ç¬¬ä¸€æ¡ï¼Œwww.google.com çš„åŸŸååç¼€æ˜¯ google.comï¼ŒåŒ¹é…ä¸Šäº†ï¼ç„¶åçœ‹çœ‹è¿™æ¡è§„åˆ™å¯¹åº”çš„ä»£ç†ç»„ï¼Œâ€œä½¿ç”¨ä»£ç†çš„ç»„åâ€ï¼Œè¿›å…¥ï¼Œä»£ç†ç»„å†…çš„é€‰æ‹©æ¨¡å¼ä¸ºæ‰‹åŠ¨é€‰æ‹©\u0026hellip;\u0026hellip;å½“å‰è¢«é€‰ä¸Šçš„ä»£ç†æ˜¯ï¼šâ€œè‡ªå»ºèŠ‚ç‚¹ 1â€ï¼Œé‚£å°±ä½¿ç”¨å®ƒè¿›è¡Œè®¿é—®\u0026hellip;\u0026hellip;æˆåŠŸï¼\næ˜¯ä¸æ˜¯å¾ˆç®€å•ï¼Œæ¥ç€ä½ æœ‰å°è¯•è®¿é—® ip.cn æƒ³æŸ¥è¯ä¸‹æœ¬æœºçš„ IP æœ‰æ²¡æœ‰å˜\u0026hellip;\u0026hellip;æ²¡å˜ï¼Ÿï¼å› ä¸º ip.cn æ‰€åœ¨çš„æœåŠ¡å™¨æ˜¯å¤§é™† IP çš„ï¼ŒåŒ¹é…ä¸Šäº†ç¬¬äºŒæ¡è§„åˆ™ï¼Œäºæ˜¯è¿›äº†ç›´è¿ä»£ç†ç»„ï¼Œæ¥ç€è¿›è¡Œè®¿é—®è€Œæ²¡æœ‰ä½¿ç”¨ä»£ç†ã€‚\né‚£ä¹ˆï¼ŒYouTube å‘¢ï¼Œå½“ç„¶æ˜¯å¯ä»¥çš„ï¼æ‰€æœ‰åŸŸåè§£æçš„ IP å¦‚æœä¸åœ¨å¤§é™†éƒ½ä¼šè¢«æŒ‡å‘ç¬¬ä¸‰æ¡è§„åˆ™ã€‚\nå¾ˆç®€å•å¯¹å—ï¼Œæ¥è¯•è¯•åŠ ç‚¹éš¾åº¦ï¼Œç†è§£ä¸€ä¸‹ä¸‹é¢çš„é…ç½®ä¸­å„é¡¹çš„åŠŸèƒ½ğŸ˜€\n2ã€ç¼–å†™ç¬¬ä¸€ä¸ªé…ç½®æ–‡ä»¶\nåœ¨ç®€å•æ¨¡æ¿çš„åŸºç¡€ä¸Šç¨åŠ æ›´æ”¹ï¼Œæ·»åŠ ä»¥ä¸‹åŠŸèƒ½ï¼š\n å¢åŠ åŸºç¡€é…ç½®ä»¥ç»™ OpenWrt è½¯è·¯ç”±ç³»ç»Ÿä¸Šçš„ Clash æ’ä»¶ä½¿ç”¨ã€‚ ä»£ç†èŠ‚ç‚¹ç»„åŒºåˆ†ä¸º 5 ä¸ªï¼šè‡ªå»ºèŠ‚ç‚¹ã€æ²¹ç®¡ç”¨ã€å¥ˆé£ç”¨ã€ä¸ä½¿ç”¨ä»£ç†ç›´è¿å’Œä½¿ç”¨ä»£ç†ã€‚ è§„åˆ™å¤„æ–°å¢ Google å­¦æœ¯åŸŸåçš„åŒ¹é…ã€YouTube åŸŸåçš„åŒ¹é…ã€Netflix åŸŸåçš„åŒ¹é…å’ŒåŸŸåæ‰€åœ¨ IP çš„åŒ¹é…ã€‚  port: 7890\rsocks-port: 7891\rredir-port: 7892\rmixed-port: 7893\ripv6: false\rallow-lan: true\rmode: Rule\rlog-level: info\rexternal-controller: 0.0.0.0:9090\r# ====== è·¯ç”±å™¨æ’ä»¶ä½¿ç”¨æ‰€éœ€è¦å¢åŠ çš„åŸºç¡€é…ç½® ======\r# ç»‘å®šå†…ç½‘çš„ IP åœ°å€ï¼Œæˆ‘è¿™é‡Œä¸ç»‘å®šäº†ï¼Œå› ä¸ºå°±æ˜¯ OpenWrt åœ°å€åŠ  9090 ç«¯å£è®¿é—®\rbind-address: \u0026quot;*\u0026quot;\r# Clash é¢æ¿å¯†ç \rsecret: \u0026quot;123456\u0026quot;\r# Clash é¢æ¿å‰ç«¯ UI æ ·å¼\rexternal-ui: \u0026quot;./dashboard\u0026quot;\r# ====== ***************** ======\rproxies:\r- {name: è‡ªå»ºèŠ‚ç‚¹ï¼ˆGoogle å­¦æœ¯ç”¨ï¼‰, type: ss, server: proxy.example.com, port: 12345, cipher: aes-256-cfb, password: mypassword }\r- {name: æœºåœºé¦™æ¸¯èŠ‚ç‚¹ 1...... }\r- {name: æœºåœºé¦™æ¸¯èŠ‚ç‚¹ 2...... }\r- {name: æœºåœºå¥ˆé£èŠ‚ç‚¹...... }\r- {name: æœºåœºèŠ‚ç‚¹æ™®é€šèŠ‚ç‚¹ 1...... }\r- {name: æœºåœºèŠ‚ç‚¹æ™®é€šèŠ‚ç‚¹ 2...... }\r- {name: æœºåœºèŠ‚ç‚¹æ™®é€šèŠ‚ç‚¹ 3...... }\r- {name: æœºåœºèŠ‚ç‚¹æ™®é€šèŠ‚ç‚¹ 4...... }\rproxy-groups:\r# Google å­¦æœ¯ç»„\r- name: è‡ªå»ºèŠ‚ç‚¹\rtype: select\rproxies:\r- è‡ªå»ºèŠ‚ç‚¹ï¼ˆGoogle å­¦æœ¯ç”¨ï¼‰\r# type: url-test å’Œå…¶ä¸‹é¢çš„ urlã€interval å‚æ•°å…±åŒå®Œæˆï¼šæ­¤ç»„ä¸‹èŠ‚ç‚¹æ¯ 300 æ¯«ç§’å‘ http://www.gstatic.com/generate_204c å‘é€ä¸€æ¬¡è¯·æ±‚å¹¶è‡ªåŠ¨é€‰æ‹©å»¶è¿Ÿæœ€ä½çš„èŠ‚ç‚¹è¿™ä¸€åŠŸèƒ½\r- name: æ²¹ç®¡ç”¨\rtype: url-test\rurl: http://www.gstatic.com/generate_204c\rproxies:\r- æœºåœºé¦™æ¸¯èŠ‚ç‚¹ 1\r- æœºåœºé¦™æ¸¯èŠ‚ç‚¹ 2\r# å¥ˆé£ç»„\r- name: å¥ˆé£ç”¨\rtype: select\rproxies:\r- æœºåœºå¥ˆé£èŠ‚ç‚¹\r# ç›´è¿ç»„\r- name: ä¸ä½¿ç”¨ä»£ç†ç›´è¿\rtype: select\rproxies:\r- DIRECT\r# å…¶ä»–æ‰€æœ‰è®¿é—®èµ°è¯¥ä»£ç†ç»„\r- name: å…¶ä»–æ‰€æœ‰è®¿é—®èµ°è¯¥ä»£ç†ç»„\rtype: select\rproxies:\r- æœºåœºèŠ‚ç‚¹æ™®é€šèŠ‚ç‚¹ 1\r- æœºåœºèŠ‚ç‚¹æ™®é€šèŠ‚ç‚¹ 2\r- æœºåœºèŠ‚ç‚¹æ™®é€šèŠ‚ç‚¹ 3\r- æœºåœºèŠ‚ç‚¹æ™®é€šèŠ‚ç‚¹ 4\r# è§„åˆ™\rrules:\r- DOMAIN-SUFFIX,scholar.google.com,è‡ªå»ºèŠ‚ç‚¹\r- DOMAIN-SUFFIX,scholar.google.com.hk,è‡ªå»ºèŠ‚ç‚¹\r- DOMAIN-SUFFIX,youtube.com,æ²¹ç®¡ç”¨\r- DOMAIN-SUFFIX,netflix.com,å¥ˆé£ç”¨\r- GEOIP,CN,ä¸ä½¿ç”¨ä»£ç†ç›´è¿\r- MATCH,å…¶ä»–æ‰€æœ‰è®¿é—®èµ°è¯¥ä»£ç†ç»„\r ç»“æŸã€‚\n","id":17,"section":"posts","summary":"Clash çš„ä¼˜ç‚¹å¤ªå¤šäº†ä¸èµ˜è¿°äº†ï¼Œæˆ‘é€‰æ‹©å®ƒçš„ç†ç”±æ˜¯ OpenWrt çš„ Clash æ’ä»¶å¯ä»¥åœ¨è½¯è·¯ç”±å±‚é¢å°†æµé‡åˆ†æµåˆ°ä¸åŒèŠ‚ç‚¹ï¼Œæ¯”å¦‚è¯´ï¼šYouTube ä½¿ç”¨é¦™æ¸¯èŠ‚ç‚¹ã€Netflix èµ°","tags":["Clash"],"title":"Clash å­¦ä¹ ï¼ˆä¸€ï¼‰é…ç½®æ–‡ä»¶å„é¡¹åœ¨å®é™…ä½¿ç”¨ä¸­çš„ç”¨å¤„å’Œåˆ›å»ºè‡ªå·±çš„ç¬¬ä¸€ä¸ªé…ç½®æ–‡ä»¶","uri":"https://senjianlu.com/2021/10/clash-note-01/","year":"2021"},{"content":"å®‰è£…ä¸ª Shadowsocks ç»™æ–°ä¹°çš„éš§é“ç”¨ã€‚\n 1ã€é…ç½® repo ä»“åº“ç»™åé¢ YUM å®‰è£…ä½¿ç”¨\næ³¨ï¼šåŸä»“åº“å·²ç»åˆ é™¤ï¼Œç°åœ¨åªå‰©å¤‡ä»½ä»“åº“ï¼Œä½¿ç”¨çš„ repo æºæ˜¯å¤‡ç”¨ä»“åº“ä¸­ README.md ä¸­è®°è½½çš„ï¼Œåº”è¯¥æ˜¯å¯ä¿¡çš„ï¼Œå¹¶ä¸”æˆ‘å‚è€ƒå¤§é‡çš„æ•™ç¨‹ä¹Ÿå‡ä½¿ç”¨çš„æ˜¯è¿™ä¸ªåœ°å€ï¼Œå¦‚æœä½ è¿˜æ˜¯ä¸æ”¾å¿ƒè¯·åœ¨ä»£ç†ä¸“ç”¨æœåŠ¡å™¨ä¸Šå®‰è£…ã€‚\ncd /etc/yum.repos.d/\r# é…ç½® repo ä»“åº“\rcurl -O https://copr.fedorainfracloud.org/coprs/librehat/shadowsocks/repo/epel-7/librehat-shadowsocks-epel-7.repo\r 2ã€YUM å®‰è£…\næ‰§è¡Œï¼š\nyum install -y shadowsocks-libev\r æµ‹è¯•ä¸‹æ˜¯å¦å®‰è£…æˆåŠŸï¼š\nss-server\r 3ã€é…ç½®\né»˜è®¤é…ç½®è·¯å¾„ä¸ºï¼š/etc/shadowsocks-libev/config.json\nvi /etc/shadowsocks-libev/config.json\r é»˜è®¤çš„é…ç½®å¦‚ä¸‹ï¼š\n{\r\u0026quot;server\u0026quot;:\u0026quot;127.0.0.1\u0026quot;,\r\u0026quot;server_port\u0026quot;:8388,\r\u0026quot;local_port\u0026quot;:1080,\r\u0026quot;password\u0026quot;:\u0026quot;mypassword\u0026quot;,\r\u0026quot;timeout\u0026quot;:60,\r\u0026quot;method\u0026quot;:\u0026quot;chacha20-ietf-poly1305\u0026quot;\r}\r å‚æ•°çš„è§£é‡Šï¼ˆè¿æ¥ç”¨çš„å®¢æˆ·ç«¯ç®€ç§°ä¸ºå°é£æœºï¼‰ï¼š    å‚æ•° è§£é‡Š æ ·ä¾‹ æ•ˆæœ     server å’Œ Nginx çš„ server å·®ä¸å¤šï¼Œè§£ææ¥è‡ªæŒ‡å®š IP æˆ–åŸŸåçš„æµé‡ã€‚ example.com åªè§£ææ¥è‡ª example.com çš„æµé‡ï¼Œè¿æ¥æ—¶å°é£æœºä¹Ÿé…ç½®åŒæ ·çš„åŸŸåã€‚   server_port æœåŠ¡ç«¯å¯åŠ¨åœ¨çš„å“ªä¸ªç«¯å£ã€‚ 18388 å°é£æœºé…ç½®è¿æ¥æœ¬æœåŠ¡å™¨æ—¶çš„ç«¯å£ã€‚   local_port å®¢æˆ·ç«¯è¿æ¥ç”¨çš„ç«¯å£ã€‚ 1080 æœåŠ¡å¯åŠ¨åœ¨æœ¬åœ°çš„ 1080 ç«¯å£ä¸Šï¼Œä¸è¿æ¥ä¿¡æ¯æ— å…³ã€‚   password å®¢æˆ·ç«¯è¿æ¥ç”¨çš„ç«¯å£ã€‚ mypassword å°é£æœºé…ç½®è¿æ¥æœ¬æœåŠ¡å™¨æ—¶éœ€è¦ä½¿ç”¨çš„å¯†ç ã€‚   timeout è¿æ¥è¶…æ—¶æ—¶é—´ã€‚ 60    method åŠ å¯†æ–¹å¼ aes-256-cfb å°é£æœºé…ç½®è¿æ¥æœ¬æœåŠ¡å™¨æ—¶éœ€è¦ä½¿ç”¨çš„åŠ å¯†æ–¹å¼ã€‚     åŠ å¯†æ–¹å¼å¯é€‰ï¼šrc4ã€rc4-md5ã€aes-128-cfbã€aes-192-cfbã€aes-256-cfbã€bf-cfbã€camellia-128-cfbã€camellia-192-cfbã€camellia-256-cfbã€cast5-cfb å’Œ des-cfbï¼Œæ¨èé€‰æ‹©æœ€å¸¸ç”¨çš„ aes-256-cfb ä»¥å…é€ æˆå®¢æˆ·ç«¯ä¸æ”¯æŒéƒ¨åˆ†åŠ å¯†æ–¹å¼çš„å°´å°¬æƒ…å†µã€‚\n æˆ‘ä¿®æ”¹åçš„é…ç½®ï¼š\n{\r// 0.0.0.0 å³æ¥å—æ‰€æœ‰æ¥æºçš„è¯·æ±‚ï¼Œå¦‚æœé…ç½®åŸŸåçš„è¯ä½ éœ€è¦å…ˆå°†åŸŸåè§£æåˆ°æ­¤æœåŠ¡å™¨ï¼Œé˜²æ­¢å‡ºç° failed to resolve server name çš„é”™è¯¯ã€‚\r\u0026quot;server\u0026quot;:\u0026quot;0.0.0.0\u0026quot;,\r\u0026quot;server_port\u0026quot;:18388,\r\u0026quot;local_port\u0026quot;:1080,\r\u0026quot;password\u0026quot;:\u0026quot;mypassword\u0026quot;,\r\u0026quot;timeout\u0026quot;:60,\r\u0026quot;method\u0026quot;:\u0026quot;aes-256-cfb\u0026quot;\r}\r 5ã€å¼€æ”¾é˜²ç«å¢™å’Œå®‰å…¨ç»„\nä¸èµ˜è¿°æµç¨‹ä½†æ˜¯ä¸è¦å¿˜è®°æœ‰è¿™ä¸€æ­¥ã€‚\n æˆ‘çš„ Linux åŸºç¡€æŒ‡ä»¤ç¬”è®°ä¸­ä¹Ÿæœ‰ï¼šLinux å‘½ä»¤ï¼ˆ1ï¼‰é˜²ç«å¢™ç«¯å£å¼€å¯å…³é—­\n 6ã€å¯åŠ¨æœåŠ¡\nå¯åŠ¨å’Œå…¶ä»–çš„å¸¸ç”¨æŒ‡ä»¤ä¸€èµ·å†™ä¸Šï¼š\n# å¯åŠ¨ Shadowsocks æœåŠ¡\rsystemctl start shadowsocks-libev\r# æ£€æŸ¥æœåŠ¡çŠ¶æ€\rsystemctl status shadowsocks-libev\r# æœåŠ¡å¼€æœºè‡ªå¯\rsystemctl enable shadowsocks-libev\r# æŸ¥çœ‹ Shadowsocks æœåŠ¡çš„å…¨éƒ¨æ—¥å¿—\rjournalctl -u shadowsocks-libev\r å¯åŠ¨å®ŒçŠ¶æ€åº”è¯¥æ˜¯ active çš„ï¼š\n7ã€å®¢æˆ·ç«¯æµ‹è¯•è¿æ¥\nä¸€èˆ¬æƒ…å†µä¸‹ä½ ä»¬éƒ½æ˜¯åœ¨ Windows æˆ–æ˜¯æ‰‹æœºç«¯è¿›è¡Œæµ‹è¯•è¿æ¥ï¼Œè¿™ç§æƒ…å†µæˆ‘å°±ä¸æ©é¥°äº†æ‰‹å¤´æ²¡æœ‰é—²ç½®æœºå™¨ã€‚\næˆ‘è¿™é‡ŒæŒ‘ä¸€å°ç©ºé—²çš„ CentOS7 æœºå™¨å®‰è£… Shadowsocks å®¢æˆ·ç«¯ï¼ˆè¯´æ˜¯å®¢æˆ·ç«¯ï¼Œå…¶å® Shadowsocks æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯æ˜¯ä¸€ä½“çš„ï¼‰æ¥æµ‹è¯•åˆšåˆšé…ç½®çš„æœåŠ¡ç«¯èƒ½å¦æ­£å¸¸ä½¿ç”¨ï¼š\n# CentOS7 ä¸‹ä¸€é”®å®‰è£… Shadowsocks å®¢æˆ·ç«¯\rcurl -s https://gitee.com/senjianlu/one-click-scripts/raw/main/CentOS7%20%E4%B8%8B%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%20Shadowsocks%20%E5%AE%A2%E6%88%B7%E7%AB%AF/install.sh | bash\r ç„¶åé…ç½®ä¸‹å®¢æˆ·ç«¯è¿æ¥ä¿¡æ¯ï¼ˆä½ç½®å’ŒæœåŠ¡ç«¯éƒ½ä¸€æ ·çš„ï¼‰ï¼š\nvi /etc/shadowsocks-libev/config.json\r é…ç½®æ–‡ä»¶åªå°† server æ”¹ä¸ºæœåŠ¡ç«¯çš„ IP æˆ–ç»‘å®šåŸŸåå³å¯ï¼Œå…¶ä»–ä¸åŠ¨ï¼š\n{\r\u0026quot;server\u0026quot;:\u0026quot;188.188.18.99\u0026quot;,\r\u0026quot;server_port\u0026quot;:18388,\r// å®¢æˆ·ç«¯çš„æœ¬åœ°ç«¯å£å°±åœ¨åç»­çš„è®¿é—®ä¸Šç”¨åˆ°äº†\r\u0026quot;local_port\u0026quot;:1080,\r\u0026quot;password\u0026quot;:\u0026quot;mypassword\u0026quot;,\r\u0026quot;timeout\u0026quot;:60,\r\u0026quot;method\u0026quot;:\u0026quot;aes-256-cfb\u0026quot;\r}\r æ”¹ä¸ºä½¿ç”¨ ss-local æ¥å¯åŠ¨å®¢æˆ·ç«¯ï¼š\n# å¯åŠ¨ååœ¨åå°è¿è¡Œ\rnohup /usr/bin/ss-local -c /etc/shadowsocks-libev/config.json \u0026gt;/dev/null 2\u0026gt;\u0026amp;1 \u0026amp;\r æµ‹è¯•è®¿é—®ä¸€ä¸‹ï¼š\n# è®¿é—® IP ä¿¡æ¯è·å–æ¥å£ï¼Œ1080 ä¸ºå®¢æˆ·ç«¯æ‰€åœ¨ç«¯å£\rcurl -x socks5://127.0.0.1:1080 http://ip-api.com/json/?lang=zh-CN\r {\u0026quot;status\u0026quot;:\u0026quot;success\u0026quot;,\u0026quot;country\u0026quot;:\u0026quot;æ—¥æœ¬\u0026quot;,\u0026quot;countryCode\u0026quot;:\u0026quot;JP\u0026quot;,\u0026quot;region\u0026quot;:\u0026quot;xx\u0026quot;,\u0026quot;regionName\u0026quot;:\u0026quot;Tokyo\u0026quot;,\u0026quot;city\u0026quot;:\u0026quot;ä¸œäº¬\u0026quot;,\u0026quot;zip\u0026quot;:\u0026quot;xxx-xxxx\u0026quot;,\u0026quot;lat\u0026quot;:xx.xxxx,\u0026quot;lon\u0026quot;:xxx.xxx,\u0026quot;timezone\u0026quot;:\u0026quot;Asia/Tokyo\u0026quot;,\u0026quot;isp\u0026quot;:\u0026quot;xxxxxx\u0026quot;,\u0026quot;org\u0026quot;:\u0026quot;xxxxxx\u0026quot;,\u0026quot;as\u0026quot;:\u0026quot;xxxxxxx\u0026quot;,\u0026quot;query\u0026quot;:\u0026quot;188.188.18.99\u0026quot;}\r IP å¯¹ä¸Šäº†ï¼Œè¯´æ˜é…ç½®æ²¡é”™ï¼\nç»“æŸã€‚\n","id":18,"section":"posts","summary":"å®‰è£…ä¸ª Shadowsocks ç»™æ–°ä¹°çš„éš§é“ç”¨ã€‚ 1ã€é…ç½® repo ä»“åº“ç»™åé¢ YUM å®‰è£…ä½¿ç”¨ æ³¨ï¼šåŸä»“åº“å·²ç»åˆ é™¤ï¼Œç°åœ¨åªå‰©å¤‡ä»½ä»“åº“ï¼Œä½¿ç”¨çš„ repo æºæ˜¯å¤‡ç”¨ä»“åº“ä¸­ README.md ä¸­è®°è½½çš„ï¼Œåº”è¯¥æ˜¯å¯ä¿¡çš„ï¼Œ","tags":["Linux"],"title":"CentOS7 ä¸‹å®‰è£… Shadowsocks æœåŠ¡ç«¯","uri":"https://senjianlu.com/2021/10/centos7-shadowsocks-server/","year":"2021"},{"content":"è¿™åº”è¯¥ä¹Ÿç®—å­¦ä¹ ç¬”è®°å§\u0026hellip;\u0026hellip;\n 1ã€ä¿¡ä»»æ‰€æœ‰çš„æœ¬åœ°è¿æ¥\nä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š\nvi /var/lib/pgsql/12/data/pg_hba.conf\r ä» md5 çš„è®¤è¯æ–¹å¼æ”¹ä¸º trust\n...\r...\r# \u0026quot;local\u0026quot; is for Unix domain socket connections only\rlocal all all trust\r# IPv4 local connections:\rhost all all 127.0.0.1/32 trust\r...\r...\r  å¦‚æœä½ æ›´æ”¹è¿‡ PostgreSQL æ•°æ®åº“çš„ç«¯å£çš„è¯ï¼Œä¹Ÿéœ€è¦æ”¹å›åˆ° 5432ï¼Œå¦åˆ™ç›´æ¥è®¿é—®ä¼šæ˜¾ç¤ºè®¤è¯å¤±è´¥ï¼špsql: error: FATAL: Ident authentication failed for user \u0026ldquo;postgres\u0026rdquo;\nvi /var/lib/pgsql/12/data/postgresql.conf\r æ”¹å› 5432 ç«¯å£ï¼š\nport = 5432 # (change requires restart)\r  ä¹‹åé‡å¯æ•°æ®åº“ï¼š\nsudo systemctl restart postgresql-12\r 2ã€åˆ‡æ¢è‡³ postgres ç”¨æˆ·å¹¶è¿æ¥æ•°æ®åº“\nåˆ‡æ¢ç”¨æˆ·ï¼š\nsu - postgres\r è¿æ¥æ•°æ®åº“ï¼š\n-bash-4.2$ psql\r 3ã€ä¿®æ”¹å¯†ç \nALTER USER postgres WITH PASSWORD 'newpassword';\r 4ã€æ¢å¤åŸé…ç½®å¹¶é‡å¯\næ¢å¤ä¹‹å‰çš„é…ç½®åè¿›è¡Œé‡å¯ï¼š\nsudo systemctl restart postgresql-12\r ç»“æŸã€‚\n","id":19,"section":"posts","summary":"è¿™åº”è¯¥ä¹Ÿç®—å­¦ä¹ ç¬”è®°å§\u0026hellip;\u0026hellip; 1ã€ä¿¡ä»»æ‰€æœ‰çš„æœ¬åœ°è¿æ¥ ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š vi /var/lib/pgsql/12/data/pg_hba.conf ä» md5 çš„è®¤è¯æ–¹å¼æ”¹ä¸º trust ... ... # \u0026quot;local\u0026quot; is for Unix domain socket connections only local all all","tags":["PostgreSQL"],"title":"PostgreSQL å­¦ä¹ ç¬”è®°ï¼ˆäº”ï¼‰æ‰¾å›è¢«é—å¿˜çš„ postgres å¯†ç ","uri":"https://senjianlu.com/2021/10/postgresql-note-05/","year":"2021"},{"content":"è¿™é‡Œæ’ä»¶çš„ç¼–è¯‘è¿˜æ˜¯ä»¥ Clash ä¸ºä¾‹ï¼Œå®˜æ–¹ç‰ˆæœ¬ä¸º v1.7.5.7ï¼Œä½†å®é™…ä¸Šå·²ç»èƒ½ç¼–è¯‘å‡ºæ›´æ–°çš„ç‰ˆæœ¬ï¼Œå½“å‰è¿™é‡Œçš„ç¼–è¯‘è¯·ä¸»è¦å‚è€ƒæµç¨‹ï¼Œæ’ä»¶é™¤éæ˜¯å› ä¸º OpenWrt ç³»ç»Ÿæ›´æ–°å·²ç»åˆ°äº†ä¸èƒ½ç”¨çš„ç¨‹åº¦ï¼Œå¦åˆ™æ˜¯æ²¡æœ‰å¿…è¦æ‰‹åŠ¨å»ç¼–è¯‘çš„ã€‚\nä¸€èˆ¬æƒ…å†µä¸‹ç¼–è¯‘éƒ½æ˜¯ç®€å•é¡ºåˆ©çš„ï¼Œä½†æ˜¯ä½ ä»ç„¶è¦æŠ±æœ‰å‡ºé”™å¹¶é è‡ªå·±è§£å†³çš„è§‰æ‚Ÿï¼Œæ–°ç‰¹æ€§å’Œç³»ç»Ÿç¨³å®šæ€»æ˜¯å¾ˆéš¾å…¼å¾—ã€‚\n å®˜æ–¹æ–‡æ¡£ï¼šcompile\nä»–è¿™é‡Œç”¨åˆ°äº† OpenWrt çš„ SDK è¿›è¡Œç¼–è¯‘ï¼Œå®é™…ä¸Šæˆ‘ä»¬å¹¶ä¸éœ€è¦è¿™ä¹ˆåšï¼Œå› ä¸ºæˆ‘ä»¬æœ‰ OpenWrt çš„æºç ï¼Œå› æ­¤åªéœ€è¦ä½¿ç”¨ OpenWrt çš„æºç è¿›è¡Œç¼–è¯‘å°±è¡Œäº†ï¼Œæ³¨æ„è¿™é‡Œçš„ç¼–è¯‘å¹¶ä¸æ˜¯æŒ‡å°†æ’ä»¶ç›´æ¥ç¼–è¯‘åˆ°å®Œæ•´çš„ OpenWrt ç³»ç»Ÿå†…ï¼Œè€Œæ˜¯ä½¿ç”¨ OpenWrt çš„æºç å•ç‹¬ç¼–è¯‘ä¸€ä¸ª .ipk çš„æ’ä»¶å®‰è£…æ–‡ä»¶å‡ºæ¥ã€‚\n1ã€ä¸‹è½½æ’ä»¶æºç \nä»¥ luci-app-clash ä¸ºä¾‹ï¼Œå…‹éš†ä»£ç ï¼š\n# è¿›å…¥ lede æ–‡ä»¶å¤¹\rcd lede\r# å…‹éš†åˆ° package ç›®å½•ä¸‹\rgit clone https://github.com/frainzy1477/luci-app-clash.git package/luci-app-clash\r 2ã€è®¾ç½®ç¼–è¯‘æ¨¡å¼\næ‰§è¡Œï¼š\nmake menuconfig\r æˆ‘çš„æ’ä»¶æ˜¯ luci-app-clashï¼Œå±äº LuCI ç›®å½•ï¼Œè§†æƒ…å†µé€‰æ‹©ï¼š\nç¬¬äºŒä¸ªé€‰é¡¹å°±æ˜¯ï¼ˆè¿™é‡Œè¦å‚ç…§ä½ è‡ªå·±æ’ä»¶çš„ç›®å½•å±‚çº§å…³ç³»ï¼Œå¯èƒ½è¦å†è¿›ä¸€å±‚åˆ° Applications ä¸­å»ï¼‰ï¼š\nè¿™é‡Œåªç¼–è¯‘è¿™ä¸ªæ’ä»¶ï¼Œé€‰ M ç¼–è¯‘æ¨¡å¼ï¼ˆY æ¨¡å¼ä¸ºç¼–è¯‘è¿›ç³»ç»Ÿï¼ŒN ä¸ºå»é™¤è¿™ä¸ªæ’ä»¶ï¼‰ï¼š\nä¹‹åä¿å­˜é€€å‡ºã€‚\n3ã€è·Ÿéšæ’ä»¶å®˜æ–¹æ–‡æ¡£é…ç½®ç¼–è¯‘ç¯å¢ƒ\næ¯ä¸ªæ’ä»¶æ‰€éœ€çš„ç¯å¢ƒéƒ½ä¸ä¸€æ ·ï¼Œæ¯”å¦‚è¯´è¿™æ¬¡ç¼–è¯‘çš„ Clashï¼Œå®˜æ–¹æ–‡æ¡£æåˆ°äº†è¦å®‰è£… po2lmo ä»¥æ”¯æŒä¸­æ–‡è¯­è¨€ï¼Œç…§åšå³å¯ï¼š\næ³¨ï¼šæˆ‘å·²ç»äº‹å…ˆç¼–è¯‘è¿‡ä¸€æ¬¡äº†ï¼Œæ‰€ä»¥è¾“å‡ºå¯èƒ½å’Œä½ ç¬¬ä¸€æ¬¡æ‰§è¡Œæœ‰äº›ä¸ä¸€æ ·ã€‚ 4ã€å¼€å§‹ç¼–è¯‘æ’ä»¶\næ‰§è¡Œï¼š\nmake package/luci-app-clash/compile V=99\r å¤šçº¿ç¨‹è€Œä¸”åªç¼–è¯‘ä¸€ä¸ªæ’ä»¶æ˜¯å¾ˆå¿«çš„ï¼Œæ£€æŸ¥ä¸‹è¾“å‡ºçœ‹ä¸‹æ’ä»¶å®‰è£…æ–‡ä»¶æ‰€åœ¨ä½ç½®ï¼š\nå€’æ•°ç¬¬å››è¡Œï¼Œå†™ç€æ–‡ä»¶è¢«æ‰“åŒ…åœ¨äº†å“ªé‡Œï¼š\n...\r...\rPackaged contents of /home/rabbir/lede/build_dir/target-x86_64_musl/luci-app-clash-v1.8.0/ipkg-all/luci-app-clash into /home/rabbir/lede/bin/packages/x86_64/base/luci-app-clash_v1.8.0_all.ipk\r...\r...\r ç›´æ¥å‰å»è·å–å³å¯ï¼š\nå®‰è£…è¿‡ç¨‹ä¸æ¼”ç¤ºäº†ï¼Œå®é™…ä¸Šæˆ‘ä¹Ÿå¹¶æœªå®‰è£…ï¼Œå› ä¸ºæ—§ç‰ˆæœ¬æ˜¯å¯ç”¨çš„æ²¡æœ‰å¿…è¦ï¼Œå¹¶ä¸”æˆ‘æ— æ³•ç¡®å®š 1.0 ç‰ˆæœ¬çš„ Clash å†…æ ¸èƒ½å¦å’Œå½“å‰ v1.8.0 çš„ Clash æ’ä»¶é€‚é…ã€‚\nç»“æŸã€‚\n","id":20,"section":"posts","summary":"è¿™é‡Œæ’ä»¶çš„ç¼–è¯‘è¿˜æ˜¯ä»¥ Clash ä¸ºä¾‹ï¼Œå®˜æ–¹ç‰ˆæœ¬ä¸º v1.7.5.7ï¼Œä½†å®é™…ä¸Šå·²ç»èƒ½ç¼–è¯‘å‡ºæ›´æ–°çš„ç‰ˆæœ¬ï¼Œå½“å‰è¿™é‡Œçš„ç¼–è¯‘è¯·ä¸»è¦å‚è€ƒæµç¨‹ï¼Œæ’ä»¶é™¤éæ˜¯å› ä¸º OpenWrt ç³»ç»Ÿæ›´","tags":["ç¡¬ä»¶","Clash"],"title":"å®šåˆ¶ OpenWrt è½¯è·¯ç”±ç³»ç»Ÿï¼ˆä¸‰ï¼‰ç¼–è¯‘é€‚ç”¨äºè‡ªå·± OpenWrt è½¯è·¯ç”±ç³»ç»Ÿçš„ Clash æ’ä»¶","uri":"https://senjianlu.com/2021/10/openwrt-note-03/","year":"2021"},{"content":"è¢«è‡ªå·±å†™çš„ç¬¬ä¸€ç¯‡æ•™ç¨‹æ¶å¿ƒåˆ°äº†\u0026hellip;\u0026hellip;\né‡æ–°ç¡®å®šä¸‹æ‹“æ‰‘ï¼Œé»‘ç¾¤æ™–ç³»ç»Ÿä¸åŠ¨ï¼Œå°†å…¶ä»–ä¸¤ä¸ªè½¯è·¯ç”±é‡æ–°éƒ¨ç½²ä¸‹ã€‚\n é¦–é€‰è¯´æ˜å‡ ä¸ªé‡è¦çš„ IP åœ°å€ï¼š    ç³»ç»Ÿ IP     PVE 10.10.10.254   çˆ±å¿« 10.10.10.253   LEDEï¼ˆå·²åºŸå¼ƒï¼‰ 10.10.10.252   OpenWrt 10.10.10.250     PVE çš„é…ç½®\n1ã€ä¸»æœºç½‘ç»œçš„é…ç½®\næŸ¥çœ‹æ–¹å¼ï¼š\nvi /etc/network/interfaces\r vmbr0 å¯¹åº”çš„å°±æ˜¯æ¿è½½ç½‘å£ã€‚\naddress é…ç½®äº† PVE çš„ IPï¼Œäºæ˜¯å°±æˆäº† PVE ç®¡ç†é¢æ¿çš„ä¸“å±ç½‘å£ï¼Œè¿æ¥å…¶ä»–ç½‘å£æ˜¯æ— æ³•è®¿é—® PVE çš„ç®¡ç†é¢æ¿çš„ã€‚\nnetmask å­ç½‘æ©ç ä¸ç”¨å¤šè¯´äº†ï¼Œç…§ç€å¡«å°±è¡Œäº†ã€‚\ngateway ç½‘å…³ä¸ºä½ çˆ±å¿«æ‰€åœ¨çš„ IP åœ°å€ã€‚\næ³¨ï¼šå³ä½¿é…ç½®äº†ç½‘å…³ç°åœ¨ PVE ä¹Ÿæ˜¯æ— æ³•è¿æ¥å¤–ç½‘çš„ï¼Œè€ƒè™‘åˆ°æ²¡æœ‰éœ€æ±‚æˆ‘ä¹Ÿæ²¡å†æŠ˜è…¾ã€‚\n2ã€ç®¡ç†é¢æ¿çš„é…ç½®\nç½‘æ¡¥å’Œç½‘å£ä¸€ä¸€é…å¯¹ï¼ŒPVE ç®¡ç†å£é…ç½® CIDR å’Œç½‘å…³ã€‚\nåˆ°è¿™æ‹“æ‰‘å°±ä¸€å®šè¦ç¡®å®šäº†ï¼Œç»“åˆæˆ‘ä¸Šé¢çš„æ‹“æ‰‘ä¹Ÿèƒ½çŸ¥é“æˆ‘å°† PVE çš„ç®¡ç†å£ vmbr0 åŒæ—¶è®¾å®šä¸ºçˆ±å¿«ä¸»è·¯ç”±å’Œ OpenWrt æ—è·¯ç”±çš„è¿æ¥å£ï¼Œè€Œ vmbr4 åˆ™ä½œä¸º WAN å£æ¥å…¥å…¥ç½‘çº¿ã€‚\n çˆ±å¿«çš„é…ç½®\n1ã€ç®¡ç†é¢æ¿çš„é…ç½®\nnet0 ä½œä¸ºå’Œ OpenWrt è¿æ¥çš„ç½‘å£ï¼Œnet1 ä½œä¸º WAN å£ã€‚\n2ã€çˆ±å¿«å†…éƒ¨é…ç½®\né»˜è®¤å°±é…ç½®å¥½äº†çš„ LAN å£ï¼ˆæ¯”å¯¹ MAC åœ°å€å‘ç°å°±æ˜¯ä¸Šé¢çš„ net0ï¼‰ï¼š\néœ€è¦è‡ªå·±é…ç½®çš„ WAN å£ï¼Œåªéœ€è¦é…ç½®ç»‘å®šå‰©ä¸‹çš„ WAN å£å¹¶æ‹¨å·å³å¯ï¼š\nDHCP æœåŠ¡ç«¯ï¼Œè¿™é‡ŒæŠŠç½‘å…³é…ç½®ä¸º OpenWrt åœ°å€å³å¯ï¼š\n OpenWrt çš„é…ç½®\n1ã€ç®¡ç†é¢æ¿çš„é…ç½®\né™¤äº†é‚£ä¸ª WAN å£ï¼ˆvmbr4ï¼‰å…¶ä»–éƒ½é…ç½®ä¸Šã€‚\n2ã€OpenWrt å†…éƒ¨é…ç½®\nåªä¿ç•™ LAN å£é…ç½®ï¼š\nLAN å£å†…çš„åŸºæœ¬è®¾ç½®ä¸­ï¼Œå°†ç½‘å…³æŒ‡å›ç»™çˆ±å¿«ï¼š\nç‰©ç†è®¾å¤‡ä¸­å‹¾é€‰æ‰€æœ‰ç½‘å£ï¼š\nç»“æŸã€‚\n","id":21,"section":"posts","summary":"è¢«è‡ªå·±å†™çš„ç¬¬ä¸€ç¯‡æ•™ç¨‹æ¶å¿ƒåˆ°äº†\u0026hellip;\u0026hellip; é‡æ–°ç¡®å®šä¸‹æ‹“æ‰‘ï¼Œé»‘ç¾¤æ™–ç³»ç»Ÿä¸åŠ¨ï¼Œå°†å…¶ä»–ä¸¤ä¸ªè½¯è·¯ç”±é‡æ–°éƒ¨ç½²ä¸‹ã€‚ é¦–é€‰è¯´æ˜å‡ ä¸ªé‡è¦çš„ IP","tags":["ç¡¬ä»¶"],"title":"PVE ä¸‹ OpenWrt çº¯å‡€ç³»ç»Ÿ + çˆ±å¿«åŒè½¯è·¯ç”±éƒ¨ç½²é…ç½®æ–‡ä»¶çš„æ•´ç†","uri":"https://senjianlu.com/2021/10/pve-openwrt-ikuai/","year":"2021"},{"content":"é¦–å…ˆæ˜ç¡®éœ€è¦ï¼Œå½“å‰æˆ‘åªéœ€è¦ Clash ä¸€ä¸ªæ’ä»¶ï¼Œå¹¶ä¸”å®˜æ–¹æ–‡æ¡£æ˜¯ä¼˜å…ˆç”¨ opkg å‘½ä»¤åœ¨ OpenWrt ç³»ç»Ÿä¸‹å®‰è£…çš„ï¼Œå› æ­¤å†³å®šé¦–å…ˆåœ¨ç¼–è¯‘å‰çš„é…ç½®æ–‡ä»¶ç”Ÿæˆæ­¥éª¤æŠŠä¸éœ€è¦çš„æ’ä»¶ï¼ˆç»„ä»¶ï¼‰éƒ½å–æ¶ˆå‹¾é€‰ã€é‡æ–°ç¼–è¯‘å‡ºå¹²å‡€çš„ç³»ç»Ÿï¼Œå†è¿›è¡Œ Clash çš„å®‰è£…ã€‚\n é¡ºå¸¦è´´ä¸€ä¸‹ Clash å’Œ OpenClash è¿™ä¸¤ä¸ªæ’ä»¶çš„åŒºåˆ«ï¼ˆæ¥æºäºæ‚Ÿç©ºçš„ YouTube è§†é¢‘ï¼‰ï¼š è¿™é‡Œæˆ‘çš„æœºåœºä¸»è¦éƒ½æ˜¯ SSR åè®®ï¼Œå› æ­¤å¿…é¡»é€‰æ‹© clashr çš„å†…æ ¸ï¼ˆç›®å‰ clashr å†…æ ¸å·²ç»åˆå¹¶åˆ°äº† clash å†…æ ¸å†…ï¼‰ï¼Œè€Œèƒ½æ›´æ”¹å†…æ ¸çš„ Clash è·¯ç”±å™¨æ’ä»¶ä¹Ÿåªæœ‰ Clash è¿™ä¸ªç‰ˆæœ¬çš„äº†ã€‚\n  1ã€é¦–å…ˆé‡æ–°é…ç½®è½¯è·¯ç”±ç³»ç»Ÿé•œåƒå†…çš„æ’ä»¶\n# æ¸…ç©ºä¹‹å‰çš„é…ç½®\rrm -rf ./tmp \u0026amp;\u0026amp; rm -rf .config\r# ç”Ÿæˆé…ç½®æ–‡ä»¶\rmake menuconfig\r å¯¹ç…§ç€é¡µé¢ä¸Šçš„æ’ä»¶æŒ‰é’®å’Œå·¦ä¸‹è§’çš„é“¾æ¥ï¼Œåœ¨ LuCI â†’ Applications å†…å°†ä¸éœ€è¦çš„æ’ä»¶ä¸€ä¸ªä¸ªåˆ é™¤ï¼š\nå«Œéº»çƒ¦çš„è¯å¯ä»¥ç›´æ¥å‚ç…§ä¸‹æ–¹åˆ—è¡¨è¿›è¡Œåˆ é™¤ï¼š\n# æœåŠ¡ â†’ ä¸Šç½‘æ—¶é—´æ§åˆ¶\rluci-app-accesscontrol\r# æœåŠ¡ â†’ å¹¿å‘Šå±è”½å¤§å¸ˆ Plus+\rluci-app-adbyby-plus\r# æœåŠ¡ â†’ åŠ¨æ€ DNS\rluci-app-ddns\r# ç½‘ç»œå­˜å‚¨ â†’ qBittorrent\rluci-app-qbittorrent\r# æœåŠ¡ â†’ è§£é”ç½‘æ˜“äº‘ç°è‰²æ­Œæ›²\rluci-app-unblockmusic\r# æœåŠ¡ â†’ UPnP\rluci-app-upnp\r# æœåŠ¡ â†’ UU æ¸¸æˆåŠ é€Ÿå™¨\rluci-app-uugamebooster\r# æœåŠ¡ â†’ KMS æœåŠ¡å™¨\rluci-app-vlmcsd\r# æœåŠ¡ â†’ ç½‘ç»œå”¤é†’\rluci-app-wol\r# æœåŠ¡ â†’ è¿…é›·å¿«é¸Ÿ\rluci-app-xlnetacc\r ä¹‹åä¿å­˜é€€å‡ºã€‚\n2ã€äºŒæ¬¡ç¼–è¯‘\nç”±äºæˆ‘æ˜¯åœ¨ WSL2 ä¸‹è¿›è¡Œç¼–è¯‘çš„ï¼Œé˜²æ­¢å­˜åœ¨å¸¦ç©ºæ ¼çš„ Windows ç›®å½•è€Œå¯¼è‡´çš„ç¼–è¯‘å¤±è´¥ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š\nPATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin make -j$(($(nproc) + 1)) V=s\r 3ã€å®‰è£…æ–°ç¼–è¯‘åçš„ç³»ç»Ÿ\nå†™æˆä¸€ä¸ªæ–°çš„å¯åŠ¨ç›˜ disk-2ï¼š\n./img2kvm openwrt-x86-64-generic-squashfs-combined-efi.img 103 vm-103-disk-2\r ä¹‹åæ›´æ”¹è™šæ‹Ÿæœºçš„å¼•å¯¼é¡ºåºä¸ºä½¿ç”¨æ–°ç›˜å¯åŠ¨ï¼Œç„¶åå°†è½¯è·¯ç”±æ–­ç”µé‡å¯ã€‚\né‡å¯åä¿®æ”¹ä¸€ä¸‹ IP å’Œç”¨æˆ·å¯†ç ï¼Œç„¶åå†é‡å¯ï¼Œç»“æŸåå†è¿›å»é¡µé¢èœå•åº”è¯¥å°±ç›¸å½“å¹²å‡€äº†ã€‚\n4ã€é…ç½® OpenWrt ç³»ç»Ÿçš„ç½‘ç»œ\nè¿™ä¸€æ­¥ä»…ä¾›å‚è€ƒï¼Œç›®çš„æ˜¯ä¸ºäº†ä½¿è¿™ä¸ª OpenWrt ç³»ç»Ÿèƒ½è¿ä¸Šç½‘ä»¥ä¾¿è¿›è¡Œåç»­ opkg çš„å‡çº§å’Œæ’ä»¶å®‰è£…ï¼Œæ¯ä¸ªäººçš„ç½‘ç»œæ‹“è·‹ä¸ä¸€æ ·ï¼Œæˆ‘çš„å‰ç½®è·¯ç”±æ˜¯ç”¨ä»¥æ‹¨å·çš„çˆ±å¿«ï¼Œå› æ­¤åªéœ€è¦ä¿®æ”¹ä¸‹è¿™ä¸ª OpenWrt çš„ç½‘å…³å’Œ DNS å³å¯ï¼š\nå†å¼ºåˆ¶ DHCP åŠŸèƒ½ç”±å…¶æä¾›ï¼š\næˆåŠŸè”ç½‘ï¼š\n5ã€å®‰è£… Clash æ’ä»¶\nå°†luci-app-clash çš„.ipk å®‰è£…æ–‡ä»¶ä¸Šä¼ ï¼š\nç„¶åæ›´æ–°è½¯ä»¶åŒ…ä»¥æ–¹ä¾¿ Clash ä¸‹è½½ä¾èµ–ï¼Œç‚¹å‡»åˆ·æ–°åˆ—è¡¨ï¼š\n å¦‚æœå‡ºç°ä»¥ä¸‹é”™è¯¯\n...\r...\rDownloading https://mirrors.cloud.tencent.com/lede/releases/18.06.9/packages/x86_64/luci/Packages.sig\rSignature check failed.\rRemove wrong Signature file.\r...\r...\r åœ¨ OPKG é…ç½®å¤„ç”¨ # æ³¨é”€æ‰ option check_signature å³å¯ï¼š\n æ¥ç€æ‰§è¡Œå®‰è£…ï¼š\nçœ‹è§æ—¥å¿—æœ€åæœ‰ Configuring luci-app-clash. å°±è¯´æ˜å®‰è£…æˆåŠŸäº†ï¼Œå¦‚æœå¤±è´¥çš„è¯è¯·å¤šå°è¯•å‡ æ¬¡ï¼Œæˆ‘è‡³å°‘ä¹Ÿæ˜¯æ‰§è¡Œäº† 2 æ¬¡æ‰æˆåŠŸçš„ã€‚\n å½“å‰ä½ ä¹Ÿå¯ä»¥é€‰æ‹©ä½¿ç”¨å‘½ä»¤è¡Œæ‰§è¡Œå®‰è£…ï¼š\nmv /tmp/upload/luci-app-clash_v1.7.5.7_all.ipk /tmp\rcd /tmp\ropkg update\ropkg install luci-app-clash_v1.7.5.7_all.ipk\r# æ— è§†éƒ¨åˆ†æŠ¥è­¦å®‰è£…ï¼ˆæç«¯æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨ï¼Œèƒ½ç”¨æ­¤å‘½ä»¤å®‰è£…æˆåŠŸåŸºç¡€åŠŸèƒ½ä¹Ÿå°±èƒ½ä½¿ç”¨ï¼‰\ropkg install luci-app-clash_v1.7.5.7_all.ipk --force-depends\r  6ã€æµ‹è¯•ä½¿ç”¨\nä½¿ç”¨ä¹‹å‰è¿˜éœ€è¦é…ç½®ä¸‹å†…æ ¸ï¼Œå®‰è£…åŒ…å†…ä¸å¸¦å†…æ ¸éœ€è¦è‡ªè¡Œä¸‹è½½ï¼šhttps://github.com/frainzy1477/clash_dev/releases/tag/v1.1.0\nä¸‹è½½å®Œæˆä¹‹åä¸Šä¼ ï¼š\næ¥ç€ä»ä½ çš„æœºåœºå¤åˆ¶è®¢é˜…é“¾æ¥å¹¶ä¸‹è½½é…ç½®ï¼š\né€‰æ‹©å¹¶ä½¿ç”¨é…ç½®ï¼š\nå†å¯ç”¨å®¢æˆ·ç«¯ï¼š\næ­¤æ—¶å°±å·²ç»å®Œæˆäº† Clash çš„å¯åŠ¨äº†ï¼š  å¦‚æœä½ å‡ºç°å›½å†…ç½‘ç«™èƒ½å¤Ÿè®¿é—®ï¼Œä½†æ˜¯å›½å¤–ç½‘ç«™ä¸èƒ½è®¿é—®çš„æƒ…å†µï¼Œä½ åˆåŒæ—¶èƒ½ç¡®å®šçº¿è·¯æ²¡é—®é¢˜ï¼Œé‚£ä¹ˆè¯·å°è¯•æ›´æ”¹æœ¬æœºè·å– IP çš„æ–¹å¼ï¼Œä»å›ºå®š IP æ”¹ä¸º DHCP è·å–ï¼Œæˆ–è®¸èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ã€‚\n ç»“æŸã€‚\n","id":22,"section":"posts","summary":"é¦–å…ˆæ˜ç¡®éœ€è¦ï¼Œå½“å‰æˆ‘åªéœ€è¦ Clash ä¸€ä¸ªæ’ä»¶ï¼Œå¹¶ä¸”å®˜æ–¹æ–‡æ¡£æ˜¯ä¼˜å…ˆç”¨ opkg å‘½ä»¤åœ¨ OpenWrt ç³»ç»Ÿä¸‹å®‰è£…çš„ï¼Œå› æ­¤å†³å®šé¦–å…ˆåœ¨ç¼–è¯‘å‰çš„é…ç½®æ–‡ä»¶ç”Ÿæˆæ­¥éª¤æŠŠä¸éœ€è¦çš„æ’ä»¶ï¼ˆç»„ä»¶","tags":["ç¡¬ä»¶","Clash"],"title":"å®šåˆ¶ OpenWrt è½¯è·¯ç”±ç³»ç»Ÿï¼ˆäºŒï¼‰åˆ é™¤å¤šä½™æ’ä»¶å¹¶å®‰è£… Clash","uri":"https://senjianlu.com/2021/10/openwrt-note-02/","year":"2021"},{"content":"ç¬¬ä¸€æ¬¡å®Œå…¨æŒ‰ç…§è§†é¢‘æ•™ç¨‹è£…äº†çˆ±å¿«å’Œ LEDE åŒè½¯è·¯ç”±ç³»ç»Ÿï¼Œå½“æ—¶åªæ˜¯ä¸ºäº†å®ç°åŠŸèƒ½è€Œå®Œå…¨æ²¡æœ‰è€ƒè™‘å®‰å…¨æ€§å’Œæ•´ä¸ªç³»ç»Ÿæ˜¯å¦è¿‡äºè‡ƒè‚¿çš„é—®é¢˜ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨äº†è¿‘ 2 å¹´ä¹‹åï¼Œçœ‹äº†ä¸‹ LEDE é¡µé¢å®Œå…¨æ²¡æœ‰ç‚¹å¼€è¿‡çš„å¤§åŠèœå•é€‰é¡¹ï¼Œäºæ˜¯å†³å®šæ ¹æ®éœ€æ±‚å®šåˆ¶ä¸‹å±äºè‡ªå·±çš„ OpenWrt ç³»ç»Ÿå›ºä»¶ã€‚\nå¯¹äº OpenWrt ç³»ç»Ÿæˆ‘çš„éœ€æ±‚å°±ä¸¤ä¸ªï¼š1ã€å¹²å‡€æ•´æ´ï¼›2ã€å¯ä»¥å®ç°è·¯ç”±å™¨ç«¯çš„ç§‘å­¦ä¸Šç½‘ï¼Œè¿™é‡Œæˆ‘é€‰ç”¨çš„æ’ä»¶æ˜¯ Clashã€‚\nå°æä¸€å¥ï¼ŒLEDE æ˜¯ OpenWrt åœ¨ 2016 å¹´ 5 æœˆåè¢«æ–°å»ºçš„ä¸€æ¡åˆ†æ”¯ï¼Œä½†æ˜¯ç”±äºä¹‹å OpenWrt çš„å¤§é‡å¼€å‘äººå‘˜é€‰æ‹©å‚ä¸ LEDE é¡¹ç›®ï¼Œç»å†é•¿æ—¶é—´çš„ä¸¤è¾¹ç»´æŠ¤åï¼Œäº 2018 å¹´ 2 æœˆ LEDE åˆåˆå¹¶å›äº† OpenWrt çš„ä¸»åˆ†æ”¯å†…ï¼Œå› æ­¤ç°åœ¨ç¼–è¯‘ OpenWrt å³å¯ï¼Œä¸ç”¨å†å»ç®¡ LEDE äº†ã€‚\n æœ¬ç« ä¸»è¦å‚è€ƒæ•™æä¸ºï¼šæ‰“é€ ä¸€ä¸ªä¸“å±äºä½ çš„è½¯è·¯ç”±ç³»ç»Ÿï¼Œè®©å®ƒå¥½ç”¨åå€ï¼\n1ã€å®‰è£…ä¸€ä¸ª Ubuntu ç³»ç»Ÿ\næˆªè‡³ 2021-10-23 GitHub é¡¹ç›®çš„ README.md ä¸Šå·²ç»å¼€å§‹æ¨è Ubuntu 20.04 LTS x64 ç³»ç»Ÿï¼Œå› ä¸ºå‡çº§äº† Windows11 çš„å…³ç³»ï¼Œç›´æ¥ä½¿ç”¨ WSL2 å®‰è£…ä¸ª Linux è™šæ‹Ÿæœºå³å¯ã€‚\n å…³äºWindows 11 å¦‚ä½•å¼€å¯ WSL2 å¹¶å®‰è£… Linux å­ç³»ç»Ÿï¼Œç¨å¾®è®°å½•ä¸€ä¸‹ã€‚\n Win + X é”®æ‰“å¼€ Windos ç»ˆç«¯ï¼ˆç®¡ç†å‘˜ï¼‰å¹¶æ‰§è¡Œï¼š  # å¼€å¯ Linux å­ç³»ç»ŸåŠŸèƒ½\rdism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart\r# å¼€å¯è™šæ‹ŸæœºåŠŸèƒ½\rdism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart\r åœ¨å¾®è½¯å•†åº—æœç´¢å¹¶ä¸‹è½½ Ubuntu 20.04 TLS ç³»ç»Ÿï¼ˆå‘è¡Œç‰ˆå¯æ ¹æ®è‡ªå·±éœ€æ±‚æ›´æ¢ï¼‰ï¼š\n å®‰è£…ã€æ‰“å¼€ï¼Œç„¶åè®¾ç½®ç”¨æˆ·å¯†ç ï¼š\n è®¾ç½®ç£ç›˜æ˜ å°„ï¼ŒLinux å­ç³»ç»Ÿé»˜è®¤çš„è·¯å¾„å¦‚ä¸‹ï¼ˆç”¨æˆ·å’Œ Linux å‘è¡Œç‰ˆè‡ªè¡Œæ›¿æ¢ï¼‰ï¼š\næ³¨æ„ï¼šåœ¨è¿™ä¸ªç›®å½•ä¸‹ä½ ä¼šçœ‹åˆ°ä¸€ä¸ªç£ç›˜æ˜ å°„æ–‡ä»¶ï¼Œå› ä¸ºæ¶‰åŠåˆ°æ–‡ä»¶ç¼–ç æ ¼å¼çš„ä¸åŒï¼Œå®˜æ–¹æ˜¯ä¸æ¨èè·¨ç³»ç»Ÿåšæ–‡ä»¶ç®¡ç†çš„ï¼Œä½†å•çº¯çš„ä» Linux å­ç³»ç»Ÿä¸­æ‹·è´ç¼–è¯‘åçš„æ–‡ä»¶å‡ºæ¥æ˜¯æ²¡é—®é¢˜çš„ã€‚  C:\\Users\\$ç”¨æˆ·\\AppData\\Local\\Packages\\CanonicalGroupLimited.Ubuntu20.04onWindows_79rhkp1fndgsc\\LocalState\r  2ã€æ›´æ–°è½¯ä»¶æºå¹¶å®‰è£…ç¼–è¯‘æ‰€éœ€ä¾èµ–\néœ€è¦æ³¨æ„çš„æ˜¯éƒ¨åˆ†åŒ…å¢ƒå†…ä¸‹è½½é€Ÿåº¦ç¼“æ…¢ï¼Œè¿™ä¸€æ­¥æœ€å¥½åœ¨å…¨å±€ç§‘å­¦æƒ…å†µä¸‹æ‰§è¡Œã€‚\næ›´æ–°è½¯ä»¶æºï¼š\nsudo apt-get update\r å®‰è£…ç¼–è¯‘æ‰€éœ€ä¾èµ–ï¼š\nsudo apt-get -y install build-essential asciidoc binutils bzip2 gawk gettext git libncurses5-dev libz-dev patch python3 python2.7 unzip zlib1g-dev lib32gcc1 libc6-dev-i386 subversion flex uglifyjs git-core gcc-multilib p7zip p7zip-full msmtp libssl-dev texinfo libglib2.0-dev xmlto qemu-utils upx libelf-dev autoconf automake libtool autopoint device-tree-compiler g++-multilib antlr3 gperf wget curl swig rsync\r 3ã€å…‹éš†ä»£ç \ngit clone https://github.com/coolsnowwolf/lede\r 4ã€æ‰§è¡Œç¼–è¯‘å‰å‡†å¤‡å·¥ä½œ\nä¹Ÿéƒ½æ˜¯å®˜æ–¹æ–‡æ¡£çš„ä»£ç ï¼Œç›´æ¥æ‹·è´æ‰§è¡Œï¼š\ncd lede\r./scripts/feeds update -a\r./scripts/feeds install -a\r 5ã€æ¥ä¸‹æ¥é…ç½®è½¯è·¯ç”±ç³»ç»Ÿ\nè¿™ä¸€æ­¥æ˜¯è¾ƒä¸ºå…³é”®çš„ï¼Œç›´æ¥å†³å®šäº†ç¼–è¯‘å‡ºæ¥ç³»ç»Ÿçš„æ¶æ„å’Œé‡Œé¢æ‰€åŒ…å«çš„æ’ä»¶ï¼Œå› ä¸ºæ˜¯ç¬¬ä¸€ç« åªç¼–è¯‘ä¸€ä¸ªæœ€åŸºç¡€çš„è½¯è·¯ç”±ç³»ç»Ÿå›ºä»¶ï¼Œå› æ­¤ä¸ä¼šåŒ…å«æ’ä»¶ä¿¡æ¯å•å•åªåšæ¶æ„ä¸º x86 çš„é…ç½®ã€‚\næ‰§è¡Œï¼š\nmake menuconfig\r åˆ°å›¾å½¢åŒ–ç•Œé¢ï¼Œå‘ç°å‰ 3 é¡¹å·²ç»é…ç½®å¥½äº† x86_64 çš„æ¶æ„è®¾ç½®ï¼Œé‚£ä¹ˆå°±ä¸ç”¨åŠ¨äº†ï¼Œä¿å­˜é€€å‡ºå³å¯ã€‚\n6ã€ä¸‹è½½ dl åº“\nmake -j8 download V=s\r 7ã€æ‰“åŒ…ç¼–è¯‘\n-j1 å‚æ•°æ„ä¸ºå•çº¿ç¨‹ç¼–è¯‘ï¼Œå®˜æ–¹æ–‡æ¡£æ¨èç¬¬ä¸€æ¬¡ä½¿ç”¨å•çº¿ç¨‹ï¼Œä½†å…¶å®åç»­ç¼–è¯‘ä¸å†éœ€è¦ä¸‹å¾ˆå¤šåŒ…å› æ­¤é€Ÿåº¦ä¼šæå‡å¾ˆå¤šï¼Œç»§ç»­ä½¿ç”¨å•çº¿ç¨‹ä¹Ÿæ— å¦¨ã€‚\næ‰§è¡Œï¼š\nmake -j1 V=s\r  è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½ å’Œæˆ‘ä¸€æ ·ä½¿ç”¨çš„æ˜¯ WSL æˆ–è€… WSL2 è¿›è¡Œç¼–è¯‘ï¼Œç”±äºéƒ¨åˆ† PATH ä¸­è·¯å¾„åŒ…å«å¸¦ç©ºæ ¼çš„ Windows è·¯å¾„ï¼Œå¾ˆå¯èƒ½ä¼šå¯¼è‡´ç¼–è¯‘å¤±è´¥ï¼Œå› æ­¤è¯·æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š\nPATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin make -j1 V=s\r  æˆ‘çš„ CPU æ˜¯ 3700Xï¼Œè¿™ä¸€æ­¥çš„å•çº¿ç¨‹ç¼–è¯‘äº† 6 ä¸ªå°æ—¶å·¦å³ï¼Œæœ€åå¦‚ä¸‹å›¾æ˜¾ç¤ºå°±è¯´æ˜ç¼–è¯‘ç»“æŸäº†ï¼š\n8ã€æ‹·è´ç¼–è¯‘å®Œçš„å›ºä»¶\nWindow11 çš„ ESL2 ä¼šè‡ªåŠ¨ç”Ÿæˆç£ç›˜æ˜ å°„æ–¹ä¾¿è®¿é—®ï¼Œç›´æ¥è¿›å…¥å³å¯ã€‚\nè·¯å¾„å¦‚ä¸‹ï¼ˆç”¨æˆ·åè¯·è‡ªè¡Œæ›¿æ¢ï¼‰ï¼š\n\\\\wsl.localhost\\Ubuntu-20.04\\home\\$ç”¨æˆ·\\lede\\bin\\targets\\x86\\64\r é€‰ openwrt-x86-64-generic-squashfs-combined-efi.img å³å¯ï¼š\nå› ä¸ºæˆ‘çš„è½¯è·¯ç”±ç³»ç»Ÿæ˜¯è·‘åœ¨ PVE å¹³å°ä¸Šçš„ï¼Œå› æ­¤ä½¿ç”¨ Xftp ä¸Šä¼ ä¸‹å³å¯ï¼Œå› ä¸ºæ˜¯ .img æ–‡ä»¶ï¼Œè¿˜éœ€è¦åšä¸€æ¬¡ img2kvm ç›´æ¥å†™æˆå¯æŒ‚è½½ç¡¬ç›˜çš„æ“ä½œï¼Œç›´æ¥ä¸Šä¼ è‡³ /root ç›®å½•ä¸‹å³å¯ã€‚\n é™„å¸¦è¯´ä¸€å¥ï¼ŒPVE ä¸‹ç”¨ä»¥å­˜å‚¨ .iso æ–‡ä»¶çš„è·¯å¾„å¦‚ä¸‹ï¼š\n/var/lib/vz/template/iso/\r è¿™ä¸ªç›®å½•ä¸‹çš„æ“ä½œç³»ç»Ÿé•œåƒæ–‡ä»¶å¯ä»¥åœ¨ PVE æ§åˆ¶é¢æ¿æ–°å»ºè™šæ‹Ÿæœºæ—¶ç›´æ¥è¿›è¡Œé€‰æ‹©ã€‚\n 9ã€æµ‹è¯•å®‰è£…\nå…ˆåœ¨ PVE ç«¯åˆ›å»ºä¸ªæ“ä½œç³»ç»Ÿä¸ä½¿ç”¨ä»»ä½•ä»‹è´¨ã€å…ˆä¸é…ç½®ä»»ä½•ç½‘ç»œè®¾å¤‡çš„ç©ºè™šæ‹Ÿæœºï¼š\nå†ä½¿ç”¨ img2kvm å·¥å…·å°†ç¼–è¯‘åçš„ç³»ç»Ÿé•œåƒå†™æˆå¯æŒ‚è½½ç¡¬ç›˜ï¼š\n./img2kvm openwrt-x86-64-generic-squashfs-combined-efi.img 103 vm-103-disk-1\r å†™å®Œä¹‹åä¼šçœ‹è§ä¸€ä¸ªæ–°ç›˜è¢«æŒ‚è½½åˆ°äº†è™šæ‹Ÿæœºï¼Œç›´æ¥æ·»åŠ ï¼Œç„¶ååœ¨é€‰é¡¹ â†’ å¼•å¯¼é¡ºåºä¸­æ›´æ”¹ä¸ºä»æ–°ç›˜å¯åŠ¨ï¼š\næ¥ç€å¯åŠ¨è™šæ‹Ÿæœºå¹¶åˆ‡æ¢è‡³æ§åˆ¶å°å‡†å¤‡æ›´æ”¹ç®¡ç†é¢æ¿ IPï¼ˆè¿™é‡Œå¯èƒ½éœ€è¦æŒ‰ä¸‹å›è½¦ï¼‰ï¼š\næ›´æ–°é…ç½®æ–‡ä»¶ï¼š\nvi /etc/config/network\r å°†ç¬¬ 15 è¡Œçš„ 192.168.1.1 æ›´æ”¹ä¸ºä½ éœ€è¦çš„ IP åœ°å€å³å¯ï¼š\nä¹‹åé‡å¯ã€‚\næœ€åçœ‹ä¸‹ä½ ä¹‹å‰ LEDE è½¯è·¯ç”±çš„ç½‘ç»œè®¾å¤‡æ˜¯ä»€ä¹ˆæ ·çš„é…ç½®ï¼ŒæŠ„ä¸€ä»½åœ¨ç¡¬ä»¶å¤„æ·»åŠ ï¼š\næ¥ç€é‡å¯å¹¶è®¿é—®é…ç½®äº†çš„ IP åœ°å€ï¼š\nè¿™é‡Œçš„å¯†ç éœ€è¦å»æ§åˆ¶å°é‡Œæ›´æ”¹ï¼š\npasswd root\r æ¥ç€ç™»å½•å³å¯ï¼š\nçœ‹åˆ°è¿˜æ˜¯æœ‰ä¸€äº›æ’ä»¶è¢«é»˜è®¤æ·»åŠ äº†ï¼Œä¸‹ä¸€ç« å¯¹æ’ä»¶çš„è‡ªå®šä¹‰ä¼šå°è¯•å»é™¤ã€‚\næœ¬ç« ç»“æŸã€‚\n","id":23,"section":"posts","summary":"ç¬¬ä¸€æ¬¡å®Œå…¨æŒ‰ç…§è§†é¢‘æ•™ç¨‹è£…äº†çˆ±å¿«å’Œ LEDE åŒè½¯è·¯ç”±ç³»ç»Ÿï¼Œå½“æ—¶åªæ˜¯ä¸ºäº†å®ç°åŠŸèƒ½è€Œå®Œå…¨æ²¡æœ‰è€ƒè™‘å®‰å…¨æ€§å’Œæ•´ä¸ªç³»ç»Ÿæ˜¯å¦è¿‡äºè‡ƒè‚¿çš„é—®é¢˜ï¼Œä½†æ˜¯åœ¨ä½¿ç”¨äº†è¿‘ 2 å¹´ä¹‹å","tags":["ç¡¬ä»¶"],"title":"å®šåˆ¶ OpenWrt è½¯è·¯ç”±ç³»ç»Ÿï¼ˆä¸€ï¼‰ä»æºç å¼€å§‹ç¼–è¯‘ç¬¬ä¸€ä¸ªç³»ç»Ÿå›ºä»¶","uri":"https://senjianlu.com/2021/10/openwrt-note-01/","year":"2021"},{"content":"é¦–å…ˆæ˜ç¡® Docker é•œåƒçš„æ„å»ºæµç¨‹ç”±é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ Dockerfile æ–‡ä»¶ç®¡ç†ï¼ŒGitHub Action è‡ªåŠ¨æ¨é€æµç¨‹åˆ™ç”±é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ .github/workflows/main.yaml æ–‡ä»¶æ§åˆ¶ã€‚\n ä»¥ rab_python_packages é¡¹ç›®ä¸ºä¾‹ï¼Œæ–‡ä»¶ç»“æ„ä¹Ÿå¯ç›´æ¥å‚è€ƒã€‚\n1ã€å»ºç«‹ Dockerfile æ–‡ä»¶\næ–‡ä»¶å†…å®¹ï¼š\n# åŸºç¡€é•œåƒç³»ç»Ÿç‰ˆæœ¬ä¸º CentOS:7\rFROM centos:7\r# ç»´æŠ¤è€…ä¿¡æ¯\rLABEL maintainer=\u0026quot;Rabbir admin@cs.cheap\u0026quot;\r# Docker å†…ç”¨æˆ·åˆ‡æ¢åˆ° root\rUSER root\r# è®¾ç½®æ—¶åŒºä¸ºä¸œå…«åŒº\rRUN echo \u0026quot;Asia/shanghai\u0026quot; \u0026gt; /etc/timezone\r# åœ¨åŸºç¡€é•œåƒå†…å®‰è£… Git å’Œ Python3\rWORKDIR /root\rRUN yum -y install git\rRUN curl -s https://gitee.com/senjianlu/one-click-scripts/raw/main/CentOS7%20%E4%B8%8B%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%20Python3%20%E7%8E%AF%E5%A2%83/install.sh | bash\r# åœ¨ /root/GitHub ç›®å½•ä¸‹å…‹éš† rab_python_packages é¡¹ç›®\rRUN mkdir /root/GitHub\rRUN mkdir /root/GitHub/rab_python_packages\rWORKDIR /root/GitHub/rab_python_packages\r# å°†å®¿ä¸»æœºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶æ‹·è´è‡³é•œåƒå†…çš„ /root/GitHub/rab_python_packages æ–‡ä»¶å¤¹ä¸­\rCOPY . .\r# é…ç½®ç¯å¢ƒ\rRUN python3 rab_env.py\rRUN python3 rab_env.py rab_chrome\r# åˆ é™¤æ— ç”¨æ–‡ä»¶\rRUN rm -r chromedriver_linux64.zip\rRUN rm -r google-chrome-stable_current_x86_64.rpm\r# å¯åŠ¨å®¹å™¨æ—¶ä¸æŒ‡å®šå‘½ä»¤åˆ™æ‰§è¡Œä»¥ä¸‹çš„é»˜è®¤å‘½ä»¤ï¼Œåªå–æœ€åä¸€è¡Œ CMD å‘½ä»¤ç”Ÿæ•ˆ\rCMD cd /root/GitHub/rab_python_packages \u0026amp;\u0026amp; python3 rab_logging.py\r 2ã€æµ‹è¯• Dockerfile\nåœ¨ Dockerfile åŒç›®å½•ä¸‹æ‰§è¡Œï¼š\n# é•œåƒåè‡ªè¡Œæ›¿æ¢\rdocker build -t rabbir/rab_python_packages:latest .\r 3ã€å»ºç«‹ GitHub Action æµç¨‹\nåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ–°å»º .github/workflows/ æ–‡ä»¶å¤¹å¹¶åˆ›å»º main.yaml æ–‡ä»¶ï¼š\nmkdir .github\rmkdir .github/workflows\rcd .github/workflows\rvi main.py\r æ–‡ä»¶å†…å®¹ï¼š\næ³¨ï¼šä»¥ä¸‹æ–‡ä»¶å¯ä»¥ç›´æ¥å¤åˆ¶ä½¿ç”¨ï¼Œåªéœ€è¦æ›´æ”¹å€’æ•°ç¬¬ 4 è¡Œçš„é•œåƒåå³å¯ã€‚\n# å°†é¡¹ç›®æ„å»ºé•œåƒå¹¶å‘å¸ƒè‡³ Docker Hub\rname: CI to Docker Hub\r# åœ¨ Push åˆ° main åˆ†æ”¯åå¯åŠ¨è¯¥æµç¨‹\ron:\rpush:\rbranches: [ main ]\rjobs:\rbuild:\rruns-on: ubuntu-latest\rsteps:\r# åœ¨ GitHub Action çš„æœåŠ¡å™¨ä¸Š Check Out æºç ï¼ˆæ•´ä½“æµç¨‹ç»“æŸåä¼šé‡ç½®æœåŠ¡å™¨ç¯å¢ƒå› æ­¤ä¸éœ€è¦æ‹…å¿ƒæ³„éœ²ï¼‰\r- name: Check Out Repo uses: actions/checkout@v2\r# ç™»å½•è‡³ Docker Hubï¼Œè´¦æˆ·å¯†ç éœ€è¦åœ¨ Settings -\u0026gt; Secrets ä¸­è®¾ç½®\r- name: Login to Docker Hub\ruses: docker/login-action@v1\rwith:\rusername: ${{ secrets.DOCKER_HUB_USERNAME }}\rpassword: ${{ secrets.DOCKER_HUB_ACCESS_TOKEN }}\r# è®¾ç½® Buildx ä¸ºæ„å»ºé•œåƒåšå‡†å¤‡\r- name: Set up Docker Buildx\rid: buildx\ruses: docker/setup-buildx-action@v1\r# æ„å»ºå¹¶å‘å¸ƒï¼ˆæ‰§è¡Œé¡¹ç›®è·¯å¾„ä¸‹çš„ Dockerfile æ–‡ä»¶ï¼‰\r- name: Build and push\rid: docker_build\ruses: docker/build-push-action@v2\rwith:\rcontext: ./\rfile: ./Dockerfile\rpush: true\rtags: ${{ secrets.DOCKER_HUB_USERNAME }}/rab_python_packages:latest\r# å®Œæˆ\r- name: Image digest\rrun: echo ${{ steps.docker_build.outputs.digest }}\r ç»“æŸã€‚\n","id":24,"section":"posts","summary":"é¦–å…ˆæ˜ç¡® Docker é•œåƒçš„æ„å»ºæµç¨‹ç”±é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ Dockerfile æ–‡ä»¶ç®¡ç†ï¼ŒGitHub Action è‡ªåŠ¨æ¨é€æµç¨‹åˆ™ç”±é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ .github/workflows/main.yaml æ–‡ä»¶æ§åˆ¶ã€‚ ä»¥ rab_python_packages é¡¹ç›®ä¸ºä¾‹ï¼Œæ–‡ä»¶ç»“æ„ä¹Ÿå¯ç›´æ¥å‚","tags":["Docker"],"title":"GitHub Action è‡ªåŠ¨æ„å»ºé¡¹ç›®å®¹å™¨é•œåƒå¹¶ Push åˆ°å®˜æ–¹ Docker Hub","uri":"https://senjianlu.com/2021/10/github-action-push-to-docker-hub/","year":"2021"},{"content":"è€ƒè™‘åˆ°ä¹‹åçš„é¡¹ç›®æœ‰æ—¥å¿—è®°å½•å’Œåˆ†æçš„åŠŸèƒ½éœ€æ±‚ï¼Œæå‰å‡†ä¸€ä¸‹ç”¨ä»¥æ—¥å¿—å­˜å‚¨çš„ PVï¼Œè™½ç„¶è¯´æŒ‚è½½åˆ°æœåŠ¡å™¨æœ¬åœ°è·¯å¾„ä¹Ÿå¯ä»¥ï¼Œä½†è¿™æ ·çš„è¯æœåŠ¡å™¨åˆ°æœŸæ—¶å°±ä¼šæœ‰ç‚¹éº»çƒ¦ï¼Œä¸å¦‚ç›´æ¥ä½¿ç”¨ COS åšå­˜å‚¨ï¼ŒåæœŸåªéœ€è¦åˆ‡æ¢æœåŠ¡å™¨æŒ‚è½½å³å¯ã€‚\n ç®€å•ä»‹ç» PV å’Œ PVCï¼šéœ€è¦ä¸€ä¸€å¯¹åº”ï¼Œå…·ä½“ä½¿ç”¨æ—¶çš„å…³ç³»å¯ä»¥å‚è€ƒä»¥ä¸‹å›¾ç‰‡ï¼š\n 1ã€å®‰è£…è…¾è®¯äº‘ COSFS å·¥å…·\nå®˜æ–¹æ–‡æ¡£ï¼šCOSFS å·¥å…·\næˆ‘è¿™é‡Œé€‰æ‹©äº† Rancher æ‰€åœ¨çš„æœåŠ¡å™¨è¿›è¡Œå®‰è£…å’Œåç»­æŒ‚è½½ï¼Œåªæ˜¯è€ƒè™‘åˆ°è¿™ä¸ªæœåŠ¡å™¨ä¼šæŒç»­ç»­è´¹ã€‚\nå®‰è£…ä¾èµ–ï¼š\nyum -y install libxml2-devel libcurl-devel\r ä¸‹è½½å®‰è£…åŒ…ï¼š\nwget https://github.com/tencentyun/cosfs/releases/download/v1.0.19/cosfs-1.0.19-centos7.0.x86_64.rpm\r å®‰è£…ï¼š\nrpm -ivh cosfs-1.0.19-centos7.0.x86_64.rpm --force\r 2ã€é…ç½®å¯†é’¥ç­‰ä¿¡æ¯å¹¶å°† COS ä½œä¸ºå­˜å‚¨ç›˜æŒ‚è½½æœåŠ¡å™¨ä¸Š\nåœ¨æœåŠ¡å™¨æ‰€åœ¨åŒåœ°åŸŸæ–°å»ºå­˜å‚¨æ¡¶ä»¥å®ç°å†…ç½‘è®¿é—®ï¼š\nè·å–è‡ªå·±çš„ API å¯†é’¥ï¼š\n æ³¨æ„ï¼šç”¨è¿™ä¸ª API å¯†é’¥å¯ä»¥è®¿é—®å’Œæ“ä½œä½ è´¦æˆ·å†…çš„æ‰€æœ‰èµ„æºï¼ŒåŒ…æ‹¬æœåŠ¡å™¨å’Œ CDN ç­‰ï¼Œå› æ­¤å¦‚æœä½ å¯¹å®‰å…¨æ€§æœ‰è¦æ±‚ï¼Œå¯ä»¥å‚ç…§ä»¥ä¸‹æ­¥éª¤ä¸€æ¥åˆ›å»ºåªæœ‰ COS æ“ä½œæƒé™çš„å¯†é’¥ã€‚\né€‰æ‹©ç”¨æˆ·åˆ—è¡¨å¹¶é€‰æ‹©æ–°å»ºç”¨æˆ·ï¼š é€‰æ‹©å¿«é€Ÿåˆ›å»ºä¹‹åï¼Œè¾“å…¥ç”¨æˆ·åå¹¶ä¿®æ”¹æƒé™ï¼š\nå–æ¶ˆç®¡ç†å‘˜æƒé™å¹¶æœç´¢ COS ç›¸å…³æƒé™ï¼š å‹¾é€‰å‰ 9 æ¡ COS ç›¸å…³æ“ä½œæƒé™ï¼š\nä¹‹åç‚¹å‡»åˆ›å»ºç”¨æˆ·å¹¶æ‰“å¼€ç”¨æˆ·è¯¦æƒ…é¡µé¢ï¼Œç‚¹å‡» API å¯†é’¥æ–°å»ºå³å¯ï¼š\n å¤åˆ¶å¯†é’¥å¹¶å†™å…¥é…ç½®æ–‡ä»¶ï¼š\næ³¨ï¼šå‚æ•°è‡ªè¡Œæ›¿æ¢ï¼Œç»™é…ç½®æ–‡ä»¶è®¾ç½® 640 æƒé™é˜²æ­¢å¯†é’¥æ³„éœ²ã€‚\necho $BucketName_APPID:$SecretId:$SecretKey \u0026gt; /etc/passwd-cosfs\rchmod 640 /etc/passwd-cosfs\r è¿è¡Œå·¥å…·ä»¥å°† COS å­˜å‚¨æ¡¶æŒ‚è½½ï¼š\næ³¨ï¼špath ä¸ºæœ¬åœ°è·¯å¾„ï¼ŒRegion å‚æ•°å¯ä»¥åœ¨ä½ çš„ COS å­˜å‚¨æ¡¶é¡µé¢è®¿é—®åŸŸåå¤„å–å¾—ã€‚\ncosfs $BucketName_APPID $path -ourl=http://cos.$Region.myqcloud.com -odbglevel=info -oallow_other\r æµ‹è¯•æ˜¯å¦æŒ‚è½½æˆåŠŸï¼š\nvi $path/test.txt\r ä¹‹åä¿å­˜ï¼Œç„¶åå»å­˜å‚¨æ¡¶æ–‡ä»¶åˆ—è¡¨ç•Œé¢æŸ¥çœ‹ï¼š æˆåŠŸã€‚\n3ã€å®‰è£…å¹¶é…ç½®æŒ‚è½½æ–‡ä»¶å¤¹çš„ NFS æœåŠ¡\nç»™æŒ‚è½½æ–‡ä»¶å¤¹æ‰€åœ¨çš„æœåŠ¡å™¨å’Œæ‰€æœ‰ K3s èŠ‚ç‚¹æœåŠ¡å™¨å®‰è£… NFSï¼ˆå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å‡éœ€è¦ï¼‰ï¼š\nyum -y install nfs-utils\r å¼€å§‹é…ç½®æœåŠ¡ç«¯ï¼Œæ¥ä¸‹æ¥çš„æ­¥éª¤åªéœ€è¦åœ¨æŒ‚è½½æ–‡ä»¶å¤¹æ‰€åœ¨çš„æœåŠ¡å™¨ä¸Šåšå³å¯ï¼Œå¯åŠ¨æœåŠ¡å¹¶è®¾ç½®ä¸ºå¼€å¯è‡ªå¯ï¼š\nsystemctl start rpcbind\rsystemctl start nfs\rsystemctl enable rpcbind\rsystemctl enable nfs\r é…ç½®å…±äº«ï¼š\n# è·¯å¾„å’Œå†…ç½‘ç½‘æ®µè‡ªè¡Œæ›¿æ¢\recho \u0026quot;$path 10.0.0.0/22(fsid=0,rw,sync,no_root_squash,no_all_squash)\u0026quot; \u0026gt; /etc/exports\r# é‡æ–°è½½å…¥é…ç½®æ–‡ä»¶\rexportfs -r\r# é‡å¯æœåŠ¡\rsystemctl restart nfs\r ä¹‹åæ£€æŸ¥ä¸€ä¸‹æœ¬åœ°çš„å…±äº«ç›®å½•ï¼š\nshowmount -e localhost\r æ— è¯¯ä¹‹åæ­¤æ­¥ç»“æŸã€‚\n4ã€Rancher ç•Œé¢æ–°å¢ PV å­˜å‚¨\næ³¨æ„ï¼šå› ä¸º PV å’Œ PVC æ˜¯ä¸€å¯¹ä¸€çš„å…³ç³»ï¼Œè€Œå®¹å™¨åœ¨é€‰æ‹© PVC ä½œä¸ºå­˜å‚¨è·¯å¾„æ—¶å€™å¯ä»¥é€‰æ‹© PVC ä¸‹çš„å­ç›®å½•ï¼Œå³æ”¯æŒ PVC å’Œå®¹å™¨ä¸€å¯¹å¤šï¼Œå› æ­¤è¿™é‡Œåˆ›å»ºä¸€ä¸ªè¾ƒå¤§çš„ PV ç»™å¤šä¸ªä¸­é—´ä»¶å®¹å™¨åŒæ—¶ä½¿ç”¨ï¼ˆåªæœ‰åŒå‘½åç©ºé—´ä¸‹çš„å®¹å™¨æ‰èƒ½ä½¿ç”¨è¯¥å‘½åç©ºé—´ä¸‹çš„ PVCï¼‰ï¼š\né€‰æ‹© NFS Share å’Œå¤šèŠ‚ç‚¹è¯»å†™ï¼Œè·¯å¾„ä¸ºä½ åˆšåˆšçš„æŒ‚è½½è·¯å¾„ï¼ŒIP åˆ™å¡«å†™å†…ç½‘ IPï¼š\nä¿å­˜ä¹‹åç¨ç­‰ç‰‡åˆ»å°±èƒ½çœ‹è§çŠ¶æ€å¯ç”¨ï¼š\nç„¶åå» K3s çš„ä»»æ„ server èŠ‚ç‚¹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ä¸‹æ˜¯å¦æ·»åŠ  PV æˆåŠŸï¼š\nkubectl get pv\r 5ã€æ–°å»º PVC\næ·»åŠ  PVCï¼š\nä½¿ç”¨ç°æœ‰çš„æŒä¹…å·å¹¶é€‰æ‹©å¤šä¸»æœºè¯»å†™ï¼š\nåˆ›å»ºæˆåŠŸã€‚\n6ã€å»ºç«‹å®¹å™¨æµ‹è¯•è®¿é—®\né€‰æ‹©è€æœ‹å‹ Nginx å®¹å™¨ï¼Œæ•°æ®å·å¤„æ·»åŠ ç°æœ‰çš„åŒå‘½åç©ºé—´çš„ PVCï¼ŒæŠŠ HTML æ–‡ä»¶æ‰€åœ¨æ–‡ä»¶å¤¹æ˜ å°„ä¸€ä¸‹ï¼š\nç­‰å¾…çŠ¶æ€å˜ä¸º Activeï¼š\néšä¾¿æ‹·è´ä¸ªç½‘é¡µæ”¾å…¥å­˜å‚¨æ¡¶ç›¸åº”æ–‡ä»¶å¤¹ä¸‹ï¼š\nè®¿é—®ä¸‹é¡µé¢ï¼š\n7ã€å»ºç«‹å®¹å™¨æµ‹è¯•å†™å…¥\nç¼–è¾‘ä¸‹åˆšåˆšå»ºç«‹çš„å®¹å™¨ï¼Œæ˜ å°„ä¸‹æ—¥å¿—æ–‡ä»¶å¤¹ï¼š\nä¹‹åé‡å¯ç­‰å¾…çŠ¶æ€å˜ä¸º Activeï¼š\næ£€æŸ¥ä¸‹å­˜å‚¨æ¡¶å†…ï¼Œè‡ªåŠ¨åˆ›å»º log æ–‡ä»¶å¤¹å’Œæ—¥å¿—æ–‡ä»¶ï¼š\næœ¬ç« ç»“æŸã€‚\n","id":25,"section":"posts","summary":"è€ƒè™‘åˆ°ä¹‹åçš„é¡¹ç›®æœ‰æ—¥å¿—è®°å½•å’Œåˆ†æçš„åŠŸèƒ½éœ€æ±‚ï¼Œæå‰å‡†ä¸€ä¸‹ç”¨ä»¥æ—¥å¿—å­˜å‚¨çš„ PVï¼Œè™½ç„¶è¯´æŒ‚è½½åˆ°æœåŠ¡å™¨æœ¬åœ°è·¯å¾„ä¹Ÿå¯ä»¥ï¼Œä½†è¿™æ ·çš„è¯æœåŠ¡å™¨åˆ°æœŸæ—¶å°±ä¼šæœ‰ç‚¹éº»","tags":["Linux","K3s"],"title":"K3s å­¦ä¹ ï¼ˆå››ï¼‰CentOS7 ä¸‹æŒ‚è½½è…¾è®¯äº‘ COS ä¸º K3s é›†ç¾¤æä¾›æŒä¹…åŒ–å­˜å‚¨ PV","uri":"https://senjianlu.com/2021/10/k3s-note-04/","year":"2021"},{"content":"å®˜æ–¹æ–‡æ¡£\næŒç»­æ›´æ–°ã€‚\n 1ã€åœæ­¢æ‰€æœ‰çš„å®¹å™¨\ndocker stop $(docker ps -aq)\r 2ã€åœæ­¢æŒ‡å®šé•œåƒçš„å®¹å™¨\ndocker stop `docker ps -aq --filter ancestor=$image`\r ","id":26,"section":"posts","summary":"å®˜æ–¹æ–‡æ¡£ æŒç»­æ›´æ–°ã€‚ 1ã€åœæ­¢æ‰€æœ‰çš„å®¹å™¨ docker stop $(docker ps -aq) 2ã€åœæ­¢æŒ‡å®šé•œåƒçš„å®¹å™¨ docker stop `docker ps -aq --filter ancestor=$image`","tags":["Docker","Linux"],"title":"CentOS7 ä¸‹ä½¿ç”¨ Docker çš„ä¸€äº›å®ç”¨æŒ‡ä»¤","uri":"https://senjianlu.com/2021/10/centos7-docker/","year":"2021"},{"content":"è¿™æ¬¡è¿ç§»åˆéœ€è¦ä¿®å¤ä¸€ä¸‹ä¸­æ–‡å­—ä½“çš„é—®é¢˜ï¼Œè®°å½•ä¸€ä¸‹ã€‚\n 1ã€ä¸‹è½½æœ‰ä¸­æ–‡çš„å­—ä½“\nå‰ç«¯ç®¡ç†ç•Œé¢å‡ºç°ä»¥ä¸‹æ–¹æ¡†çš„åŸå› å°±æ˜¯ Zabbix é»˜è®¤ä½¿ç”¨çš„ DejaVuSans.ttf å­—ä½“ä¸­ç¼ºå°‘ä¸­æ–‡å­—ä½“æ ·å¼ï¼š\nå› æ­¤å…ˆä¸‹è½½ä¸­æ–‡å­—ä½“ï¼š\nwget https://www.wfonts.com/download/data/2014/06/01/microsoft-yahei/chinese.msyh.ttf\r 2ã€å°†ä¸­æ–‡å­—ä½“æ‹·è´åˆ° Docker å®¹å™¨å†…\né¦–å…ˆç¡®å®š Zabbix Web Nginx å®¹å™¨çš„ IDï¼š\ndocker ps -a\r æˆ‘è¿™é‡Œä¸º 60d60911c8a7ï¼Œè¿›è¡Œæ‹·è´ï¼š\ndocker cp chinese.msyh.ttf 60d60911c8a7:/usr/share/zabbix/assets/fonts\r 3ã€è¿›å»å®¹å™¨ä¿®æ”¹é…ç½®æ–‡ä»¶\nè¿›å…¥å®¹å™¨ï¼š\ndocker exec -it 60d60911c8a7 /bin/bash\r ç¡®å®šå­—ä½“æ‹·è´æˆåŠŸå’Œæ‰“å¼€é…ç½®æ–‡ä»¶ï¼š\n# ç¡®å®šå­—ä½“æ–‡ä»¶æ‹·è´æˆåŠŸ\rcd /usr/share/zabbix/assets/fonts/\rls\r# æ‰“å¼€é…ç½®æ–‡ä»¶\rvi /usr/share/zabbix/include/defines.inc.php\r å¦‚ä¸‹ä¿®æ”¹åä¿å­˜ï¼ˆå­—ä½“æ–‡ä»¶åå»æ‰ .ttfï¼‰ï¼š\næ³¨ï¼šå¤§æ¦‚åœ¨ 67 è¡Œå·¦å³ã€‚\n4ã€é¡µé¢åˆ·æ–°\nç»“æŸã€‚\n","id":27,"section":"posts","summary":"è¿™æ¬¡è¿ç§»åˆéœ€è¦ä¿®å¤ä¸€ä¸‹ä¸­æ–‡å­—ä½“çš„é—®é¢˜ï¼Œè®°å½•ä¸€ä¸‹ã€‚ 1ã€ä¸‹è½½æœ‰ä¸­æ–‡çš„å­—ä½“ å‰ç«¯ç®¡ç†ç•Œé¢å‡ºç°ä»¥ä¸‹æ–¹æ¡†çš„åŸå› å°±æ˜¯ Zabbix é»˜è®¤ä½¿ç”¨çš„ DejaVuSans.ttf å­—ä½“ä¸­ç¼ºå°‘ä¸­æ–‡å­—ä½“æ ·å¼ï¼š","tags":["Docker"],"title":"CentOS7 ä¸‹ Zabbix Docker å®¹å™¨ä¿®å¤ç®¡ç†ç•Œé¢ä¸­æ–‡å­—ä½“ä¸ºæ–¹æ¡†çš„é—®é¢˜","uri":"https://senjianlu.com/2021/10/centos7-docker-zabbix-fix-font/","year":"2021"},{"content":"å°† server + agent çš„é›†ç¾¤å¯¼å…¥ Docker å®‰è£…çš„ Rancher ä¸­ä»¥è¿›è¡Œç®¡ç†ã€‚\n 1ã€ä»é¢æ¿å¯¼å…¥ç°æœ‰é›†ç¾¤\næ·»åŠ é›†ç¾¤ï¼š å¯¼å…¥ï¼š\nè¾“å…¥é›†ç¾¤åè¯ååˆ›å»ºï¼š\nå¤åˆ¶å‘½ä»¤å‰å¾€é›†ç¾¤æ‰§è¡Œï¼š\næˆ‘æ˜¯åœ¨èŠ‚ç‚¹çš„ä¸» server èŠ‚ç‚¹æ‰§è¡Œçš„ï¼Œæ‰§è¡Œå®Œåè¿”å›çš„ä¿¡æ¯ï¼š\nclusterrole.rbac.authorization.k8s.io/proxy-clusterrole-kubeapiserver created\rclusterrolebinding.rbac.authorization.k8s.io/proxy-role-binding-kubernetes-master created\rnamespace/cattle-system created\rserviceaccount/cattle created\rWarning: rbac.authorization.k8s.io/v1beta1 ClusterRoleBinding is deprecated in v1.17+, unavailable in v1.22+; use rbac.authorization.k8s.io/v1 ClusterRoleBinding\rclusterrolebinding.rbac.authorization.k8s.io/cattle-admin-binding created\rsecret/cattle-credentials-5xxdxx7 created\rclusterrole.rbac.authorization.k8s.io/cattle-admin created\rdeployment.apps/cattle-cluster-agent created\r å†å›åˆ°é¡µé¢ä¸Šçœ‹è§æ­£åœ¨ç­‰å¾…ï¼š\n åœ¨è¿™ä¸€æ­¥æˆ‘ç­‰äº† 10 åˆ†é’Ÿå·¦å³è¿˜æ²¡æœ‰å¯¼å…¥æˆåŠŸï¼Œçœ‹äº†ä¸‹æ—¥å¿—ï¼š\n[root@server-01 ~]# kubectl -n cattle-system logs -l app=cattle-cluster-agent -f\rINFO: Environment: CATTLE_ADDRESS=10.42.2.3 CATTLE_CA_CHECKSUM= CATTLE_CLUSTER=true CATTLE_FEATURES= CATTLE_INTERNAL_ADDRESS= CATTLE_IS_RKE=false CATTLE_K8S_MANAGED=true CATTLE_NODE_NAME=cattle-cluster-agent-69b856b99c-rp874 CATTLE_SERVER=https://rancher.k3s.com\rINFO: Using resolv.conf: search cattle-system.svc.cluster.local svc.cluster.local cluster.local nameserver 10.43.0.10 options ndots:5\rERROR: https://rancher.k3s.com/ping is not accessible (Could not resolve host: rancher.k3s.com)  ä¼¼ä¹æ˜¯æ— æ³•è®¿é—®åˆ°åŸŸåï¼Œä½†æ˜¯ curl è¯•ä¸€ä¸‹ï¼š\n[root@server-01 ~]# curl https://rancher.k3s.com/ping\rpong\r åˆæ˜¯èƒ½è®¿é—®åˆ°çš„ï¼ŒçŒœæµ‹å¯èƒ½æ˜¯ DNS å‡ºäº†é—®é¢˜ï¼Œå›å¤´çœ‹ä¸‹æ—¥å¿—æœ‰è¿™ä¹ˆä¸€æ®µï¼š\n...nameserver 10.43.0.10...\r æœç„¶æ˜¯ DNS çš„é—®é¢˜ï¼ŒèŠ‚ç‚¹ä¸çŸ¥é“ rancher.k3s.com æŒ‡å‘äº†å“ªä¸ª IPï¼Œäºæ˜¯å¼€å§‹ç€æ‰‹ä¿®å¤ã€‚\nå®˜æ–¹å…³äºè¿™ä¸ªé”™è¯¯çš„æ–‡æ¡£ï¼šAgent æ— æ³•è¿æ¥ Rancher server\nåœ¨ä½ çš„ä¸»èŠ‚ç‚¹æ‰§è¡Œï¼š\nkubectl -n cattle-system patch deployments cattle-cluster-agent --patch '{\r\u0026quot;spec\u0026quot;: {\r\u0026quot;template\u0026quot;: {\r\u0026quot;spec\u0026quot;: {\r\u0026quot;hostAliases\u0026quot;: [\r{\r\u0026quot;hostnames\u0026quot;:\r[\r\u0026quot;rancher.k3s.com\u0026quot;\r],\r\u0026quot;ip\u0026quot;: \u0026quot;10.0.8.6\u0026quot;\r}\r]\r}\r}\r}\r}'\r  å†å›åˆ° Rancher é¡µé¢åº”è¯¥å°±å¯¼å…¥æˆåŠŸäº†ï¼š\n2ã€åˆ›å»ºä¸€ä¸ªå®¹å™¨åº”ç”¨\næˆ‘è¿™é‡Œé€‰æ‹©äº†æ–°å»ºä¸€ä¸ª Nginx å®¹å™¨ï¼Œä¹Ÿæ­£å¥½èƒ½æµ‹è¯•ä¸‹å¤–ç½‘å¯¹å®¹å™¨å†…æœåŠ¡çš„è®¿é—®æƒ…å†µã€‚\né€‰æ‹©å‘½åç©ºé—´ï¼š\néƒ¨ç½²æœåŠ¡ï¼š å¡«å†™å¯¹åº”çš„ä¿¡æ¯ï¼Œè¿™é‡Œçš„ Docker é•œåƒä¼šé»˜è®¤ä» hub.docker.com ä¸‹è½½ï¼Œä¾‹å¦‚æˆ‘è¿™é‡Œå¡«çš„æ˜¯ nginxï¼Œé‚£ä¹ˆåå°ä¼šæ‰§è¡Œ docker pull nginx è¿™ä¸ªæ“ä½œã€‚\nä¸‹æ‹‰ç‚¹å‡»åˆ›å»ºåï¼Œå°±å¯ä»¥çœ‹è§è¿™ä¸ªæœåŠ¡å› ä¸ºæ²¡æœ‰å®¹å™¨è€Œæ›´æ–°äº†ï¼š ç¨ç­‰ç‰‡åˆ»æ›´æ–°å®Œæˆï¼š\n3ã€å®¹å™¨çš„è®¿é—®\nç‚¹è¿›åˆšåˆšåˆ›å»ºçš„æœåŠ¡å†…ï¼Œå› ä¸ºé€‰æ‹©çš„æ˜¯åˆ›å»ºä¸€ä¸ªæ— çŠ¶æ€æœåŠ¡ï¼Œå› æ­¤ä¼šéšæœºåœ¨ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆæœåŠ¡å™¨ï¼‰ä¸Šå»ºç«‹æœåŠ¡ï¼Œè¿™é‡Œçœ‹åˆ°æ˜¯ server-02 è¿™ä¸ªèŠ‚ç‚¹ï¼š\nç”¨ server-02 èŠ‚ç‚¹çš„å…¬ç½‘ IP æ­é…æ˜ å°„çš„ 30080 ç«¯å£è¿›è¡Œè®¿é—®ï¼š\nç»“æŸã€‚\n é™„åŠ ï¼š æ—¢ç„¶å¼€å§‹ç¢°åˆ°å†…ç½‘ DNS çš„é—®é¢˜ï¼Œé¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ K3s éƒ½ä¼šåœ¨å†…ç½‘å»ºç«‹ DNS æœåŠ¡å™¨æ¥ä¿è¯å„èŠ‚ç‚¹ä¹‹é—´çš„è®¿é—®ï¼Œç”±äºæ˜¯ç»ƒæ‰‹æˆ‘è¿˜æ˜¯å‡†å¤‡ä¸€æ­¥ä¸€æ­¥æ¥ï¼Œå…ˆæ‰‹åŠ¨ç¡®ä¿å„æœåŠ¡å™¨ä¹‹é—´çš„è¿æ¥ï¼Œæ€»ä½“åˆ†ä¸ºä¸¤æ­¥ä½ ä¹Ÿå¯ä»¥å‚è€ƒï¼š\n ä¿®æ”¹ hostsï¼Œå°†åŸŸåå’Œ IP ç»‘å®šï¼Œä¹‹å‰æˆ‘æ˜¯ç”¨å¤–ç½‘åš Rancher å’Œé›†ç¾¤çš„è¿æ¥çš„ï¼Œè¶ç€è¿™ä¸ªæœºä¼šä¹Ÿæ”¹åˆ°å†…ç½‘è¿æ¥å§ï¼Œé›†ç¾¤ä¸­çš„æ¯å°æœåŠ¡å™¨éƒ½æ‰§è¡Œï¼š  echo \u0026quot;10.0.8.6 rancher.k3s.com\u0026quot; \u0026gt;\u0026gt; /etc/hosts\r/etc/init.d/network restart\rping rancher.k3s.com\r ç¡®è®¤åŸŸåè§£æåˆ° Rancher é¢æ¿æ‰€åœ¨æœåŠ¡å™¨çš„å†…ç½‘åœ°å€ä¹‹åæ­¤æ­¥å®Œæˆã€‚\n2. K3s é›†ç¾¤å†…éƒ¨æ˜¯é€šè¿‡ coreDNS è§£æçš„å…³ç³»ï¼Œè¿˜éœ€è¦åœ¨ coreDNS ä¸­ä¿®æ”¹åŸŸåè§£æã€‚\næ³¨æ„ï¼šåœ¨ server ä¸»èŠ‚ç‚¹ä¿®æ”¹å³å¯ï¼Œä¼šè‡ªåŠ¨åŒæ­¥åˆ°å…¶ä»–èŠ‚ç‚¹ã€‚\nkubectl edit configmap coredns -n kube-system\r åœ¨ NodeHosts ä¸­æ–°å¢è§£æï¼š\n...\r...\rNodeHosts: |\r10.0.8.12 server-01\r10.0.8.17 server-02\r# æ­¤è¡Œè§£æä¸ºæ–°å¢çš„\r10.0.8.6 rancher.k3s.com\rkind: ConfigMap\r...\r....\r åœ¨å…¶ä»–èŠ‚ç‚¹ç¡®è®¤ä¿®æ”¹æˆåŠŸï¼š\nkubectl -n kube-system get configmap coredns -o yaml\r  ","id":28,"section":"posts","summary":"å°† server + agent çš„é›†ç¾¤å¯¼å…¥ Docker å®‰è£…çš„ Rancher ä¸­ä»¥è¿›è¡Œç®¡ç†ã€‚ 1ã€ä»é¢æ¿å¯¼å…¥ç°æœ‰é›†ç¾¤ æ·»åŠ é›†ç¾¤ï¼š å¯¼å…¥ï¼š è¾“å…¥é›†ç¾¤åè¯ååˆ›å»ºï¼š å¤åˆ¶å‘½ä»¤å‰å¾€é›†ç¾¤æ‰§è¡Œï¼š æˆ‘æ˜¯åœ¨èŠ‚ç‚¹çš„ä¸» server èŠ‚","tags":["Linux","K3s"],"title":"K3s å­¦ä¹ ï¼ˆä¸‰ï¼‰Rancher å¯¼å…¥ç°æœ‰ K3s é›†ç¾¤å¹¶åˆ›å»ºç¬¬ä¸€ä¸ªå®¹å™¨åº”ç”¨","uri":"https://senjianlu.com/2021/10/k3s-note-03/","year":"2021"},{"content":"ä¸´æ—¶åˆ†äº«ä¸‹æ–‡ä»¶å¯ç”¨ï¼Œæ²¡æœ‰è®¤è¯æ—¶é—´é™åˆ¶æ‰€ä»¥æ— æ³•å®ç°ç±»ä¼¼è®¤è¯ä¸€æ¬¡ 6 å°æ—¶åè¶…æ—¶è¿™ç§åŠŸèƒ½ï¼Œæ¯æ¬¡è®¿é—®é¡µé¢æˆ–æ˜¯ API è°ƒç”¨éƒ½éœ€è¦éªŒè¯ã€‚\n å®˜æ–¹æ–‡æ¡£ï¼šRestricting Access with HTTP Basic Authentication\n1ã€å®‰è£… httpd-tools æ¨¡å—ä»¥å¯ç”¨ htpasswd\nyum -y install httpd-tools\r 2ã€é…ç½®ç”¨æˆ·ä¿¡æ¯\næˆ‘è¿™é‡Œå‚¨å­˜ç”¨æˆ·è´¦å·å¯†ç çš„æ–‡ä»¶é€‰åœ¨åœ¨ /etc/nginx/conf.d/ ä¸‹ä¿å­˜\ncd /etc/nginx/conf.d/\rhtpasswd -c pass.db $username\r è¾“å…¥å¯†ç ï¼š\nNew password: $password\rRe-type new password: $password\r ç¡®è®¤ä¸€ä¸‹æ˜¯å¦æ·»åŠ æˆåŠŸï¼Œå¯†ç ä¼šè¢«åŠ å¯†ï¼š\ncat pass.db\r 3ã€ä¿®æ”¹ Nginx é…ç½®æ–‡ä»¶\n...\r...\rserver {\rlisten 80;\rserver_name example.com;\r# å¼ºåˆ¶è·³è½¬ HTTPS\rlocation / {\r# è®¤è¯\rauth_basic \u0026quot;User Authentication\u0026quot;;\rauth_basic_user_file /etc/nginx/conf.d/pass.db;\r# 301 è·³è½¬\rreturn 301 https://$server_name$request_uri;\r}\r}\r...\r...\r ä¹‹åé‡å¯å†è®¿é—®é¡µé¢å°±èƒ½çœ‹åˆ°ï¼š\nç»“æŸã€‚\n","id":29,"section":"posts","summary":"ä¸´æ—¶åˆ†äº«ä¸‹æ–‡ä»¶å¯ç”¨ï¼Œæ²¡æœ‰è®¤è¯æ—¶é—´é™åˆ¶æ‰€ä»¥æ— æ³•å®ç°ç±»ä¼¼è®¤è¯ä¸€æ¬¡ 6 å°æ—¶åè¶…æ—¶è¿™ç§åŠŸèƒ½ï¼Œæ¯æ¬¡è®¿é—®é¡µé¢æˆ–æ˜¯ API è°ƒç”¨éƒ½éœ€è¦éªŒè¯ã€‚ å®˜æ–¹æ–‡æ¡£ï¼šRestric","tags":["ç½‘ç«™å»ºè®¾"],"title":"Nginx å­¦ä¹ ï¼ˆä¸‰ï¼‰é…ç½®åŸºç¡€çš„ç”¨æˆ·ç™»å½•éªŒè¯ä»¥ä¿æŠ¤ç«™ç‚¹","uri":"https://senjianlu.com/2021/10/nginx-note-03/","year":"2021"},{"content":"ä¸€äº›åŸºç¡€çš„ iptables è§„åˆ™æ¥ä¿æŠ¤æœåŠ¡å™¨ï¼ŒæŒç»­æ›´æ–°ã€‚\n 1ã€æŸ¥çœ‹å½“å‰ iptables å…¥æ–¹å‘è§„åˆ™ï¼š\næ³¨æ„ï¼šå’Œ Nginx è§„åˆ™ä¸€æ ·ï¼Œä»ä¸Šåˆ°ä¸‹åŒ¹é…ï¼Œæœ‰ç¬¦åˆçš„å°±ç›´æ¥è·³å‡ºä¸ä¼šå†å‘ä¸‹æ‰§è¡Œï¼\niptables -L INPUT --line-numbers\r 2ã€åˆ é™¤æŒ‡å®šè¡Œçš„å…¥æ–¹å‘è§„åˆ™ï¼š\niptables -D INPUT $row_no\r 3ã€å…è®¸æŒ‡å®š MAC åœ°å€è®¿é—®æœ¬æœºæ‰€æœ‰ç«¯å£ï¼š\niptables -I INPUT -m mac --mac-source xx:D3:xx:7A:02:xx -j ACCEPT\r 4ã€å±è”½æ‰€æœ‰äººå¯¹åŸŸåï¼ˆåŒ…æ‹¬å­åŸŸåçš„è®¿é—®ï¼‰:\næ³¨æ„ï¼šéœ€è¦æ”¾åœ¨æœ€åä¸€è¡Œå¤„ï¼\niptables $row_no -I INPUT -p tcp --dport $port -m string --string \u0026quot;example.com\u0026quot; --algo kmp -j DROP\r ","id":30,"section":"posts","summary":"ä¸€äº›åŸºç¡€çš„ iptables è§„åˆ™æ¥ä¿æŠ¤æœåŠ¡å™¨ï¼ŒæŒç»­æ›´æ–°ã€‚ 1ã€æŸ¥çœ‹å½“å‰ iptables å…¥æ–¹å‘è§„åˆ™ï¼š æ³¨æ„ï¼šå’Œ Nginx è§„åˆ™ä¸€æ ·ï¼Œä»ä¸Šåˆ°ä¸‹åŒ¹é…ï¼Œæœ‰ç¬¦åˆçš„å°±ç›´æ¥è·³å‡ºä¸ä¼šå†å‘ä¸‹æ‰§è¡Œï¼ iptables -L INPUT","tags":["Linux"],"title":"CentOS7 ä¸‹çš„ä¸€äº› iptables å®ç”¨é…ç½®","uri":"https://senjianlu.com/2021/09/centos7-iptables/","year":"2021"},{"content":"ç¬¬ä¸€ç« å®‰è£…å®Œä¸€ä¸ª server å’Œä¸€ä¸ª agent èŠ‚ç‚¹ä¹‹åï¼Œå°±ç›¸å½“äºæ‹¥æœ‰äº†ä¸€ä¸ªè¿·ä½ çš„ K3s é›†ç¾¤ï¼Œç°åœ¨å¼€å§‹å®‰è£…ç®¡ç†é¢æ¿ã€‚\n è€ƒè™‘åˆ°ä½œä¸º Docker å®¹å™¨è¿è¡Œçš„ Rancher é‡å¯è¾ƒä¸ºå®‰å…¨ç®€å•ï¼Œä¸å†ä½¿ç”¨è‡ªç­¾è¯ä¹¦è€Œæ˜¯ä½¿ç”¨è…¾è®¯äº‘ç­¾å‘çš„ 1 å¹´æœ‰æ•ˆæœŸçš„äºšæ´²è¯šä¿¡è¯ä¹¦ã€‚\n æ³¨æ„ï¼šå¦‚æœæ²¡æœ‰åœ¨ K3s å®‰è£…æ—¶ä¿®æ”¹ Ingress ç›‘å¬ç«¯å£ï¼Œè¯·ä¸è¦åœ¨ server æˆ– agent åŒæœåŠ¡å™¨ä¸Šå®‰è£…ï¼Œä¼šé€ æˆ 80 å’Œ 443 ç«¯å£ä¸Šèµ·çš„æœåŠ¡æ— æ³•æ­£å¸¸è®¿é—®ï¼\n 1ã€ä½¿ç”¨ Docker å®‰è£… Rancher Labs\næ‰§è¡Œï¼š\ndocker run -d --privileged --restart=unless-stopped \\\r# å®¹å™¨ 80ã€443 ç«¯å£åˆ†åˆ«æ˜ å°„å®¿ä¸»æœº 8080 å’Œ 8443 ç«¯å£\r-p 8080:80 -p 8443:443 \\\r# è¯ä¹¦\r-v /rab/ssl/rancher.k3s.com.pem:/etc/rancher/ssl/cert.pem \\\r-v /rab/ssl/rancher.k3s.com.key:/etc/rancher/ssl/key.pem \\\r# æ•°æ®æŒ‚è½½åˆ°å®¿ä¸»æœº\r-v /rab/docker/rancher/rancher:/var/lib/rancher \\\r-v /rab/docker/rancher/auditlog:/var/log/auditlog \\\r# Rancher é€‰æ‹©ä¸º 2.5.x ç‰ˆæœ¬\r--privileged \\\rrancher/rancher:v2.5.5 \\\r# éè‡ªç­¾ SSL è¯ä¹¦\r--no-cacerts\r æŸ¥çœ‹çŠ¶æ€ï¼š\ndocker stats\r CONTAINER CPU % MEM USAGE / LIMIT MEM % NET I/O BLOCK I/O PIDS\re404cfxxx811 7.35% 1.5 GiB / 3.7 GiB 40.54% 192 MB / 3.09 MB 466 MB / 489 MB 21\r æˆåŠŸã€‚\n2ã€Nginx åä»£ï¼ˆå¯é€‰ï¼‰\næ³¨æ„ï¼šåä»£ä¸è¦é€‰æ‹© HTTP æ‰€åœ¨ç«¯å£ï¼ŒRancher ä¼šè‡ªåŠ¨è·³è½¬è‡³ HTTPS é€ æˆæ— æ³•è®¿é—®çš„æƒ…å†µï¼\né…ç½®å¦‚ä¸‹ï¼š\n...\r...\r# é˜²æ­¢å‡ºç°â€œnginx: [emerg] unknown \u0026quot;connection_upgrade\u0026quot; variableâ€çš„é”™è¯¯\rmap $http_upgrade $connection_upgrade {\rdefault upgrade;\r'' close;\r}\r...\r...\rserver {\rlisten 80;\rserver_name rancher.k3s.com;\r# å¼ºåˆ¶è·³è½¬ HTTPS\rlocation / {\rreturn 301 https://$server_name$request_uri;\r}\r}\rserver {\rlisten 443 ssl;\rserver_name rancher.k3s.com;\r# SSL é…ç½®\rssl_certificate /rab/ssl/1_rancher.k3s.com_bundle.crt;\rssl_certificate_key /rab/ssl/2_rancher.k3s.com.key;\rssl_protocols TLSv1 TLSv1.1 TLSv1.2;\rssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;\rlocation / {\rproxy_set_header Host $host;\rproxy_set_header X-Forwarded-Proto $scheme;\rproxy_set_header X-Forwarded-Port $server_port;\rproxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\rproxy_pass https://127.0.0.1:8443;\rproxy_http_version 1.1;\rproxy_set_header Upgrade $http_upgrade;\rproxy_set_header Connection $connection_upgrade;\r}\r}\r...\r...\r 3ã€é‡å¯ Nginx å¹¶è®¿é—®åŸŸå\n ç¬¬ä¸€æ¬¡è®¿é—®ä¼šéœ€è¦é…ç½®ç®¡ç†å‘˜å¯†ç ï¼Œåç»­å¦‚æœå¿˜è®°è¯·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è·å–æ–°å¯†ç ï¼š\ndocker exec -ti $container_id reset-password\r è¿”å›ç»“æœä¸­ä¼šæœ‰æ–°çš„å¯†ç \nNew password for default admin user (user-xxxxx):\r$new_password\r  æœ¬ç« ç»“æŸã€‚\n","id":31,"section":"posts","summary":"ç¬¬ä¸€ç« å®‰è£…å®Œä¸€ä¸ª server å’Œä¸€ä¸ª agent èŠ‚ç‚¹ä¹‹åï¼Œå°±ç›¸å½“äºæ‹¥æœ‰äº†ä¸€ä¸ªè¿·ä½ çš„ K3s é›†ç¾¤ï¼Œç°åœ¨å¼€å§‹å®‰è£…ç®¡ç†é¢æ¿ã€‚ è€ƒè™‘åˆ°ä½œä¸º Docker å®¹å™¨è¿è¡Œçš„ Rancher é‡å¯è¾ƒä¸ºå®‰å…¨ç®€å•ï¼Œä¸å†ä½¿ç”¨","tags":["Linux","K3s"],"title":"K3s å­¦ä¹ ï¼ˆäºŒï¼‰å®‰è£… Rancher Labsï¼ˆDocker å®‰è£…ï¼Œæ¨èï¼‰","uri":"https://senjianlu.com/2021/09/k3s-note-02-02/","year":"2021"},{"content":"ä¸»è¦æ˜¯ä¸¤ä¸ªæ­¥éª¤ï¼š1ã€ç”Ÿæˆ SSL ç§é’¥ï¼ˆ.key æ–‡ä»¶ï¼‰å’Œè¯ä¹¦ç­¾å‘è¯·æ±‚æ–‡ä»¶ï¼ˆ.csr æ–‡ä»¶ï¼‰ï¼›2ã€è‡ªå·±å……å½“è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰è¿›è¡Œç­¾å‘ç”Ÿæˆè¯ä¹¦ï¼ˆ.crt æ–‡ä»¶ï¼‰ã€‚\n 1ã€æ£€æŸ¥æ˜¯å¦å·²ç»å®‰è£… OpenSSL\nopenssl version\r  æ²¡æœ‰å®‰è£…çš„è¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š\nyum -y install openssl\r  2ã€ç”Ÿæˆç§é’¥\nç§˜é’¥æ–‡ä»¶åå¯ä»¥è‡ªå·±æ›´æ”¹ï¼Œæˆ‘å› ä¸ºæ˜¯ç»™ K3s Rancher ç”¨æ‰è¿™ä¹ˆå‘½åã€‚\n# å…è®¸åéœ€è¦è¾“å…¥è‡³å°‘ 4 ä½çš„å¯†ç ï¼Œåé¢æœ‰å»é™¤å¯†ç çš„æ­¥éª¤å› æ­¤éšä¾¿è¾“å…¥å³å¯\ropenssl genrsa -des3 -out rancher.key 4096\r 3ã€ç”Ÿæˆè¯ä¹¦ç­¾å‘è¯·æ±‚\nåœ¨è¯ä¹¦ç”Ÿæˆç›®å½•æ–°å»ºé…ç½®æ–‡ä»¶ï¼Œä»¥é…ç½® SubjectAltName æ¥é˜²æ­¢ Chrome æŠ¥â€œæ²¡æœ‰æŒ‡å®šä¸»é¢˜å¤‡ç”¨åç§°â€çš„é”™è¯¯ï¼š\nvi ext.ini\r æ–‡ä»¶å†…å®¹ï¼š\n[ req ]\rdefault_bits = 4096\rdistinguished_name = req_distinguished_name\rreq_extensions = req_ext\r[ req_distinguished_name ]\rcountryName = Country Name (2 letter code)\rcountryName_default = CN\rstateOrProvinceName = State or Province Name (full name)\rstateOrProvinceName_default = Zhejiang\rlocalityName = Locality Name (eg, city)\rlocalityName_default = Hangzhou\rorganizationName = Organization Name (eg, company)\rorganizationName_default = k3s\rorganizationalUnitName = Organizational Unit Name (eg, section)\rorganizationalUnitName_default = rancher\rcommonName = Common Name (e.g. server FQDN or YOUR name)\rcommonName_max = 64\rcommonName_default = rancher.k3s.cn\r[ req_ext ]\rsubjectAltName = @alt_names\r[alt_names]\rDNS.1 = k3s.cn\rDNS.2 = *.k3s.cn\r  subj å‚æ•°è§£é‡Šï¼š    å­—æ®µ å­—æ®µå«ä¹‰ ç¤ºä¾‹     /C= Country å›½å®¶ CN   /ST= State or Province çœ Zhejiang   /L= Location or City åŸå¸‚ Hangzhou   /O= Organization ç»„ç»‡æˆ–ä¼ä¸š k3s   /OU= Organization Unit éƒ¨é—¨ rancher   /CN= Common Name åŸŸåæˆ– IP rancher.k3s.com     ç”Ÿæˆè¯ä¹¦è¯·æ±‚æ–‡ä»¶ï¼š\nopenssl req -new -sha256 -out rancher.csr -key rancher.key -config ext.ini\r 4ã€å»é™¤ç§é’¥ä¸­çš„å¯†ç \nä»¥é˜²æ­¢æ¯æ¬¡å¯åŠ¨WebæœåŠ¡å™¨æ—¶ï¼Œéƒ½è¢«è¦æ±‚è¾“å…¥å¯†ç ï¼š\nopenssl rsa -in rancher.key -out rancher.key\r 5ã€è‡ªå·±å……å½“ CA è¿›è¡Œè¯ä¹¦çš„ç­¾å‘\n# ç­¾å‘ 10 å¹´çš„è¯ä¹¦\ropenssl x509 -req -days 3650 -in rancher.csr -signkey rancher.key -out rancher.crt -extensions req_ext -extfile ext.ini\r å®Œæˆåçœ‹ä¸‹ç›®å½•ç¡®å®šæ˜¯å¦ç”ŸæˆæˆåŠŸï¼š\n[root@VM-8-6-centos ~]# ls\r# æœ‰ .crt æ–‡ä»¶è¯´æ˜æˆåŠŸ\rrancher.crt rancher.csr rancher.key ext.ini\r 6ã€Nginx é…ç½®\n...\r...\rserver {\rlisten 80;\rserver_name rancher.k3s.com;\r# å¼ºåˆ¶è·³è½¬ HTTPS\rlocation / {\r# root /usr/share/nginx/html;\r# index index.html;\rreturn 301 https://$server_name$request_uri;\r}\r}\rserver {\rlisten 443 ssl;\rserver_name rancher.k3s.com;\r# SSL é…ç½®\rssl_certificate /etc/nginx/ssl/rancher.crt;\rssl_certificate_key /etc/nginx/ssl/rancher.key;\rssl_protocols TLSv1 TLSv1.1 TLSv1.2;\rssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;\rlocation / {\rroot /usr/share/nginx/html;\rindex index.html;\r}\r}\r...\r...\r é€šè¿‡ HTTPS è®¿é—®ä»ç„¶ä¼šæ˜¾ç¤ºä¸å®‰å…¨ï¼ŒæŸ¥çœ‹ä¸‹è¯ä¹¦å‘ç°ç”Ÿæ•ˆäº†ä½†æ˜¯å› ä¸ºæ˜¯è‡ªç­¾çš„æ‰€ä»¥ä¸å—ä¿¡ä»»ï¼š\n7ã€Windows æœ¬åœ°ä¿¡ä»»è¯ä¹¦\n# cmd é”®å…¥ mmc æ‰“å¼€æ§åˆ¶å°\rmmc\r æ·»åŠ /åˆ é™¤å•å…ƒï¼š\nä¸ºæ ¹èŠ‚ç‚¹æ·»åŠ è¯ä¹¦é€‰é¡¹ï¼Œå¼¹å‡ºæ¡†é€‰æ‹©å½“å‰ç”¨æˆ·å³å¯ï¼š æ ¹ç›®å½•ä¸­å¯¼å…¥è¯ä¹¦ï¼š\nå°†æœåŠ¡ä¸Šçš„ .crt æ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°ï¼Œå¯¼å…¥ä¸€è·¯é€‰æ‹©â€œæ˜¯â€å³å¯å®Œæˆå¯¼å…¥ï¼š\nå›é¡µé¢çœ‹ä¸€çœ¼è¯ä¹¦ç°åœ¨å·²ç»è¢«ä¿¡ä»»äº†ï¼š\n8ã€Chrome ä¿¡ä»»è¯ä¹¦\nå­˜åœ¨ä¸€äº›æƒ…å†µ Edge å·²ç»ä¿¡ä»»è¯ä¹¦ï¼Œä½†æ˜¯ Chrome è¿˜ä¸ä¿¡ä»»ï¼š\nå‰å¾€ Chrome é«˜çº§è®¾ç½®é‡Œçš„è¯ä¹¦å¤„å¯¼å…¥å³å¯ï¼š\nç»“æŸã€‚\n","id":32,"section":"posts","summary":"ä¸»è¦æ˜¯ä¸¤ä¸ªæ­¥éª¤ï¼š1ã€ç”Ÿæˆ SSL ç§é’¥ï¼ˆ.key æ–‡ä»¶ï¼‰å’Œè¯ä¹¦ç­¾å‘è¯·æ±‚æ–‡ä»¶ï¼ˆ.csr æ–‡ä»¶ï¼‰ï¼›2ã€è‡ªå·±å……å½“è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰è¿›è¡Œç­¾å‘ç”Ÿæˆè¯ä¹¦ï¼ˆ.crt","tags":["Linux"],"title":"CentOS7 ä¸‹ä½¿ç”¨ OpenSSL ç”Ÿæˆ CA è‡ªç­¾å‘è¯ä¹¦å¹¶è§£å†³ Windows ä¸‹ä¿¡ä»»è¯ä¹¦å Chrome å‡ºç° ERR_CERT_COMMON_NAME_INVALID çš„é—®é¢˜","uri":"https://senjianlu.com/2021/09/centos7-openssl-ca/","year":"2021"},{"content":"ç¬¬ä¸€ç« å®‰è£…å®Œä¸€ä¸ª server å’Œä¸€ä¸ª agent èŠ‚ç‚¹ä¹‹åï¼Œå°±ç›¸å½“äºæ‹¥æœ‰äº†ä¸€ä¸ªè¿·ä½ çš„ K3s é›†ç¾¤ï¼Œç°åœ¨å¼€å§‹å®‰è£…ç®¡ç†é¢æ¿ã€‚\næ³¨æ„ï¼šè¯·å‚è€ƒæˆåŠŸç‡æ›´é«˜çš„Docker å®‰è£… Rancher Labsï¼Œè¯¥æ–‡ç« å·²ä½œåºŸï¼\n è°¨æ…è€ƒè™‘æ˜¯å¦å‚è€ƒï¼Œèƒ½ç¡®å®šçš„æ˜¯åœ¨ 2H4G è½»é‡æœåŠ¡å™¨ä¸‹ï¼Œæ‰‹åŠ¨å®‰è£…ä¼šå‡ºç°å¾ˆå¤šå¥‡å¥‡æ€ªæ€ªçš„é”™è¯¯ï¼Œå…‰æˆ‘è‡ªå·±å®‰è£… 3 æ¬¡ä¸€æ ·çš„æ­¥éª¤å°±å‡ºç° 2 æ¬¡å®‰è£…ç»“æŸæ£€æŸ¥çŠ¶æ€å‡ºç°â€œerror: deployment \u0026ldquo;rancher\u0026rdquo; exceeded its progress deadlineâ€çš„é—®é¢˜ï¼Œå¹¶ä¸”æ—¥å¿—çš„æ’æŸ¥ç›¸å½“éº»çƒ¦ï¼Œå°è¯•å‰è¯·ä¸€å®šå»ºç«‹äº‘æœåŠ¡å™¨å¿«ç…§ä»¥ä¾¿å›æ»šï¼\n æ³¨æ„ï¼šå¦‚æœæ²¡æœ‰åœ¨ K3s å®‰è£…æ—¶ä¿®æ”¹ Ingress ç›‘å¬ç«¯å£ï¼Œè¯·ä¸è¦åœ¨ server æˆ– agent åŒæœåŠ¡å™¨ä¸Šå®‰è£…ï¼Œä¼šé€ æˆ 80 å’Œ 443 ç«¯å£ä¸Šèµ·çš„æœåŠ¡æ— æ³•æ­£å¸¸è®¿é—®ï¼\n 1ã€é¦–å…ˆå®‰è£… Kubernetes çš„è½¯ä»¶åŒ…ç®¡ç†å·¥å…·ï¼šHelm\nè¿™ä¹Ÿæ˜¯Rancher å®‰è£…å®˜æ–¹æ–‡æ¡£æ‰€æç¤ºå¿…è¦çš„æ¨¡å—ï¼Œå®‰è£…æ­¥éª¤å‚è€ƒInstalling Helmï¼š\n# ä¸‹è½½å‹ç¼©åŒ…\rwget https://get.helm.sh/helm-v3.7.0-linux-amd64.tar.gz\r# è§£å‹\rtar -zxvf helm-v3.7.0-linux-amd64.tar.gz\r# äºŒè¿›åˆ¶æ–‡ä»¶ç›´æ¥æ”¾å…¥ç¯å¢ƒå˜é‡ä¸­å³å¯ä½¿ç”¨\rmv linux-amd64/helm /usr/local/bin/helm\r å®Œæˆåç¡®å®šä¸‹æ˜¯å¦å®‰è£…æˆåŠŸï¼š\n[root@VM-8-6-centos ~]# helm version\rversion.BuildInfo{Version:\u0026quot;v3.7.0\u0026quot;, GitCommit:\u0026quot;eeac83883cb40xxxxxxxxxxxec6373570374ce770b\u0026quot;, GitTreeState:\u0026quot;clean\u0026quot;, GoVersion:\u0026quot;go1.16.x\u0026quot;}\r æˆåŠŸçš„æƒ…å†µæ·»åŠ å«æœ‰ Rancher Chart çš„ Helm Chart ä»“åº“ï¼š\nhelm repo add rancher-stable https://releases.rancher.com/server-charts/stable\r  å¢ƒå†…æœåŠ¡å™¨ä½¿ç”¨é˜¿é‡Œäº‘çš„æº\nhelm repo add rancher-stable http://rancher-mirror.oss-cn-beijing.aliyuncs.com/server-charts/stable\r  2ã€ä¸º Rancher åˆ›å»º Namespace\nkubectl create namespace cattle-system\r 3ã€ä½¿ç”¨è‡ªç­¾è¯ä¹¦ å®‰è£… Rancher\n è¿™ä¸€æ­¥å®˜æ–¹ç»™äº† 3 ä¸ªé€‰é¡¹ï¼š\n Rancher ç”Ÿæˆçš„è‡ªç­¾åè¯ä¹¦ Let\u0026rsquo;s Encrypt ä½¿ç”¨æ‚¨è‡ªå·±çš„è¯ä¹¦ï¼ˆå¯ä»¥æ˜¯è‡ªç­¾ä¹Ÿå¯ä»¥æ˜¯è…¾è®¯äº‘ç­‰å…è´¹ç”³è¯·æ¥çš„æˆ–æ˜¯ä»˜è´¹è´­ä¹°çš„ï¼‰   æˆ‘é€‰æ‹©äº†æœ€åä¸€ç§ï¼Œè‡ªç­¾å‘ 10 å¹´å¹¶åœ¨æœ¬åœ°å®‰è£…è¯ä¹¦ä»¥ä¿¡ä»»ï¼Œæ•™ç¨‹åœ¨è¿™ï¼šCentOS7 ä¸‹ä½¿ç”¨ OpenSSL ç”Ÿæˆ CA è‡ªç­¾å‘è¯ä¹¦å¹¶è§£å†³ Windows ä¸‹ä¿¡ä»»è¯ä¹¦å Chrome å‡ºç° ERR_CERT_COMMON_NAME_INVALID çš„é—®é¢˜ã€‚\nå…ˆé…ç½®ç¯å¢ƒå˜é‡ï¼š\nvi /etc/profile\r ...\r...\r# æŒ‡å®š Rancher çš„å®‰è£…ä½¿ç”¨ KUBECONFIG é…ç½®æ–‡ä»¶é˜²æ­¢å‡ºç°â€œdial tcp [::1]:8080: connect: connection refusedâ€çš„é”™è¯¯\rexport KUBECONFIG=/etc/rancher/k3s/k3s.yaml\r source /etc/profile\r æ¥ç€æ‰§è¡Œå®‰è£…å‘½ä»¤ï¼š\næ³¨æ„ï¼šhostname é€‰é¡¹å¿…é¡»ä¸æœåŠ¡å™¨è¯ä¹¦ä¸­çš„ Common Name æˆ– Subject Alternative Names æ¡ç›®åŒ¹é…ï¼\n# ä½¿ç”¨ Helm å®‰è£… Rancher\r# replicas ä¸º Rancher éƒ¨ç½²æ‰€ä½¿ç”¨çš„å¤åˆ¶æ•°é‡ï¼Œå°‘äº 3 ä¸ªèŠ‚ç‚¹æ—¶å¡«å†™å‡†ç¡®èŠ‚ç‚¹æ•°\r# è‡ªç­¾èŠ‚ç‚¹ privateCA å˜é‡è®¾ç½®ä¸º true\rhelm install rancher rancher-stable/rancher \\\r--namespace cattle-system \\\r--set hostname=rancher.k3s.com \\\r--set replicas=3 \\\r--set ingress.tls.source=secret \\\r--set privateCA=true\r# é…ç½® SSL è¯ä¹¦\rkubectl -n cattle-system create secret tls tls-rancher-ingress \\\r--cert=/etc/nginx/ssl/rancher.crt \\\r--key=/etc/nginx/ssl/rancher.key\r éªŒè¯æ˜¯å¦å®‰è£…æˆåŠŸï¼š\n# Rancher æ˜¯å¦æˆåŠŸéƒ¨ç½²\rkubectl -n cattle-system rollout status deploy/rancher\r# Rancher å½“å‰çŠ¶æ€\rkubectl -n cattle-system get deploy rancher\r ç¡®å®šå®Œæˆåç”¨ HTTPS://åŸŸå è¿›è¡Œè®¿é—®ã€‚\nç»“æŸã€‚\n","id":33,"section":"posts","summary":"ç¬¬ä¸€ç« å®‰è£…å®Œä¸€ä¸ª server å’Œä¸€ä¸ª agent èŠ‚ç‚¹ä¹‹åï¼Œå°±ç›¸å½“äºæ‹¥æœ‰äº†ä¸€ä¸ªè¿·ä½ çš„ K3s é›†ç¾¤ï¼Œç°åœ¨å¼€å§‹å®‰è£…ç®¡ç†é¢æ¿ã€‚ æ³¨æ„ï¼šè¯·å‚è€ƒæˆåŠŸç‡æ›´é«˜çš„Docker å®‰è£… Rancher Labs","tags":["Linux","K3s"],"title":"K3s å­¦ä¹ ï¼ˆäºŒï¼‰å®‰è£… Rancher Labsï¼ˆæ‰‹åŠ¨å®‰è£…ç‰ˆæœ¬ï¼Œä¸æ¨èï¼‰","uri":"https://senjianlu.com/2021/09/k3s-note-02-01/","year":"2021"},{"content":"ä¹‹å‰æ˜¯åœ¨ä¸€å° 2H4G æœåŠ¡å™¨ä¸Šç”¨ Screen è·‘å¤šä¸ªé¡¹ç›®ï¼Œæ˜æ˜ç¡å‰çœ‹éƒ½æ˜¯è¿è¡Œçš„å¥½å¥½çš„ï¼Œæ—©ä¸Šèµ·æ¥æ£€æŸ¥å´æ€»æœ‰ 1ã€2 ä¸ªè¢« Kill æ‰äº†ï¼Œå±å®å¿ƒç´¯ï¼Œæ­£å·§è…¾è®¯äº‘é€äº†è€ç”¨æˆ·ä¸€å¹´ 2H4G çš„æœåŠ¡å™¨ï¼Œå¸¦ä¸Šå­¦ç”Ÿæœºç»„ä¸ªé›†ç¾¤ï¼Œåé¢å†æŠŠé¡¹ç›®éƒ½åšæˆ Docker è¿è¡Œåº”è¯¥å°±èƒ½ä¿è¯ç¨³å®šæ€§äº†ã€‚\n æœ¬æ¬¡ç”¨æ¥æ„å»ºé›†ç¾¤çš„æœåŠ¡å™¨å…±æœ‰ 4 å°ï¼Œå¦æœ‰ 1 å°ç”¨ä½œé¢æ¿å®‰è£…ã€‚ä¸ºä»€ä¹ˆä¸å°†é¢æ¿éƒ¨ç½²åˆ°èŠ‚ç‚¹æœåŠ¡å™¨æ˜¯å› ä¸º K3s å®‰è£…æ—¶é»˜è®¤ä¼šå®‰è£… Ingress åšè´Ÿè½½å‡è¡¡ï¼Œå®ƒä¼šç›‘å¬ 80 å’Œ 443 ç«¯å£å¹¶åœ¨ Nginx ä¹‹å‰å°±å¤„ç†è¯·æ±‚å¹¶è¿”å›â€œ404 Page not foundâ€ï¼Œç”šæ˜¯çƒ¦äººç´¢æ€§æŠ½ç¦»å‡ºæ¥ï¼ŒåŒæ—¶æ³¨æ„ Rancher éœ€è¦æœ€å° 2H4G çš„é…ç½®æ¥å…è®¸ï¼Œä¸ç„¶ä¼šé¢‘ç¹ CPU å ç”¨ 100% å¹¶å‡ºç° 503 é”™è¯¯ã€‚\nå› ä¸ºä½¿ç”¨äº†å¤–ç½®æ•°æ®åº“çš„åŸå› ï¼ŒK3s server èŠ‚ç‚¹ä¸å†éœ€è¦å®‰è£… 3 å°ï¼ˆ3 å°çš„é™åˆ¶æ˜¯ä¸ºäº†ä¿è¯å†…ç½®æ•°æ®åº“åŒæ­¥å¹¶æ¨ä¸¾å‡ºä¸»èŠ‚ç‚¹ï¼‰ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯ä¹ æƒ¯å®‰è£…ä¸‰å°ã€‚ æ³¨ï¼šæœåŠ¡å™¨é—´å‡é€šè¿‡å†…ç½‘å»ºç«‹è¿æ¥ã€‚\n å¼€å§‹å®‰è£…å‰ï¼Œæˆ‘å¼ºçƒˆå»ºè®®æ‚¨åœ¨å®‰å…¨ç»„å’Œé˜²ç«å¢™å¤„å¼€æ”¾å…¨éƒ¨ç«¯å£ï¼ŒK3s çš„å®˜æ–¹æ–‡æ¡£éƒ½ç»“æ„æ··ä¹±ï¼Œæ‚¨å¾ˆéš¾æ’æŸ¥ç«¯å£ç›¸å…³çš„é”™è¯¯ã€‚åœ¨åæœŸå…¨éƒ¨å®‰è£…å®Œæ¯•åæ‚¨å†è¿›è¡Œé’ˆå¯¹æ€§å…³é—­å±é™©ç«¯å£ä¹Ÿä¸è¿Ÿï¼\n1ã€å‡†å¤‡å¤–éƒ¨æ•°æ®åº“è¿æ¥\næˆ‘è¿™é‡Œä½¿ç”¨çš„å¤–ç½®çš„ MySQL æ•°æ®åº“ï¼Œç¼–è¾‘ç¯å¢ƒå˜é‡ä»¥æ·»åŠ  server ç”¨çš„æ•°æ®åº“è¿æ¥ï¼š\nvi /etc/profile\r ...\r# åœ¨æœ€æœ«å°¾æ·»åŠ æ•°æ®åº“è¿æ¥\r# è‡ªè¡Œæ›¿æ¢æ•°æ®åº“è¿æ¥å‚æ•°\r# MySQL\rexport K3S_DATASTORE_ENDPOINT=\u0026quot;mysql://$username:$password@tcp(127.0.0.1:3306)/$database\u0026quot;\r# PostgreSQL\rexport K3S_DATASTORE_ENDPOINT=\u0026quot;postgres://$username:$password@127.0.0.1:5432/$database?sslmode=disable\u0026quot;\r # ä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ\rsource /etc/profile\r  PostgreSQL è¿æ¥ä¸ç¦ç”¨ SSL è¿æ¥çš„è¯åç»­å®‰è£…å¹¶å¯åŠ¨ K3s æ—¶ä¼šæŠ¥ä»¥ä¸‹é”™è¯¯ï¼š\n...\r...\r-- Unit k3s.service has begun starting up. Sep 27 20:46:52 VM-9-9-centos sh[5029]: + /usr/bin/systemctl is-enabled --quiet nm-cloud-setup.service Sep 27 20:46:52 VM-9-9-centos sh[5029]: Failed to get unit file state for nm-cloud-setup.service: No such file or directory Sep 27 20:46:52 VM-9-9-centos k3s[5036]: time=\u0026quot;2021-09-27T20:46:52.707510605+08:00\u0026quot; level=info msg=\u0026quot;Starting k3s v1.21.4+k3s1 (3e250fdb)\u0026quot; Sep 27 20:46:52 VM-9-9-centos k3s[5036]: time=\u0026quot;2021-09-27T20:46:52.714638844+08:00\u0026quot; level=fatal msg=\u0026quot;starting kubernetes: preparing server: creating storage endpoint: building kine: pq: SSL is not enabled on the server\u0026quot; Sep 27 20:46:52 VM-9-9-centos systemd[1]: k3s.service: main process exited, code=exited, status=1/FAILURE Sep 27 20:46:52 VM-9-9-centos systemd[1]: Failed to start Lightweight Kubernetes. -- Subject: Unit k3s.service has failed -- Defined-By: systemd -- Support: http://lists.freedesktop.org/mailman/listinfo/systemd-deve ...\r...\r  2ã€å®‰è£… server èŠ‚ç‚¹\nåœ¨è®¾ç½®å¥½æ•°æ®åº“è¿æ¥ç¯å¢ƒå˜é‡ä¹‹åå¼€å§‹å®‰è£…ï¼Œä½¿ç”¨å®˜æ–¹æä¾›çš„è„šæœ¬ï¼š\næ³¨ï¼šè¿™é‡Œå®‰è£…æ—¶ä¼šè‡ªåŠ¨è¯»å–ç¯å¢ƒä¸­å’Œ K3s æœ‰å…³çš„å˜é‡ï¼Œå› æ­¤ä¸å†éœ€è¦æŒ‡å®šæ•°æ®åº“è¿æ¥ã€‚\ncurl -sfL https://get.k3s.io | INSTALL_K3S_VERSION=v1.20.8+k3s1 sh -s - server\r  å¢ƒå†…æœåŠ¡å™¨ä½¿ç”¨ cnrancher.com çš„æº\ncurl -sfL http://rancher-mirror.cnrancher.com/k3s/k3s-install.sh | INSTALL_K3S_MIRROR=cn INSTALL_K3S_VERSION=v1.20.8+k3s1 sh -s - server\r  å®‰è£…å®ŒåæŸ¥çœ‹èŠ‚ç‚¹ï¼š\nk3s kubectl get nodes\r å‡ºç°ä»¥ä¸‹ä¿¡æ¯åˆ™è¯´æ˜å®‰è£…å®Œæˆã€‚\nNAME STATUS ROLES AGE VERSION\rvm-9-9-centos Ready control-plane,master 18m v1.21.4+k3s1\r è·å–ä»¥ä¸‹ node-token æ–¹ä¾¿ä¹‹åéƒ¨ç½² agent èŠ‚ç‚¹ï¼š\ncat /var/lib/rancher/k3s/server/node-token\r K1082501c0eaxxxxxxxx77059a4fff524xxx589b9::server:1f2d8a3xxxxx7a1e2e4xxx60\r  å‰¯ server èŠ‚ç‚¹çš„å®‰è£…ä»…éœ€è¦ä½¿ç”¨åŒä¸€ä¸ªæ•°æ®åº“ï¼ŒK3s ä¼šé€šè¿‡æ•°æ®åº“åŒæ­¥å„èŠ‚ç‚¹ï¼š\n# K3s server ç”¨ MySQL æ•°æ®åº“è¿æ¥\rexport K3S_DATASTORE_ENDPOINT=\u0026quot;mysql://$username:$password@tcp(127.0.0.1:3306)/$database\u0026quot;\r  3ã€å®‰è£… agent èŠ‚ç‚¹\nä»ç„¶æ˜¯å…ˆé…ç½®ç¯å¢ƒå˜é‡ï¼š\nvi /etc/profile\r æ³¨æ„ï¼šagent èŠ‚ç‚¹çš„ç¯å¢ƒå˜é‡ä¸­ä¸éœ€è¦é…ç½®æ•°æ®åº“çš„è¿æ¥ä¿¡æ¯ï¼\n...\r# åœ¨æœ€æœ«å°¾æ·»åŠ  server èŠ‚ç‚¹çš„ node-token\rexport K3S_TOKEN=\u0026quot;K1082501c0eaxxxxxxxx77059a4fff524xxx589b9::server:1f2d8a3xxxxx7a1e2e4xxx60\u0026quot;\r# server èŠ‚ç‚¹çš„åœ°å€ï¼Œç«¯å£é»˜è®¤ä¸º 6443\r# å¿…é¡»ä½¿ç”¨ HTTPS åè®®ï¼šOnly https:// URLs are supported for K3S_URL ip address\rexport K3S_URL=\u0026quot;https://10.0.12.0:6443\u0026quot;\r # ä½¿ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ\rsource /etc/profile\r ä½¿ç”¨å’Œ server ä¸€æ ·çš„è„šæœ¬è¿›è¡Œå®‰è£…ï¼Œä½†æ˜¯è®¾ç½®äº† K3S_URL è¿™ä¸ªç¯å¢ƒå˜é‡ï¼Œå› æ­¤é»˜è®¤é€‰æ‹©ä¸ºå®‰è£… agent ç¨‹åºï¼š\n# agent èŠ‚ç‚¹å®‰è£…\rcurl -sfL https://get.k3s.io | INSTALL_K3S_VERSION=v1.20.8+k3s1 sh -\r  å¢ƒå†…æœåŠ¡å™¨ä½¿ç”¨ cnrancher.com çš„æº\ncurl -sfL http://rancher-mirror.cnrancher.com/k3s/k3s-install.sh | INSTALL_K3S_MIRROR=cn INSTALL_K3S_VERSION=v1.20.8+k3s1 sh -\r  å®‰è£…å®Œæˆåç†è®ºä¸Šä¼šè‡ªå·±å¯åŠ¨ï¼Œè¿™æ—¶å› server èŠ‚ç‚¹å†æ£€æŸ¥ä¸‹æ€»èŠ‚ç‚¹ä¸ªæ•°å°±èƒ½çœ‹åˆ°æ–°çš„ agent èŠ‚ç‚¹äº†ï¼š\n[root@VM-9-9-centos CA]# kubectl get nodes\rNAME STATUS ROLES AGE VERSION\rvm-9-8-centos Ready \u0026lt;none\u0026gt; 3m18s v1.21.4+k3s1\rvm-9-9-centos Ready control-plane,master 10h v1.21.4+k3s1\r 4ã€èŠ‚ç‚¹å¸è½½\nserver èŠ‚ç‚¹\n/usr/local/bin/k3s-uninstall.sh\r agent èŠ‚ç‚¹\n/usr/local/bin/k3s-agent-uninstall.sh\r æ³¨æ„ï¼šå¸è½½å®Œä¹‹åæ¸…ç†æ®‹ç•™ä»¥é˜²æ­¢é‡è£…åå‡ºç°â€œUnable to connect to the server: x509: certificate signed by unknown authorityâ€çš„é”™è¯¯ï¼Œå¦‚æœå‡ºç°çš„è¯è¯·å¸è½½ã€æ¸…ç†å¹¶é‡è£…ä»¥å°è¯•è§£å†³ï¼\nrm -rf $HOME/.kube\r 5ã€ä¸€äº›å¯èƒ½ç”¨çš„åˆ°æŒ‡ä»¤\nèŠ‚ç‚¹çŠ¶æ€æŸ¥çœ‹ï¼š\nkubectl describe node $hostname\r æœ¬ç« ç»“æŸï¼Œä¸‹ç« å®‰è£… Rancher Labs ä½œä¸ºç®¡ç†ç•Œé¢ã€‚\n","id":34,"section":"posts","summary":"ä¹‹å‰æ˜¯åœ¨ä¸€å° 2H4G æœåŠ¡å™¨ä¸Šç”¨ Screen è·‘å¤šä¸ªé¡¹ç›®ï¼Œæ˜æ˜ç¡å‰çœ‹éƒ½æ˜¯è¿è¡Œçš„å¥½å¥½çš„ï¼Œæ—©ä¸Šèµ·æ¥æ£€æŸ¥å´æ€»æœ‰ 1ã€2 ä¸ªè¢« Kill æ‰äº†ï¼Œå±å®å¿ƒç´¯ï¼Œæ­£å·§è…¾è®¯äº‘é€äº†è€ç”¨æˆ·ä¸€å¹´ 2H4G çš„","tags":["Linux","K3s"],"title":"K3s å­¦ä¹ ï¼ˆä¸€ï¼‰é«˜å¯ç”¨æ¨¡å¼åœ¨ CentOS7 æœåŠ¡å™¨ä¸Šæ„å»ºç¬¬ä¸€ç»„ server + agent èŠ‚ç‚¹","uri":"https://senjianlu.com/2021/09/k3s-note-01/","year":"2021"},{"content":"æˆ‘ä¸æƒ³å†™ SQLã€‚\n 1ã€é¦–å…ˆå®‰è£… plpython3u åŒ…\nPostgreSQL ç‰ˆæœ¬è¯·è‡ªè¡Œæ›´æ”¹ï¼Œå®‰è£…ä¹‹å‰å…ˆå‰å¾€ pkgs.org æœç´¢ä»¥ç¡®å®šæœ‰å¯¹åº”çš„åŒ…ã€‚\nyum install postgresql12-plpython3\r 2ã€ä¸ºæ•°æ®åº“æ·»åŠ æ‰©å±•\nåˆ‡æ¢åˆ°ä½ éœ€è¦å®‰è£… Python3 è¯­è¨€æ‰©å±•çš„æ•°æ®åº“å¹¶æ‰§è¡Œï¼š\nCREATE EXTENSION plpython3u;\r 3ã€æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ\nåˆ›å»ºå‡½æ•°ï¼š\nCREATE OR REPLACE FUNCTION \u0026quot;public\u0026quot;.\u0026quot;python3_test\u0026quot; (a integer, b integer)\rRETURNS INT\rLANGUAGE plpython3u\rAS $$\rif a \u0026gt; b:\rreturn a\rreturn b\r$$;\r æµ‹è¯•ä¸€ä¸‹ï¼š\nSELECT python3_test(1, 2)\r\u0026gt; OK\r\u0026gt; æ—¶é—´: 0.058s\r    python3_test     2    æ²¡æœ‰é—®é¢˜ã€‚\n4ã€å¯¼å…¥ Python3 åŒ…å’Œåœ¨æœ¬æ•°æ®åº“æ‰§è¡ŒæŸ¥è¯¢è¯­å¥\næ³¨æ„ï¼šPython3 è¯­å¥ä¸¥æ ¼ä½¿ç”¨ 4 ç©ºæ ¼è¿›è¡Œç¼©è¿›ï¼\nCREATE OR REPLACE FUNCTION \u0026quot;public\u0026quot;.\u0026quot;python3_test\u0026quot;(str text)\rRETURNS INT\rLANGUAGE plpython3u\rAS $$\rimport random\r# è·å–å­—ç¬¦ä¸²é•¿åº¦\r# ä½¿ç”¨ plpy.execute() ç›´æ¥åœ¨æœ¬æ•°æ®åº“æ‰§è¡Œ SQL è¯­å¥\rselect_result = plpy.execute(\u0026quot;SELECT CHAR_LENGTH('{}');\u0026quot;.format(str))\rstr_length = int(select_result[0][\u0026quot;char_length\u0026quot;])\r# éšæœºæ•°\rrandom_int = random.randint(0, str_length)\rreturn random_int\r$$;\r è¿è¡Œï¼š\nSELECT python3_test('1234567890')\r\u0026gt; OK\r\u0026gt; æ—¶é—´: 0.033s\r    python3_test     7    5ã€ç¬¬ä¸‰æ–¹ Python æ¨¡å—çš„å®‰è£…å’Œå¯¼å…¥\næ³¨ï¼šè¿™é‡Œä¸ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œç›´æ¥ç”¨æœ€ç®€å•çš„æ–¹æ³•åœ¨å‡½æ•°ä¸­æ·»åŠ åŒ…è·¯å¾„ã€‚\nç¬¬ä¸‰æ–¹æ¨¡å—çš„å®‰è£…ç›´æ¥ä½¿ç”¨ pip3 install å³å¯ï¼Œå’Œå¹³æ—¶ä½¿ç”¨ Python3 æ— å¼‚ï¼›å¯¼å…¥åˆ™éœ€è¦å…ˆæ‰¾åˆ°æ¨¡å—å®‰è£…è·¯å¾„ï¼Œè¿™é‡Œä»¥ requests ä¸ºä¾‹ï¼š\n[root@VM-8-12-centos ~]# pip3 show requests\rName: requests\rVersion: 2.26.0\rSummary: Python HTTP for Humans.\rHome-page: https://requests.readthedocs.io\rAuthor: Kenneth Reitz\rAuthor-email: me@kennethreitz.org\rLicense: Apache 2.0\rLocation: /usr/local/lib/python3.6/site-packages\rRequires: urllib3, charset-normalizer, certifi, idna\r é‚£ä¹ˆ pip3 é»˜è®¤çš„å®‰è£…è·¯å¾„åˆ™ä¸ºï¼š/usr/local/lib/python3.6/site-packagesï¼Œåœ¨å‡½æ•°ä¸­è¿›è¡Œå¯¼å…¥ï¼š\nCREATE OR REPLACE FUNCTION \u0026quot;public\u0026quot;.\u0026quot;python3_test\u0026quot;(url text)\rRETURNS INT\rLANGUAGE plpython3u\rAS $$\rimport sys\rsys.path.append(\u0026quot;/usr/local/lib/python3.6/site-packages/\u0026quot;)\rimport requests\r# è®¿é—®\rresponse = requests.get(url)\rreturn response.status_code\r$$;\r è¿è¡Œï¼š\nSELECT python3_test('https://baidu.com')\r\u0026gt; OK\r\u0026gt; æ—¶é—´: 0.526s\r    python3_test     200    6ã€æ‰“å°æ—¥å¿—å’Œè¿”å›è¡¨ç»“æ„çš„æ•°æ®\nCREATE OR REPLACE FUNCTION \u0026quot;public\u0026quot;.\u0026quot;python3_test\u0026quot;(str text)\rRETURNS TABLE(_varchar VARCHAR, _numeric NUMERIC, _boolean BOOLEAN)\rLANGUAGE plpython3u\rAS $$\rimport sys\rsys.path.append(\u0026quot;/usr/local/lib/python3.6/site-packages/\u0026quot;)\r# ç±»\rclass return_class():\rdef __init__(self, _varchar, _numeric, _boolean):\rself._varchar = _varchar\rself._numeric = _numeric\rself._boolean = _boolean\r# æ‰“å°æ—¥å¿—\rplpy.debug(\u0026quot;debug\u0026quot;)\rplpy.log(\u0026quot;log\u0026quot;)\rplpy.info(\u0026quot;info\u0026quot;)\rplpy.notice(\u0026quot;notice\u0026quot;)\rplpy.warning(\u0026quot;warning\u0026quot;)\r# è¿”å›è¡¨ç»“æ„ï¼ˆåœ¨å£°æ˜äº†è¿”å›è¡¨çš„åˆ—åååªè¦ä»¥åˆ—ä¸ºå•ä½ç”Ÿæˆå¯¹è±¡å¹¶æ”¾å…¥æ•°ç»„è¿”å›å³å¯ï¼‰\rreturn_classes = []\ra_class = return_class(str, 1.00, True)\ra_class._numeric = 0.01\rreturn_classes.append(a_class)\rreturn_classes.append(return_class(\u0026quot;bb\u0026quot;, 1.23, True))\rreturn_classes.append(return_class(\u0026quot;cc\u0026quot;, 3.21, False))\rreturn return_classes\r$$;\r è¿è¡Œï¼š\nSELECT * FROM python3_test('test_log_table')\r\u0026gt; INFO: info\r\u0026gt; NOTICE: notice\r\u0026gt; WARNING: warning\r\u0026gt; OK\r\u0026gt; æ—¶é—´: 0.115s\r    _varchar _numeric _boolean     test_log_table 0.01 t   bb 1.23 t   cc 3.21 f    ç»“æŸã€‚\n","id":35,"section":"posts","summary":"æˆ‘ä¸æƒ³å†™ SQLã€‚ 1ã€é¦–å…ˆå®‰è£… plpython3u åŒ… PostgreSQL ç‰ˆæœ¬è¯·è‡ªè¡Œæ›´æ”¹ï¼Œå®‰è£…ä¹‹å‰å…ˆå‰å¾€ pkgs.org æœç´¢ä»¥ç¡®å®šæœ‰å¯¹åº”çš„åŒ…ã€‚ yum install postgresql12-plpython3 2ã€ä¸ºæ•°æ®åº“æ·»åŠ æ‰©å±• åˆ‡æ¢åˆ°ä½ éœ€è¦å®‰è£… Python3 è¯­è¨€æ‰©å±•","tags":["PostgreSQL"],"title":"PostgreSQL å­¦ä¹ ç¬”è®°ï¼ˆå››ï¼‰å®‰è£… plpythonu ä»¥ä½¿ç”¨ Python3 è¯­è¨€ç¼–å†™å‡½æ•°","uri":"https://senjianlu.com/2021/09/postgresql-note-04/","year":"2021"},{"content":"å› ä¸º Linux ç³»ç»Ÿä¸‹ç”¨ code-server ä½œä¸ºç¼–è¯‘å™¨é¢„è§ˆ Matplotlib å›¾è¡¨å®åœ¨è¿‡äºéº»çƒ¦ï¼Œäºæ˜¯å†³å®šå¤šè£…ä¸€ä¸ª Jupyter ä½œä¸ºæ•°æ®åˆ†æå›¾è¡¨é¢„è§ˆç”¨å·¥å…·ã€‚\n å®‰è£…è¾ƒä¸ºç®€å•ï¼Œä½†æ˜¯å¼€æœºå¯åŠ¨ç¢°åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œä½†è¿˜æ˜¯åšä¸ªæ•´ä½“çš„è®°å½•å§ã€‚\n1ã€å®‰è£… Python3ï¼Œå·²ç»å®‰è£…åˆ™è·³è¿‡ ä½¿ç”¨æˆ‘çš„ä¸€é”®è„šæœ¬å³å¯ï¼š\ncurl -s https://gitee.com/senjianlu/one-click-scripts/raw/main/CentOS7%20%E4%B8%8B%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%20Python3%20%E7%8E%AF%E5%A2%83/install.sh | bash\r 2ã€pip3 å®‰è£… Jupyter\npip3 install notebook\r 3ã€ç”Ÿæˆå’Œä¿®æ”¹é…ç½®æ–‡ä»¶ä»¥ä½¿å…¶èƒ½è¢«å¤–éƒ¨è®¿é—®ï¼ŒåŒæ—¶æ”¯æŒå¯†ç éªŒè¯\njupyter notebook --generate-config\r é…ç½®æ–‡ä»¶ä¼šç”Ÿæˆåœ¨ç”¨æˆ·ç›®å½•çš„ .jupyter/jupyter_notebook_config.py ä¸‹ï¼Œä¸ç”¨è®°å½•ä½ç½®ï¼Œå…ˆå»ç”Ÿæˆå¯†ç éªŒè¯ç”¨çš„å¯†é’¥ï¼š\npython3\r from notebook.auth import passwd\rpasswd()\r# è¾“å…¥å¯†ç \r# è·å–å½¢å¦‚ argon2:$argon2id$v=19$m=10240,t=10,p=8$dhDVXQegS13Rxxxxxxxxxxxxxxxxxxx çš„å¯†é’¥\rexit()\r ä¿å­˜å¥½å¯†é’¥åå»ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š\nvi /root/.jupyter/jupyter_notebook_config.py\r æ‰¾åˆ°ä»¥ä¸‹å„è¡Œï¼ŒæŒ‰ä¸‹è¿°ä¿®æ”¹ï¼š\nc.NotebookApp.ip='*' # è®¾ç½®æ‰€æœ‰ IP çš†å¯è®¿é—®\rc.NotebookApp.password=u'argon2:$a....' # å¤åˆ¶åˆšæ‰ç”Ÿæˆçš„é‚£ä¸ªå¯†æ–‡\rc.NotebookApp.open_browser=False # ç¦æ­¢è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨\rc.NotebookApp.port=8888 # é»˜è®¤ä¸º 8888 ç«¯å£\r 4ã€å¼€å¯å¯¹åº”ç«¯å£çš„é˜²ç«å¢™å’Œå®‰å…¨ç»„ï¼ŒåŸºç¡€æ“ä½œï¼Œåšä¸ªæé†’\n5ã€å°è¯•å¯åŠ¨\njupyter notebook --allow-root\r è¾“å…¥å¯†ç ç™»å½•ï¼Œå‡ºç°ç›®å½•é¡µé¢åˆ™è¯´æ˜å®‰è£…æ²¡é—®é¢˜ã€‚ 6ã€æ–°å»ºç¬”è®°æ–‡ä»¶\nJupyter å®é™…ä¸Šå¹¶ä¸æ˜¯ä¸“ä¸šçš„ IDEï¼Œè€Œæ˜¯ç¬”è®°å·¥å…·ï¼Œå› æ­¤åˆ›å»ºçš„æ–‡ä»¶å®é™…ä¸Šä¹Ÿæ˜¯ç¬”è®°æ–‡ä»¶ç±»å‹ï¼Œä»¥ä¸‹è™½ç„¶æ˜¾ç¤ºçš„æ˜¯ Python3 å®é™…åˆ›å»ºçš„æ˜¯ .ipynb æ–‡ä»¶ã€‚ æœ€ç®€å•çš„ä»£ç è¯•ä¸‹åŠŸèƒ½ï¼š 7ã€è®¾ç½®å¼€æœºè‡ªå¯åŠ¨ å¦‚æœæ²¡æœ‰ Screen å…ˆå®‰è£…ï¼š\nyum -y install screen\r# é…ç½® Screen èƒ½è¯»å–ç¯å¢ƒå˜é‡\recho 'shell -$SHELL' \u0026gt;\u0026gt; /etc/screenrc\r crontab ä¸­æ–°å¢å¯åŠ¨ä»»åŠ¡ï¼š\n# ä½¿ç”¨ python3 -m è€Œé jupyter å‘½ä»¤æ˜¯å› ä¸º crond çš„ç¯å¢ƒå˜é‡å’Œå…¨å±€å˜é‡ä¸ä¸€è‡´\r@reboot screen -dmS jupyter \u0026amp;\u0026amp; screen -S jupyter -X stuff 'python3 -m notebook --allow-root\\n'\r ç»“æŸã€‚\n","id":36,"section":"posts","summary":"å› ä¸º Linux ç³»ç»Ÿä¸‹ç”¨ code-server ä½œä¸ºç¼–è¯‘å™¨é¢„è§ˆ Matplotlib å›¾è¡¨å®åœ¨è¿‡äºéº»çƒ¦ï¼Œäºæ˜¯å†³å®šå¤šè£…ä¸€ä¸ª Jupyter ä½œä¸ºæ•°æ®åˆ†æå›¾è¡¨é¢„è§ˆç”¨å·¥å…·ã€‚ å®‰è£…è¾ƒä¸ºç®€å•ï¼Œä½†æ˜¯å¼€æœºå¯åŠ¨ç¢°åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œä½†","tags":["Linux"],"title":"CentOS7 ä¸‹å®‰è£… Jupyter","uri":"https://senjianlu.com/2021/09/centos7-jupyter/","year":"2021"},{"content":"LinuxGSM (Linux Game Server Managers) æ˜¯å¼€æºçš„ Linux æœåŠ¡å™¨æ¸¸æˆæœåŠ¡å™¨å¼€è®¾å·¥å…·ï¼Œç®€å•å¥½ç”¨ï¼Œå¯ä»¥èŠ‚çœå¤§é‡æ—¶é—´å› æ­¤é€‰ç”¨ã€‚\næ³¨ï¼šä¸€èˆ¬æƒ…å†µä¸‹æˆ‘éƒ½æ˜¯æ›´å€¾å‘ç”¨ç†Ÿæ‚‰çš„ CentOS7 ç³»ç»Ÿï¼Œä½†æ˜¯åœ¨å°è¯•æ­å»ºä¸€éè¿‡åï¼Œå¡åœ¨äº†Yum æ— æ³•å®‰è£… Python3.6 çš„é—®é¢˜ä¸Šï¼Œå› æ­¤æœ¬æ•™ç¨‹é€‰æ‹© Ubuntu18 ç³»ç»Ÿã€‚\n  æ³¨æ„ï¼šæœ€ä½çš„æœåŠ¡å™¨é…ç½®éœ€æ±‚ä¸º 2H4Gï¼Œä½äº 4G å†…å­˜è¯·ä¸ç”¨å°è¯•äº†ã€‚ä¸”å¦‚æœä½ ä½¿ç”¨çš„æ˜¯å¢ƒå†…æœåŠ¡å™¨ï¼Œæˆ‘æ¨èä½ è®¾ç½®å¥½ä»£ç†ï¼Œä»¥ä¿è¯å®‰è£…è„šæœ¬èƒ½é¡ºåˆ©çš„ä» GitHub ä¸‹è½½æ‰€éœ€æ–‡ä»¶ï¼š\n# ä»…ä¾›å‚è€ƒæ ¼å¼ç”¨\rexport http_proxy=socks5://99999:22222@63.225.10.10:20800\rgit config --global http.proxy socks5://99999:22222@63.225.10.10:20800\rgit config --global https.proxy socks5://99999:22222@63.225.10.10:20800\r å¦‚æœä½ æ²¡æœ‰ä»£ç†ï¼Œä¹Ÿå¯ä»¥è¯•è¯•ä¿®æ”¹ hostsï¼Œä½†è¿™å¹¶ä¸èƒ½ä¿è¯ 100% è§£å†³ä½ çš„é—®é¢˜ï¼š\nvi /etc/hosts\r ...\rÂ·Â·Â·\r199.232.4.133 raw.githubusercontent.com\r  1ã€å®‰è£…æ‰€éœ€ä¾èµ–å’Œä¸‹è½½ LinuxGSM\nå…ˆæ›´æ–°è½¯ä»¶æºï¼š\nsudo apt-get update \u0026amp;\u0026amp; sudo apt-get upgrade\r æ¥ç€å®‰è£…LinuxGSM æ‰€éœ€ä¾èµ–ï¼š\nsudo dpkg --add-architecture i386; sudo apt update; sudo apt install curl wget file tar bzip2 gzip unzip bsdmainutils python util-linux ca-certificates binutils bc jq tmux netcat lib32gcc1 lib32stdc++6 libsdl2-2.0-0:i386 steamcmd lib32z1\r  å®˜æ–¹æ–‡æ¡£æ¨èä¸ºæ¯ä¸ªæ¸¸æˆæœåŠ¡å™¨éƒ½æ–°å»ºä¸€ä¸ªç³»ç»Ÿç”¨æˆ·ï¼Œæˆ‘è¿™é‡Œæ–°å»ºäº† rustserver ç”¨æˆ·ï¼š\n# åˆ‡æ¢åˆ° root ç®¡ç†å‘˜ç”¨æˆ·ä¸‹\rsudo su\r# æ–°å»ºç”¨æˆ·\radduser rustserver\r# ä¿®æ”¹å¯†ç \rpasswd rustserver\r# åˆ‡æ¢åˆ°è¿™ä¸ªç”¨æˆ·\rsu - rustserver\r ä¹‹åçš„æ“ä½œéƒ½æ˜¯åœ¨è¿™ä¸ªç”¨æˆ·å’Œ /home/rustserver ç›®å½•ä¸‹æ‰§è¡Œçš„ã€‚\n ä¸‹è½½ LinuxGSMï¼š\n# ä¸‹è½½ LinuxGSM\rwget -O linuxgsm.sh https://linuxgsm.sh\r# èµ‹äºˆå…¶æ‰§è¡Œæƒé™\rchmod +x linuxgsm.sh\r 2ã€å®‰è£… Rust æœåŠ¡å™¨\nå‡†å¤‡æœåŠ¡å™¨å®‰è£…æ‰€éœ€å†…å®¹ï¼š\nbash linuxgsm.sh rustserver\r# èµ‹äºˆå…¶æ‰§è¡Œæƒé™\rchmod +x rustserver\r å¼€å§‹å®‰è£… Rust æœåŠ¡å™¨ï¼š\n./rustserver install\r ä¸­é€”éœ€è¦ç¡®è®¤çš„åœ°æ–¹è¾“å…¥ Y å›è½¦å³å¯ï¼ˆè¿™é‡Œç”¨çš„æ˜¯ CentOS7 æœåŠ¡å™¨çš„æˆªå›¾ï¼Œå¯èƒ½å’Œ Ubuntu18 æœ‰äº›ä¸åŒï¼Œä½†æ˜¯æµç¨‹æ˜¯ä¸€æ ·çš„ä¸€è·¯ç¡®å®šä¸‹å»å³å¯ï¼‰ï¼š\nçœ‹åˆ°ä»¥ä¸‹ä¿¡æ¯åˆ™è¯´æ˜å®‰è£…å®Œæˆï¼š\n3ã€é…ç½® Rust æœåŠ¡å™¨\né…ç½®æ–‡ä»¶çš„è·¯å¾„åœ¨å®‰è£…æ—¥å¿—ä¸­å­˜åœ¨ï¼Œå› æ­¤ç›´æ¥æ‹·è´å³å¯ã€‚\nä¿®æ”¹ä¸‹æœåŠ¡å™¨çš„æè¿°ä¿¡æ¯ï¼š\nvi /home/rustserver/serverfiles/server/rustserver/cfg/server.cfg\r ...\r...\r# A text description of your server. For a new line add: \\n\rserver.description \u0026quot;Belong to senjianlu.com\u0026quot;\r...\r...\r ä¿®æ”¹æ¸¸æˆé…ç½®ï¼š\ncd /home/rustserver/lgsm/config-lgsm/rustserver\r# æ‹·è´ä¸€ä»½é»˜è®¤é…ç½®å¹¶è¦†ç›–å½“å‰çš„ç©ºé…ç½®æ–‡ä»¶\rcp _default.cfg rustserver.cfg\rvi rustserver.cfg\r ...\r...\r## Predefined Parameters | https://docs.linuxgsm.com/configuration/start-parameters\r# å…è®¸æ‰€æœ‰ IP åœ°å€è¿æ¥æ­¤æœåŠ¡å™¨\rip=\u0026quot;0.0.0.0\u0026quot;\r# æœåŠ¡å™¨ç«¯å£\rport=\u0026quot;28015\u0026quot;\r# ç®¡ç†ç«¯å£\rrconport=\u0026quot;28016\u0026quot;\rappport=28082\r# ç®¡ç†å‘˜å¯†ç \rrconpassword=\u0026quot;xxxxxxxxx\u0026quot;\rrconweb=\u0026quot;1\u0026quot; # Value is: 1 for the Facepunch web panel, Rustadmin desktop and Rustadmin Online; 0 for RCON tools like Rusty.\r# æœåŠ¡å™¨åç§°\rservername=\u0026quot;senjianlu\u0026quot;\rgamemode=\u0026quot;vanilla\u0026quot; # Values: vanilla, softcore ( Doc: https://wiki.facepunch.com/rust/server-gamemodes )\rserverlevel=\u0026quot;Procedural Map\u0026quot; # Values: Procedural Map, Barren, HapisIsland, SavasIsland\rcustomlevelurl=\u0026quot;\u0026quot; # Custom level url. +server.levelurl \\\u0026quot;${customlevelurl}\\\u0026quot;\rseed=\u0026quot;\u0026quot; # range: 1-2147483647, used to reproduce a procedural map.\rsalt=\u0026quot;\u0026quot; # range: unknown, used to recover a known setting from an existing map.\r# æœ€å¤§ç©å®¶æ•°\rmaxplayers=\u0026quot;10\u0026quot;\rworldsize=\u0026quot;3000\u0026quot; # default: 3000, range: 1000-6000, map size in meters.\rsaveinterval=\u0026quot;300\u0026quot; # Auto-save in seconds.\rtickrate=\u0026quot;30\u0026quot; # default: 30, range: 15-100.\r...\r...\r ä¿å­˜åæ­¤æ­¥ç»“æŸã€‚\n4ã€å¯åŠ¨æœåŠ¡å™¨\n# å›åˆ°ç”¨æˆ·ç›®å½•ä¸‹\rcd /home/rustserver\r# å¯åŠ¨æœåŠ¡å™¨\r./rustserver start\r çœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯è¯´æ˜æœåŠ¡å™¨å¯åŠ¨å®Œæˆï¼š\n å‡ ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹ï¼š\nâ‘  è®°å¾—å¼€å‘é˜²ç«å¢™å’Œå®‰å…¨ç»„çš„å¯¹åº”ç«¯å£ï¼Œæˆ‘è¿™é‡Œè´ªçœäº‹ç›´æ¥å…³é—­äº†é˜²ç«å¢™ï¼š\nsudo ufw disable\r â‘¡ æœåŠ¡å™¨çš„å¯åŠ¨éœ€è¦æ—¶é—´ï¼Œå¤§æ¦‚åœ¨ 5 åˆ° 10 åˆ†é’Ÿå·¦å³ã€‚å¦‚ä½•åˆ¤æ–­æœåŠ¡å™¨æ˜¯å¦å¯åŠ¨æˆåŠŸå¯ä»¥é€šè¿‡ç›‘æ§ï¼Œåœ¨ 2H4G çš„äº‘æœåŠ¡å™¨ï¼ŒRustDedicated å¤§æ¦‚ä¼šåƒ 50% çš„ CPU èµ„æºå’Œ 90% çš„å†…å­˜èµ„æºï¼Œé•¿æ—¶é—´ç¨³å®šè¿™ä¸ªå ç”¨çš„è¯åŸºæœ¬å°±ç®—æ˜¯å¯åŠ¨æˆåŠŸäº†ã€‚\nâ‘¢ å¦‚æœå‘ç° kswapd0 é•¿æ—¶é—´å ç”¨å‡ ä¹ 100% çš„ CPU èµ„æºï¼Œé‚£è¯´æ˜ä½ æœåŠ¡å™¨çš„å†…å­˜ä¸è¶³ä»¥å¯åŠ¨ Rust æœåŠ¡å™¨ï¼Œç³»ç»Ÿå¼€å§‹ä½¿ç”¨ç¡¬ç›˜åšè™šæ‹Ÿå†…å­˜äº†ï¼Œä½ å¯ä»¥é€‰æ‹©å¤šèŠ±é’±å‡çº§æœåŠ¡å™¨çš„å†…å­˜æˆ–è€…æå‰è®¾ç½®å¥½è™šæ‹Ÿå†…å­˜ä¾›å¼€æœä½¿ç”¨ï¼Œæ•™ç¨‹åœ¨è¿™é‡Œï¼šCentOS7 ä¸‹å»ºç«‹ SWaP åˆ†åŒºä»¥å¢åŠ è™šæ‹Ÿå†…å­˜ï¼ˆå‘½ä»¤å¯ä»¥å®Œå…¨ç…§æ¬ï¼ŒCentOS7 å’Œ Ubuntu18.04 é€šç”¨ï¼‰\n æœ€ååˆ°æ¸¸æˆä¸­ï¼ŒæŒ‰ä¸‹ F1 å¹¶è¾“å…¥ï¼š\n# IP å’Œç«¯å£è‡ªè¡Œæ›¿æ¢\rconnect 127.0.0.30:28015\r è¿æ¥åˆ°æœåŠ¡å™¨å³å¯ï¼\nç»“æŸã€‚\n","id":37,"section":"posts","summary":"LinuxGSM (Linux Game Server Managers) æ˜¯å¼€æºçš„ Linux æœåŠ¡å™¨æ¸¸æˆæœåŠ¡å™¨å¼€è®¾å·¥å…·ï¼Œç®€å•å¥½ç”¨ï¼Œå¯ä»¥èŠ‚çœå¤§é‡æ—¶é—´å› æ­¤é€‰ç”¨ã€‚ æ³¨ï¼šä¸€èˆ¬æƒ…å†µä¸‹æˆ‘éƒ½æ˜¯æ›´å€¾å‘ç”¨ç†Ÿæ‚‰çš„ CentOS7 ç³»ç»Ÿï¼Œä½†æ˜¯åœ¨å°è¯•æ­å»ºä¸€","tags":["Linux","æ¸¸æˆ"],"title":"Rust å¼€æœï¼ˆä¸€ï¼‰Ubuntu18 ä¸‹é€šè¿‡ LinuxGSM æ­å»º Rust Server æ¸¸æˆæœåŠ¡å™¨ç«¯","uri":"https://senjianlu.com/2021/09/ubuntu18-rust-server-01/","year":"2021"},{"content":"ä½œä¸ºé•¿æœŸæ‰‹æ“ JS çš„åç«¯ï¼Œå¯¹å‰ç«¯çš„å®‰å…¨è§„åˆ™å‡ ä¹æ˜¯ä¸€ç‚¹éƒ½ä¸ç†Ÿæ‚‰ï¼ŒJava Spring éƒ½æ˜¯ Security ä¸€æŠŠæ¢­ï¼Œè¿™æ¬¡ç»™ PHP è¯­è¨€ç¼–å†™çš„ Nextcloud æ·»åŠ å‡ è¡Œä»£ç çœŸçš„æ˜¯è¦äº†æˆ‘çš„è€å‘½äº†ï¼Œèµ¶ç´§è®°å½•ä¸€ä¸‹åˆ«åé¢å¿˜äº†å†æ¥ä¸€é\u0026hellip;\u0026hellip;\næ³¨ï¼šæˆ‘æ˜¯åœ¨è™šæ‹Ÿä¸»æœºä¸Šç›´æ¥è¿è¡Œå®˜æ–¹çš„ setup-nextcloud.php å®‰è£…ï¼Œå¦‚æœæ˜¯æœåŠ¡å™¨ä¸Šä¸‹è½½å®‰è£…åº”è¯¥ç›®å½•ç±»ä¼¼ï¼Œè¯·è‡ªè¡ŒæŸ¥æ‰¾æ–‡ä»¶ã€‚\n é¦–å…ˆéœ€è¦æ˜ç¡®çš„æ˜¯ Nextcloud ä½¿ç”¨äº†ä¸¥æ ¼çš„ CSP (Content Security Policy) é…ç½®ï¼Œå¦‚æœä½ æƒ³ä»å¤–éƒ¨å¼•ç”¨ä»»ä½• CSS æˆ–è€… JS éƒ½åº”è¯¥ç¬¬ä¸€æ—¶é—´å»åšå¯¹è¯¥æ¥æºä¿¡ä»»çš„é…ç½®ï¼Œæœ¬æ–‡å°±ä»¥æ·»åŠ  Google Analytics çš„ Script å…ƒç´ ä¸ºä¾‹ã€‚\n1ã€ä» Google Analytics å®˜ç½‘è·å–ç«™ç‚¹çš„ç»Ÿè®¡ä»£ç \næ ·ä¾‹å¦‚ä¸‹ï¼š\n\u0026lt;!-- Global site tag (gtag.js) - Google Analytics --\u0026gt;\r\u0026lt;script async src=\u0026quot;https://www.googletagmanager.com/gtag/js?id=G-xxxxxxxxxx\u0026quot;\u0026gt;\u0026lt;/script\u0026gt;\r\u0026lt;script\u0026gt;\rwindow.dataLayer = window.dataLayer || [];\rfunction gtag(){dataLayer.push(arguments);}\rgtag('js', new Date());\rgtag('config', 'G-xxxxxxxxxx');\r\u0026lt;/script\u0026gt;\r 2ã€ä¿®æ”¹ Nextcloud çš„ CSP é…ç½®\né…ç½®æ–‡ä»¶è·¯å¾„ï¼š\nç«™ç‚¹æ ¹ç›®å½•/lib/public/AppFramework/Http/ContentSecurityPolicy.php\r æ·»åŠ ä»¥ä¸‹å‡ è¡Œï¼ŒåŠŸèƒ½åŒ…æ‹¬ï¼šâ‘  å…è®¸æ‰§è¡Œé¡µé¢å†…åµŒçš„æ ‡ç­¾å’Œäº‹ä»¶ç›‘å¬å‡½æ•°ï¼›â‘¡ ä¿¡ä»» Google è„šæœ¬å’Œè¿æ¥æºã€‚\n3ã€æ·»åŠ  Google Analytics ä»£ç åˆ°ç½‘ç«™å¤´\nå¤´ç”Ÿæˆ PHP æ–‡ä»¶è·¯å¾„ï¼š\nç«™ç‚¹æ ¹ç›®å½•/lib/private/legacy/template/functions.php\r æ‰¾åˆ°å¤´ç”Ÿæˆæ–¹æ³•ï¼Œå¹¶æ·»åŠ æ–¹æ³•ï¼š\n/**\r* Global site tag (gtag.js) - Google Analytics\r*/\rfunction emit_google_analytics_script() {\r$g_a_s_01 = '\u0026lt;script nonce=\u0026quot;' . \\OC::$server-\u0026gt;getContentSecurityPolicyNonceManager()-\u0026gt;getNonce() . '\u0026quot; defer src=\u0026quot;https://www.googletagmanager.com/gtag/js?id=G-xxxxxxxxxx\u0026quot;\u0026gt;\u0026lt;/script\u0026gt;';\r$g_a_s_02 = '\u0026lt;script nonce=\u0026quot;' . \\OC::$server-\u0026gt;getContentSecurityPolicyNonceManager()-\u0026gt;getNonce() . '\u0026quot; defer\u0026gt;window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag(\u0026quot;js\u0026quot;, new Date());gtag(\u0026quot;config\u0026quot;, \u0026quot;G-xxxxxxxxxx\u0026quot;);\u0026lt;/script\u0026gt;';\rprint_unescaped($g_a_s_01.\u0026quot;\\n\u0026quot;);\rprint_unescaped($g_a_s_02.\u0026quot;\\n\u0026quot;);\r}\r ä¹‹ååœ¨ emit_script_loading_tags() æ–¹æ³•ä¸­è°ƒç”¨æ·»åŠ  Google Analytics çš„ä»£ç ï¼š\n/**\r* Print all \u0026lt;script\u0026gt; tags for loading JS\r* @param array $obj all the script information from template\r*/\rfunction emit_script_loading_tags($obj) {\r...\remit_google_analytics_script();\r...\r}\r å®Œæˆååˆ·æ–°é¡µé¢ï¼Œå°±èƒ½å» Google Analytics çœ‹åˆ°è®¿é—®äº†ï¼Œç»“æŸã€‚\n","id":38,"section":"posts","summary":"ä½œä¸ºé•¿æœŸæ‰‹æ“ JS çš„åç«¯ï¼Œå¯¹å‰ç«¯çš„å®‰å…¨è§„åˆ™å‡ ä¹æ˜¯ä¸€ç‚¹éƒ½ä¸ç†Ÿæ‚‰ï¼ŒJava Spring éƒ½æ˜¯ Security ä¸€æŠŠæ¢­ï¼Œè¿™æ¬¡ç»™ PHP è¯­è¨€ç¼–å†™çš„ Nextcloud æ·»åŠ å‡ è¡Œä»£ç çœŸçš„æ˜¯è¦äº†æˆ‘çš„è€å‘½äº†ï¼Œèµ¶ç´§","tags":["ç½‘ç«™å»ºè®¾"],"title":"Nextcloud å‰ç«¯é¡µé¢æ’å…¥ JS ä»£ç ä»¥ä½¿ç”¨ Google Analytics åˆ†æ","uri":"https://senjianlu.com/2021/09/nextcloud-google-analytics/","year":"2021"},{"content":"æŒç»­æ›´æ–°ã€‚\n Screen ç¯å¢ƒå˜é‡çš„é…ç½®ä½¿å…¶èƒ½è¯»å–ç±»ä¼¼ /usr/bin ä¸‹çš„è„šæœ¬ã€‚\nvi /etc/screenrc\r å–æ¶ˆæ³¨é‡Š\n...\rshell -$SHELL\r...\r ","id":39,"section":"posts","summary":"æŒç»­æ›´æ–°ã€‚ Screen ç¯å¢ƒå˜é‡çš„é…ç½®ä½¿å…¶èƒ½è¯»å–ç±»ä¼¼ /usr/bin ä¸‹çš„è„šæœ¬ã€‚ vi /etc/screenrc å–æ¶ˆæ³¨é‡Š ... shell -$SHELL ...","tags":["Linux"],"title":"CentOS7 å…³äºä½¿ç”¨ GNU Screen çš„ç¬”è®°","uri":"https://senjianlu.com/2021/09/centos7-gun-screen/","year":"2021"},{"content":"ä¸éœ€è¦ Yum å®‰è£…ä»»ä½•å…¶ä»–è½¯ä»¶ï¼Œä¹Ÿä¸éœ€è¦ä¿®æ”¹ Matplotlib åŒ…çš„é…ç½®æ–‡ä»¶ï¼Œå®æµ‹æ˜¯æœ€ç®€å•çš„æ–¹æ³•äº†ã€‚\nå…¨ç¨‹ä½¿ç”¨ HostVDS æ–°å¼€çš„æœåŠ¡å™¨å¹¶åªå®‰è£…äº† Python3.8.2 ä»¥ä¿è¯æ•™ç¨‹æ­£ç¡®ã€‚\n 1ã€é¦–å…ˆçœ‹ä¸‹æ²¡æœ‰å®‰è£…å­—ä½“æ—¶ç”Ÿæˆå«ä¸­æ–‡çš„å›¾è¡¨æ—¶ä¼šå‡ºç°ä¸Šé¢é”™è¯¯ã€‚\nimport sys\rimport matplotlib as mpl\rimport matplotlib.pyplot as plt\rfrom matplotlib.font_manager import FontProperties\r\u0026quot;\u0026quot;\u0026quot;\r@description: æ‰§è¡Œ SQL -------\r@param:\r-------\r@return:\r\u0026quot;\u0026quot;\u0026quot;\rdef main():\r# ä¸€èˆ¬æ•™ç¨‹éƒ½ä¼šç”¨åˆ°çš„æ‰€è°“æŒ‡å®šå­—ä½“è·¯å¾„ï¼Œæ­¤ç¯‡æ•™ç¨‹ç”¨ä¸åˆ°\r# font_prop = FontProperties(fname=\u0026quot;/usr/local/python3/lib/python3.8/site-packages/matplotlib/mpl-data/fonts/ttf/SimHei.ttf\u0026quot;)\r# å¾…å­—ä½“å®‰è£…å®ŒåæŒ‡å®šå­—ä½“ï¼ŒSimHei å­˜åœ¨ç¼ºå°‘éƒ¨åˆ†ç‰¹æ®Šç¬¦å·çš„é—®é¢˜ï¼Œæ‰€ä»¥ç”¨ YaHei\r# mpl.rcParams['font.sans-serif'] = [\u0026quot;Microsoft YaHei\u0026quot;]\r# é˜²æ­¢ - å·å‡ºé”™ï¼Œå’Œä¸Šä¸€è¡ŒåŒæ—¶è§£æ³¨\r# mpl.rcParams[\u0026quot;axes.unicode_minus\u0026quot;] = False\rdata = [[\u0026quot;AAA\u0026quot;, \u0026quot;BBB\u0026quot;, \u0026quot;CCC\u0026quot;, \u0026quot;æ•°æ®\u0026quot;, \u0026quot;æ•°æ®\u0026quot;]]\rcolumn_labels = [\u0026quot;å•†å“ä¸­æ–‡å\u0026quot;, \u0026quot;å•†å“è‹±æ–‡å\u0026quot;, \u0026quot;æœ€ä½å”®ä»·\u0026quot;, \u0026quot;åœ¨å”®æ•°é‡\u0026quot;, \u0026quot;æ›´æ–°æ—¶é—´\u0026quot;]\rfig = plt.figure(figsize=(3, 3), dpi=600)\rax = fig.add_subplot(111, frame_on=False,)\rax.xaxis.set_visible(False)\rax.yaxis.set_visible(False)\rax.table(cellText=data, colLabels=column_labels)\rax.set_title(\u0026quot;æµ‹è¯•\u0026quot;)\rplt.savefig('test.png')\r\u0026quot;\u0026quot;\u0026quot;\r@description: å•ä½“æµ‹è¯•\r-------\r@param:\r-------\r@return:\r\u0026quot;\u0026quot;\u0026quot;\rif __name__ == \u0026quot;__main__\u0026quot;:\rtry:\rmain()\rexcept Exception as e:\rprint(str(e))\r ç›´æ¥è¿è¡Œåæ—¥å¿—å’Œå›¾ç‰‡å¦‚ä¸‹æ‰€ç¤ºï¼š\n[root@test test]# python3 main.py\r/usr/local/python3/lib/python3.8/site-packages/matplotlib/backends/backend_agg.py:240: RuntimeWarning: Glyph 27979 missing from current font.\rfont.set_text(s, 0.0, flags=flags)\r/usr/local/python3/lib/python3.8/site-packages/matplotlib/backends/backend_agg.py:240: RuntimeWarning: Glyph 35797 missing from current font.\rfont.set_text(s, 0.0, flags=flags)\r/usr/local/python3/lib/python3.8/site-packages/matplotlib/backends/backend_agg.py:240: RuntimeWarning: Glyph 25968 missing from current font.\rfont.set_text(s, 0.0, flags=flags)\r/usr/local/python3/lib/python3.8/site-packages/matplotlib/backends/backend_agg.py:240: RuntimeWarning: Glyph 25454 missing from current font.\rfont.set_text(s, 0.0, flags=flags)\r 2ã€ç»™ç³»ç»Ÿå®‰è£…ä¸­æ–‡å­—ä½“ã€‚\nè¿™é‡Œä¸è€ƒè™‘ä¸€èˆ¬æ•™ç¨‹æ‰€é‡‡ç”¨çš„åªç»™ Matplotlib å®‰è£…ä¸­æ–‡å­—ä½“ã€‚\n# æ–°å»ºä¸­æ–‡æ–‡ä»¶å¤¹å¹¶ä¸‹è½½å¾®è½¯é›…é»‘å­—ä½“\rcd /usr/share/fonts/\rmkdir chinese\rchmod -R 755 chinese\rcd chinese\rwget https://www.wfonts.com/download/data/2014/06/01/microsoft-yahei/chinese.msyh.ttf\r# æŸ¥çœ‹å½“å‰ç³»ç»Ÿé‡Œçš„ä¸­æ–‡å­—ä½“ä»¥ç¡®è®¤å®‰è£…æˆåŠŸ\rfc-list :lang=zh\r å‡ºç°ä»¥ä¸‹å‘½ä»¤åˆ™è¯´æ˜å®‰è£…æˆåŠŸï¼š\n[root@test chinese]# fc-list :lang=zh\r/usr/share/fonts/chinese/chinese.msyh.ttf: Microsoft YaHei:style=Regular,Normal\r æ¸…é™¤ä¹‹å‰ Matplotlib çš„ç¼“å­˜åæ­¤æ­¥éª¤ç»“æŸã€‚\n[root@test chinese]# rm ~/.cache/matplotlib -R\rrm: descend into directory â€˜/root/.cache/matplotlibâ€™? y\rrm: remove regular file â€˜/root/.cache/matplotlib/fontlist-v330.jsonâ€™? y\rrm: remove directory â€˜/root/.cache/matplotlibâ€™? y\r 3ã€å†æ‰§è¡Œå›¾ç‰‡ç”Ÿæˆè„šæœ¬ä»¥ç¡®è®¤ä¸­æ–‡å­—ä½“å®‰è£…æˆåŠŸã€‚ è§£æ³¨ä»¥ä¸‹ä¸¤è¡Œï¼š\n...\r# å¾…å­—ä½“å®‰è£…å®ŒåæŒ‡å®šå­—ä½“ï¼ŒSimHei å­˜åœ¨ç¼ºå°‘éƒ¨åˆ†ç‰¹æ®Šç¬¦å·çš„é—®é¢˜ï¼Œæ‰€ä»¥ç”¨ YaHei\rmpl.rcParams['font.sans-serif'] = [\u0026quot;Microsoft YaHei\u0026quot;]\r# é˜²æ­¢ - å·å‡ºé”™ï¼Œå’Œä¸Šä¸€è¡ŒåŒæ—¶è§£æ³¨\rmpl.rcParams[\u0026quot;axes.unicode_minus\u0026quot;] = False\r...\r æˆåŠŸï¼Œç»“æŸã€‚\n","id":40,"section":"posts","summary":"ä¸éœ€è¦ Yum å®‰è£…ä»»ä½•å…¶ä»–è½¯ä»¶ï¼Œä¹Ÿä¸éœ€è¦ä¿®æ”¹ Matplotlib åŒ…çš„é…ç½®æ–‡ä»¶ï¼Œå®æµ‹æ˜¯æœ€ç®€å•çš„æ–¹æ³•äº†ã€‚ å…¨ç¨‹ä½¿ç”¨ HostVDS æ–°å¼€çš„æœåŠ¡å™¨å¹¶åªå®‰è£…äº† Python3.8.2 ä»¥ä¿è¯æ•™ç¨‹æ­£ç¡®ã€‚ 1ã€é¦–å…ˆçœ‹ä¸‹æ²¡","tags":["Python"],"title":"CentOS7 ä¸‹è§£å†³ Python3 ä½¿ç”¨ Matplotlib ç”Ÿæˆå›¾è¡¨æ—¶ä¸­æ–‡ä¹±ç çš„é—®é¢˜","uri":"https://senjianlu.com/2021/09/centos7-matplotlib-chinese/","year":"2021"},{"content":"æœ¬æ¥æ˜¯å¾ˆç®€å•çš„ä¸€ä»¶äº‹æƒ…ï¼Œè¿½æ±‚æ–°ç‰ˆæœ¬åˆæŠŠè‡ªå·±å‘äº†ä¸€æ¬¡\u0026hellip;\u0026hellip;\nç•™ä¸ªè®°å½•ç¨å¾®æè¿°è¯¦ç»†ä¸€ç‚¹ï¼Œå¸Œæœ›èƒ½å¸®åˆ°ä½ ã€‚\n å‚è€ƒçš„æ–‡ç« ï¼šã€ŒVS Codeã€å¦‚ä½•é€šè¿‡è·³æ¿æœºè¿æ¥æœåŠ¡å™¨è¿›è¡Œè¿œç¨‹å¼€å‘ï¼šRemote-SSH ç¯‡\n1ã€VS Code ä¸­ Remote - SSH çš„å®‰è£…å’Œä½¿ç”¨éƒ½å¾ˆç®€å•ï¼Œå°±ä¸€æ­¥å¸¦è¿‡äº†ã€‚\nåœ¨æ’ä»¶åº“ä¸­æœç´¢å®‰è£…ï¼š\næ–°å»ºè¿æ¥ï¼š\né€‰æ‹© SSH é…ç½®å­˜æ”¾å’Œè¯»å–è·¯å¾„ï¼š\næ¥ä¸‹æ¥å°±æ˜¯è¾“å…¥å¯†ç ç™»å½•æœåŠ¡å™¨ï¼Œè‡ªè¡Œæ“ä½œå³å¯ï¼Œä½†æ˜¯å¦‚æœä½ éœ€è¦å¯†é’¥ç™»å½•ï¼Œè¯·è·Ÿç€æ­¥éª¤ 2 è¿›è¡Œé…ç½®ã€‚\n2ã€è¿›è¡Œ SSH å¯†é’¥ç™»å½•çš„é…ç½®å’Œä»£ç†çš„é…ç½®ã€‚\nè¿›å…¥åˆšåˆšæ‰€é€‰ SSH é…ç½®å­˜æ”¾çš„ç›®å½•ï¼Œä¸€èˆ¬æ˜¯ C:\\Users\\ä½ çš„ç”¨æˆ·å\\.ssh è¿™ä¸ªè·¯å¾„ã€‚\né€‰æ‹©ç¼–è¾‘ config æ–‡ä»¶ï¼Œå¯†é’¥å’Œä»£ç†çš„é…ç½®å‚ç…§æˆ‘è®¾ç½®å³å¯ï¼š\n# Host ä¸ºæœåŠ¡å™¨åˆ«åï¼Œå¯ä»¥å’Œ HostName ä¸€æ ·\rHost $server_host\r# ä½ çš„æœåŠ¡å™¨åŸŸåæˆ– IP\rHostName $server_host\r# ç”¨æˆ·\rUser $user\r# SSH ç§é’¥åœ°å€ï¼Œä¾‹å¦‚ï¼šC:\\Users\\ä½ çš„ç”¨æˆ·å\\.ssh\\example\rIdentityFile $ssh_primary_key$path\r# ä»£ç†é…ç½®\rProxyCommand C:\\bin\\nmap\\ncat.exe --proxy-type socks5 --proxy $proxy_host:$proxy_port %h %p --proxy-auth $proxy_auth_username:$proxy_auth_passwod\r ä»£ç†çš„é…ç½®è¯¦ç»†è¯´ä¸€ä¸‹ï¼Œä¹Ÿæ˜¯æˆ‘è¸©å‘çš„åœ°æ–¹ã€‚\nä¸‹è½½å‹ç¼©åŒ…åè§£å‹åˆ°ä»»æ„ç›®å½•ï¼Œç„¶åæ›¿æ¢ä¸Šé¢ C:\\bin\\nmap\\ncat.exe çš„è·¯å¾„å³å¯ã€‚\nè™½ç„¶å®˜æ–¹æ–‡æ¡£ä¸­æ˜ç¡®è®°è½½äº†ä»£ç†è®¤è¯ä¿¡æ¯çš„é…ç½®æ–¹æ³•ï¼Œä½†æ˜¯ç»è¿‡å®æµ‹åœ¨å½“å‰æœ€æ–°ç‰ˆæœ¬ï¼šnmap-7.91-win32.zip ä¸‹æ˜¯ä¸æ”¯æŒçš„ï¼ŒVS Code å…·ä½“é”™è¯¯æ—¥å¿—ï¼š\n[01:09:46.557] Running script with connection command: ssh -T -D 13100 \u0026quot;example.com\u0026quot; bash\r[01:09:46.559] Terminal shell path: C:\\Windows\\System32\\cmd.exe\r[01:09:46.742] \u0026gt; \u001b]0;C:\\Windows\\System32\\cmd.exe\u0007\r[01:09:46.742] Got some output, clearing connection timeout\r[01:09:47.447] \u0026gt; kex_exchange_identification: Connection closed by remote host\r[01:09:47.454] \u0026gt; è¿‡ç¨‹è¯•å›¾å†™å…¥çš„ç®¡é“ä¸å­˜åœ¨ã€‚\r[01:09:48.732] \u0026quot;install\u0026quot; terminal command done\r[01:09:48.732] Install terminal quit with output: è¿‡ç¨‹è¯•å›¾å†™å…¥çš„ç®¡é“ä¸å­˜åœ¨ã€‚\r[01:09:48.732] Received install output: è¿‡ç¨‹è¯•å›¾å†™å…¥çš„ç®¡é“ä¸å­˜åœ¨ã€‚\r[01:09:48.733] Failed to parse remote port from server output\r[01:09:48.733] Resolver error: Error: at Function.Create (c:\\Users\\my_user\\.vscode\\extensions\\ms-vscode-remote.remote-ssh-0.65.7\\out\\extension.js:1:64659)\rat Object.t.handleInstallOutput (c:\\Users\\my_user\\.vscode\\extensions\\ms-vscode-remote.remote-ssh-0.65.7\\out\\extension.js:1:63302)\rat Object.t.tryInstall (c:\\Users\\my_user\\.vscode\\extensions\\ms-vscode-remote.remote-ssh-0.65.7\\out\\extension.js:1:415135)\rat processTicksAndRejections (internal/process/task_queues.js:93:5)\rat async c:\\Users\\my_user\\.vscode\\extensions\\ms-vscode-remote.remote-ssh-0.65.7\\out\\extension.js:1:294918\rat async Object.t.withShowDetailsEvent (c:\\Users\\my_user\\.vscode\\extensions\\ms-vscode-remote.remote-ssh-0.65.7\\out\\extension.js:1:406463)\rat async Object.t.resolve (c:\\Users\\my_user\\.vscode\\extensions\\ms-vscode-remote.remote-ssh-0.65.7\\out\\extension.js:1:295994)\rat async c:\\Users\\my_user\\.vscode\\extensions\\ms-vscode-remote.remote-ssh-0.65.7\\out\\extension.js:127:110656\r[01:09:48.736] ------\r è¿™ç§æƒ…å†µä¼¼ä¹åªä¼šåœ¨ VS Code ä¸­å‡ºç°ï¼Œæˆ‘åœ¨å‘½ä»¤è¡Œä¸­å°è¯•è¿æ¥æ—¶æ²¡æœ‰é—®é¢˜ï¼š\nC:\\Users\\my_user\u0026gt;ssh root@example.com ProxyCommand=\u0026quot;C:\\bin\\nmap-7.91\\ncat.exe --proxy-type socks5 --proxy example.proxy:1080 %h %p --proxy-auth 111:222\u0026quot;\rroot@example.com: Permission denied (publickey,gssapi-keyex,gssapi-with-mic).\r è€Œè§£å†³æ–¹æ³•åˆ™åªæœ‰ä¸€ä¸ªï¼Œå›é€€ç‰ˆæœ¬ï¼Œå’Œå‚è€ƒçš„æ•™ç¨‹ä¸­ä½¿ç”¨åŒæ ·çš„ç‰ˆæœ¬ï¼šnmap-7.70-win32.zip\nè¿™ä¸ªé—®é¢˜çš„è§£å†³å•çº¯å°±æ˜¯è¯•å‡ºæ¥çš„ï¼Œæš‚æ—¶ä¹Ÿæ²¡æœ‰åŠŸå¤«å»æ¢ç©¶é”™è¯¯çš„åŸå› ï¼Œå¯èƒ½ä¹Ÿåªæ˜¯ä¸ªä¾‹ï¼ŒStack Overflow çš„ä¸ªåˆ«è®¨è®ºä¹Ÿéƒ½æ˜¯çº ç»“é…ç½®æ–¹æ³•çš„é—®é¢˜ï¼Œäº‹å®ä¸Šæ ¼å¼å®˜æ–¹å·²ç»ç»™äº†ï¼Œå‚è€ƒæ„ä¹‰éƒ½ä¸æ˜¯å¾ˆå¤§ã€‚\nå¦‚æœå›é€€ä¾ç„¶æ²¡æœ‰è§£å†³ä½ çš„é—®é¢˜çš„è¯ï¼Œåœ¨ç¡®ä¿ SSH ä¸é€‚ç”¨ä»£ç†èƒ½è®¿é—®çš„å‰æä¸‹ï¼Œä½¿ç”¨ä»¥ä¸‹ä»£ç å»æ’æŸ¥ä¸‹ï¼š\nlastb -n 100\r åœ¨æœåŠ¡å™¨è¿è¡Œï¼ŒæŸ¥çœ‹æœ€è¿‘å—é˜»çš„ 100 æ¬¡ SSH ç™»å½•ï¼Œçœ‹å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨æ˜¯å¦æ‰“å¼€è¿‡è¿æ¥ï¼Œå†åšä¸‹ä¸€æ­¥çš„åˆ¤æ–­ã€‚\nç»“æŸã€‚\n","id":41,"section":"posts","summary":"æœ¬æ¥æ˜¯å¾ˆç®€å•çš„ä¸€ä»¶äº‹æƒ…ï¼Œè¿½æ±‚æ–°ç‰ˆæœ¬åˆæŠŠè‡ªå·±å‘äº†ä¸€æ¬¡\u0026hellip;\u0026hellip; ç•™ä¸ªè®°å½•ç¨å¾®æè¿°è¯¦ç»†ä¸€ç‚¹ï¼Œå¸Œæœ›èƒ½å¸®åˆ°ä½ ã€‚ å‚è€ƒçš„æ–‡ç« ï¼šã€ŒVS","tags":["linux"],"title":"VS Code ä½¿ç”¨éœ€è¦è®¤è¯çš„ SOCKS5 ä»£ç†é€šè¿‡ Remote - SSH è¿æ¥è¿œç¨‹æœåŠ¡å™¨è¿›è¡Œå¼€å‘","uri":"https://senjianlu.com/2021/07/vscode-remote-ssh-use-proxy-with-auth/","year":"2021"},{"content":"å›½å†…æœåŠ¡å™¨è®¿é—®ä¸åˆ°å„ç§å®˜æ–¹é•œåƒåº”è¯¥æ˜¯è€ç”Ÿå¸¸è°ˆçš„é—®é¢˜äº†ï¼ŒDocker ä¹Ÿä¸ä¾‹å¤–ï¼Œæ‹‰å–å®˜æ–¹é•œåƒæ—¶å„ç§ EOF é”™è¯¯å¤§æ¦‚ç‡å°±æ˜¯å¢™çš„é—®é¢˜äº†ï¼Œè¿™ç¯‡æ–‡æ¡£ä¸ä¼šè®°å½• Linux æ•´ä½“ç¯å¢ƒä»£ç†çš„é…ç½®æ–¹æ³•ï¼Œåªä¼šé…ç½® Docker çš„ã€‚\n 1ã€é¦–å…ˆç¡®å®šä½ çš„ä»£ç†å¯ä»¥è¢«ç¨³å®šè®¿é—®ï¼š\n# ç›¸å…³å‚æ•°è‡ªè¡Œæ›¿æ¢ï¼Œå¦‚æœä¸éœ€è¦è®¤è¯ä¿¡æ¯å¯ä»¥ç›´æ¥è·³åˆ°ç¬¬ 2 æ­¥\r# HTTP ä»£ç†\rcurl -x http://$username:$password@$host:$port http://ip-api.com/json/?lang=zh-CN\r# SOCKS5 ä»£ç† curl -x socks5://$username:$password@$host:$port http://ip-api.com/json/?lang=zh-CN\r å¦‚æœä½ çš„ä»£ç†éœ€è¦è®¤è¯ä¿¡æ¯ï¼Œé‚£ä¹ˆæ˜¯ä¸èƒ½ç›´æ¥è¢«é…ç½®åˆ° Docker çš„é…ç½®æ–‡ä»¶ä¸­çš„ï¼Œå¦‚æœå¼ºè¡Œé…ç½®çš„è¯ï¼Œè¿è¡Œæ—¶ä¼šå‡ºç°ä»¥ä¸‹ä¿¡æ¯ï¼š\nå…‰ä»ä»£ç†æ‰“ç é•¿åº¦ä¹Ÿèƒ½çœ‹åˆ°æ ¹æœ¬æ²¡æœ‰ä½¿ç”¨è´¦å·å¯†ç å»è®¿é—®ä»£ç†ã€‚\nä½ éœ€è¦åšçš„æ˜¯ä½¿ç”¨ GOST åšè½¬å‘ï¼Œåœ¨æœ¬åœ°æ­å»ºä¸€ä¸ªæ— éœ€è´¦å·å¯†ç çš„é•¿ä¹…ä»£ç†ï¼š\n# ä»æˆ‘çš„ Gitee ä»“åº“ä¸‹è½½ GOST å‹ç¼©åŒ…\rcurl -s https://gitee.com/senjianlu/one-click-scripts/raw/main/CentOS7%20%E4%B8%8B%E4%B8%8B%E8%BD%BD%20Gitee%20%E8%B6%85%E8%BF%87%201%20MB%20%E5%A4%A7%E5%B0%8F%E7%9A%84%E6%96%87%E4%BB%B6/download.sh | bash -s https://gitee.com/senjianlu/one-click-scripts/raw/main/mirror/GOST/gost-linux-amd64-2.11.1.gz\r# è§£å‹\rgunzip gost-linux-amd64-2.11.1.gz\r# è½¬ç§»åˆ° /usr/bin ä½¿å…¶åœ¨ä»»æ„ç›®å½•éƒ½å¯æ‰§è¡Œ\rmv gost-linux-amd64-2.11.1 /usr/bin/gost\rchmod 777 /usr/bin/gost\r# å¼€å¯å¼€æœºè‡ªå¯åŠ¨ï¼Œæœ¬åœ°ç«¯å£å’Œä»£ç†ä¿¡æ¯è‡ªè¡Œæ›¿æ¢\recho \u0026quot;@reboot gost -L :$local_port -F=socks5://$username:$password@$host:$port\u0026quot; \u0026gt;\u0026gt; /var/spool/cron/root\rservice crond restart\r# nohup å¯åŠ¨åœ¨åå°\rnohup gost -L :$local_port -F=socks5://$username:$password@$host:$port \u0026gt;/dev/null 2\u0026gt;\u0026amp;1 \u0026amp;\r æ¥ç€æµ‹è¯•æœ¬åœ°ä»£ç†æ˜¯å¦æ­£å¸¸ï¼Œå’Œæœ€ä¸Šé¢çš„æµ‹è¯•æ–¹æ³•ä¸€æ ·ï¼Œä¸è¿‡ä¸éœ€è¦è´¦å·å¯†ç äº†ã€‚\ncurl -x socks5://127.0.0.1:$local_port http://ip-api.com/json/?lang=zh-CN\r 2ã€é…ç½® Docker ä»£ç†ã€‚\nå‚ç…§æ–‡æ¡£ï¼šControl Docker with systemd\næ­¤æ–¹æ³•é…ç½®çš„ä»£ç†å¯¹ Docker é•¿ä¹…æœ‰æ•ˆï¼Œå¦‚æœä½ çš„ä»£ç†å¤±æ•ˆäº†åŠæ—¶ä¿®æ”¹ GOST çš„è½¬å‘é…ç½®å³å¯ã€‚\n# ä¸º Docker æœåŠ¡åˆ›å»ºä¸€ä¸ªå†…åµŒçš„ systemd ç›®å½•\rmkdir -p /etc/systemd/system/docker.service.d\r åˆ›å»º /etc/systemd/system/docker.service.d/http-proxy.conf æ–‡ä»¶ï¼Œ\nvi /etc/systemd/system/docker.service.d/http-proxy.conf\r æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼Œåªéœ€è¦è¿™ 3 è¡Œå³å¯ï¼š\n[Service]\rEnvironment=\u0026quot;HTTP_PROXY=socks5://127.0.0.1:$local_port\u0026quot;\rEnvironment=\u0026quot;HTTPS_PROXY=socks5://127.0.0.1:$local_port\u0026quot;\r ç„¶åé‡æ–°åŠ è½½é…ç½®ï¼Œç¡®å®šä¸‹ä»£ç†é…ç½®æ²¡é—®é¢˜åé‡å¯å³å¯ã€‚\n# é‡æ–°åŠ è½½é…ç½®\rsystemctl daemon-reload\r# æŸ¥çœ‹é…ç½®æ˜¯å¦ç”Ÿæ•ˆ\rsystemctl show --property=Environment docker\r# æ— è¯¯åé‡å¯\rsystemctl restart docker\r ç„¶åå°±å» Pull ä½ çš„é•œåƒå§ï¼\n","id":42,"section":"posts","summary":"å›½å†…æœåŠ¡å™¨è®¿é—®ä¸åˆ°å„ç§å®˜æ–¹é•œåƒåº”è¯¥æ˜¯è€ç”Ÿå¸¸è°ˆçš„é—®é¢˜äº†ï¼ŒDocker ä¹Ÿä¸ä¾‹å¤–ï¼Œæ‹‰å–å®˜æ–¹é•œåƒæ—¶å„ç§ EOF é”™è¯¯å¤§æ¦‚ç‡å°±æ˜¯å¢™çš„é—®é¢˜äº†ï¼Œè¿™ç¯‡æ–‡æ¡£ä¸ä¼šè®°å½• Linux","tags":["Docker"],"title":"CentOS7 ä¸‹ Docker é…ç½®ä»£ç†ä»¥è§£å†³å›½å†…æœåŠ¡å™¨æ— æ³•æ‹‰å–å®˜æ–¹é•œåƒçš„é—®é¢˜ï¼ˆéœ€è¦è´¦å·å¯†ç çš„ä»£ç†ä¹Ÿå¯ä½¿ç”¨ï¼‰","uri":"https://senjianlu.com/2021/07/centos7-docker-command-proxy/","year":"2021"},{"content":"è®°å½•ä¸‹ code-server ä»å®˜æ–¹æºä¸‹è½½å®‰è£…å¹¶é…ç½® HTTPS çš„è¿‡ç¨‹ã€‚\n å®˜æ–¹ GitHub é¡¹ç›®åœ°å€ï¼šcode-server\n1ã€ä¸‹è½½å®‰è£…\né€‰ä¸ªä¸­æ„çš„ Release ä¸‹è½½å¹¶è§£å‹ï¼š\n# ä¸‹è½½\rwget https://github.com/cdr/code-server/releases/download/v3.11.0/code-server-3.11.0-linux-amd64.tar.gz\r# è§£å‹\rtar -xzvf code-server-3.11.0-linux-amd64.tar.gz\r# è½¬ç§»åˆ°ä½ æƒ³è½¬ç§»çš„ç›®å½•\rmv code-server-3.11.0-linux-amd64 /usr/local/code-server\r 2ã€é…ç½®è´¦å·å¯†ç å’Œå¯åŠ¨ç«¯å£\ncode-server çš„é…ç½®æ–‡ä»¶ç›®å½•ï¼š~/.config/code-server/config.yaml\nå…ˆå¯åŠ¨ä¸€ä¸‹ç”Ÿæˆç›®å½•ï¼š\n/usr/local/code-server/code-server\r ç„¶ååœæ­¢æ‰ç¨‹åºåä¿®æ”¹é…ç½®æ–‡ä»¶ï¼š\næ³¨ï¼šcert å¯ä»¥é€‰æ‹©ä¸º falseï¼Œåé¢å† Nginx å¤„é…ç½®è¯ä¹¦å³å¯ã€‚\nbind-addr: 0.0.0.0:8080\rauth: password\rpassword: $password\rcert: false\r å†å¯åŠ¨å³å¯ã€‚\nåŠ å…¥å¼€æœºè‡ªå¯åŠ¨ï¼š\necho \u0026quot;@reboot /usr/local/code-server/code-server\u0026quot; \u0026gt;\u0026gt; /var/spool/cron/root\rservice crond restart\r 3ã€é…ç½® Nginx åä»£å’Œå¼€å¯ SSL è¯ä¹¦\næ³¨ï¼šè‡ªè¡Œæ›¿æ¢ example.com ä¸ºä½ çš„åŸŸåå’Œä¿®æ”¹ SSL è¯ä¹¦æ‰€åœ¨ä½ç½®ã€‚\n...\rserver {\rlisten 80;\rserver_name example.com;\rreturn 301 https://$host$request_uri;\r}\rserver {\rlisten 443 ssl;\rserver_name example.com;\r# SSL é…ç½®\rssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;\rssl_protocols TLSv1 TLSv1.1 TLSv1.2;\rssl_certificate cert/1_example.com_bundle.crt;\rssl_certificate_key cert/2_example.com.key;\r# åä»£ 8080 ç«¯å£çš„ code-server\rlocation / {\rproxy_pass http://localhost:8080;\rproxy_http_version 1.1;\rproxy_set_header Upgrade $http_upgrade;\rproxy_set_header Connection \u0026quot;upgrade\u0026quot;;\rproxy_set_header Host $host;\r}\r}\r...\r è‡³æ­¤å®Œæˆï¼Œä»¥ä¸Šã€‚\n","id":43,"section":"posts","summary":"è®°å½•ä¸‹ code-server ä»å®˜æ–¹æºä¸‹è½½å®‰è£…å¹¶é…ç½® HTTPS çš„è¿‡ç¨‹ã€‚ å®˜æ–¹ GitHub é¡¹ç›®åœ°å€ï¼šcode-server 1ã€ä¸‹è½½å®‰è£… é€‰ä¸ªä¸­æ„çš„ Release ä¸‹è½½å¹¶è§£å‹ï¼š # ä¸‹è½½ wget https://github.com/cdr/code-server/releases/download/v3.11.0/code-server-3.11.0-linux-amd64.tar.gz # è§£å‹ tar -xzvf code-server-3.11.0-linux-amd64.tar.gz # è½¬","tags":["Linux"],"title":"CentOS7 ä¸‹å®‰è£… code-server","uri":"https://senjianlu.com/2021/07/centos7-code-server/","year":"2021"},{"content":"åˆšè£…å®Œ MinIO æµ‹è¯•çš„æ—¶å€™å…¶å®å°±å‘ç°äº†éƒ¨åˆ†é¡µé¢ä¼šå‡ºé”™ï¼Œä½†æ˜¯çœ‹äº†ä¸‹é”™è¯¯åŸºæœ¬éƒ½æ˜¯è®¤è¯é”™è¯¯ï¼Œå“åº”ä»£ç ä¸º 500ï¼Œè§‰å¾—å¯èƒ½æ˜¯ Nginx é…ç½®æœ‰è¯¯ï¼Œå®åˆ™ä¸ç„¶\u0026hellip;\u0026hellip;\n å…·ä½“è§å¸–å­ï¼šwindows å¯åŠ¨ä¹‹åminioä¹‹åã€‚è®¿é—®127.0.0.1:9000 è·³è½¬åˆ°äº† 127.0.0.1:9001 æ˜¯ä»€ä¹ˆåŸå› \n1ã€æœ€ç›´è§‚çš„è¡¨ç°å°±æ˜¯æœ€æ–°ç‰ˆæœ¬çš„ MinIO 9000 ç«¯å£ä¼šå¼ºåˆ¶è¢«è½¬åˆ° 9001 çš„æ§åˆ¶å°ç«¯å£ï¼Œç™»å½•é¡µé¢æ˜¯è¿™æ ·çš„ï¼š\n2ã€æ“ä½œè¿‡ç¨‹ä¸­ï¼Œä¼šå‡ºç°éƒ¨åˆ†é”™è¯¯ï¼š\nâ‘  æŸ¥çœ‹å­˜å‚¨æ¡¶å…·ä½“ä¿¡æ¯æ—¶\né¡µé¢æŠ¥é”™ï¼š\n This \u0026lsquo;admin\u0026rsquo; API is not supported by server in \u0026lsquo;mode-server-fs\u0026rsquo;\n åç«¯æŠ¥é”™ï¼š\n...\roriginal error -\u0026gt; (user_buckets.go:123: error server side encryption configuration not found)\rfriendly error: The server side encryption configuration was not found\r â‘¡ åˆ†äº«æ–‡ä»¶æ—¶\né¡µé¢æŠ¥é”™ï¼š\n An error occurred, please try again\n åç«¯æŠ¥é”™ï¼š\n...\roriginal error -\u0026gt; (user_objects.go:51: A header you provided implies functionality that is not implemented)\r 3ã€è§£å†³æ–¹æ³•ï¼š\nå’Œå¸–å­é‡Œè®²çš„ä¸€æ ·ï¼Œå›é€€ç‰ˆæœ¬ï¼Œæˆ‘å‡ºé”™çš„ç‰ˆæœ¬æ˜¯ 2021/07/18 æ›´æ–°çš„ç‰ˆæœ¬ï¼Œæ˜¯é€šè¿‡ï¼š\nwget https://dl.minio.io/server/minio/release/linux-amd64/minio\r ç›´æ¥ä¸‹è½½çš„ï¼Œçœ‹åŒç›®å½•ä¸‹æ–‡ä»¶åº”è¯¥æ˜¯ minio.RELEASE.2021-07-15T22-27-34Z ç‰ˆæœ¬ï¼ŒGitHub ä¸Šä¹Ÿæœ‰å‘å¸ƒï¼Œä½†æ˜¯ä¸çŸ¥é“ä¸ºä»€ä¹ˆé—®é¢˜è¿™ä¹ˆå¤š\u0026hellip;\u0026hellip;\nå¸–å­æ¨èç‰ˆæœ¬æ˜¯ RELEASE.2021-07-12T02-44-53Zï¼Œä½†æ˜¯ç»è¿‡æµ‹è¯•å‘å‰æ¨ 2 ä¸ªç‰ˆæœ¬å¼ºåˆ¶è·³è½¬æ§åˆ¶å°çš„é—®é¢˜ä¾æ—§å­˜åœ¨ï¼Œäºæ˜¯çœ‹æ–‡ä»¶å¤§å°é€‰äº†ä¸ªæƒ³å¿…ä¸åŒ…æ‹¬æ§åˆ¶å°çš„ç‰ˆæœ¬ï¼šRELEASE.2021-06-14T01-29-23Zï¼Œä¸‹è½½åå› ä¸ºæœ¬åœ°å·²ç»é…ç½®å¥½äº†ç¯å¢ƒå˜é‡çš„å…³ç³»ï¼Œç›´æ¥è¦†ç›–ä¹‹å‰çš„ minio æ–‡ä»¶ç„¶åé‡å¯æœåŠ¡å³å¯ã€‚\n/usr/local/minio server /storage --address \u0026quot;:9000\u0026quot;\r  Unable to initialize OpenID: found invalid keys (client_secret= redirect_uri= ) for \u0026lsquo;identity_openid\u0026rsquo; sub-system, use \u0026lsquo;mc admin config reset myminio identity_openid\u0026rsquo; to fix invalid keys (*fmt.wrapError) å¯åŠ¨æ—¶ä½ æœ‰å¯èƒ½ä¼šå’Œæˆ‘ä¸€æ ·ç¢°åˆ°ä¸Šé¢çš„æŠ¥é”™ï¼Œä½ å¯ä»¥å¿½ç•¥å®ƒï¼Œåœ¨æˆ‘çš„æµ‹è¯•ä¸‹å³ä½¿æœ‰é”™è¯¯ MinIO çš„æ‰€æœ‰åŠŸèƒ½ä¹Ÿéƒ½æ­£å¸¸ã€‚\nå¦‚æœä½ æ˜¯å¼ºè¿«ç—‡ï¼Œé‚£ä¹ˆè¯·éµå¾ªä¸‹é¢çš„æ­¥éª¤æ¥è§£å†³å®ƒï¼š\n å…ˆåˆ é™¤ä¹‹å‰çš„ mc å†ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„ï¼šmc.RELEASE.2021-06-13T17-48-22Z åœ¨åå°å¯åŠ¨ä½ çš„ MinIOï¼Œå› ä¸º mc éœ€è¦è®¿é—®ä½ çš„ MinIO æœåŠ¡ã€‚ ç„¶åæ‰§è¡Œï¼š  # æ–°å¢ hostï¼Œè¿™é‡Œçš„ myminio æ˜¯ä½ ä¸Šé¢æ‰€ç¼ºå°‘çš„ host çš„åå­—ï¼Œè¯·è‡ªè¡Œæ›¿æ¢\r# $minio_host å¯ä»¥æ˜¯ IP ä¹Ÿå¯ä»¥æ˜¯ä½ å·²ç»åä»£å®Œæˆçš„åŸŸåï¼Œåªè¦èƒ½æ­£å¸¸è®¿é—®å³å¯\rmc config host add myminio http://$minio_host $root_user $root_password --api s3v4\r# ä¿å­˜ä¸­æé†’ä½ åšçš„åˆ·æ–°æ“ä½œ\r./mc admin config reset myminio identity_openid\r å†å¯åŠ¨ï¼Œç†è®ºä¸Šå°±å·²ç»ä¸æŠ¥é”™äº†ï¼Œå¦‚æœè¿˜æœ‰é”™è¯¯è¯·èŠ±æ—¶é—´å¯¹ç…§æ–‡æ¡£ä¿®å¤å§ï¼šMinIO Client å®Œå…¨æŒ‡å—   å°å£°é€¼é€¼ï¼ŒæŒºç¦»è°±çš„\u0026hellip;\u0026hellip;\n","id":44,"section":"posts","summary":"åˆšè£…å®Œ MinIO æµ‹è¯•çš„æ—¶å€™å…¶å®å°±å‘ç°äº†éƒ¨åˆ†é¡µé¢ä¼šå‡ºé”™ï¼Œä½†æ˜¯çœ‹äº†ä¸‹é”™è¯¯åŸºæœ¬éƒ½æ˜¯è®¤è¯é”™è¯¯ï¼Œå“åº”ä»£ç ä¸º 500ï¼Œè§‰å¾—å¯èƒ½æ˜¯ Nginx é…ç½®æœ‰è¯¯ï¼Œå®åˆ™ä¸ç„¶\u0026hellip","tags":["Linux"],"title":"MinIO 9000 ç«¯å£å¼ºåˆ¶è·³è½¬ 9001 ç«¯å£ä¸”æŠ¥ This 'admin' API is not supported by server in 'mode-server-fs'ã€An error occurred, please try again å’Œ The server side encryption configuration was not found é”™è¯¯","uri":"https://senjianlu.com/2021/07/centos7-minio-error/","year":"2021"},{"content":"Linux å‘½ä»¤ç¬”è®°ï¼Œæ–¹ä¾¿æŸ¥æ‰¾ã€‚\n ç³»ç»Ÿç¡¬ä»¶\n1ã€å†…å­˜ SWaP æŸ¥çœ‹ï¼š\nfree -m\r 2ã€ç³»ç»Ÿå†…æ ¸æŸ¥çœ‹ï¼š\nuname -a\r 3ã€SELinux å…³é—­ï¼š\n# ä¸´æ—¶å…³é—­\rsetenforce 0\r ä¿®æ”¹ /etc/selinux/config æ–‡ä»¶ï¼š\n# æ°¸ä¹…å…³é—­\rvi /etc/selinux/config\r å°† SELINUX=enforcing ä¿®æ”¹ä¸º SELINUX=disabledï¼š\n# SELINUX=enforcing\rSELINUX=disabled\r  SSH è¿æ¥ã€æ–‡ä»¶ç›¸å…³\n1ã€è·¨æœåŠ¡å™¨æ–‡ä»¶ä¼ è¾“ï¼š\nscp $file user@host:$file_to\r  é˜²ç«å¢™ç«¯å£å¼€å¯å…³é—­\n1ã€Firewalld é˜²ç«å¢™ç›¸å…³ï¼š\n# æŸ¥çœ‹å½“å‰å¼€æ”¾çš„æ‰€æœ‰ç«¯å£\rfirewall-cmd --list-all\r# $port ä¸ºä½ éœ€è¦å¼€æ”¾çš„ç«¯å£\rfirewall-cmd --add-port=$port/tcp --permanent # $port ä¸ºä½ éœ€è¦å…³é—­çš„ç«¯å£\rfirewall-cmd --zone=public --remove-port=$port/tcp --permanent\r# åŠ è½½é˜²ç«å¢™é…ç½®\rfirewall-cmd --reload\r# å½»åº•å…³é—­\rsystemctl stop firewalld.service\rsystemctl disable firewalld.service\r 2ã€Iptables é˜²ç«å¢™ç›¸å…³ï¼š\n# æŸ¥çœ‹å½“å‰é˜²ç«å¢™è§„åˆ™\riptables -L -n\r# å¼€æ”¾ç«¯å£\riptables -A INPUT -p tcp --dport $port -j ACCEPT\riptables -A OUTPUT -p tcp --dport $port -j ACCEPT\r# å­˜å‚¨é˜²ç«å¢™é…ç½®\rservice iptables save\r# å½»åº•å…³é—­\rsystemctl stop iptables.service\rsystemctl disable iptables.service\rchkconfig iptables off\r  ä»£ç†ç›¸å…³\n1ã€è®¾ç½®ä¸´æ—¶ä»£ç†ï¼ˆåªåœ¨å½“å‰ç»ˆç«¯ä¸­ç”Ÿæ•ˆï¼ŒSSH æ–­å¼€åå¤±æ•ˆï¼‰ï¼š\n# HTTP ä»£ç†\rexport http_proxy=http://$username:$password@$host:$port\r# SOCKS5 ä»£ç†\rexport http_proxy=socks5://$username:$password@$host:$port\r 2ã€ä¸º Git è®¾ç½®ä»£ç†ï¼ˆgit clone ç­‰æ“ä½œä¼šä½¿ç”¨è¯¥ä»£ç†ï¼‰ï¼š\n# è®¾ç½® SOCKS5 ä»£ç†\rgit config --global http.proxy socks5://$username:$password@$host:$port\rgit config --global https.proxy socks5://$username:$password@$host:$port\r# æŸ¥çœ‹ä»£ç†\rgit config --global --get http.proxy\rgit config --global --get https.proxy\r# å–æ¶ˆä»£ç†\rgit config --global --unset http.proxy\rgit config --global --unset https.proxy\r ","id":45,"section":"posts","summary":"Linux å‘½ä»¤ç¬”è®°ï¼Œæ–¹ä¾¿æŸ¥æ‰¾ã€‚ ç³»ç»Ÿç¡¬ä»¶ 1ã€å†…å­˜ SWaP æŸ¥çœ‹ï¼š free -m 2ã€ç³»ç»Ÿå†…æ ¸æŸ¥çœ‹ï¼š uname -a 3ã€SELinux å…³é—­ï¼š # ä¸´æ—¶å…³é—­ setenforce 0 ä¿®æ”¹ /etc/selinux/config æ–‡ä»¶ï¼š # æ°¸ä¹…å…³é—­ vi /etc/selinux/config å°† SELINUX=enforcing","tags":["linux"],"title":"Linux å‘½ä»¤ï¼ˆ1ï¼‰ç³»ç»Ÿç¡¬ä»¶ã€ç½‘ç»œç›¸å…³ | SSH è¿æ¥ã€æ–‡ä»¶ç›¸å…³ | é˜²ç«å¢™ç«¯å£å¼€å¯å…³é—­","uri":"https://senjianlu.com/2021/07/linux-command-01/","year":"2021"},{"content":"èµ·å› æ˜¯ BuyVM çš„å­˜å‚¨å—è¡¥è´§äº†ï¼Œäºæ˜¯ä¸‹å•ä¹°äº†ä¸€å¹´ 256 GB çš„å†å¥—ä¸ª CloudFalre ç”¨æ¥åšå¯¹è±¡å­˜å‚¨ï¼Œå­˜å­˜å›¾ç‰‡å’Œ Docker é•œåƒæ–‡ä»¶åº”è¯¥æ˜¯å¤Ÿäº†ï¼Œåæ­£ä¸å¤Ÿè¿˜èƒ½ç»§ç»­æŒ‚è½½ã€‚\n é¡ºä¾¿æŠŠ BuyVM æŒ‚è½½ç¡¬ç›˜çš„æµç¨‹ä¸€èµ·è®°ä¸‹ï¼š\n1ã€è´­ä¹°åå»æ§åˆ¶å°æŠŠ Block Storage é™„åŠ åˆ°ï¼ˆAttached Toï¼‰å¯¹åº”çš„ VPS ä¸Šã€‚\n2ã€åœ¨ VPS é‡ŒæŸ¥çœ‹æ•°æ®å—ç¼–å·ï¼Œç±»ä¼¼ scsi-0BUYVM_SLAB_VOLUME-1331 çš„å°±æ˜¯å­˜å‚¨å—ã€‚\nls /dev/disk/by-id/\r 3ã€æ ¼å¼åŒ–ã€‚\nmkfs.ext4 -F /dev/disk/by-id/scsi-0BUYVM_SLAB_VOLUME-1331\r 4ã€æ–°å»ºæ–‡ä»¶å¤¹å¹¶æŒ‚è½½ï¼Œè¿™é‡Œä»¥æ ¹ç›®å½•ä¸‹çš„ /storage ä¸ºä¾‹ï¼š\nmount -o discard,defaults /dev/disk/by-id/scsi-0BUYVM_SLAB_VOLUME-1331 /storage\r 5ã€è®¾ç½®å¼€æœºè‡ªåŠ¨æŒ‚è½½ï¼Œå®Œæˆã€‚\necho '/dev/disk/by-id/scsi-0BUYVM_SLAB_VOLUME-1331 /storage ext4 defaults,nofail,discard 0 0' | sudo tee -a /etc/fstab\r   MinIO çš„å®‰è£…ä¹Ÿæ²¡æœ‰ä»»ä½•éš¾åº¦ï¼Œå› ä¸ºæœ‰ç°æˆç¼–è¯‘å¥½çš„ç‰ˆæœ¬ï¼Œç›´æ¥ä¸‹è½½è¿è¡Œå°±è¡Œäº†ã€‚\n1ã€æˆ‘æ˜¯ç”¨çš„æ˜¯ CentOS7 ç³»ç»Ÿï¼Œæ‰€ä»¥é€‰æ‹© linux-amd64 ç‰ˆæœ¬ï¼š\nwget https://dl.minio.io/server/minio/release/linux-amd64/minio\r 2ã€ä¸‹è½½ä¸‹æ¥çš„æ–‡ä»¶åŠ ä¸Šæƒé™å°±èƒ½è¿è¡Œï¼Œä½†æ˜¯ä¸ºäº†æ–¹ä¾¿ç®¡ç†è¿˜æ˜¯æ”¾åˆ° /usr/local è·¯å¾„ä¸‹ï¼š\nmv minio /usr/local/\rchmod +x /usr/local/minio\r æµ‹è¯•å¯åŠ¨ä¸€ä¸‹ï¼š\n/usr/local/minio server /stroage --address \u0026quot;:9000\u0026quot; --console-address \u0026quot;:9001\u0026quot;\r å¯åŠ¨æˆåŠŸï¼Œé»˜è®¤è´¦å·å¯†ç éƒ½æ˜¯ï¼šminioadmin\n3ã€ä¿®æ”¹è´¦å·å¯†ç ã€‚\næœ€æ–°ç‰ˆæœ¬çš„ MinIO å·²ç»åœç”¨ä»é…ç½®æ–‡ä»¶ä¸­è¯»å–è´¦å·å¯†ç å¯åŠ¨çš„åŠŸèƒ½ï¼Œå› æ­¤ç°åœ¨åªèƒ½å°†ç”¨æˆ·ä¿¡æ¯é…ç½®åœ¨ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ä¸­ã€‚\nä»¥ä¸‹å‘½ä»¤ä»…å¯ç”¨æ¥æµ‹è¯•ï¼Œåœ¨ç»ˆç«¯å…³é—­åå°±ä¼šå¤±æ•ˆã€‚\nexport MINIO_ROOT_USER=username\rexport MINIO_ROOT_PASSWORD=password\r æ°¸ä¹…é…ç½®è¯·å‚ç…§è¿™ä¸ªå‘½ä»¤ï¼Œä¿®æ”¹ /etc/profile æ–‡ä»¶ï¼š\nvi /etc/profile\r å¹¶åœ¨ç©ºç™½å¤„æ·»åŠ ï¼š\nexport MINIO_ROOT_USER=username\rexport MINIO_ROOT_PASSWORD=password\r ä½¿å…¶ç”Ÿæ•ˆï¼š\nsource /etc/profile\r 4ã€å¼€æœºå¯åŠ¨ã€‚\nè¿™é‡Œç”¨æœ€ç®€å•çš„æ–¹æ³•å®ç°å¼€æœºå¯åŠ¨ï¼š\ncrontab -e\r # MinIO å¼€æœºå¯åŠ¨\r# . /etc/profile; ä½œç”¨ä¸ºå…ˆè¯»å–ç¯å¢ƒå˜é‡ï¼Œä¸é…ç½®æ— æ³•è¯»å–è´¦å·å¯†ç ã€‚\r@reboot . /etc/profile;/usr/local/minio server /storage --address \u0026quot;:9000\u0026quot; --console-address \u0026quot;:9001\u0026quot;\r service crond restart\r  å¦‚æœé‡å¯å MinIO æ²¡æœ‰è‡ªå¯åŠ¨çš„è¯ï¼Œè¯·è‡ªè¡ŒæŸ¥çœ‹ logï¼Œcrontab çš„é…ç½®å¤´ä¸Šå¯èƒ½éœ€è¦åŠ ä¸Š 3 è¡Œï¼š\nSHELL=/bin/bash\rPATH=/sbin:/bin:/usr/sbin:/usr/bin\rMAILTO=root\r è¿™äº›æ˜¯ç”¨æ¥é€‰æ‹©è¯­è¨€ã€å¯æ‰§è¡Œæ–‡ä»¶ç›®å½•å’Œç”¨æˆ·çš„ï¼Œå…·ä½“æƒ…å†µè¿˜æ˜¯çœ‹æ—¥å¿—å¤„ç†ã€‚\n 5ã€Nginx ä¸Šä¼ æ–‡ä»¶çš„é…ç½®ã€‚\næˆ‘è‡³ä»Šé‡åˆ°äº†ä¸¤ä¸ªé”™è¯¯ï¼š\n 413 Request Entity Too Large ä¿®æ”¹ä¸Šä¼ æ–‡ä»¶æœ€å¤§å¤§å°è§£å†³ã€‚ æ–‡ä»¶ä¸‹è½½æŠ¥é”™ 403 SignatureDoesNotMatch å°±å¾ˆå·§å…¨æ˜¯å¤§å®¶ç¢°åˆ°è¿‡çš„é—®é¢˜ï¼Œä¿®æ”¹ headers ä¼ é€’è§£å†³ã€‚  æœ€åçš„ Nginx é…ç½®å¦‚ä¸‹ï¼š\n...\rlocation / {\rproxy_pass http://127.0.0.1:9001;\r# MinIO ä¸Šä¼ æœ€å¤§å¤§å° 1 GB\rclient_max_body_size 1024m;\rproxy_http_version 1.1;\r# headers ä¼ é€’\rproxy_set_header Host $host;\rproxy_set_header Connection \u0026quot;upgrade\u0026quot;;\rproxy_set_header Upgrade $http_upgrade;\rproxy_set_header X-Real-IP $remote_addr;\rproxy_set_header X-Forwarded-Proto $scheme;\r}\r...\r è‡³æ­¤ç»“æŸã€‚\n 2021/07/21 æ›´æ–°\nå›æ»šä»¥è§£å†³éƒ¨åˆ†é”™è¯¯ï¼šMinIO 9000 ç«¯å£å¼ºåˆ¶è·³è½¬ 9001 ç«¯å£ä¸”æŠ¥ This \u0026lsquo;admin\u0026rsquo; API is not supported by server in \u0026lsquo;mode-server-fs\u0026rsquo;ã€An error occurred, please try again å’Œ The server side encryption configuration was not found é”™è¯¯\n ","id":46,"section":"posts","summary":"èµ·å› æ˜¯ BuyVM çš„å­˜å‚¨å—è¡¥è´§äº†ï¼Œäºæ˜¯ä¸‹å•ä¹°äº†ä¸€å¹´ 256 GB çš„å†å¥—ä¸ª CloudFalre ç”¨æ¥åšå¯¹è±¡å­˜å‚¨ï¼Œå­˜å­˜å›¾ç‰‡å’Œ Docker é•œåƒæ–‡ä»¶åº”è¯¥æ˜¯å¤Ÿäº†ï¼Œåæ­£ä¸å¤Ÿè¿˜èƒ½ç»§ç»­æŒ‚è½½ã€‚ é¡ºä¾¿æŠŠ BuyVM æŒ‚è½½ç¡¬ç›˜","tags":["Linux"],"title":"CentOS7 ä¸‹ MinIO çš„å®‰è£…å’Œé…ç½®","uri":"https://senjianlu.com/2021/07/centos7-minio/","year":"2021"},{"content":"åˆè´­ç½®äº†ä¸€æ‰¹ VPS åï¼Œå¤§å¤§å°å°çš„ Linux æœåŠ¡å™¨æ•°é‡æ¥åˆ°äº† 40 å¤šå°ï¼Œè‡ªå·±å†™çš„æœåŠ¡å™¨æ¢é’ˆå¼€å§‹æ„Ÿå—åˆ°å‹åŠ›äº†ï¼Œä¸“ä¸šæ€§å…ˆä¸æï¼ŒæœåŠ¡å™¨ä¸€å¤šå‰ç«¯é‚£ä¹ˆå¤š Echarts å›¾æ ‡å°±å¤Ÿ Chrome å—çš„äº†\u0026hellip;\u0026hellip;\næœ¬æ¥æƒ³ç€å’¬å’¬ç‰™èŠ±æ—¶é—´ç ”ç©¶ä¸‹ Zabbix çš„é…ç½®ä¸Šä¼ä¸šçº§ç›‘æ§ï¼Œç»“æœå‘ç°å®˜æ–¹çš„ Docker é•œåƒä» server ç«¯åˆ°é¢æ¿å‰ç«¯åˆ° agent ç«¯å±…ç„¶å…¨éƒ½æœ‰ï¼Œå› ä¸ºè‡ªç”¨çš„æ•°æ®åº“å°±æ˜¯ PostgreSQLï¼Œè¿˜çœäº†å®‰è£…ï¼ŒDocker pull å®Œç›´æ¥ä½¿ç”¨å³å¯ï¼ˆæ•°æ®åº“çš„å®‰è£…å¯ä»¥å‚è€ƒæˆ‘çš„è¿™ç¯‡æ–‡ç« ï¼šPostgreSQL å­¦ä¹ ç¬”è®° (ä¸€) æ•°æ®åº“çš„å®‰è£…ä¸ç¯å¢ƒé…ç½®ï¼‰ã€‚\n  æˆ‘çš„å®‰è£…é¡ºåºæ˜¯ï¼š\nserver ç«¯ \u0026ndash;\u0026gt; å‰ç«¯é¢æ¿ \u0026ndash;\u0026gt; agent ç«¯\nè¯·ç»“åˆä½ è‡ªå·±çš„æƒ…å†µé€‰æ‹©ã€‚\n 1ã€server ç«¯ã€‚\nå®˜æ–¹ Docker é•œåƒï¼šzabbix-server-pgsql\næ³¨æ„ï¼šä½¿ç”¨ MySQL å’Œ PostgreSQL æ—¶ Docker é•œåƒæ˜¯ä¸åŒçš„ï¼Œä¸”åœ¨å¯åŠ¨ Docker é•œåƒä¹‹å‰å°±å…ˆåˆ›å»ºå¥½åä¸º zabbix çš„æ•°æ®åº“ã€‚\n# pull\rdocker pull zabbix/zabbix-server-pgsql:4.0-centos-latest\r# å¯åŠ¨ï¼Œè‡ªè¡Œæ›´æ”¹ hostã€portã€username å’Œ password æ•°æ®åº“è¿æ¥å‚æ•°ï¼ˆZBX_STARTPOLLERS å‚æ•°å¯ä»¥ä¿è¯ä½ åœ¨ç›‘å¬å¤§é‡é«˜å»¶è¿ŸæœåŠ¡å™¨ä¸‹ä¸äº§ç”Ÿ zabbix poller process more than 75% busy çš„é”™è¯¯ï¼Œå¦‚æœå‡ºé”™ä¹‹åå†å»ä¿®æ”¹ config.v2.json ä¼šæ¯”è¾ƒéº»çƒ¦ï¼‰\rdocker run --name some-zabbix-server-pgsql -p 10051:10051 --net=host -e DB_SERVER_HOST=\u0026quot;$pgsql_host\u0026quot; -e DB_SERVER_PORT=$pgsql_port -e POSTGRES_USER=\u0026quot;$pgsql_username\u0026quot; -e POSTGRES_PASSWORD=\u0026quot;$pgsql_password\u0026quot; -e ZBX_STARTPOLLERS=15 -d docker.io/zabbix/zabbix-server-pgsql:4.0-centos-latest\r# æŸ¥çœ‹ log\rdocker logs some-zabbix-server-pgsql\r# æ²¡æœ‰æŠ¥é”™çš„è¯å°†å…¶è®¾ä¸ºå¼€æœºå¯åŠ¨\rdocker update --restart=always some-zabbix-server-pgsql\r 2ã€é¢æ¿å‰ç«¯ã€‚ å®˜æ–¹ Docker é•œåƒï¼šzabbix-web-nginx-pgsql\næ³¨æ„ï¼šä¸€èˆ¬æƒ…å†µä¸‹éƒ½å’Œ server ç«¯å®‰è£…åœ¨åŒä¸€ä¸ªæœåŠ¡å™¨ä¸Šã€‚\n# pull\rdocker pull zabbix/zabbix-web-nginx-pgsql:4.0-centos-latest\r# å¯åŠ¨ï¼Œè‡ªè¡Œæ›¿æ¢æ•°æ®åº“è¿æ¥å‚æ•°ï¼Œå¹¶å°†å®¹å™¨çš„ 8080 ç«¯å£æ˜ å°„åˆ°æœ¬æœº 10052 ç«¯å£ï¼ˆæ³¨æ„è¯¥å®¹æ˜“å·²ç»å†…ç½® Nginxï¼Œå› æ­¤å¦‚æœä½ å‡†å¤‡åœ¨å®¿ä¸»æœºä¸­å®‰è£… Nginx å¹¶è§£æåŸŸååä»£è¯¥å®¹å™¨ï¼Œè¯·ä½¿ç”¨ 8080 ç«¯å£ï¼Œå¦‚æœåªå‡†å¤‡ç”¨ç«¯å£è®¿é—®æœåŠ¡ï¼Œåˆ™æ˜ å°„ 80 ç«¯å£ä¹Ÿæ— å¦¨ï¼‰\rdocker run --name some-zabbix-web-nginx-pgsql -p 10052:8080 -e DB_SERVER_HOST=\u0026quot;$pgsql_host\u0026quot; -e DB_SERVER_PORT=$pgsql_port -e POSTGRES_USER=\u0026quot;$pgsql_username\u0026quot; -e POSTGRES_PASSWORD=\u0026quot;$pgsql_password\u0026quot; -e PHP_TZ=\u0026quot;Asia/Shanghai\u0026quot; -d docker.io/zabbix/zabbix-web-nginx-pgsql:4.0-centos-latest\r# æŸ¥çœ‹ log\rdocker logs some-zabbix-web-nginx-pgsql\r åœ¨é˜²ç«å¢™å’Œå®‰å…¨ç»„ 10052 ç«¯å£å¼€æ”¾ä¹‹åï¼Œé€šè¿‡å¤–ç½‘è®¿é—® http://æœåŠ¡å™¨ IP:10052 æ£€æŸ¥é¢æ¿æ˜¯å¦å¯åŠ¨æˆåŠŸï¼Œé»˜è®¤ç™»å½•ç”¨æˆ·åä¸ºï¼šAdminï¼Œå¯†ç ä¸ºï¼šzabbixã€‚\n# æ²¡æœ‰æŠ¥é”™çš„è¯å°†å…¶è®¾ä¸ºå¼€æœºå¯åŠ¨\rdocker update --restart=always some-zabbix-web-nginx-pgsql\r  ä¸­æ–‡ç•Œé¢å¼€å¯æ–¹å¼ï¼š  3ã€agent ç«¯ã€‚\nå®˜æ–¹ Docker é•œåƒï¼šzabbix-agent\næ³¨æ„ï¼šè¿™é‡Œè™½ç„¶è¿˜æ˜¯å®‰è£… server æ‰€åœ¨çš„â€œæœ¬æœºâ€ä½œä¸ºæ¡ˆä¾‹ï¼Œä½†æ˜¯å› ä¸º Docker ä¹‹é—´èµ°çš„æ˜¯è™šæ‹Ÿç½‘ç»œï¼ŒIP å¹¶é 127.0.0.1ï¼Œå› æ­¤é…ç½®å’Œåœ¨å¤–ç½‘è¢«ç›‘æ§æœºçš„ä¸€æ ·ï¼šIP éœ€å¡«å¤–ç½‘ IP å¹¶å¼€æ”¾ 10050ï¼ˆagent é»˜è®¤ï¼‰ç«¯å£ã€‚\n# pull\rdocker pull zabbix/zabbix-agent:4.0-centos-latest\r# å¯åŠ¨ï¼Œserver_ip å¡«å†™ server ç«¯æ‰€åœ¨æœåŠ¡å™¨çš„å¤–ç½‘ IPï¼Œç«¯å£é»˜è®¤ä¸º 10051ï¼Œè€Œ hostname åˆ™éœ€è¦åœ¨å‰ç«¯é¢æ¿ä¸Šé…ç½®å¥½ï¼Œå‚è€ƒä¸‹æ–¹æ­¥éª¤ã€‚\rdocker run --name some-zabbix-agent -p 10050:10050 -e ZBX_HOSTNAME=\u0026quot;$hostname\u0026quot; -e ZBX_SERVER_HOST=\u0026quot;$server_ip\u0026quot; -e ZBX_SERVER_PORT=$server_port -d docker.io/zabbix/zabbix-agent:4.0-centos-latest\r  é€‰æ‹©åˆ›å»ºä¸»æœºï¼Œ ä¸»æœºåç§°å°±æ˜¯ hostnameï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ä¸èƒ½æœ‰æ±‰å­—ã€‚\nä¸»æœºç¾¤ç»„é€‰ Zabbix servers å³å¯ï¼Œåç»­è‡ªè¡Œæ›´æ”¹ã€‚\n # æŸ¥çœ‹ log\rdocker logs some-zabbix-agent\r# å¼€æœºè‡ªå¯åŠ¨\rdocker update --restart=always some-zabbix-agent\r æ²¡æœ‰é—®é¢˜çš„è¯å»å‰ç«¯æ£€æŸ¥ä¸€ä¸‹ ZBX æ˜¯å¦å¯ç”¨ï¼Œ\nå¦‚æœå¯ç”¨çš„è¯ï¼Œå†å»çœ‹ä¸‹ç›‘æ§å›¾å½¢ï¼Œ å¦‚æœéƒ½æ²¡é—®é¢˜çš„è¯ï¼ŒZabbix çš„å®‰è£…å°±ç»“æŸäº†ï¼Œä»¥ä¸Šã€‚\n","id":47,"section":"posts","summary":"åˆè´­ç½®äº†ä¸€æ‰¹ VPS åï¼Œå¤§å¤§å°å°çš„ Linux æœåŠ¡å™¨æ•°é‡æ¥åˆ°äº† 40 å¤šå°ï¼Œè‡ªå·±å†™çš„æœåŠ¡å™¨æ¢é’ˆå¼€å§‹æ„Ÿå—åˆ°å‹åŠ›äº†ï¼Œä¸“ä¸šæ€§å…ˆä¸æï¼ŒæœåŠ¡å™¨ä¸€å¤šå‰ç«¯é‚£ä¹ˆå¤š Echarts å›¾æ ‡å°±å¤Ÿ Chrome å—çš„","tags":["Docker"],"title":"CentOS7 ä¸‹ç”¨ Docker å®‰è£…å’Œå¯åŠ¨ Zabbix ä¼ä¸šçº§æœåŠ¡å™¨ç›‘æ§ç³»ç»Ÿ","uri":"https://senjianlu.com/2021/07/centos7-docker-zabbix/","year":"2021"},{"content":"æ–°é¡¹ç›®åˆå§‹å› ä¸ºç”¨çš„æ˜¯ Cloudflare çš„ DNS è§£æï¼Œä¸‹æ„è¯†çš„å¼€å¯äº† CDNï¼Œåœ¨è¿™ä¹‹åæ‰å¼€å§‹é…ç½® Nginxï¼Œæ˜æ˜é…ç½®çš„æ²¡é—®é¢˜ä½†æ˜¯ HTTP å¼ºåˆ¶è·³è½¬ HTTPS å°±æ˜¯ä¼šæŠ¥ ERR_TOO_MANY_REDIRECTS 301 å°†æ‚¨é‡å®šå‘çš„æ¬¡æ•°è¿‡å¤šçš„é”™è¯¯ï¼Œç™¾æ€ä¸å¾—å…¶è§£ã€‚\nåæ¥åœ¨æŸ¥è¯¢è§£å†³æ–¹æ¡ˆçš„æ—¶å€™è¯•ç€åŠ ä¸Šäº† Cloudflare å…³é”®è¯ï¼Œç„¶åçœ‹åˆ°äº†è¿™ç¯‡æ–‡ç« ï¼šä¸€ç§å¯èƒ½å¯¼è‡´ ERR_TOO_MANY_REDIRECTS çš„åŸå› ï¼Œæ„Ÿè§‰å°±æ˜¯è¿™ä¸ªåŸå› ï¼Œè¯•äº†ä¸‹æœç„¶è§£å†³äº†ï¼Œä¼˜åŒ–ä¸‹æ ‡é¢˜ SEO å¸Œæœ›èƒ½ç»™æ›´å¤šäººçœ‹åˆ°ã€‚\nè™½ç„¶å¾ˆç®€å•è¿˜æ˜¯æ”¾ä¸‹å…·ä½“çš„æ“ä½œæ­¥éª¤ã€‚\n å…³äº Cloudflare å››ç§ SSL/TLS æ¨¡å¼çš„åŒºåˆ«ï¼šCloudflare å››ç§ SSL/TLS åŠ å¯†æ¨¡å¼çš„åŠŸèƒ½è§£æåŠå®è·µ\n 1ã€ç¡®å®šä½ çš„ Nginx é…ç½®æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚\n# HTTP 80 ç«¯å£\rserver {\rlisten 80;\rserver_name example.com;\rroot /usr/share/nginx/html;\rindex index.html;\r# å¼ºåˆ¶è·³è½¬ HTTPS\rlocation / {\rreturn 301 https://$server_name$request_uri;\r}\r}\r# HTTPS 443 ç«¯å£\rserver {\rlisten 443 ssl;\rserver_name example.com;\rroot /usr/share/nginx/html;\rindex index.html;\r# SSL é…ç½®\rssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;\rssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;\rssl_protocols TLSv1 TLSv1.1 TLSv1.2;\rssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE;\rlocation / {\r# æœåŠ¡æ‰€åœ¨ç«¯å£\rproxy_pass http://127.0.0.1:8080;\rproxy_http_version 1.1;\rproxy_set_header Upgrade $http_upgrade;\rproxy_set_header Connection \u0026quot;upgrade\u0026quot;;\rproxy_set_header Host $host;\r}\r}\r è¿™æ ·çš„é…ç½®è‡³å°‘ HTTP å¼ºåˆ¶è·³è½¬ HTTPS å°±å·²ç»æ˜¯æ²¡æœ‰é—®é¢˜çš„äº†ï¼Œåœ¨é˜²ç«å¢™å’Œå®‰å…¨ç»„æ‰“å¼€ 80 å’Œ 443 ç«¯å£ä¹‹åä¸ä¼šå‡ºç°é‡å®šå‘ä¸åˆ°çš„é—®é¢˜ã€‚\nä¿®æ”¹å®Œè®°å¾—é‡å¯ Nginx æœåŠ¡ã€‚\nnginx -s reload\rservice nginx restart\r 2ã€Cloudflare é…ç½®ä¿®æ”¹ SSL/TLS ä¸ºç«¯åˆ°ç«¯åŠ å¯†ã€‚\nåŸå› åœ¨å¼€å¤´æ–‡ç« ä¸­å·²ç»è®²çš„å¾ˆæ˜ç¡®äº†ï¼š\n åŸå› \nå› ä¸ºåœ¨ Cloudflare çš„ SSL/TLS è®¾ç½®é€‰é¡¹ä¸­ï¼Œå¦‚æœä½ é€‰æ‹©äº† Flexible ï¼Œé‚£ä¹ˆæ‰€æœ‰å¯¹ä½ çš„æœåŠ¡å™¨çš„è¯·æ±‚éƒ½æ˜¯é€šè¿‡ HTTP å‘é€çš„ï¼Œè€Œå¦‚æœæœåŠ¡å™¨ä¸Šå·²ç»è®¾ç½®äº†å°† HTTP é‡å®šå‘åˆ° HTTPS çš„è¯ï¼Œå°±ä¼šå‘ç”Ÿé‡å®šå‘å¾ªç¯ã€‚\n å¦‚å›¾æ›´æ”¹å³å¯ã€‚\n3ã€æ³¨æ„äº‹é¡¹ï¼š\nä¸Šè¿°æ“ä½œç»“æŸåï¼Œå¦‚æœæœåŠ¡å™¨ Nginx é…ç½®é¡¹ä¸­ä¸€ä¸ªåŸŸååŒæ—¶æœ‰ HTTP å’Œ HTTPS ä¸¤ä¸ª server é…ç½®å†…å®¹çš„è¯ï¼Œæ‰€æœ‰ HTTP è®¿é—®ä¼šæ— è§†å…¶å¯¹åº”é…ç½®è€Œæ”¹ä¸º HTTPS åè®®å¹¶éµå¾ª HTTPS çš„ server é…ç½®å†…å®¹ï¼Œè¿™ä¼šå¼•èµ·æœ€å¤§çš„é—®é¢˜å°±æ˜¯ç±»ä¼¼ Let\u0026rsquo;s Encrypt SSL è¯ä¹¦ç”³è¯·æ—¶æ‰€é‡‡å–çš„ï¼šåœ¨æœåŠ¡å™¨æŸä¸€ä½ç½®ç”Ÿæˆè®¤è¯æ–‡ä»¶å¹¶ç”¨ HTTP åè®®è®¿é—®å®ƒä»¥å®ŒæˆéªŒè¯è¿™ä¸€æªæ–½å¤±æ•ˆã€‚\nä¹Ÿå°±æ˜¯è¯´ï¼Œå¼ºåˆ¶ HTTPS è·³è½¬å’Œ Let\u0026rsquo;s Encrypt SSL è¯ä¹¦è‡ªåŠ¨ç»­ç­¾ä½ åªèƒ½é€‰å…¶ä¸€ã€‚\n","id":48,"section":"posts","summary":"æ–°é¡¹ç›®åˆå§‹å› ä¸ºç”¨çš„æ˜¯ Cloudflare çš„ DNS è§£æï¼Œä¸‹æ„è¯†çš„å¼€å¯äº† CDNï¼Œåœ¨è¿™ä¹‹åæ‰å¼€å§‹é…ç½® Nginxï¼Œæ˜æ˜é…ç½®çš„æ²¡é—®é¢˜ä½†æ˜¯ HTTP å¼ºåˆ¶è·³è½¬ HTTPS å°±æ˜¯ä¼šæŠ¥ ERR_TOO_MANY_REDIRECTS 301 å°†æ‚¨é‡å®šå‘çš„","tags":["ç½‘ç«™å»ºè®¾"],"title":"Nginx å¼ºåˆ¶è·³è½¬ HTTPS é…ç½®æ— è¯¯ä¸”ä½¿ç”¨äº† Cloudflare åå‡ºç° ERR_TOO_MANY_REDIRECTS 301 å°†æ‚¨é‡å®šå‘çš„æ¬¡æ•°è¿‡å¤šçš„è§£å†³æ–¹æ³•","uri":"https://senjianlu.com/2021/07/nginx-cloudflare-301-too-many-redirects/","year":"2021"},{"content":"è…¾è®¯äº‘è™½ç„¶å…è´¹æä¾›è¯šä¿¡äºšæ´²çš„ SSL è¯ä¹¦ç”³è¯·ï¼Œä½†æ˜¯ä¸€å¹´ä¸€ç”³è¯·è¿˜æ˜¯æœ‰äº›éº»çƒ¦ï¼Œå†åŠ ä¸Šåªæ˜¯ç»™è¾¹ç¼˜é¡¹ç›®åŸŸååŠ ä¸Š HTTPS é˜²æ­¢å‰ç«¯å¼•ç”¨èµ„æºçš„æ—¶å€™æŠ¥ä¸å®‰å…¨ï¼Œç¨å¾®æŠ˜è…¾ä¸€ä¸‹ä¸€åŠ³æ°¸é€¸æ„Ÿè§‰ä¼šæ›´æ–¹ä¾¿ä¸€ç‚¹ï¼Œè¿™æ ·åœ¨åç»­çš„å…¶ä»–é¡¹ç›®ä¹Ÿèƒ½ç›´æ¥ç”¨ã€‚\n æ•™ç¨‹çš„é¡ºåºä¸ºæˆ‘è‡ªå·±æ“ä½œçš„é¡ºåºï¼š\nç”³è¯·è¯ä¹¦ â†’ é…ç½® Nginx HTTPS è®¿é—®å’Œæ”¾è¡Œ HTTP ä¸‹çš„è¯ä¹¦è·¯ç”± â†’ è‡ªåŠ¨ç»­ç­¾è¯ä¹¦é…ç½®\n1ã€é¦–å…ˆç”³è¯·è¯ä¹¦ï¼Œç”±äºæˆ‘ä½¿ç”¨çš„æ˜¯ CentOS7 ç³»ç»Ÿï¼Œå› æ­¤å¯ä»¥ yum ç›´æ¥å®‰è£… Certbotï¼š\nyum -y install certbot\r è™½ç„¶ä¸€èˆ¬æ•™ç¨‹æ¥ä¸‹æ¥éƒ½æ˜¯ç›´æ¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ç”³è¯·è¯ä¹¦ï¼ˆexample.com æ›¿æ¢ä¸ºä½ è‡ªå·±çš„åŸŸåï¼Œä¹Ÿå¯æ˜¯äºŒçº§åŸŸåï¼‰\ncertbot certonly --webroot --agree-tos -v -t --email example@gmail.com -w /usr/share/nginx/ -d example.com\r ä½†æ˜¯è¿˜æ˜¯æœ‰å‡ ç‚¹éœ€è¦åœ¨æ‰§è¡Œä¹‹å‰ç¡®è®¤ï¼š\n é˜²ç«å¢™å’Œå®‰å…¨ç»„æ”¾è¡Œ 80 ç«¯å£ï¼ˆåç»­é…ç½® HTTPS è®¿é—®å†è‡ªè¡Œæ”¾è¡Œ 443 ç«¯å£ï¼‰ ç¡®ä¿ example.com åŸŸåå·²ç»è§£æåˆ°äº†ä½ åœ¨ç”³è¯·è¯ä¹¦çš„æœåŠ¡å™¨ IP ä¸Š ç¡®ä¿ Nginx é…ç½®æ— è¯¯ï¼ŒæŒ‡ï¼šhttp://example.com/.well-known/acme-challenge/ ä¸‹ä¸´æ—¶ç”Ÿæˆçš„è®¤è¯æ–‡ä»¶å¯ä»¥è¢«è®¿é—®åˆ°ã€‚  2ã€Nginx çš„é…ç½®å¯ä»¥åƒæˆ‘ä¸‹é¢è¿™æ ·ï¼ˆæˆ‘é€‰çš„éªŒè¯æ–‡ä»¶ä¸´æ—¶ç›®å½•ä¸º /usr/share/nginxï¼Œserver_name ç­‰å¯ä»¥è‡ªè¡Œæ›¿æ¢ï¼‰ï¼š\nserver {\rlisten 80;\rlisten [::]:80;\rserver_name _;\rroot /usr/share/nginx/html;\r# Load configuration files for the default server block.\rinclude /etc/nginx/default.d/*.conf;\r# Let's Encrypt è¯ä¹¦è®¤è¯ï¼ˆä¼˜å…ˆçº§æœ€é«˜æ”¾åœ¨æœ€å‰é¢ï¼‰\rlocation ~ /.well-known {\rroot /usr/share/nginx;\rallow all;\r}\r}\r åœ¨é…ç½®å¥½åé‡å¯ Nginxï¼š\nnginx -s reload\rservice nginx restart\r ç„¶åæ‰§è¡Œä¸Šé¢è¯ä¹¦ç”³è¯·çš„å‘½ä»¤åº”è¯¥å°±å¯ä»¥ç”³è¯·åˆ°äº†ï¼Œä»»ä½•é”™è¯¯è¯·ä¾æ¬¡ç¡®è®¤ä¸Šè¿° 3 ç‚¹äº‹é¡¹ã€‚\næ³¨ï¼šå¦‚æœä½¿ç”¨çš„æ˜¯ Cloudflare DNS è§£æï¼Œè¯·åœ¨ SSL/TLS å¤„é€‰ä¸ºçµæ´»æ¨¡å¼ï¼Œä»¥é˜²æ­¢å¼ºåˆ¶ HTTPS è½¬æ¢å¯¼è‡´çš„æ–‡ä»¶æ— æ³•éªŒè¯ã€‚\n3ã€è¯ä¹¦è‡ªåŠ¨ç»­ç­¾ã€‚\nCertbot æä¾›äº†æ–¹ä¾¿çš„ä¸€é”®ç»­ç­¾å‘½ä»¤ï¼š\ncertbot renew\r åœ¨è¯ä¹¦åˆ°æœŸæ—¶é—´å°äº 30 å¤©çš„æƒ…å†µä¸‹ï¼Œæ‰§è¡Œä»¥ä¸ŠæŒ‡ä»¤åä¼šåœ¨åŸä½ç½®æ›´æ–°è¯ä¹¦ï¼Œæ¥ä¸‹æ¥åªè¦æ‰‹åŠ¨ Nginx é‡æ–°åŠ è½½é…ç½®å¹¶é‡å¯å°±èƒ½ä½¿ç”¨æ–°çš„è¯ä¹¦äº†ã€‚\nCertbot å¾ˆè´´å¿ƒçš„æä¾›äº†é’©å­ï¼Œä»¥æ–¹ä¾¿åœ¨ renew æ“ä½œå‰åæ‰§è¡Œå…¶ä»–å‘½ä»¤ï¼Œäºæ˜¯ä¾¿å¯ä»¥ç›´æ¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤åŒæ—¶å®Œæˆç»­ç­¾å’Œé‡å¯ Nginx æ“ä½œï¼š\ncertbot renew --pre-hook \u0026quot;service nginx stop\u0026quot; --post-hook \u0026quot;service nginx start\u0026quot;\r æ¥ç€ä»¥å®˜æ–¹å»ºè®®çš„æ¯å¤© 2 æ¬¡é¢‘ç‡å°†å…¶åŠ å…¥åˆ°ä»»åŠ¡è®¡åˆ’ä¸­ï¼š\ncrontab -e\r ...\r# æ¯ 12 å°æ—¶æ‰§è¡Œä¸€æ¬¡\r0 */12 * * * certbot renew --pre-hook \u0026quot;service nginx stop\u0026quot; --post-hook \u0026quot;service nginx start\u0026quot;\r...\r service crond restart\r ç†è®ºä¸Šæ˜¯æ²¡é—®é¢˜çš„ï¼Œå¤§æ¦‚ 60 å¤©ä»¥åå›æ¥è®°å½•ä¸‹è‡ªåŠ¨ç»­ç­¾æ˜¯å¦ç”Ÿæ•ˆã€‚\n2021/07/17\ntodo\u0026hellip;\n","id":49,"section":"posts","summary":"è…¾è®¯äº‘è™½ç„¶å…è´¹æä¾›è¯šä¿¡äºšæ´²çš„ SSL è¯ä¹¦ç”³è¯·ï¼Œä½†æ˜¯ä¸€å¹´ä¸€ç”³è¯·è¿˜æ˜¯æœ‰äº›éº»çƒ¦ï¼Œå†åŠ ä¸Šåªæ˜¯ç»™è¾¹ç¼˜é¡¹ç›®åŸŸååŠ ä¸Š HTTPS é˜²æ­¢å‰ç«¯å¼•ç”¨èµ„æºçš„æ—¶å€™æŠ¥ä¸å®‰å…¨ï¼Œç¨å¾®æŠ˜è…¾ä¸€","tags":["ç½‘ç«™å»ºè®¾"],"title":"Let's Encrypt è¯ä¹¦çš„ç”³è¯·ã€è‡ªåŠ¨æ›´æ–°å’Œ Nginx çš„é…ç½®","uri":"https://senjianlu.com/2021/07/nginx-letsencrypt-apply-and-auto-renew/","year":"2021"},{"content":"ç»™ç½‘ç«™å¥—ä¸Š Cloudflare é˜²æ­¢è¢«æ‰“å’Œç¼“å­˜éƒ¨åˆ†é™æ€æ–‡ä»¶åº”è¯¥æ˜¯å¸¸è§„æ“ä½œäº†ï¼Œä½†æ˜¯æƒ³èµ·æ¥ä¹‹å‰å¥½åƒè§åˆ°è¿‡çš„å¸–å­ï¼šç¬¬ä¸€æ¬¡çŸ¥é“ HTTPS ä¼šæš´éœ²æœåŠ¡å™¨ IPï¼Œåœ¨æ–°çš„æœåŠ¡å™¨ä¸Šè¯•éªŒäº†ä¸€ä¸‹å‘ç°åœ¨è®¿é—® https:// æœåŠ¡å™¨ IP çš„æ—¶å€™çœŸçš„ä¼šè¿”å› Nginx é…ç½®ä¸­çš„ç¬¬ä¸€å° SSL è¯ä¹¦è€Œæ³„éœ²åŸŸåï¼Œåœ¨è¿™ç§å…¨ç½‘æ‰« IP æˆæœ¬æä½çš„å¹´ä»£çœŸçš„æ˜¯å¾ˆå±é™©\u0026hellip;\u0026hellip;äºæ˜¯è¿˜æ˜¯å†³å®šç¨ä½œé…ç½®ä»¥æ’é™¤æ‰è¿™ä¸ªå±é™©å› ç´ ã€‚\n 1ã€80 ç«¯å£å¸¸è§„é…ç½®\nåœ¨ç”¨æˆ·ç”¨ IP ç›´æ¥è®¿é—®æ—¶è¿”å› 500 é”™è¯¯ã€‚\n# ========= åŸºç¡€é…ç½® =========\r# ç¦æ­¢ IP ç›´æ¥è®¿é—®\rserver {\rlisten 80;\rlisten [::]:80;\rserver_name _;\rlocation / {\rreturn 500;\r}\r}\r ç›´æ¥è®¿é—® http:// æœåŠ¡å™¨ IP:80 ç«¯å£æ•ˆæœï¼š 2ã€443 ç«¯å£é…ç½®\nå‚è€ƒæ–‡ç« ï¼šã€å°æ•™ç¨‹ã€‘Nginx é»˜è®¤æ‹’ç»å‘é€è¯ä¹¦è®¾ç½®æ•™ç¨‹\n# é˜²æ­¢å‘é€ SSL è¯ä¹¦\rserver {\rlisten 443 ssl http2 default_server;\rserver_name _;\rssl_protocols TLSv1.2 TLSv1.3;\r# å¯ç”¨æ‹’ç» TLS æ¡æ‰‹\rssl_reject_handshake on;\r# SSL Session ç¼“å­˜ï¼Œä¸è®¾ç½®çš„è¯æ— ç¼“å­˜é…ç½®ä¸ç”Ÿæ•ˆ\rssl_session_cache shared:SSL:10m;\rssl_session_timeout 10m;\r# log ä½ç½®è‡ªè¡Œæ›¿æ¢\raccess_log /rab/log/nginx/access.log;\r}\r è¿™æ ·é…ç½®ä¹‹åçš„è®¿é—®æ•ˆæœï¼š\nERR_SSL_UNRECOGNIZED_NAME_ALERT å°±æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœã€‚\nè‡³æ­¤é…ç½®ç»“æŸã€‚\n","id":50,"section":"posts","summary":"ç»™ç½‘ç«™å¥—ä¸Š Cloudflare é˜²æ­¢è¢«æ‰“å’Œç¼“å­˜éƒ¨åˆ†é™æ€æ–‡ä»¶åº”è¯¥æ˜¯å¸¸è§„æ“ä½œäº†ï¼Œä½†æ˜¯æƒ³èµ·æ¥ä¹‹å‰å¥½åƒè§åˆ°è¿‡çš„å¸–å­ï¼šç¬¬ä¸€æ¬¡çŸ¥é“ HTTPS ä¼šæš´éœ²æœåŠ¡å™¨ IPï¼Œåœ¨æ–°çš„æœåŠ¡å™¨ä¸Šè¯•éªŒäº†ä¸€","tags":["ç½‘ç«™å»ºè®¾"],"title":"Nginx å­¦ä¹ ï¼ˆäºŒï¼‰å¤„ç†ç”¨æˆ·ä»…ä½¿ç”¨ IP è®¿é—®æ—¶æœåŠ¡å™¨è¿”å› SSL è¯ä¹¦æ³„éœ²åŸŸåç­‰é—®é¢˜","uri":"https://senjianlu.com/2021/07/nginx-note-02/","year":"2021"},{"content":"æ˜æ˜è…¾è®¯äº‘æ‰å…è´¹å¸®å¿™å‡è¿‡é…ç½®ï¼Œ1H2G å‡åˆ°äº† 2H4Gï¼Œç»“æœç¨å¾®éƒ¨ç½²äº†ä¸€ç‚¹ Docker åˆä¸å¤Ÿäº†\u0026hellip;\u0026hellip;\nçœ‹äº†ä¸‹ç°åœ¨çš„è¿™äº›å®¹å™¨åŸºæœ¬éƒ½æ˜¯åšç«¯å£æµé‡è½¬å‘çš„ä»»åŠ¡ï¼Œå†…å­˜äº¤æ¢é‡ä¸éœ€è¦å¾ˆå¤§ï¼Œæƒ³è¯•ç€åŠ ä¸‹è™šæ‹Ÿå†…å­˜çœ‹çœ‹èƒ½ä¸èƒ½è§£å†³é—®é¢˜ï¼Œæ¯•ç«Ÿ 2H8G çš„æœåŠ¡å™¨å°±è¦åˆ° 70 å¤šä¸€ä¸ªæœˆäº†ï¼Œèƒ½çœåˆ™çœã€‚\n 1ã€å› ä¸º SWaP åˆ†åŒºç›¸å½“äºæ˜¯å°†ç¡¬ç›˜ä½œä¸ºå†…å­˜ä½¿ç”¨ï¼Œç¡¬ç›˜ IO é€Ÿç‡å¦‚æœä¸è¡Œä¼šå¾ˆå½±å“ç¨‹åºè¿è¡Œï¼Œæ‰€ä»¥è¯·å…ˆç¡®å®šè™šæ‹Ÿå†…å­˜æ˜¯å¦èƒ½æ»¡è¶³ä½ çš„éœ€è¦ã€‚\nå› æˆ‘çš„éœ€æ±‚æ˜¯æ–°å¢å†…å­˜ä»¥è¿è¡Œæ›´å¤šçš„ Docker å®¹å™¨ï¼Œèµ·ä¸€ä¸ªæ ·ä¾‹å¹¶å¾ªç¯è°ƒç”¨æŸ¥çœ‹å®ƒçš„è¿è¡Œæƒ…å†µã€‚\nç²—ç•¥å¯ä»¥çœ‹åˆ°å¤§æ¦‚ä¸º 4 kB/s çš„å†…å­˜é€Ÿç‡è¦æ±‚\u0026hellip;\u0026hellip;\nå†é‡é¸¡çš„ VPS é’»çŸ³ç›˜éƒ½èƒ½æ»¡è¶³ï¼Œä½†è¿˜æ˜¯æ¥çœ‹ä¸‹è…¾è®¯äº‘ç¡¬ç›˜ IOï¼š\ntime dd if=/dev/zero of=/test.disk bs=8k count=300\r è‚¯å®šèƒ½æ»¡è¶³è¦æ±‚äº†ã€‚\n2ã€åˆ›å»º SWaP åˆ†åŒºã€‚\né¦–å…ˆæŸ¥çœ‹æ˜¯å¦æ˜¯å¦å·²ç»æœ‰ SWaP åˆ†åŒºå­˜åœ¨ï¼š\n# ä¸€èˆ¬æƒ…å†µä¸‹ SWaP åˆ†åŒºæ“ä½œéƒ½åœ¨æœåŠ¡å™¨æ ¹ç›®å½•ä¸‹æ‰§è¡Œ\rcd /\rfree -m\r å¦‚æœæœ‰çš„è¯å…ˆåˆ é™¤ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¸…ç†åˆ†åŒºï¼š\n# swapfile ä¸ºä½ çš„åˆ†åŒºæ–‡ä»¶å\rswapoff /swapfile\r å¦‚æœæ²¡æœ‰æ—¢å­˜åˆ†åŒºæˆ–è€…åˆ†åŒºæ¸…ç†å®Œæ¯•ä»¥åï¼Œä¾¿å¯ä»¥å¼€å§‹ç€æ‰‹å¢åŠ åˆ†åŒºäº†ã€‚\nç½‘ä¸Šä¸€èˆ¬éƒ½å»ºè®®å¢åŠ  1 åˆ° 2 å€åŸå†…å­˜çš„è™šæ‹Ÿå†…å­˜ç©ºé—´ï¼Œå®é™…ä¸Šè¿˜æ˜¯å¾—çœ‹ä½ æ˜¯å¦çœŸçš„éœ€è¦è¿™äº›å†…å­˜å’Œå…¶æ€§èƒ½æ˜¯å¦èƒ½æ»¡è¶³ä½ çš„è¦æ±‚ï¼Œéƒ¨åˆ†æƒ…å†µä¸‹å †ç§¯è¿‡å¤šç¼“å­˜åœ¨ SWaP ä¼šä¸¥é‡å½±å“ç¨‹åºè¿è¡Œï¼Œåœ¨æœ€è¾¹ç¼˜çš„æ‰‡åŒº IO é€Ÿç‡ç”šè‡³ä¼šé™åˆ°ä¸åˆ° 1mB/s ä»¥ä¸‹ï¼Œè¯¦ç»†å¯ä»¥å‚ç…§è¿™ç¯‡è®¨è®ºï¼šHow can swapoff be that slow?\nå›å½’æ­£é¢˜ï¼Œå› ä¸ºæˆ‘å¯¹å†…å­˜é€Ÿç‡ä¸€ç‚¹è¦æ±‚éƒ½æ²¡æœ‰ï¼Œå› æ­¤ç›´æ¥æ‰©å®¹åˆ°å½“å‰å†…å­˜çš„ 2 å€å¤§å°ï¼Œ\n# åˆ›å»ºåˆ†åŒºæ–‡ä»¶ï¼Œæˆ‘çš„åˆ†åŒºæ–‡ä»¶åä¸º swapfile\rsudo dd if=/dev/zero of=/swapfile bs=1k count=7578000\r# å»ºç«‹ SWaP\rmkswap /swapfile\r# å¯åŠ¨ SWaP\rswapon /swapfile\r# æŸ¥çœ‹è™šæ‹Ÿå†…å­˜æ˜¯å¦åˆ›å»ºæˆåŠŸ\rfree -m\r åˆ›å»ºæˆåŠŸã€‚\n3ã€å¼€æœºè‡ªåŠ¨å¯åŠ¨ SWaP åˆ†åŒºã€‚\nåªéœ€è¦ä¿®æ”¹ /etc/fstab æ–‡ä»¶ï¼Œåœ¨æœ€åæ·»åŠ ä¸€è¡Œå†…å®¹å³å¯ã€‚\nsudo chmod 777 /etc/fstab\rsed -i '$a /swapfile swap swap defaults 0 0' /etc/fstab\r è‡³æ­¤ï¼ŒSWaP åˆ†åŒºåˆ›å»ºæˆåŠŸï¼Œå¯ä»¥é‡å¯çœ‹ä¸‹é…ç½®æ˜¯å¦å‡ç”Ÿæ•ˆã€‚\n","id":51,"section":"posts","summary":"æ˜æ˜è…¾è®¯äº‘æ‰å…è´¹å¸®å¿™å‡è¿‡é…ç½®ï¼Œ1H2G å‡åˆ°äº† 2H4Gï¼Œç»“æœç¨å¾®éƒ¨ç½²äº†ä¸€ç‚¹ Docker åˆä¸å¤Ÿäº†\u0026hellip;\u0026hellip; çœ‹äº†ä¸‹ç°åœ¨çš„è¿™äº›å®¹å™¨åŸºæœ¬éƒ½","tags":["Linux"],"title":"CentOS7 ä¸‹å»ºç«‹ SWaP åˆ†åŒºä»¥å¢åŠ è™šæ‹Ÿå†…å­˜","uri":"https://senjianlu.com/2021/07/centos7-swap/","year":"2021"},{"content":" Notion é“¾æ¥ï¼šhttps://www.notion.so/rabbir/1a25e9f6a26d4551902af651915117d7\n ","id":52,"section":"posts","summary":"Notion é“¾æ¥ï¼šhttps://www.notion.so/rabbir/1a25e9f6a26d4551902af651915117d7","tags":["æ—¥è¯­"],"title":"æ—¥è¯­å­¦ä¹  ã€Œã“ãã‚ã©ç³»çµ±ã€","uri":"https://senjianlu.com/2021/06/japanese-ko-so-a-do-xi-tong/","year":"2021"},{"content":" Notion é“¾æ¥ï¼šhttps://www.notion.so/rabbir/a24f7acbdba44e0ebe290fd0c3dd1907\n ","id":53,"section":"posts","summary":"Notion é“¾æ¥ï¼šhttps://www.notion.so/rabbir/a24f7acbdba44e0ebe290fd0c3dd1907","tags":["æ—¥è¯­"],"title":"æ—¥è¯­å­¦ä¹  æ ¼åŠ©è¯ã€Œã‚’ã€åœ¨è‡ªåŠ¨è¯å‰çš„ä½¿ç”¨","uri":"https://senjianlu.com/2021/06/japanese-ge-zhu-ci-wo/","year":"2021"},{"content":" Notion é“¾æ¥ï¼šhttps://www.notion.so/rabbir/e0d5da57af9c47c5a58df377cc4ac558\n ","id":54,"section":"posts","summary":"Notion é“¾æ¥ï¼šhttps://www.notion.so/rabbir/e0d5da57af9c47c5a58df377cc4ac558","tags":["æ—¥è¯­"],"title":"æ—¥è¯­å­¦ä¹  æ—¥è¯­è¯ç±»åˆ’åˆ†æ•´ç†","uri":"https://senjianlu.com/2021/06/japanese-ri-yu-ci-lei-hua-fen-zheng-li/","year":"2021"},{"content":" Notion é“¾æ¥ï¼šhttps://www.notion.so/rabbir/eee6ce0ebd9249a9a281805aadb54582\n ","id":55,"section":"posts","summary":"Notion é“¾æ¥ï¼šhttps://www.notion.so/rabbir/eee6ce0ebd9249a9a281805aadb54582","tags":["æ—¥è¯­"],"title":"æ—¥è¯­å­¦ä¹  ä½¿å½¹ã€è¢«åŠ¨å’Œä½¿å½¹è¢«åŠ¨","uri":"https://senjianlu.com/2021/06/japanese-shi-yi-bei-dong/","year":"2021"},{"content":"è™½ç„¶ Telegram çš„ APP è‡ªå¸¦ SOCKS5 ä»£ç†æ”¯æŒï¼Œç›´æ¥é…ç½®å³å¯ä½¿ç”¨ï¼Œä½†æ˜¯å‡ ä¹é…ç½®å®Œè¿ä¸Šå°±æ˜¯ç§’å°ï¼Œå¿…é¡»é€šè¿‡å›½å†…æœåŠ¡å™¨åšä¸­è½¬ï¼Œå³ï¼šå›½å¤–æœåŠ¡å™¨å…ˆå®‰è£… SOCKS5 ä»£ç†ï¼Œå†å®‰è£… GOST å°†å›½å†…æœºä¸­è½¬æ¥çš„æµé‡è½¬å‘åˆ°æœ¬æœº SOCKS5 å¯¹åº”ç«¯å£ï¼›å›½å†…æœåŠ¡å™¨åˆ™åªéœ€è¦å®‰è£… GOST å°†ä¸­è½¬æµé‡è½¬å‘è‡³å›½å¤–æœåŠ¡å™¨å³å¯ã€‚\n æˆ‘æ‰€é…ç½®çš„ä¾‹å­ä¸­æµé‡æ‰€ç»å†çš„è½¬å‘è¿‡ç¨‹ï¼š\nå®¢æˆ·ç«¯ \u0026ndash;\u0026gt; å›½å†…æœåŠ¡å™¨:15555 \u0026ndash;\u0026gt;ï¼ˆåŠ å¯†ï¼‰\u0026ndash;\u0026gt; å›½å¤–æœåŠ¡å™¨:15554 \u0026ndash;\u0026gt;ï¼ˆæœ¬æœºè½¬å‘ï¼‰\u0026ndash;\u0026gt; å›½å¤–æœåŠ¡å™¨:15555ï¼ˆSOCKS5 ä»£ç†æœåŠ¡æ‰€åœ¨ç«¯å£ï¼‰\n  1ã€å›½å¤–æœåŠ¡å™¨å®‰è£… SOCKS5 ä»£ç†\nä¸åšä»‹ç»ï¼ŒCentOS7 ç›´æ¥ä½¿ç”¨æˆ‘çš„ä¸€é”®è„šæœ¬ï¼šCentOS7 ä¸‹ä¸€é”®å®‰è£… SOCKS5 ä»£ç†\ncurl -s https://gitee.com/senjianlu/one-click-scripts/raw/main/CentOS7%20%E4%B8%8B%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%20SOCKS5%20%E4%BB%A3%E7%90%86/install.sh | bash -s $ss5_port $ss5_username $ss5_password\r æ³¨æ„å®‰è£…è¿‡ç¨‹ä¸­ä¼šè‡ªåŠ¨å¼€æ”¾é˜²ç«å¢™çš„æŒ‡å®šç«¯å£ï¼Œå¦‚æœå®‰è£…å®Œæ— æ³•è¿æ¥è¯·è‡ªè¡Œæ£€æŸ¥äº‘æœåŠ¡å™¨ç«¯å£ç»„ã€‚\næ£€æŸ¥ç”¨æŒ‡ä»¤ï¼š\ncurl -x socks5://$ss5_username:$ss5_password@$IP:$ss5_port http://ip-api.com/json/?lang=zh-CN  2ã€å›½å†…æœåŠ¡å™¨å®‰è£… GOST\nä½¿ç”¨æˆ‘å…‹éš†çš„ GOST ç®¡ç†ä¸€é”®è„šæœ¬ï¼š\næ³¨ï¼šåŸä½œè€…ï¼šKANIKIGï¼›è„šæœ¬åŸåœ°å€ï¼šMulti-EasyGost\nwget --no-check-certificate -O gost.sh https://gitee.com/senjianlu/one-click-scripts/raw/main/CentOS7%20%E4%B8%8B%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%20GOST%20%E5%B9%B6%E5%90%AF%E5%8A%A8%20HTTP%20%E5%92%8C%20SOCKS5%20%E4%BB%A3%E7%90%86%E6%9C%8D%E5%8A%A1/%E5%85%B3%E8%81%94%E8%84%9A%E6%9C%AC/CentOS7%20%E4%B8%8B%E7%AE%80%E5%8D%95%E7%9A%84%20GOST%20%E9%85%8D%E7%BD%AE%E8%84%9A%E6%9C%AC/gost.sh \u0026amp;\u0026amp; chmod +x gost.sh \u0026amp;\u0026amp; ./gost.sh\r å‡ºç°ä¸€ä¸‹ç•Œé¢åˆ™è¯´æ˜è„šæœ¬ä¸‹è½½å¹¶å¯åŠ¨æˆåŠŸï¼Œ\né¦–å…ˆè¾“å…¥â€œ1â€å®‰è£…ï¼Œ\n1\ry\r å®‰è£…æˆåŠŸåå†æ¬¡å¯åŠ¨è„šæœ¬ï¼Œä»¥æå‰é…ç½®å¥½è½¬å‘è§„åˆ™ï¼Œ\n./gost.sh\r é€‰æ‹©â€œ7â€ï¼Œ\n7\r ç”±äºæ˜¯å›½å†…ä¸­è½¬æœºï¼Œå› æ­¤é€‰æ‹©åŠ å¯†éš§é“æµé‡è½¬å‘â€œ2â€ï¼Œ\n2\r æ¥ä¸‹æ¥çš„é…ç½®å‚è€ƒä»¥ä¸‹å³å¯ï¼Œä¸€èˆ¬é€‰ç”¨ tls éš§é“å³å¯ï¼ŒIP åˆ™éœ€è¦æ›¿æ¢ä¸ºå¢ƒå¤–æœåŠ¡å™¨ IPï¼Œ\nå›½å†…æœºé…ç½®è‡³æ­¤ç»“æŸã€‚\n3ã€å›½å¤–æœåŠ¡å™¨å®‰è£… GOST è§£å¯†éš§é“æµé‡å¹¶è½¬å‘è‡³ SOCKS5 ç«¯å£\né…ç½®ä¸å›½å†…æœºå¤§åŒå°å¼‚ï¼Œä¸è¿‡éœ€è¦é€‰è§£å¯†éš§é“æµé‡è€ŒéåŠ å¯†éš§é“æµé‡ï¼Œç„¶åå°†æµé‡è½¬å‘è‡³ SOCKS5 æ‰€åœ¨ç«¯å£ï¼Œæˆ‘è¿™é‡Œ SOCKS5 æ‰€åœ¨ 15555 ç«¯å£ã€‚\nè‡³æ­¤ GOST éš§é“è½¬å‘é…ç½®å°±å®Œæˆäº†ã€‚\n å‡ºç°é—®é¢˜è¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ’æŸ¥ï¼š\n1ã€ä¸¤è¾¹æœåŠ¡å™¨é˜²ç«å¢™å’Œå®‰å…¨ç»„æ˜¯å¦éƒ½å·²ç»å¼€æ”¾ã€‚\n2ã€å•è®¿é—®å›½å¤–æœåŠ¡å™¨ SOCKS5 ä»£ç†æœåŠ¡æ˜¯å¦å¯è¡Œã€‚\n3ã€ä¸¤è¾¹ GOST é…ç½®æ˜¯å¦åŒ¹é…ã€‚\n ","id":56,"section":"posts","summary":"è™½ç„¶ Telegram çš„ APP è‡ªå¸¦ SOCKS5 ä»£ç†æ”¯æŒï¼Œç›´æ¥é…ç½®å³å¯ä½¿ç”¨ï¼Œä½†æ˜¯å‡ ä¹é…ç½®å®Œè¿ä¸Šå°±æ˜¯ç§’å°ï¼Œå¿…é¡»é€šè¿‡å›½å†…æœåŠ¡å™¨åšä¸­è½¬ï¼Œå³ï¼šå›½å¤–æœåŠ¡å™¨å…ˆå®‰è£… SOCKS5 ä»£ç†ï¼Œå†å®‰è£… GOST å°†å›½å†…","tags":["Linux"],"title":"CentOS7 ä¸‹å®‰è£… SOCKS5 ä»£ç†å¹¶ä½¿ç”¨ GOST æ­å»ºåŠ å¯†ä¸­è½¬éš§é“","uri":"https://senjianlu.com/2021/06/centos7-socks5-gost/","year":"2021"},{"content":"ä¸ºäº†åœ¨ CentOS7 æœåŠ¡å™¨ä¸‹éƒ¨ç½² Java Web é¡¹ç›®å’Œä½¿ç”¨ RabbitMQ æ‰€ç•™çš„ç¬”è®°ã€‚\n 1ã€é¦–å…ˆæ£€æŸ¥æœåŠ¡å™¨å½“å‰ OpenJDK ç‰ˆæœ¬ï¼Œå¦‚æœä¸æ˜¯éœ€è¦çš„ç‰ˆæœ¬è¯·å…ˆå¸è½½ã€‚\njava -version\r ç”±äºè¿™æ¬¡æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ä¸‹è½½å‹ç¼©åŒ…ç›´æ¥è§£å‹åå°†è·¯å¾„æ·»åŠ è‡³ç¯å¢ƒå˜é‡çš„æ–¹æ³•ï¼Œå¹¶éä½¿ç”¨ rmp å‘½ä»¤ç­‰ç›´æ¥å®‰è£…ï¼Œå› æ­¤å¦‚æœåç»­è¦æ›´æ–°ç‰ˆæœ¬åªéœ€è¦æ›´æ”¹ç¯å¢ƒå˜é‡è·¯å¾„å³å¯ã€‚\nrmp å‘½ä»¤ç­‰å®‰è£…çš„å¸è½½æ–¹æ³•è¯·è‡ªè¡Œå‚è€ƒï¼šCentOS7 å¸è½½ OpenJDK å®‰è£… Oracle JDK\n2ã€ä¸‹è½½ Java å¼€å‘è€…å·¥å…·åŒ… JDKã€‚\nå®˜æ–¹åœ°å€ï¼šJava SE Downloads \næ³¨ï¼šå®˜æ–¹ä¸‹è½½ç›®å‰éœ€è¦æ³¨å†Œè´¦å·ï¼Œå¦‚æœä½ å’Œæˆ‘ä¸€æ ·ä½¿ç”¨çš„ JDK 11 çš„è¯å¯ä»¥ç›´æ¥é€šè¿‡æˆ‘çš„ Google äº‘ç›˜åˆ†äº«é“¾æ¥è¿›è¡Œä¸‹è½½ã€‚\nç”±äºä¸ªäººç›®å‰ç”¨çš„æ˜¯ JDK 11 å› æ­¤ä»¥æ­¤ä¸ºä¾‹ï¼š\næ³¨æ„æœåŠ¡å™¨æ¶æ„å’Œä¸‹è½½å®ŒæˆåŒ…\nä¸‹è½½å®Œåé€šè¿‡ Xftp ç­‰å·¥å…·ä¸Šä¼ è‡³æœåŠ¡å™¨ã€‚\n3ã€è§£å‹å¹¶ç§»åŠ¨åˆ°æ‰€éœ€ç›®å½•ä¸‹ï¼ˆä»¥æˆ‘å¸¸ç”¨çš„ /opt/java ä¸ºä¾‹ï¼‰ã€‚\nmkdir /opt/java\rmv jdk-11.0.11_linux-x64_bin.tar.gz /opt/java/\rcd /opt/java\rtar -xzvf jdk-11.0.11_linux-x64_bin.tar.gz\r æ­¤æ—¶ Java æ‰€éœ€è¦æ·»åŠ è¿›ç¯å¢ƒå˜é‡çš„è·¯å¾„å³ä¸ºï¼š/opt/java/jdk-11.0.11\n4ã€æ·»åŠ è‡³ç¯å¢ƒå˜é‡å¹¶ä½¿å…¶ç”Ÿæ•ˆã€‚\nç¼–è¾‘æ–‡ä»¶\nvi /etc/profile\r åœ¨æ–‡ä»¶æœ«å°¾è¿½åŠ ï¼ŒJDK 11 ä»¥ååªéœ€æ·»åŠ ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š\nexport JAVA_HOME=/opt/java/jdk-11.0.11\rexport PATH=$PATH:$JAVA_HOME/bin\r  æ³¨æ„ï¼JDK 11 ä»¥å‰è¿˜éœ€è¦æ¶‰åŠåˆ° JRE_HOME ä»¥åŠ CLASS_PATHï¼ˆä»¥ JDK 1.8 ä¸ºä¾‹ï¼‰ï¼š\nexport JAVA_HOME=/home/java/jdk1.8.0_171\rexport JRE_HOME=$JAVA_HOME/jre\rexport CLASS_PATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar:$JRE_HOME/lib\rexport PATH=$PATH:$JAVA_HOME/bin:$JRE_HOME/bin\r  æ‰§è¡Œ source å‘½ä»¤ä½¿ç¯å¢ƒå˜é‡ç«‹å³ç”Ÿæ•ˆï¼š\nsource /etc/profile\r 5ã€æ£€æŸ¥æ˜¯å¦å®‰è£…æˆåŠŸã€‚\njava -version\r ","id":57,"section":"posts","summary":"ä¸ºäº†åœ¨ CentOS7 æœåŠ¡å™¨ä¸‹éƒ¨ç½² Java Web é¡¹ç›®å’Œä½¿ç”¨ RabbitMQ æ‰€ç•™çš„ç¬”è®°ã€‚ 1ã€é¦–å…ˆæ£€æŸ¥æœåŠ¡å™¨å½“å‰ OpenJDK ç‰ˆæœ¬ï¼Œå¦‚æœä¸æ˜¯éœ€è¦çš„ç‰ˆæœ¬è¯·å…ˆå¸è½½ã€‚ java -version ç”±äºè¿™æ¬¡æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ä¸‹è½½å‹ç¼©åŒ…","tags":["Java"],"title":"CentOS7 ä¸‹å®‰è£… Java ç¯å¢ƒï¼ˆJDK11ï¼‰","uri":"https://senjianlu.com/2020/12/centos7-jdk/","year":"2020"},{"content":"æœ€è¿‘çš„æ–°é¡¹ç›®è€ƒè™‘åˆ°æœ‰åˆ†å¸ƒå¼çš„éœ€è¦ï¼Œæ„Ÿè§‰åŠ å…¥æ¶ˆæ¯é˜Ÿåˆ—ä¸ä»…èƒ½å¢å¼ºå„ç³»ç»Ÿç›´æ¥çš„åè°ƒæ€§ï¼Œå¯¹æœåŠ¡å™¨èµ„æºä¹Ÿèƒ½æé«˜åˆ©ç”¨æ•ˆç‡ï¼Œå†³å®šè¯•ä¸‹ RabbitMQï¼Œäºæ˜¯ä¾¿æœ‰äº†è¿™ç¯‡ CentOS7 ä¸‹å®‰è£… RabbitMQ çš„ç¬”è®°ã€‚\n 1ã€é¦–å…ˆå®‰è£…æ‰€éœ€çš„ä¾èµ–åŒ…ã€‚\nyum -y install epel-release\ryum install build-essential openssl openssl-devel unixODBC unixODBC-devel make gcc gcc-c++ kernel-devel m4 ncurses-devel tk tc xz\r 2ã€å®‰è£… Erlangã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒRabbitMQ çš„ç‰ˆæœ¬å’Œ Erlang çš„ç‰ˆæœ¬æ˜¯éœ€è¦åŒ¹é…çš„ï¼Œå…·ä½“å¯ä»¥å‚ç…§è¿™é‡Œï¼šRabbitMQ Erlang Version Requirements\n å¦‚æœä½ ä¸æƒ³æŠ˜è…¾ï¼Œæ‚¨å¯ä»¥é€‰æ‹©ç›´æ¥\nyum -y install erlang\r å®‰è£… Erlangï¼Œè€Œè¿™æ ·é»˜è®¤å®‰è£…çš„ç‰ˆæœ¬æ˜¯ 03.18.el7ï¼Œè™½ç„¶çœ‹èµ·æ¥æ²¡æœ‰å¯¹åº”ç‰ˆæœ¬çš„ RabbitMQ å¯ä»¥å®‰è£…ï¼Œä½†æ˜¯å®æµ‹è‡³å°‘ 3.6.5 ç‰ˆæœ¬çš„ RabbitMQ å®é™…ä¸Šæ˜¯å¯ä»¥éªŒè¯ Erlang ç‰ˆæœ¬é€šè¿‡å¹¶å®‰è£…ï¼Œåç»­çš„ä½¿ç”¨ä¹Ÿæ²¡æœ‰é—®é¢˜ã€‚\n ä½†æ˜¯åœ¨è¿™é‡Œæˆ‘è¿˜æ˜¯é€‰æ‹©å®‰è£…æœ€æ–°çš„ç‰ˆæœ¬ï¼Œåæ­£æ˜¯ä¸ªäººé¡¹ç›®ï¼Œåœ¨æ–°ç‰¹æ€§å’Œç‰ˆæœ¬ç¨³å®šä¹‹é—´æœ‰é€‰æ‹©çš„æƒ…å†µä¸‹ï¼Œå‰é¡¹å¯¹æˆ‘çš„å¸å¼•åŠ›å¼€å§‹æ›´å¤§ï¼Œåæ­£è®°äº†ç¬”è®°å¤§ä¸äº†å›é€€å°±æ˜¯äº†ã€‚\n# æ›´æ–° yum æºè‡³æœ€æ–°\rwget https://packages.erlang-solutions.com/erlang-solutions-1.0-1.noarch.rpm\rrpm -Uvh erlang-solutions-1.0-1.noarch.rpm\r# å®‰è£… Erlang\ryum install erlang\r å®Œæˆåæ£€æŸ¥ Erlang ç‰ˆæœ¬\nyum info erlang\r 3ã€å®‰è£… RabbitMQã€‚\nErlang ç‰ˆæœ¬ä¸ºæœ€æ–°çš„è¯ï¼Œç†è®ºä¸Š RabbitMQ çš„ç‰ˆæœ¬å¯ä»¥éšä¾¿æŒ‘ï¼Œè¿™é‡Œæˆ‘å°±æŒ‘å½“å‰æœ€æ–°çš„å§ã€‚\nwget https://github.com/rabbitmq/rabbitmq-server/releases/download/v3.8.17/rabbitmq-server-3.8.17-1.el7.noarch.rpm\ryum -y install socat\rrpm -ivh rabbitmq-server-3.8.17-1.el7.noarch.rpm\r æ³¨æ„ï¼Œ3.8.17-1.el7 çš„ el7 æ‰€ä»£è¡¨çš„å°±æ˜¯ CentOS7 ç³»ç»Ÿæ‰€é€‚ç”¨çš„åŒ… ç»“æŸåæ£€æŸ¥ä¸€ä¸‹\nrabbitmq-server status\r æ²¡æœ‰é—®é¢˜çš„è¯å°†å¯è§†åŒ–ç®¡ç†ç•Œé¢ä¸€å¹¶å®‰è£…ï¼š\nrabbitmq-plugins enable rabbitmq_management\r 4ã€å¯åŠ¨æœåŠ¡å¹¶é…ç½®ç”¨æˆ·ã€‚\né¦–å…ˆå¯åŠ¨æœåŠ¡ï¼š\nsystemctl start rabbitmq-server\rrabbitmqctl status\r ç„¶åå¼€æ”¾é˜²ç«å¢™å’Œç«¯å£ç»„ï¼Œæ¥ç¡®ä¿å¯è§†åŒ–ç®¡ç†ç•Œé¢ä¹Ÿè¿è¡ŒæˆåŠŸï¼Œé»˜è®¤åœ°å€åŠç«¯å£ï¼šhttp://127.0.0.1:15672ï¼ŒIP è¯·è‡ªè¡Œæ›¿æ¢ï¼Œå‡ºç°ä»¥ä¸‹ç•Œé¢è¯´æ˜å¯åŠ¨æˆåŠŸã€‚\næ¥ä¸‹æ¥é…ç½®ç”¨æˆ·ï¼ŒæŒ‡ä»¤å¦‚ä¸‹ï¼š\n#æ·»åŠ æ–°ç”¨æˆ·ï¼Œç”¨æˆ·åä¸º\u0026quot;root\u0026quot;ï¼Œå¯†ç ä¸º\u0026quot;root\u0026quot;\rrabbitmqctl add_user root root\r#è®¾ç½®ç”¨æˆ·ä¸ºç®¡ç†å‘˜è§’è‰²\rrabbitmqctl set_user_tags root administrator #æˆæƒè¿œç¨‹è®¿é—® rabbitmqctl set_permissions -p / root \u0026quot;.\u0026quot; \u0026quot;.\u0026quot; \u0026quot;.*\u0026quot;  5ã€è®¾ç½®ä¸ºå¼€æœºè‡ªå¯åŠ¨ã€‚\nsystemctl enable rabbitmq-server\r è‡³æ­¤ç»“æŸã€‚\n","id":58,"section":"posts","summary":"æœ€è¿‘çš„æ–°é¡¹ç›®è€ƒè™‘åˆ°æœ‰åˆ†å¸ƒå¼çš„éœ€è¦ï¼Œæ„Ÿè§‰åŠ å…¥æ¶ˆæ¯é˜Ÿåˆ—ä¸ä»…èƒ½å¢å¼ºå„ç³»ç»Ÿç›´æ¥çš„åè°ƒæ€§ï¼Œå¯¹æœåŠ¡å™¨èµ„æºä¹Ÿèƒ½æé«˜åˆ©ç”¨æ•ˆç‡ï¼Œå†³å®šè¯•ä¸‹ RabbitMQï¼Œäºæ˜¯","tags":["RabbitMQ"],"title":"CentOS7 ä¸‹å®‰è£… RabbitMQ","uri":"https://senjianlu.com/2020/12/centos7-install-rabbitmq/","year":"2020"},{"content":"å› ä¸ºä¸€å¼€å§‹æ²¡æ•´ç†å½’ç±»æ–‡ä»¶çš„ä¹ æƒ¯ï¼ŒæŠŠæ‰‹å¤´çš„ä¸»åŠ›å¼€å‘æœºå¼„å¾—å¾ˆä¹±ï¼Œç´¢æ€§å°±å¤‡ä»½äº†äº›é‡è¦æ–‡ä»¶é‡è£…äº†ç”µè„‘ï¼Œç„¶åå°±æŠŠæœåŠ¡å™¨çš„ Nginx é…ç½®æ–‡ä»¶å…¨ä¸¢äº†\u0026hellip;\u0026hellip;å‰©ä¸‹æœåŠ¡å™¨ä¸Šä¸€å †æ²¡æ³¨é‡Šçš„é…ç½®è¿è‡ªå·±éƒ½çœ‹æ™•äº†ï¼Œå°±é‡æ–°å­¦ä¸‹å§ã€‚\n Nginx åä»£è·¯ç”±çš„æ›¿æ¢åœ¨åŒä¸€æœåŠ¡å™¨éƒ¨ç½²å¤šé¡¹ç›®æ˜¯è¿˜æ˜¯å¾ˆå¸¸ç”¨çš„ï¼Œæ¯”æ–¹è¯´æˆ‘æœ‰ä¸€ä¸ªå°† https://ceshiku.cn/tiny-server-proxy/ åä»£åˆ°æœ¬åœ°çš„ 57191 ç«¯å£çš„éœ€æ±‚ï¼Œä½†æ˜¯åˆä¸æƒ³å½±å“åˆ°ä¸»è·¯ç”±å’Œå…¶ä»–é¡¹ç›®åœ°å€ä¾‹å¦‚ https://ceshiku.cn/test/ çš„è§£æã€‚\næˆ‘è‚¯å®šä¸èƒ½è¿™ä¹ˆå†™ï¼š\nlocation ^~ /tiny-server-proxy {\rproxy_pass http://localhost:57191;\r}\r ä¸ºä»€ä¹ˆå‘¢ï¼Œå¦‚æœæˆ‘è¿™ä¹ˆå†™çš„è¯ï¼Œé‚£å½“æˆ‘è®¿é—® https://ceshiku.cn/tiny-server-proxy/status çš„æ—¶å€™ï¼Œè™½ç„¶èƒ½è¢«ä»£ç†åˆ°æŒ‡å®šç«¯å£ä¸Šè¿è¡Œçš„é¡¹ç›®ï¼Œä½†æ˜¯å®é™…ä¸Šé¡¹ç›®æ”¶åˆ°çš„è¯·æ±‚è·¯ç”±æ˜¯è¿™æ ·çš„ï¼š\nå¾ˆæ˜æ˜¾å¤šå‡ºæ¥çš„ /tiny-server-proxy/ å…¶å®æ˜¯æˆ‘ä¸éœ€è¦çš„ï¼Œé‚£æˆ‘æ”¹ä¸€ä¸‹ï¼š\nlocation ^~ /tiny-server-proxy/ {\rproxy_pass http://localhost:57191;\r}\r ç»“æœæ”¶åˆ°çš„è·¯ç”±å‘¢ï¼Œå¦‚ä¸‹ï¼š\nä¾æ—§æ˜¯å¤šäº† /tiny-server-proxy/ è¿™ä¸ªè·¯å¾„ï¼Œå¯è§åœ¨è·¯ç”±åŒ¹é…ä¸Šä¸‹åŠŸå¤«æ˜¯æ²¡æœ‰ç”¨çš„ï¼Œåªèƒ½åœ¨ proxy_pass ååä»£çš„ç«¯å£ä¸Šåšæ›´æ”¹ï¼š\nlocation ^~ /tiny-server-proxy/ {\rproxy_pass http://localhost:57191/;\r}\r å†è¯•ä¸€ä¸‹ï¼Œæœç„¶å¯ä»¥äº†ï¼š\né‚£ä¹ˆ Nginx åä»£åˆ°ç«¯å£é¡¹ç›®æ—¶è·¯ç”±éƒ¨åˆ†è·¯å¾„æ›¿æ¢çš„é—®é¢˜å°±è§£å†³äº†ã€‚\n é‚£ä¹ˆç¢°åˆ°åŠ¨é™åˆ†ç¦»çš„é¡¹ç›®ï¼Œæƒ³è¦è®¿é—®é™æ€èµ„æºæ—¶æ›¿æ¢è·¯å¾„æœ‰è¯¥æ€ä¹ˆæ“ä½œå‘¢ï¼Œè¿™ä¸ªæ—¶é—´å°±è¦æ¬å‡ºé™¤äº† root ä¹‹å¤– Nginx å¦ä¸€ä¸ªèµ„æºæ˜ å°„è¯­æ³•äº†ï¼šalias\nlocation ^~ /t/ {\rroot /www/root/html/;\r}\rlocation ^~ /t/ {\ralias /www/root/html/;\r}\r å½“è·¯ç”±å’Œæ–‡ä»¶å¤¹é…ç½®å®Œå…¨ä¸€æ ·çš„æƒ…å†µä¸‹ï¼Œå½“è¯·æ±‚é“¾æ¥æ˜¯ /t/a.html çš„æƒ…å†µä¸‹ï¼Œä¸¤ä¸ªé…ç½®åˆ†åˆ«ä¼šï¼š\nroot çš„é…ç½®ä¼šè¿”å› /www/root/html/t/a.html çš„æ–‡ä»¶ï¼Œalias çš„é…ç½®ä¼šè¿”å› /www/root/html/a.html çš„æ–‡ä»¶ï¼Œalias æ‰€èµ·çš„ä½œç”¨å°±å’Œåˆšåˆšå¾€åä»£ç«¯å£ååŠ çš„æ–œæ ç±»ä¼¼ï¼Œåšåˆ°å› ä¸ºæŠŠ location åé¢é…ç½®çš„è·¯å¾„å®Œå…¨èˆå¼ƒã€‚\nä½†æ˜¯ç”¨çš„æ—¶å€™è¿˜éœ€è¦æ³¨æ„ï¼šalias åªèƒ½ä½äº location å—ä¸­ï¼ˆroot å¯ä»¥ä¸æ”¾åœ¨ location ä¸­ï¼‰ã€‚\n","id":59,"section":"posts","summary":"å› ä¸ºä¸€å¼€å§‹æ²¡æ•´ç†å½’ç±»æ–‡ä»¶çš„ä¹ æƒ¯ï¼ŒæŠŠæ‰‹å¤´çš„ä¸»åŠ›å¼€å‘æœºå¼„å¾—å¾ˆä¹±ï¼Œç´¢æ€§å°±å¤‡ä»½äº†äº›é‡è¦æ–‡ä»¶é‡è£…äº†ç”µè„‘ï¼Œç„¶åå°±æŠŠæœåŠ¡å™¨çš„ Nginx é…ç½®æ–‡ä»¶å…¨ä¸¢äº†\u0026hellip","tags":["ç½‘ç«™å»ºè®¾"],"title":"Nginx å­¦ä¹ ï¼ˆä¸€ï¼‰proxy_pass åä»£è·¯ç”±çš„æ›¿æ¢å’Œ root ä¸ alias çš„åŒºåˆ«","uri":"https://senjianlu.com/2020/12/nginx-note-01/","year":"2020"},{"content":"ä¸ºäº†åœ¨ä¸œäº¬å¥¥è¿ä¼šæœŸé—´åº”å¯¹ä¸´æ—¶å°è·¯ï¼Œç´§è·Ÿæ—¥æœ¬äººèµ¶äº†2ä¸ªæœˆçš„åŠŸèƒ½ï¼Œç»ˆäºèƒ½ä¼‘æ¯ä¸€é˜µäº† :)\nè™½ç„¶æ˜¯å› ä¸ºå¥¥è¿ä¼šæ¨è¿Ÿè€Œä¸æ˜¯å› ä¸ºå¼€å‘å®Œæˆ\næ€»ä¹‹åˆèƒ½å­¦ç‚¹æ–°ä¸œè¥¿äº†ï¼Œæ–¹ä¾¿è®°å½•å…ˆå‡†å¤‡ä¸ªä¸€é”®æ¨é€åšå®¢çš„å·¥å…·å§ã€‚\n ç¯å¢ƒï¼šWindows 10 64 ä½\néœ€è¦æ—¶é—´ï¼š10 åˆ†é’Ÿå·¦å³\nåŸæ•™ç¨‹ï¼šCSDN Hugo åšå®¢çš„è„šæœ¬å¿«é€Ÿå‘å¸ƒåšå®¢\n è¯´ç€å¥½å¬çš„ä¸€é”®è„šæœ¬å…¶å®ä¹Ÿå°±æ˜¯æŠŠå‘å¸ƒæ‰€éœ€è¦è¾“å…¥çš„å‡ è¡Œå‘½ä»¤å†™è¿›ä¸€ä¸ªæ‰¹å¤„ç†æ–‡ä»¶é‡Œç½¢äº†ï¼Œé¦–å…ˆå›é¡¾ä¸‹ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬å®Œæˆä¸€ç¯‡åšå®¢å¹¶å‘å¸ƒçš„æ‰€æœ‰å‘½ä»¤ï¼š\nhugo new posts/myblog01.md # æ–°å»ºä¸€ç‰‡åšæ–‡ï¼Œå½“ç„¶ä¹Ÿèƒ½å»è·¯å¾„ä¸‹ä¹‹é—´åˆ›å»º.mdæ–‡ä»¶\rhugo server -t pure --buildDrafts # åœ¨localhostèµ·åšå®¢çœ‹æ•ˆæœ pureæ¢ä¸ºä½ çš„themeå\rhugo --theme=pure --baseUrl=\u0026quot;https://moyu.best\u0026quot; --buildDrafts # ç¡®ä¿æ•ˆæœç¬¦åˆé¢„æœŸåç”Ÿæˆpublicç›®å½• Urlæ¢ä¸ºä½ çš„åšå®¢åœ°å€\rcd public\rgit add .\rgit commit -m \u0026quot;æ¨é€\u0026quot;\rgit push -u origin master\rgit push -f # å¦‚æœæŠ¥é”™äº†ä½†æ˜¯ä½ èƒ½ç¡®å®šæœ¬åœ°çš„æ˜¯æœ€æ–°çŠ¶æ€çš„è¯\r ç„¶åå¼€å§‹å†™è„šæœ¬ï¼Œä¸€èˆ¬åœ¨ Windows ä¸‹ç›´æ¥å†™ .bat è„šæœ¬å°±è¡Œäº†ï¼Œä½†æ˜¯è¿™é‡Œæˆ‘ä»¬ä¸ºäº†åæœŸé€šè¿‡ Git Bash æ¥æ‰§è¡Œï¼Œçœå»æ¯æ¬¡è¾“å…¥ Git è´¦æˆ·å¯†ç çš„æ­¥éª¤ï¼Œæ‰€ä»¥é‡‡ç”¨ Shell è„šæœ¬ã€‚\nç›´æ¥ä¸Šä»£ç å’Œæ³¨é‡Šï¼š\n#!/bin/bash\recho -e \u0026quot;\\033[0;32mStart to deploy!\\033[0m\u0026quot;\r# Build the hugo project\rhugo --theme=pure --baseUrl=\u0026quot;https://moyu.best\u0026quot; --buildDrafts\r# Go to Public\rcd public\r# Add all\rgit add .\r# Commit\rgit commit -m \u0026quot;Commit by deploy.sh\u0026quot;\r# Push\rgit push -u origin master\r# Back\rcd ...\r ç„¶åæ˜¯é€‰æ‹©ç”¨ Git Bash çš„æ–¹å¼æ‰§è¡Œè¿™ä¸ªæ‰¹å¤„ç†è„šæœ¬ã€‚\né€‰å®š Git Bash å³å¯ï¼Œç„¶åè¿è¡Œï¼\nå¯ä»¥çœ‹è§æ•ˆæœå’Œæˆ‘ä»¬æ‰‹åŠ¨ push æ˜¯ä¸€æ ·çš„ï¼Œæ¨é€æˆåŠŸäº†ã€‚\nç»“æŸ~åç»­æ˜¯å¯ä»¥æ·»åŠ  msg ä½œä¸ºå‚æ•°ä¼ å…¥å’Œ catch å†²çªåå¼ºåˆ¶ push çš„ï¼Œè¿™é‡Œå°±ä¸ç¢ç£¨äº†ï¼Œç­‰ä¸ªä¸‹å‘¨ç”¨ä¸Š2å¤©å¥½å¥½å­¦ä¹ ä¸€ä¸‹æ‰¹å¤„ç†è„šæœ¬å§ã€‚\nè„šæœ¬ä¸‹è½½åœ°å€ï¼šä¸‹è½½ï¼ˆè®°å¾—æ›´æ”¹ theme ä¸»é¢˜å’Œåšå®¢ Urlï¼‰\n","id":60,"section":"posts","summary":"ä¸ºäº†åœ¨ä¸œäº¬å¥¥è¿ä¼šæœŸé—´åº”å¯¹ä¸´æ—¶å°è·¯ï¼Œç´§è·Ÿæ—¥æœ¬äººèµ¶äº†2ä¸ªæœˆçš„åŠŸèƒ½ï¼Œç»ˆäºèƒ½ä¼‘æ¯ä¸€é˜µäº† :) è™½ç„¶æ˜¯å› ä¸ºå¥¥è¿ä¼šæ¨è¿Ÿè€Œä¸æ˜¯å› ä¸ºå¼€å‘å®Œæˆ æ€»ä¹‹åˆèƒ½å­¦ç‚¹æ–°ä¸œè¥¿äº†ï¼Œ","tags":[],"title":"Windows ä¸‹ Hugo é™æ€åšå®¢ä¸€é”®æ¨é€å‘å¸ƒ","uri":"https://senjianlu.com/2020/05/hugo-auto-build/","year":"2020"},{"content":"åœ¨å­¦ä¹ å…·ä½“çš„æƒé™ç®¡ç†ä¹‹å‰ï¼Œéœ€è¦å…ˆäº†è§£ä¸€ä¸‹ PostgreSQL ä¸­æƒé™çš„å‡ ä¸ªå±‚æ¬¡ï¼š\n ç‰¹æ®Šæƒé™ï¼ŒåŒ…å«è¶…çº§ç”¨æˆ·çš„æƒé™ã€åˆ›å»ºæ•°æ®åº“çš„æƒé™ã€åˆ›å»ºç”¨æˆ·ä»¥åŠ Login çš„æƒé™ã€‚ åœ¨æ•°æ®åº“ä¸­åˆ›å»ºæ¨¡å¼ (SCHEMA) çš„æƒé™ã€‚ åœ¨æ¨¡å¼ä¸­åˆ›å»ºæ•°æ®åº“å¯¹è±¡çš„æƒé™ï¼Œå¦‚åˆ›å»ºè¡¨ã€ç´¢å¼•ç­‰ã€‚ æŸ¥è¯¢å•è¡¨ï¼Œå’Œæ’å…¥ã€æ›´æ–°æˆ–åˆ é™¤è¡¨ä¸­æ•°æ®çš„æƒé™ã€‚ æœ€ä½çš„åˆ™æ˜¯åªèƒ½æ“ä½œè¡¨ä¸­éƒ¨åˆ†å­—æ®µçš„æƒé™ã€‚  äº”ç§æƒé™ä¸­ï¼Œæ¯”è¾ƒéš¾ç†è§£çš„å¯èƒ½å°±æ˜¯ä¸ºä»€ä¹ˆè¦æŠŠåˆ›å»ºæ•°æ®åº“ç­‰è®¾ç½®ä¸ºç‰¹æ®Šæƒé™ã€‚åœ¨è¿™ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå­¦ä¹  PostgreSQL ä¸­æ˜¯å¦‚æœå¯¹æƒé™è¿›è¡Œç®¡ç†çš„ã€‚\n PostgreSQL ä½¿ç”¨è§’è‰²çš„æ¦‚å¿µç®¡ç†æ•°æ®åº“æƒé™ï¼Œä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œå¾€å¾€ç»™ä¸€ä¸ªè§’è‰²èµ‹äºˆä¸€ç³»åˆ—çš„æƒé™ï¼Œè€Œå¦‚æœæŸä¸ªç”¨æˆ·éœ€è¦è¿™äº›æƒé™ï¼Œåˆ™åªéœ€è¦ç›´æ¥æŠŠè§’è‰²èµ‹ç»™ç”¨æˆ·å³å¯ã€‚\nç¨å¾®æœ‰ç‚¹ç»•çš„æ˜¯åœ¨è¿™é‡Œï¼ŒPostgreSQL ä¸­è§’è‰²å’Œç”¨æˆ·åˆæ˜¯æ²¡æœ‰åŒºåˆ«çš„ï¼Œä¸€ä¸ªç”¨æˆ·å°±æ˜¯ä¸€ä¸ªè§’è‰²ï¼Œå› æ­¤å¯ä»¥æŠŠä¸€ä¸ªç”¨æˆ·çš„æƒé™èµ‹ç»™å¦ä¸€ä¸ªç”¨æˆ·ï¼Œç¨ç¨æœ‰ç‚¹éš¾ç†è§£ï¼Œä½†æ˜¯å®é™…æ“ä½œä¸­ä¸ä¼šæœ‰ä»€ä¹ˆé˜»ç¢ã€‚\n1ã€é‚£å°±ä»åˆ›å»ºç”¨æˆ·å¼€å§‹å§ã€‚\næŒ‡ä»¤å¦‚ä¸‹ï¼š\nåˆ›å»ºè§’è‰²ï¼šCREATE ROLE username [ [ WITH ] option [...] ] åˆ›å»ºç”¨æˆ·ï¼šCREATE USER username [ [ WITH ] option [...] ]  åœ¨è¿™é‡Œæˆ‘ä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨ CREATE USERï¼Œå› ä¸ºè¿™æ ·é»˜è®¤å‡ºæ¥çš„ç”¨æˆ·æ˜¯æœ‰ \u0026ldquo;Login\u0026rdquo; æƒé™çš„ï¼Œä¸éœ€è¦å†å»é¢å¤–è®¾ç½®ä¸€ä¸‹äº†ã€‚ç”¨æˆ·çš„å…¶ä»–å±æ€§ç”¨ä¸¤ç§æ–¹æ³•åˆ›å»ºå‡ºæ¥ä¸ä¼šæœ‰ä»»ä½•ä¸åŒã€‚\nä¸Šé¢å‘½ä»¤ä¸­çš„ \u0026ldquo;option\u0026rdquo; å°±æ˜¯ç”¨æˆ·åˆ›å»ºæ—¶è¢«èµ‹äºˆçš„æƒé™äº†ï¼Œå¯ä»¥æ˜¯å¦‚ä¸‹å†…å®¹ï¼š\nä¸¾ä¸ªå®é™…çš„ä¾‹å­ï¼Œæ¯”å¦‚æˆ‘ç°åœ¨æœ‰ä¸€ä¸ªæ–°çš„é¡¹ç›®è¦å¯åŠ¨ï¼Œéœ€è¦åˆ›å»ºå¯¹åº”çš„ç”¨æˆ·å’Œæ•°æ®åº“ï¼š\nCREATE USER new_project_user CREATEDB; ALTER USER new_project_user PASSWORD '12345'; # ä¿®æ”¹ç™»å½•å¯†ç   è¿™æ ·ä¸€ä¸ªå¯åˆ›å»ºé¡¹ç›®æ•°æ®åº“çš„ç”¨æˆ·å°±åˆ›å»ºå®Œæˆäº†ï¼å½“ç„¶è¿™ç§æƒ…å†µä¸‹ï¼Œåˆ›å»ºçš„ç”¨æˆ·å…¶ä»–æ˜¯æ²¡æœ‰å…¶ä»–æ•°æ®åº“åŠè¡¨çš„è®¿é—®æƒé™çš„ã€‚\n2ã€ä¿®æ”¹æƒé™\nä¹‹å‰è¯´è¿‡çš„5é¡¹æƒé™ä¸­ï¼Œå­˜åœ¨åŒ…å«è¶…çº§ç”¨æˆ·ã€åˆ›å»ºæ•°æ®åº“æƒé™å’Œ Login åœ¨å†…çš„ç‰¹æ®Šæƒé™ï¼Œåœ¨ä¿®æ”¹æƒé™æˆ–è€…è¯´ç®¡ç†æƒé™æ—¶ï¼Œä½¿ç”¨çš„å‘½ä»¤æ˜¯ä¸ä¸€èˆ¬æƒé™ä¸åŒçš„ï¼š\nALTER ROLE username [ [WITH] option [ ... ] ]  è€Œä¸€èˆ¬çš„é’ˆå¯¹æ•°æ®åº“ä¸­å»ºæ¨¡å¼ã€æ•°æ®åº“ä¸­å»ºè¡¨ç­‰çš„åˆ™ä½¿ç”¨ \u0026ldquo;GRANT\u0026rdquo;ã€\u0026ldquo;REVOKE\u0026rdquo; å‘½ä»¤ï¼š\nGRANT role_name [, ...] TO role_name [, ...] [ WITH ADMIN OPTION ] # ä¸Šé¢è¿™ç§æ˜¯ä¹¦ä¸­è®°è½½çš„ï¼Œå¯èƒ½éš¾ä»¥ç†è§£ï¼Œæ¢ç§å½¢å¼å¦‚ä¸‹ GRANT some_privileges ON database_object_type object_name TO username   \u0026ldquo;some_privileges\u0026rdquo; ä»£è¡¨ä¸€ç§æƒé™ï¼Œä¾‹å¦‚ \u0026ldquo;SELECT\u0026rdquo;ã€\u0026ldquo;UPDATE\u0026rdquo; \u0026ldquo;database_object_type\u0026rdquo; ä»£è¡¨ä¸€ç§æ•°æ®åº“å¯¹è±¡ç±»å‹ï¼Œä¾‹å¦‚ \u0026ldquo;TABLE\u0026rdquo;ã€\u0026ldquo;SEQUENCE\u0026rdquo; \u0026ldquo;object_name\u0026rdquo; ä»£è¡¨è¡¨å \u0026ldquo;username\u0026rdquo; åˆ™å°±æ˜¯ç”¨æˆ·åäº†  æ¯”å¦‚è¯´æˆ‘ç°åœ¨éœ€è¦å°† \u0026ldquo;testdb\u0026rdquo; æ¨¡å¼ä¸­çš„ \u0026ldquo;student\u0026rdquo; è¡¨æŸ¥çœ‹æƒé™èµ‹äºˆåˆšåˆšæˆ‘ä»¬åˆ›å»ºçš„ \u0026ldquo;new_project_user\u0026rdquo; ç”¨æˆ·ï¼š\nGRANT SELECT ON table student TO new_project_user;  è¿™ä¸ªæ—¶å€™å†ç”¨ Navicat è¿æ¥åå»æŸ¥çœ‹ \u0026ldquo;student\u0026quot;è¡¨ï¼Œå¯ä»¥æ­£å¸¸è®¿é—®äº†ã€‚\nå…·ä½“çš„æƒé™è´´åœ¨ä¸‹æ”¾ä»¥ä½œè®°å½•ï¼Œå¦‚æœéœ€è¦åŒæ—¶èµ‹äºˆå¤šä¸ªæƒé™ï¼Œé™¤äº† \u0026ldquo;ALL PRIVILEGES\u0026rdquo; ä»¥å¤–ï¼Œåªéœ€è¦åœ¨å¤šä¸ªæƒé™ä¸­ç”¨ \u0026ldquo;,\u0026rdquo; éš”å¼€å°±è¡Œäº†ã€‚\n è¿™é‡Œæ˜¯åé¢å­¦ä¹ æ—¶å€™çš„ä¿®ä¿®è¡¥è¡¥ï¼š\n åªæœ‰åˆ›å»ºæ•°æ®åº“çš„æƒé™æ˜¯ç‰¹æ®Šæƒé™ï¼Œè€Œå¦‚æœè¦å°†æŸä¸ªæ•°æ®åº“çš„æƒé™å…¨èµ‹ç»™æŸä¸ªç”¨æˆ·ï¼ŒåŒæ ·ä½¿ç”¨çš„æ˜¯ \u0026ldquo;GRANT\u0026rdquo; å‘½ä»¤ï¼Œä¾‹å¦‚ï¼š  GRANT ALL PRIVILEGES ON DATABASE testdb TO new_project_user;  \u0026ldquo;REVOKE\u0026rdquo; æ˜¯åˆ é™¤æƒé™çš„å‘½ä»¤ï¼Œå¿˜è®°ä¸¾ä¾‹ï¼š  REVOKE CREATE ON SCHEMA public from new_project_user;  ","id":61,"section":"posts","summary":"åœ¨å­¦ä¹ å…·ä½“çš„æƒé™ç®¡ç†ä¹‹å‰ï¼Œéœ€è¦å…ˆäº†è§£ä¸€ä¸‹ PostgreSQL ä¸­æƒé™çš„å‡ ä¸ªå±‚æ¬¡ï¼š ç‰¹æ®Šæƒé™ï¼ŒåŒ…å«è¶…çº§ç”¨æˆ·çš„æƒé™ã€åˆ›å»ºæ•°æ®åº“çš„æƒé™ã€åˆ›å»ºç”¨æˆ·ä»¥åŠ Login çš„æƒé™ã€‚ åœ¨æ•°æ®åº“ä¸­","tags":["PostgreSQL"],"title":"PostgreSQL å­¦ä¹ ç¬”è®°ï¼ˆä¸‰ï¼‰ç”¨æˆ·æƒé™çš„ç®¡ç†æ§åˆ¶","uri":"https://senjianlu.com/2020/02/postgresql-note-03/","year":"2020"},{"content":"psql æ˜¯ PostgreSQL ä¸­çš„ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œç±»ä¼¼ä¸ Oracle ä¸­çš„ sqlplusï¼Œä½†æ˜¯ä¸ä¹‹ä¸åŒçš„æ˜¯ psql æ”¯æŒè¿è¡Œæ•°æ®åº“å‘½ä»¤æˆ–è€…ç›´æ¥è¿è¡Œ SQL è¯­å¥å¹¶æŠŠç»“æœè¿”å›ã€‚\næ—¢ç„¶æ˜¯ä»å¤´å¼€å§‹å­¦ä¹ ï¼Œå½“ç„¶ä¹ŸæŠŠè¿™ä¸€éƒ¨åˆ†å†å·©å›ºä¸‹ä¸ºä½³ã€‚\n è¿›å…¥ psql å‘½ä»¤è¡Œçš„æ–¹æ³•\nsu - postgres psql  å½“æ˜¾ç¤º postgres=# æ—¶å°±è¯´æ˜å·²ç»è¿›å…¥ psql å·¥å…·ä¸‹äº†ã€‚\n åŸºç¡€å‘½ä»¤ 1ã€æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“\n\\l  2ã€åˆ‡æ¢æ•°æ®åº“\n\\c testdb  3ã€æŸ¥çœ‹æ­¤æ•°æ®åº“ä¸‹çš„è¡¨\n\\d  4ã€æŸ¥çœ‹è¡¨çš„å±æ€§\n\\d [è¡¨å]  \\d çš„ç”¨æ³•å¾ˆå¤šï¼Œä¸ä»…å¯ä»¥æŸ¥çœ‹è¡¨ï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹è¡¨çš„ç´¢å¼•æˆ–æ˜¯å¸¦ä¸Šé€šé…ç¬¦æŸ¥è¯¢\n\\d student_pkey \\d s*  è€Œæ‰©å±•çš„ \\d å‘½ä»¤åˆ™åŒ…å«äº†æ›´å¤šåŠŸèƒ½\n\\dn # åˆ—å‡ºæ‰€æœ‰schema \\db # æ˜¾ç¤ºæ‰€æœ‰è¡¨ç©ºé—´ \\du # åˆ—å‡ºæ‰€æœ‰çš„æ•°æ®åº“ç”¨æˆ· \\dp [è¡¨å] # æ˜¾ç¤ºè¡¨æƒé™åˆ†é…æƒ…å†µ ......  æ›´å¤šçš„æŒ‡ä»¤åœ¨è¾“å…¥ \\d åå†è¡¥ä¸¤ä¸ª Tab é”®å³å¯æŸ¥è¯¢å‡ºæ¥ï¼ŒåŒæœŸ \\t ä¹‹ç±»çš„ä¹Ÿç±»ä¼¼ã€‚\npsql çš„å­¦ä¹ åˆ°è¿™ç›®å‰å°±å¤Ÿç”¨äº†ï¼Œå› ä¸ºå¼€å‘ä¸­ä¸»è¦è¿˜æ˜¯ç”¨ Navicat æ¥çš„é«˜æ•ˆä¸€ç‚¹ï¼Œæ—¢ç„¶åˆšåˆšæ¶‰åŠåˆ°æƒé™æŸ¥çœ‹äº†ï¼Œæ­£å¥½æ‰‹å¤´ä¸Šæœ‰ä¸ªå¤šè¡¨ä¸åŒç”¨æˆ·çš„é¡¹ç›®ï¼Œé‚£å°±ä¸‹ä¸€ç« å…ˆå­¦ä¸‹æƒé™ç®¡ç†å¥½äº†ã€‚\n","id":62,"section":"posts","summary":"psql æ˜¯ PostgreSQL ä¸­çš„ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œç±»ä¼¼ä¸ Oracle ä¸­çš„ sqlplusï¼Œä½†æ˜¯ä¸ä¹‹ä¸åŒçš„æ˜¯ psql æ”¯æŒè¿è¡Œæ•°æ®åº“å‘½ä»¤æˆ–è€…ç›´æ¥è¿è¡Œ SQL è¯­å¥å¹¶æŠŠç»“æœè¿”å›ã€‚ æ—¢ç„¶æ˜¯ä»å¤´å¼€å§‹å­¦ä¹ ","tags":["PostgreSQL"],"title":"PostgreSQL å­¦ä¹ ç¬”è®°ï¼ˆäºŒï¼‰psql å·¥å…·çš„ä½¿ç”¨","uri":"https://senjianlu.com/2020/02/postgresql-note-02/","year":"2020"},{"content":"ç”±äºåœ¨å­¦æ ¡é’ˆå¯¹ä½œä¸šå’Œæ¯•è®¾ MySQL å·²ç»å¾ˆå¤Ÿç”¨äº†ï¼Œå› æ­¤ä¹Ÿæ²¡æœ‰åšæ›´å¤šå¯¹æ•°æ®åº“çš„åŠŸè¯¾ï¼ŒåªçŸ¥é“ Oracle æ•°æ®åº“é€‚åˆä¼ä¸šï¼ŒMySQL é€‚åˆå°å‹é¡¹ç›®ï¼Œä½†æ˜¯å·¥ä½œä»¥åçš„ç¬¬ä¸€ä¸ªé¡¹ç›®å°±æ¥è§¦çš„æ˜¯é™Œç”Ÿçš„ PostgreSQL æ•°æ®åº“ï¼Œæ‰å‘ç°åŸæ¥è¿˜æœ‰è¿™ä¹ˆå¥½ç”¨çš„å¼€æºæ•°æ®åº“ï¼Œæ­£å¥½è¶æ–°å† è‚ºç‚è¿™ä¸ªè¢«åŠ¨å‡æœŸæ—¶é—´æŠŠå®ƒå¥½å¥½å­¦ä¸€éã€‚\n ä¸»è¦ä¹¦ç±æ˜¯ ã€ŠPostgreSQL ä¿®ç‚¼ä¹‹é“ï¼šä»å°å·¥åˆ°ä¸“å®¶ã€‹\nJDé“¾æ¥ï¼šPostgreSQL ä¿®ç‚¼ä¹‹é“ï¼šä»å°å·¥åˆ°ä¸“å®¶\nPDF ä¸‹è½½ (Google Drive)ï¼šPostgreSQL ä¿®ç‚¼ä¹‹é“ä»å°å·¥åˆ°ä¸“å®¶.pdf\næ— è®ºå¦‚ä½•å·¥å…·ä¹¦è¿˜æ˜¯å…¥æ­£æ¯”è¾ƒå¥½ï¼Œä¸ªäººæ˜¯å› ä¸ºå¿«é€’å»¶ç¼“å‘è´§ï¼Œä¸€è¾¹ç­‰ä¹¦ä¸€è¾¹ PDF å…ˆå­¦ä¹ èµ·æ¥ã€‚å†µä¸”åªåœ¨è¯»å®Œä¸¤ç« åå°±æ„Ÿå¹å”æˆè€å¸ˆè¿™æœ¬ä¹¦å†™çš„çœŸçš„å¾ˆå¥½ï¼Œå¯¹ PostgreSQl çš„ç‰¹æ€§å’ŒåŸºç¡€ SQLè¯­å¥çš„è§£é‡Šéƒ½å¾ˆè¯¦ç»†ï¼Œå³ä½¿æ˜¯ä»æ²¡è¿™æ–¹é¢åŸºç¡€çš„ä¹Ÿå¯ä»¥æ”¶è·å¾ˆå¤šã€‚\n å…³äº PostgreSQL çš„ä»‹ç»ï¼Œä¹¦ä¸­å·²ç»å†™çš„å¾ˆè¯¦ç»†äº†ï¼Œå°±ä¸å†åšè¿‡å¤šçš„èµ˜è¿°ã€‚\nå¸å¼•æˆ‘çš„åœ°æ–¹æ— éå‡ ç‚¹ï¼š\n å…è´¹å¼€æºï¼ˆæœ€é‡è¦çš„åŸå› ï¼‰ æœ‰ç¨³å®šçš„æ›´æ–°å’Œé—®é¢˜åé¦ˆæ¸ é“ å ç”¨ä½ï¼Œå³ä½¿æ˜¯é˜¿é‡Œçš„è½»é‡éƒ½èƒ½è·‘ Django+PostgreSQL Navicat for PostgreSQL ä»·æ ¼ä½ï¼Œ150/3 æœˆï¼Œ1000 ä¹°æ–­ï¼ŒçœŸé¦™  è€Œå†çœ‹ä½¿ç”¨ä¸Šçš„ä¼˜ç‚¹åˆ™å¤ªå¤šäº†ï¼š\n æ”¯æŒæ•°æ®åº“ä¸­åˆ›å»ºå¯¹è±¡ï¼Œå¯¹å¤šä¸ªé¡¹ç›®ç”¨åŒæ•°æ®åº“çš„å¤ªå‹å¥½ï¼ æ”¯æŒåˆ—è¡¨ list ç±»å‹æ•°æ®çš„å­˜å– æ”¯æŒ JSONã€xml ç±»å‹æ•°æ®çš„å­˜å– INSERT INTO table VALUES () ON CONFLICT() DO UPDATE/NOTHING çº¦æŸæ—¶å¤„ç†ï¼ˆä¸“å±ç¥å™¨ï¼Œå¤ªå¥½ç”¨äº†ï¼Œä¸çŸ¥é“çœäº†å¤šå°‘æ—¶é—´ï¼‰  åˆ—ä¸¾å‡ ä¸ªæˆ‘æ²¡æœ‰ç³»ç»Ÿå­¦ä¹ ä¹‹å‰ï¼Œç”¨çš„æ—¶å€™å‘ç°çš„ä¼˜ç‚¹ï¼Œæˆ‘æƒ³åœ¨å…¶ä¸­æ€»æœ‰ä¸€ä¸ªç‚¹ä¼šæˆ³ä¸­åç«¯å¼€å‘äººå‘˜çš„å¿ƒã€‚\n1ã€ç›´æ¥å¼€å§‹å§é‚£å°±ï¼é¦–å…ˆå½“ç„¶æ˜¯ PostgreSQL çš„å®‰è£…ã€‚\nPostgreSQL æ”¯æŒ Linuxã€Mac OS å’Œ Windows ä¸‹å®‰è£…ï¼Œè€Œä¸”æ–¹æ³•ç›¸å½“ç®€å•ï¼Œç”±äºæˆ‘æ˜¯ä¸ºäº†éƒ¨ç½²é¡¹ç›®æ•°æ®åº“ï¼Œå› æ­¤è¿™é‡Œä»¥ CentOS7 ä¸ºä¾‹ã€‚\næ³¨ï¼šè¿™é‡Œå®‰è£…çš„æ˜¯ 9.2.24 ç‰ˆæœ¬çš„,å¦‚æœéœ€è¦ 12+ ç‰ˆæœ¬çš„å¯å‚è€ƒè¿™ä¸ªåšæ–‡ PostgreSQL å­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰ è¡¥è¶³ï¼š12.8 ç‰ˆæœ¬æ•°æ®åº“çš„å®‰è£…\nè¿è¡Œ\nyum install postgresql-server.x86_64  å½“ç„¶åœ¨å®‰è£…å‰å¯ä»¥å…ˆè¿è¡Œ\npsql --version  æŸ¥çœ‹ä¸‹äº‘æœåŠ¡ç­‰æ˜¯å¦è‡ªå¸¦äº†ä½ç‰ˆæœ¬ Postgresql æ•°æ®åº“ã€‚\nå®‰è£…ä¹‹åï¼Œè®°å¾—å…ˆåˆä½¿ç”¨åŒ–æ•°æ®åº“å†å¯åŠ¨\nservice postgresql initdb service postgresql start service postgresql status  æ˜¾ç¤º running å°±è¯´æ˜æ•°æ®åº“å·²ç»å®‰è£…å®Œæˆäº†ã€‚\n2ã€ç™»å½•åˆ°æ•°æ®åº“ã€‚\nPostgreSQL åœ¨å®‰è£…æ—¶é»˜è®¤ä¼šæ·»åŠ ç”¨æˆ· postgresï¼Œè¿è¡Œ\nsu - postgres  å…ˆåˆ‡æ¢åˆ° postgres ç”¨æˆ·ä¸‹ï¼Œå†è¾“å…¥\npsql  å°±è¿›å…¥åˆ° PostgreSQL æ•°æ®åº“ä¸­äº†ã€‚\nè¿™é‡Œæ¨èå…ˆæŠŠ postgres ç”¨æˆ·çš„å¯†ç æ”¹æ‰ï¼š\nALTER USER postgres WITH PASSWORD \u0026lt;password\u0026gt;;  æ³¨æ„ï¼šè¿™é‡Œçš„å‘½ä»¤æ˜¯åœ¨æ•°æ®åº“ä¸­è¿è¡Œçš„ï¼Œå³ postgres=#: ä¸‹ã€‚\n3ã€è¿œç¨‹è¿æ¥ï¼Œå¦‚æœä½ è¦åœ¨ Navicat ç­‰å·¥å…·ä¸­ä½¿ç”¨è¿™ä¸ªæ•°æ®åº“ï¼Œè¿˜éœ€è¦åšäº›é…ç½®ã€‚\né¦–å…ˆæ˜¯ postgresql.conf æ–‡ä»¶çš„é…ç½®\nvi /var/lib/psql/data/postgresql.conf  ä¿®æ”¹\nlisten_addresses = '*' port = 5432 max_connections = 100  ä¿å­˜é€€å‡ºå³å¯ã€‚\nç„¶åå†ä¿®æ”¹ pg_hba.conf è¿™ä¸ªæ–‡ä»¶ï¼Œè·¯å¾„å’Œåˆšåˆšç›¸åŒ\nvi /var/lib/psql/data/pg_hba.conf  åœ¨æœ€åæ·»åŠ è¿™æ¡\nhost all all 0.0.0.0/0 md5  å½“ç„¶å¼€æ”¾è®¿é—®çš„ IP è§†è‡ªå·±æƒ…å†µè€Œå®šï¼Œè¿™é‡Œå› ä¸ºè…¾è®¯äº‘æœåŠ¡å™¨å®‰å…¨ç»„å…¨å¼€è€Œä¸”æœºå™¨è¿é˜²ç«å¢™éƒ½æ²¡å¼€æˆ‘ä¹Ÿå°±è‡ªæš´è‡ªå¼ƒäº†ï¼Œåé¢ä¼šå†ä¸“åšä¸€ä¸ªé¡¹ç›®éƒ¨ç½²æ—¶ç«¯å£ç­‰çš„åˆæ­¥è®¾ç½®ä»¥ä¿éšœæœ€åŸºç¡€çš„å®‰å…¨æ€§ã€‚\néƒ½ä¿å­˜ä»¥åé‡å¯ PostgreSQL æœåŠ¡ï¼Œå†å°è¯•è¿œç¨‹è¿æ¥å§ï¼\nservice postgresql restart  è‡³æ­¤ï¼ŒPostgreSQL çš„å­¦ä¹ ç¯å¢ƒå°±å·²ç»å®‰è£…å®Œæˆäº†ï¼Œå¦‚æœæƒ³å‡çº§ä¸ºå¼€å‘ç¯å¢ƒï¼Œå°±åƒä¹‹å‰å¼ºè°ƒçš„ä¸€æ˜¯é˜²ç«å¢™è¦å¼€ï¼Œç«¯å£è¦é€‚å½“å¼€æ”¾ï¼›äºŒæ˜¯ç‰ˆæœ¬æœ€å¥½å‡çº§åˆ° 10+ï¼Œä»¥ä½¿ç”¨æœ€æ–°çš„ç‰¹æ€§ã€‚\né™„ä¸Šä¹¦çš„ç›®å½•ï¼š\nåŸºç¡€ç¯‡æ¶‰åŠåˆ°æ‰€æœ‰æ”¯æŒå­˜å‚¨çš„æ•°æ®ç±»å‹ï¼Œå¹¶ä¸”æ‰€æœ‰ PostgreSQL çš„åŸºç¡€æ“ä½œä¹Ÿéƒ½åšäº†è¯¦è§£ï¼Œæ˜¯è‚¯å®šè¦è®¤çœŸå­¦ä¹ å¹¶åšå¥½ç¬”è®°çš„ã€‚\næé«˜ç¯‡çš„ PostgreSQL ç‰¹æœ‰æ­£åˆ™è¡¨è¾¾å¼å¾ˆå€¼å¾—å­¦ä¹ ï¼Œç´¢å¼•ã€åºåˆ—å’Œé”ç”±äºè‡ªèº«ä¹‹å‰ç”¨çš„ä¸å¤šï¼Œä¹Ÿå†è¿‡ä¸€éå¥½äº†ã€‚\nè€Œä¹‹åçš„æ•°æ®åº“ä¼˜åŒ–å’Œç¬¬ä¸‰æ–¹å¼€æºè½¯ä»¶åŠæ¶æ„åœ¨è¿™æ¬¡å­¦ä¹ ä¸­åªä¼šåšäº†è§£ï¼Œåœ¨é¡¹ç›®è¿›è¡Œæˆ–æ˜¯å®Œæˆåå†ç»“åˆå®é™…æƒ…å†µå­¦ä¹ å¯èƒ½æ•ˆæœä¼šæ›´å¥½ã€‚\n","id":63,"section":"posts","summary":"ç”±äºåœ¨å­¦æ ¡é’ˆå¯¹ä½œä¸šå’Œæ¯•è®¾ MySQL å·²ç»å¾ˆå¤Ÿç”¨äº†ï¼Œå› æ­¤ä¹Ÿæ²¡æœ‰åšæ›´å¤šå¯¹æ•°æ®åº“çš„åŠŸè¯¾ï¼ŒåªçŸ¥é“ Oracle æ•°æ®åº“é€‚åˆä¼ä¸šï¼ŒMySQL é€‚åˆå°å‹é¡¹ç›®ï¼Œä½†æ˜¯å·¥ä½œä»¥åçš„ç¬¬ä¸€ä¸ª","tags":["PostgreSQL"],"title":"PostgreSQL å­¦ä¹ ç¬”è®°ï¼ˆä¸€ï¼‰ æ•°æ®åº“çš„å®‰è£…ä¸ç¯å¢ƒé…ç½®","uri":"https://senjianlu.com/2020/02/postgresql-note-01/","year":"2020"},{"content":"çªç„¶å‘ç° PVE ä¸‹å®‰è£…çš„ LEDE å’Œçˆ±å¿« ä¸æ˜¯å ç”¨çš„ CPU ç‰©ç†æ ¸å¿ƒï¼Œæ‰€è®¾ç½®çš„ 1 æ ¸åªæ˜¯é™åˆ¶äº†æœ€é«˜å ç”¨ï¼Œäºæ˜¯å°±å†³å®šå†åˆ©ç”¨ä¸‹å¤šä¸‹æ¥çš„ 2G å†…å­˜ï¼Œå®‰è£…ä¸ªé»‘ç¾¤æ™–åšå°å¼å’Œç¬”è®°æœ¬ä¹‹é—´çš„æ–‡ä»¶å…±äº«ã€‚\n ç¯å¢ƒï¼šProXmoX VE\néœ€è¦æ—¶é—´ï¼š0.5 å°æ—¶å·¦å³\nåŸæ•™ç¨‹ï¼šã€æ‚Ÿç©º5kongã€‘PVE ä¸‹éƒ¨ç½² LEDE+é»‘ç¾¤æ™– NAS åŒç³»ç»Ÿï¼ˆJ1900 è½¯è·¯ç”±ï¼‰\n é…ç½®æ–¹é¢\nåœ¨å·²ç»æˆå‹çš„è½¯è·¯ç”±åŸºç¡€ä¸Šï¼Œæ–°å¢äº†ä¸¤å—è¥¿æ•° 1T çš„ç´«ç›˜ã€‚\næ³¨æ„ï¼šç´«ç›˜ä¸»è¦ç”¨ä½œç›‘æ§å­˜ç›˜ï¼Œåªæœ‰ 5400 è½¬ï¼Œæ™®é€šå®¶ç”¨ä¸Š 7200 è½¬çš„è“ç›˜ç»„ RAID1 å³å¯ã€‚\næ‰€éœ€çš„è½¯ä»¶åŠä¸‹è½½åœ°å€\næ‰€æœ‰æ–‡ä»¶ (Google Drive)ï¼šPVE ä¸‹ é»‘ç¾¤æ™–å®‰è£…æ‰€éœ€æ–‡ä»¶\n é»‘ç¾¤æ™–çš„å®‰è£…å’Œé…ç½®æ¯”è¾ƒç®€å•ï¼Œä¸éœ€è¦è®¾ç½®ç½‘å¡ä¹‹ç±»çš„ï¼Œæ‰€ä»¥ç›´æ¥å¼€å§‹å°±è¡Œäº†ã€‚\n1ã€é¦–å…ˆåœ¨ PVE ä¸‹æ–°å»ºè™šæ‹Ÿæœºä½œä¸ºé»‘ç¾¤æ™–çš„å®¹å™¨ã€‚\nå…ˆå°† .iso å…‰ç›˜é•œåƒæ–‡ä»¶ (XPEnoboot_DS3615xs_5.2-5967.1..iso) ä¸Šä¼ ï¼Œè¿™ä¸ªå°†ä½œä¸ºè™šæ‹Ÿæœºçš„å¯åŠ¨å¼•å¯¼ã€‚\næ¥ç€åˆ›å»ºè™šæ‹Ÿæœºï¼Œå¹¶å°†å…¶ç¼–å·æŒ‰é¡ºåºè®¾ç½®ä¸º 102ï¼Œæ³¨æ„è¿™ä¸ªç¼–å·è¦è®°ä½ï¼Œä¹‹åæŒ‚è½½ç¡¬ç›˜çš„æ—¶å€™ä¼šç”¨åˆ°ã€‚\næ“ä½œç³»ç»Ÿç•Œé¢é€‰æ‹©åˆšåˆšä¸Šä¼ çš„ .iso æ–‡ä»¶ä½œä¸ºå¼•å¯¼ã€‚\nç¡¬ç›˜çš„é…ç½®é»˜è®¤å³å¯ï¼Œå¦‚æœä½ çš„ç³»ç»Ÿç¡¬ç›˜åªæœ‰ 32G çš„è¯å¯ä»¥ç¼©å°ï¼Œåæ­£ä¹Ÿä¸ä¼šç”¨æ¥åšå­˜å‚¨ç›˜ã€‚\nå¦‚æœé»‘ç¾¤æ™–åªç”¨æ¥åšæ–‡ä»¶å­˜å‚¨è€Œä¸è£…å¤§é‡å¥—ä»¶çš„è¯ï¼ŒCPU è®¾ç½®ä¸€æ ¸å¿ƒå³å¯ã€‚\näº²æµ‹å³ä½¿æ˜¯ä¼ è¾“å¤§é‡ç…§ç‰‡ç­‰å°æ–‡ä»¶çš„æƒ…å†µä¸‹ï¼Œ200ge çš„ä¸€æ ¸å ç”¨ä¹Ÿåªåœ¨ 50% å·¦å³ã€‚ å†…å­˜åŒç†ï¼Œçœ‹éœ€æ±‚æƒ…å†µï¼Œä½†æ˜¯2Gç¡®å®å·²ç»å¾ˆå¤Ÿç”¨äº†ã€‚\nè¿™ä¸€æ­¥éœ€è¦æ³¨æ„ï¼šæ¡¥æ¥çš„ç«¯å£åƒä¸‡ä¸è¦è®¾ç½®åœ¨ä¹‹å‰è¿›ç½‘çš„ WAN å£ä¸Šï¼Œè€Œè®¾ç½®åœ¨å…¶ä»–ä»»æ„ç«¯å£éƒ½æ²¡æœ‰é—®é¢˜ï¼\nç½‘å¡åˆ™é€‰æ‹© E1000 å› ä¸ºéƒ¨åˆ†é»‘ç¾¤æ™–ç³»ç»Ÿä¸æ”¯æŒåŠè™šæ‹ŸåŒ–çš„è¯†åˆ«ã€‚\nç¡®è®¤æ— è¯¯å®Œæˆå³å¯ã€‚\n2ã€æ¥ç€å¼€å§‹æœºæ¢°ç£ç›˜çš„æŒ‚è½½ã€‚\nè§†é¢‘æ•™ç¨‹ä¸­å¹¶æ²¡æœ‰è¿™ä¸€æ­¥ï¼Œä½†æ˜¯è¿™ä¸€æ­¥æ˜¯éœ€è¦æ”¾åœ¨å®‰è£…é»‘ç¾¤æ™–ç³»ç»Ÿä¹‹å‰çš„ï¼Œä¸ç„¶å®‰è£…å®Œå†æŒ‚è½½ä¼šå‡ºç°è¿›ä¸å»ç³»ç»Ÿç­‰ç„å­¦é—®é¢˜ã€‚\nç”¨ Xshell6 è¿æ¥PVEåå°ï¼Œå½“ç„¶ç”¨ä¸Šä¸€ç¯‡çš„ MobaX æ˜¯ä¸€æ ·çš„ã€‚\nè¿›å»åç›´æ¥è¾“å…¥\nls -l /dev/disk/by-id/  æŸ¥çœ‹å½“å‰ç³»ç»Ÿè¿æ¥çš„ç¡¬ç›˜æƒ…å†µã€‚\nåªéœ€è¦ ata å¼€å¤´çš„å³å¯ï¼Œæˆ‘æŒ‚è½½çš„æ˜¯è¥¿æ•°çš„æœºæ¢°ï¼Œå› æ­¤å°±æ˜¯ä¸‹é¢é‚£ä¸¤å—äº†ã€‚\næ¥ç€å¤åˆ¶è¿™ä¸¤å—ç¡¬ç›˜çš„å®Œæ•´ä¿¡æ¯ã€‚\n ata-WDC_WD10EJRX-89N74Y0_WD-WCC4J3FCD95S\nata-WDC_WD10EJRX-89N74Y0_WD-WCC4J4LZF6VT\n ç„¶ååœ¨å…¶å‰é¢åŠ ä¸Š \u0026ldquo;qm set 102 \u0026ndash;sata2 \u0026quot; è¿è¡Œå³å¯ã€‚\næ³¨ï¼š102 ä»£è¡¨çš„æ˜¯ä½ è™šæ‹Ÿæœºçš„ç¼–å·ï¼›sata2 åˆ™æ˜¯ä¹‹åä¼šæ˜¾ç¤ºåœ¨é»‘ç¾¤æ™–ç›˜ç¬¦ï¼Œè‡ªå·±è®¾ç½®å³å¯\nä¹‹åå†å›è™šæ‹Ÿæœºçš„ç¡¬ä»¶é¡µé¢ï¼Œå°±å¯ä»¥çœ‹è§æ–°å¢çš„è¿™ä¸¤å—ç¡¬ç›˜äº†ã€‚\n3ã€ç„¶åå¼€å§‹å®‰è£…é»‘ç¾¤æ™–ç³»ç»Ÿã€‚\né¦–å…ˆæ›´æ”¹å¯åŠ¨é¡ºåºï¼Œå°† CD è®¾ç½®ä¸ºç¬¬ä¸€å¯åŠ¨é¡¹ï¼Œå³æˆ‘ä»¬åˆšåˆšä¸Šä¼ çš„ .iso æ¥ç€ç‚¹å‡»å¯åŠ¨è™šæ‹Ÿæœºï¼Œå¯åŠ¨å®Œæˆåæ³¨æ„ä¸‹åå°åœ°å€ã€‚\næµè§ˆå™¨åœ°å€æ è¾“å…¥ï¼Œè¿›å…¥åå°é¡µé¢ã€‚\nè¿™é‡Œé€‰æ‹©æ‰‹åŠ¨å®‰è£…ï¼Œå¹¶ä¸Šä¼  .pat æ–‡ä»¶ï¼Œæ–‡ä»¶æˆ‘ä¹Ÿæä¾›äº†ä¸‹è½½ã€‚\nå¼¹å‡ºçš„ä¼šæ¸…ç©ºç¡¬ç›˜ç›´æ¥åŒæ„å³å¯ï¼Œè¿™é‡Œæ³¨æ„äºŒæ¬¡ç¡®è®¤æ¸…ç©ºç›˜çš„ä¸ªæ•°æ˜¯å¦å’Œä½ æŒ‚è½½çš„ç›˜åŠ ä¸Šä¸€ä¸ªç³»ç»Ÿç›˜çš„æ€»ä¸ªæ•°ç›¸åŒã€‚\nç­‰å¾…å…¶å®‰è£…å®Œæˆè‡ªåŠ¨é‡å¯å³å¯ã€‚\nä¹‹åçš„é…ç½®å°±æ¯”è¾ƒç®€å•äº†ï¼Œç”¨æˆ·åå¯†ç è‡ªå·±è®¾ç½®å³å¯ï¼Œç”±äºæ˜¯é»‘ç¾¤æ™–ï¼Œè”ç½‘å†…å®¹å…¨éƒ¨è·³è¿‡ã€‚\nè‡³æ­¤ï¼Œé»‘ç¾¤æ™–çš„å®‰è£…é…ç½®å°±å®Œæˆäº†ã€‚\n4ã€æœ€åå°±æ˜¯ç»„ RAIDï¼Œè¿™ä¸ªæ¯”è¾ƒç®€å•ã€‚\nç‚¹å‡»å·¦ä¸Šè§’çš„èœå•ï¼Œå†é€‰æ‹©å­˜å‚¨ç©ºé—´ç®¡ç†å‘˜ã€‚\né€‰æ‹©å­˜å‚¨ç©ºé—´\né€‰æ‹©è‡ªå®šä¹‰\né€‰æ‹©ç»„æˆç¾¤ç»„ é€‰æ‹©ä½ éœ€è¦ç»„ RAID çš„ä¸¤å—ç¡¬ç›˜ï¼Œæˆ‘è¿™é‡Œå› ä¸ºç»„å®Œäº†ä¹Ÿä¸Šä¼ äº†æ–‡ä»¶ï¼Œå°±ç”¨çš„è®ºå›çš„å›¾ã€‚\nè·³å‡ºçš„åˆ é™¤æ•°æ®æé†’ï¼Œç›´æ¥ç¡®è®¤å³å¯ã€‚\næˆ‘ä»¬è¿™é‡Œé€‰ä½ éœ€è¦çš„ RAID æ¨¡å¼ï¼Œæ¨è RAID1\nç›´æ¥åº”ç”¨å³å¯\nç„¶åä½ å°±å¯ä»¥çœ‹è§æ–°å»ºçš„æ­£å¸¸çš„å­˜å‚¨ç©ºé—´äº†ã€‚\n5ã€ä¸ºå…¶é…ç½®å±€åŸŸç½‘çš„å…±äº«æ–‡ä»¶å¤¹ã€‚\nå¡«å…¥æ–‡ä»¶å¤¹åæ—ï¼Œç¡®è®¤å³å¯ã€‚\né€‰æ‹© æ­¤ç”µè„‘ å³é”®ï¼Œé€‰æ‹© æ˜ å°„ç½‘ç»œé©±åŠ¨å™¨\nå¡«å…¥ä½ çš„æœŸæœ›ç›˜ç¬¦å’Œç½‘ç»œæ–‡ä»¶å¤¹è·¯å¾„å³å¯ã€‚\næ³¨ï¼šè·¯å¾„çš„æ ¼å¼ç”± IP+æ–‡ä»¶å¤¹åç»„æˆ\né»‘ç¾¤æ™–çš„å®‰è£…çœŸçš„æ¯”è½¯è·¯ç”±ç®€å•å¤ªå¤šäº†ï¼Œåªéœ€è¦æ‹¿é’±å †ç¡¬ç›˜å°±å¯ä»¥äº†ã€‚\né¡ºä¾¿è¯´ä¸€å¥ï¼Œåœ¨ç»„ RAID æ–¹é¢ï¼Œç¾¤æ™–æä¾›äº†å¾ˆæ–¹ä¾¿çš„æ“ä½œï¼Œå‹¤æ•´ç†ï¼ŒRAID0 å’Œ RAID1 åˆ†å¼€æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¹ æƒ¯ã€‚\né™„ä¸Šå¯¹ RAID5 ç­‰å®‰å…¨æ€§æ€€ç–‘çš„è®¨è®ºï¼šRAID5 ç£ç›˜é˜µåˆ—çœŸçš„ä¸å®‰å…¨ä¹ˆï¼Ÿ\næ²¡æœ‰ä»€ä¹ˆå­˜å‚¨æ–¹æ¡ˆæ˜¯ä¸€åŠ³æ°¸é€¸çš„ã€‚\n","id":64,"section":"posts","summary":"çªç„¶å‘ç° PVE ä¸‹å®‰è£…çš„ LEDE å’Œçˆ±å¿« ä¸æ˜¯å ç”¨çš„ CPU ç‰©ç†æ ¸å¿ƒï¼Œæ‰€è®¾ç½®çš„ 1 æ ¸åªæ˜¯é™åˆ¶äº†æœ€é«˜å ç”¨ï¼Œäºæ˜¯å°±å†³å®šå†åˆ©ç”¨ä¸‹å¤šä¸‹æ¥çš„ 2G å†…å­˜ï¼Œå®‰è£…ä¸ªé»‘ç¾¤æ™–åšå°å¼å’Œç¬”è®°æœ¬","tags":["ç¡¬ä»¶"],"title":"PVE ä¸‹é»‘ç¾¤æ™–çš„å®‰è£…å’Œç¡¬ç›˜ç›´é€šç»„ RAID1","uri":"https://senjianlu.com/2020/01/pve-synology/","year":"2020"},{"content":"æ­¤æ•™ç¨‹ç”±äºåˆç‰ˆç»“æ„æ··ä¹±ï¼Œå·²åºŸå¼ƒï¼Œè¯·å‚è€ƒæ–°ç‰ˆï¼ˆæ›´æ–°äº 2021-10-24ï¼‰ï¼šPVE ä¸‹ OpenWrt çº¯å‡€ç³»ç»Ÿ + çˆ±å¿«åŒè½¯è·¯ç”±éƒ¨ç½²é…ç½®æ–‡ä»¶çš„æ•´ç†\n èµ·å› ä»…ä»…æ˜¯ä¸æ»¡è¶³ç°åœ¨çš„ç§‘å­¦ä¸Šç½‘é€Ÿåº¦ï¼Œäºæ˜¯å°±èŠ±äº†ç‚¹æ—¶é—´ç ”ç©¶äº†ä¸‹è½¯è·¯ç”±ï¼Œå½“ç„¶æ€§èƒ½å¤Ÿçš„è·¯ç”±å™¨æ˜¯å¯ä»¥ç›´æ¥å®‰è£… LEDE çš„ï¼Œä½†æ˜¯æ‰‹å¤´æ­£å¥½é—²ä¸‹æ¥ä¸€å—äº®æœºçš„ 200geï¼Œç´¢æ€§å°±å†ç»„å°å°æœºå™¨æ¥å½“è½¯è·¯ç”±å§ã€‚\nä¸è¿‡æˆ‘ä¸æ¨è 200ge ä½œä¸ºè½¯è·¯ç”±çš„cpuï¼Œä¸ä»…åŠŸè€—å¤§ï¼Œè€Œä¸”åªæœ‰2ä¸ªæ ¸å¿ƒï¼ŒLEDE å’Œçˆ±å¿«å„å ç”¨ä¸€ä¸ªä»¥åå°±ä¸èƒ½å†å®‰è£…ç¾¤æ™–æˆ–æ˜¯å…¶ä»–è™šæ‹Ÿæœºï¼Œå®¹æ˜“é€ æˆæ€§èƒ½æµªè´¹çš„æƒ…å†µã€‚\n ç¯å¢ƒï¼šProXmoX VE\néœ€è¦æ—¶é—´ï¼š3å°æ—¶å·¦å³\nåŸæ•™ç¨‹ï¼šã€æ‚Ÿç©º5kongã€‘PVEä¸‹éƒ¨ç½² LEDE+é»‘ç¾¤æ™– NAS åŒç³»ç»Ÿï¼ˆJ1900 è½¯è·¯ç”±ï¼‰\nä¸Šé›†- PVE (Proxmox VE) å®‰è£…åŒè½¯è·¯ç”± çˆ±å¿«+LEDE ä¿å§†çº§æ•™ç¨‹\nä¸‹é›†- PVE (Proxmox VE) å®‰è£…åŒè½¯è·¯ç”± çˆ±å¿«+LEDE ä¿å§†çº§æ•™ç¨‹\n é…ç½®å•å’Œä»·æ ¼\n æ‰€éœ€çš„è½¯ä»¶åŠä¸‹è½½åœ°å€\næ‰€æœ‰æ–‡ä»¶ (Google Drive)ï¼šPVE ä¸‹ LEDE+çˆ±å¿« åŒè½¯è·¯ç”±éƒ¨ç½² æ‰€éœ€æ–‡ä»¶\n ä»è¿™é‡Œæ­£å¼å¼€å§‹æ“ä½œç³»ç»Ÿçš„å®‰è£…å’Œé…ç½®è¿‡ç¨‹ã€‚\næ³¨æ„ï¼šé™¤äº†è½¯è·¯ç”±æœ¬æœºï¼Œä½ è¿˜éœ€è¦ä¸€å°è‡ªå·±çš„ç”µè„‘åŒ…æ‹¬æ˜¾ç¤ºå™¨é¼ æ ‡å’Œé”®ç›˜ã€‚åŒæ—¶å¦‚æœä½ æ˜¯æ‹¨å·ä¸Šç½‘ï¼Œä½ è¿˜éœ€è¦çŸ¥é“è‡ªå·±çš„è¿è¥å•†è´¦å·å¯†ç ï¼\næ³¨ï¼šæ“ä½œç³»ç»ŸåŠè½¯è·¯ç”±çš„å®‰è£…éƒ½è¾ƒä¸ºç®€å•ï¼Œç¹ççš„ä¸»è¦æ˜¯é…ç½®çš„è¿‡ç¨‹ï¼Œæ¶‰åŠåˆ°ç½‘å¡ä¸Šç½‘å£çš„åˆ‡æ¢ä»¥åŠåŒæ­¥ DNS å’Œç½‘å…³çš„ä¿®æ”¹ï¼Œæ¨èåœ¨çœ‹åšæ–‡ä¹‹å‰é¦–å…ˆè¿‡ä¸€éè§†é¢‘æ•™ç¨‹ï¼ŒPVE å’Œ LEDE çš„å®‰è£…å‚ç…§æ‚Ÿç©ºï¼Œè€Œçˆ±å¿«å’Œ LEDE çš„ç½‘å£æ˜ å°„å‚ç…§ Video Talkã€‚\n1ã€é¦–å…ˆå®‰è£… PVE ç³»ç»Ÿï¼Œå®‰è£…è¿‡ç¨‹ç±»ä¼¼äº Windows æ“ä½œç³»ç»Ÿï¼šä¸‹è½½ .iso æ–‡ä»¶æ‹·è´è¿› U ç›˜ï¼Œç„¶åå¼€æœºè¿‡ç¨‹ä¸­æŒ‰ Del é”®è¿›å…¥ BIOSï¼Œé€‰æ‹© U ç›˜å¯åŠ¨æ¥è¿›è¡Œå®‰è£…ã€‚\n Management Interfaceï¼ˆç½‘å¡ï¼‰ï¼šé€‰é»˜è®¤çš„ç¬¬ä¸€ä¸ªï¼Œä¹‹åä¹ŸåšPVEçš„ç®¡ç†ç½‘å£ Hostnameï¼ˆåŸŸåï¼‰ï¼šå¯ä»¥çå¡« IP Addressï¼š10.10.10.254 ä»¥åé€šè¿‡è¿™ä¸ªIPè®¿é—®PVEç³»ç»Ÿï¼Œéœ€è¦å’Œç½‘å…³åŒä¸€ç½‘æ®µ Netmaskï¼ˆå­ç½‘æ©ç ï¼‰ï¼š255.255.255.0 å³å¯ï¼ŒåŸºæœ¬é»˜è®¤éƒ½æ˜¯è¿™ä¸ª Getwayï¼ˆç½‘å…³ï¼‰ï¼š10.10.10.253 çˆ±å¿«çš„åå°åœ°å€ DNS Serverï¼š10.10.10.253 å’Œç½‘å…³è®¾ç½®ä¸€æ ·çš„å³å¯\nå¦‚æœä¸æƒ³éº»çƒ¦æ¨èå’Œå›¾ç‰‡ä¸€æ ·è®¾ç½®ï¼Œåç»­é…ç½®å¯ä»¥ç…§æŠ„ã€‚  é‡å¯è¿‡ç¨‹ä¸­æ‹”ä¸‹uç›˜ï¼Œé‡å¯åå‡ºç°ä»¥ä¸‹ç•Œé¢å³è¯´æ˜PVEæ“ä½œç³»ç»Ÿå·²ç»å®‰è£…å®Œæˆã€‚\n2ã€åœ¨ PVE ç³»ç»Ÿå®‰è£…å®Œæˆåï¼Œéœ€è¦å°†ç”µè„‘è¿æ¥åˆ°è½¯è·¯ç”±è¿›è¡Œæ¥ä¸‹æ¥çš„æ“ä½œï¼Œç½‘çº¿çš„è¿æ¥æ¯”è¾ƒç®€å•ï¼šä¸€å¤´è¿æ¥æ­£åœ¨ä½¿ç”¨çš„ç”µè„‘ï¼Œå¦ä¸€å¤´è¿æ¥åˆšåˆšé…ç½®çš„ PVE è¿æ¥ç½‘å£ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ä¸»æ¿çš„ç½‘å£ï¼Œå¦‚æœé…ç½®çš„æ˜¯ç½‘å¡ä¸Šçš„ç½‘å£ï¼Œé‚£ä¹ˆç¦» PCIe è¿æ¥å£æœ€è¿œçš„ä¸€èˆ¬å°±æ˜¯ä¸€å·ç½‘å£ã€‚\nç‰©ç†è¿æ¥å®Œæˆåï¼Œè¿˜éœ€è¦é…ç½®æœ¬æœºçš„ IP å’Œç½‘å…³ç­‰æ‰èƒ½è¿›å…¥ PVE åå°ã€‚\n IP åœ°å€ï¼šä¿è¯å’Œ PVE è™šæ‹Ÿæœºçš„ IP åœ¨åŒä¸€ç½‘æ®µ å­ç½‘æ©ç ï¼šé»˜è®¤çš„ 255.255.255.0 é»˜è®¤ç½‘å…³ï¼šå’Œ PVE çš„ç›¸åŒ DNSï¼šä¸é…ç½®è‡ªåŠ¨è·å–å³å¯  æ‰“å¼€æµè§ˆå™¨ï¼Œè¾“å…¥ PVE å®‰è£…å®Œæˆåæ˜¾ç¤ºçš„åœ°å€ï¼Œæ³¨æ„æ˜¯ https://10.10.10.254:8006/ å‰ç¼€å’Œç«¯å£å·ä¸è¦å¿˜è®°ã€‚\næ³¨ï¼šå¯èƒ½æœ‰å®‰å…¨æç¤ºï¼Œç›´æ¥è·³è¿‡å³å¯ã€‚\n ç”¨æˆ·åï¼šroot å¯†ç ï¼šPVE å®‰è£…æ—¶è®¾ç½®çš„å¯†ç  è¯­è¨€ï¼šé»˜è®¤è‹±æ–‡ï¼Œé€‰æ‹©ä¸ºä¸­æ–‡  è¿›å…¥ç³»ç»Ÿçš„ç½‘å£é€‰é¡¹ä¸‹ï¼Œå¯ä»¥çœ‹è§æœ‰ä¸€ä¸ªæ¡¥æ¥ç½‘å£å·²ç»å»ºç«‹ï¼Œç«¯å£ä»å±æ˜¾ç¤ºä¸ enp1so å¯¹åº”ï¼Œå°±æ˜¯ç¬¬ä¸€ä¸ªç½‘å£ï¼Œæ„å‘³ç€ç¬¬ä¸€ä¸ªç½‘å£å°±è¢«å ç”¨äº†ã€‚\næ¥ä¸‹æ¥æ‰“å¼€æ‰€æœ‰ç‰©ç†ç½‘å£çš„è‡ªåŠ¨å¯åŠ¨ã€‚\nä¸ºå…¶ä»–æ‰€æœ‰çš„ç©ºä½™ç½‘å£å»ºç«‹è™šæ‹Ÿç½‘å£ä¸ºæ¡¥æ¥åšå‡†å¤‡ã€‚\nå»ºç«‹çš„è¿‡ç¨‹å¾ˆç®€å•ï¼Œè®°ä½ä¸Šé¢ç‰©ç†ç½‘å£çš„åç§°ï¼Œåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç½‘å£ï¼Œåªéœ€è¦å†æ¡¥æ¥ç«¯å£å¡«å…¥ç‰©ç†ç½‘å¡åç§°å³å¯ã€‚\næ‰€æœ‰çš„ç½‘å£éƒ½åŒæ ·æ“ä½œå³å¯ã€‚ä¸€ä¸€å¯¹åº”æ£€æŸ¥å®Œåç½‘å£å°±é…ç½®å®Œæˆäº†ã€‚\n3ã€æ¥ä¸‹æ¥å¼€å§‹åˆ›å»ºè™šæ‹Ÿæœºï¼ŒåŸç†å’Œ Windows ä¸Šä½¿ç”¨ VMware Workstation Player ç­‰åˆ›å»ºè™šæ‹Ÿæœºä¸€æ ·ã€‚\né¦–å…ˆæ¥åˆ›å»º LEDE å¯¹åº”çš„è™šæ‹Ÿæœºï¼Œè¿™ä¸€éƒ¨åˆ†å‚è€ƒæ‚Ÿç©ºçš„è§†é¢‘æ•™ç¨‹æ›´åŠ ç®€å•ã€‚\nç‚¹å‡»åˆ›å»ºè™šæ‹ŸæœºæŒ‰é’®ã€‚\nç¬¬ä¸€æ­¥æ²¡æœ‰éœ€è¦ç‰¹æ®Šé…ç½®çš„ã€‚\né€‰æ‹©ä¸ä½¿ç”¨ä»»ä½•ä»‹è´¨ï¼Œè¿™é‡Œçš„å®‰è£…æ–¹æ³•æ˜¯ SSH è¿æ¥è‡³ PVE åç›´æ¥å‘½ä»¤è¡Œå®‰è£…ï¼Œç„¶åå°†è¿™ä¸ªè™šæ‹ŸæœºæŒ‚è½½åœ¨å®‰è£…å®Œæˆçš„æ–‡ä»¶å¤¹ä¸Šï¼Œæ›´åŠ å¿«æ·ã€‚\nç¡¬ç›˜ä¸éœ€è¦ä»»ä½•æ“ä½œï¼Œåæ­£ç­‰ä¸‹ä¸ç”¨è¿™ä¸ªç›˜ã€‚\nCPU æ ¸å¿ƒä¸€æ ¸å°±å¤Ÿäº†ã€‚\nå†…å­˜æ¨è 2Gã€‚\næ¡¥æ¥ç½‘å£é€‰æ‹©ç®¡ç†å£å³å¯ï¼Œæ¨¡å‹æ¨è E1000ï¼ŒVideo Talk ä¹‹åçˆ±å¿«ç­‰éƒ½ä¼šç”¨E100è¿›è¡Œé…ç½®ã€‚\næ£€æŸ¥æ— è¯¯ç‚¹å‡»å®Œæˆå³å¯ã€‚\næ¥ç€è¿›è¡Œæ·»åŠ ç½‘å¡çš„æ“ä½œï¼Œä¸ºæ‰€æœ‰è™šæ‹Ÿç½‘å£åœ¨è¿™å°è™šæ‹Ÿæœºä¸­é…ç½®æ¡¥æ¥ã€‚\næ¥ç€åœ¨æœ¬æœºä¸Šä¸‹è½½å®‰è£… MobaXtermï¼Œå‡†å¤‡è¿æ¥ PVE ç³»ç»Ÿã€‚\næ‰“å¼€æ–°å»ºä¸€ä¸ªè¿æ¥ï¼Œæˆªå›¾æ˜¯ç¼–è¾‘ä½†ä¹Ÿå•¥å·®åˆ«ã€‚\nè¾“å…¥å¯†ç ï¼Œç‚¹å‡» Yes è¿æ¥æˆåŠŸã€‚\næ‹–æ‹½è™šæ‹Ÿæœºå®‰è£…æ–‡ä»¶å’Œè½¬æ¢å·¥å…·è¿›è½¯è·¯ç”±ç³»ç»Ÿä¸­ã€‚\næ¥ä¸‹æ¥\nls  ç¡®ä¿æ–‡ä»¶è½¬ç§»æˆåŠŸï¼Œæ¥ç€ä¸º img2kvm æ·»åŠ å¯æ‰§è¡Œæƒé™ï¼Œå¹¶å¼€å§‹æ‰§è¡Œ .img æ–‡ä»¶çš„è½¬æ¢\nchmod +x img2kvm ./img2kvm lede.img 101 vm-101-disk-1  101 æ˜¯è™šæ‹Ÿæœºçš„åºå·\næ¥ä¸‹æ¥å›åˆ°æµè§ˆå™¨çš„PVEåå°ç•Œé¢ï¼Œå¯ä»¥çœ‹åˆ°å¤šå‡ºæ¥ä¸€ä¸ªæœªä½¿ç”¨çš„ç£ç›˜ï¼Œè¿™å°±æ˜¯åˆšåˆšè½¬æ¢å®Œçš„ï¼Œæ— è§†åç¼€æ˜¯ disk-1 è¿˜æ˜¯ disk-2 ï¼ŒåŒå‡»ï¼Œé€‰æ‹©æ·»åŠ å³å¯ã€‚\næ¥ç€é€‰æ‹© \u0026ldquo;é€‰é¡¹\u0026rdquo;ï¼Œ\u0026ldquo;å¼•å¯¼é¡ºåº\u0026rdquo; æ›´æ”¹ä¸ºåˆšåˆšæŒ‚è½½ä¸Šçš„æ–°ç¡¬ç›˜å³å¯ã€‚\næ³¨æ„ï¼šæ¥ä¸‹æ¥ç›´æ¥é‡å¯è½¯è·¯ç”±ï¼Œæ–­ç”µé‡å¯ä¹Ÿå¯ä»¥ï¼\nç„¶åå›æ¥ç‚¹å‡»è™šæ‹Ÿæœºï¼Œå¯èƒ½ LEDE æ˜¾ç¤ºä¼šæ²¡æœ‰ååº”ï¼Œç‚¹å‡»éšæ„æŒ‰ä¸€ä¸ªé”®å°±å¯ä»¥äº†ã€‚\nè‡³æ­¤ï¼Œæœ€æœ‰å¯èƒ½å‡ºé”™çš„ LEDE å®‰è£…å®Œæˆï¼Œé…ç½®çš„äº‹ç­‰åˆ°çˆ±å¿«é…ç½®å®Œåè¿›è¡Œã€‚\nå¦‚æœä½ æ˜¯å…‰çº¤ï¼Œä¸éœ€è¦æ‹¨å·ï¼Œé‚£å¯ä»¥è·³è¿‡æ¥ä¸‹æ¥çš„çˆ±å¿«çš„å®‰è£…ä¸é…ç½®ã€‚\n4ã€æ¥ä¸‹æ¥å¼€å§‹å®‰è£…çˆ±å¿«è½¯è·¯ç”±ã€‚\nä¸€æ ·æ–°å»ºè™šæ‹Ÿæœºï¼Œæ­¤ç•Œé¢çš„åç§°å¯ä»¥è‡ªç”±æ›´æ”¹ï¼Œå…¶ä»–ä¿æŒé»˜è®¤å³å¯ã€‚\nå­˜å‚¨ä¸ç”¨æ”¹ï¼Œ.iso ä»‹è´¨é€‰åˆšåˆšä¸Šä¼ çš„ iKuai å°±å¯ä»¥äº†ï¼Œç±»å‹ Linux ç‰ˆæœ¬ä¹Ÿä¸ç”¨å˜ã€‚\nç¡¬ç›˜ 2G å°±å¤Ÿäº†ï¼Œé…ç½®å¦‚å›¾ã€‚\nCPU é…ç½®ä¹Ÿæ˜¯ä¸€æ ¸å°±å¤Ÿäº†ã€‚\nå†…å­˜çš„è®¾ç½®è¦æ³¨æ„ï¼Œæ–°ç‰ˆæœ¬çˆ±å¿«æœ€ä½ 4G å†…å­˜ï¼Œå¦‚æœä½ çš„å†…å­˜ä¸å¤Ÿï¼Œéœ€è¦é€‰æ‹©è¾ƒä½ç‰ˆæœ¬ã€‚ ç½‘ç»œçš„é…ç½®å’Œ LEDE ä¸€æ ·ï¼Œç®¡ç†å£å¯¹åº”çš„è™šæ‹Ÿç½‘å£å’Œ E1000ã€‚\næ ¸å¯¹åç›´æ¥å®Œæˆå³å¯ã€‚\nåˆ›å»ºå®Œæˆåï¼Œå»è™šæ‹Ÿæœºçš„ç¡¬ä»¶ç®¡ç†ç•Œé¢ï¼Œå½“å‰åªæœ‰ä¸€ä¸ªé»˜è®¤ç½‘å£ï¼Œä¹Ÿæ˜¯å½“æ—¶é…ç½®çš„PVEçš„ç®¡ç†ç½‘å£ï¼ŒåŒæ—¶å®ƒä¹Ÿæ˜¯åªæ˜¯ä¸€ä¸ª LAN å£ï¼ŒLAN å£é€šä¿—æ¥è®²å°±æ˜¯å‡ºç½‘çš„å£ï¼Œè€Œ WAN å£æ˜¯è¿›ç½‘çš„å£ï¼Œçˆ±å¿«çš„ä½œç”¨æ˜¯æ‹¨å·ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦æ–°å»ºä¸€ä¸ª WAN å£ï¼šé€‰æ‹©æ·»åŠ ç½‘ç»œè®¾å¤‡ã€‚\né€‰æ‹©æœ€åä¸€ä¸ªç«¯å£ï¼Œç‰©ç†ä¸Šå°±æ˜¯ç¦» PCIe è¿æ¥å£æœ€è¿‘çš„ç½‘å£ã€‚\næ¥ç€å¯åŠ¨è™šæ‹Ÿæœºå³å¯ã€‚\nçˆ±å¿«çš„å®‰è£…è¿˜æ²¡æœ‰ç»“æŸï¼Œè¿›å…¥è™šæ‹Ÿæœºé¡µé¢ï¼Œè¿˜éœ€è¦é€‰æ‹©å®‰è£…ï¼Œå¦‚å›¾è¾“å…¥ï¼Œç­‰å¾…å®‰è£…å®Œæˆåçš„è‡ªåŠ¨é‡å¯ã€‚å¦‚æœé‡å¯åæ²¡æœ‰ç”»é¢æˆ–æ˜¯ç«¯å£æ˜¾ç¤ºæ–­å¼€ï¼ŒæŒ‰ä¸‹å›è½¦åˆ·æ–°å°±è¡Œäº†ã€‚\nè¿›å…¥ç³»ç»Ÿåï¼Œè®¾ç½® LAN å£ IPï¼š10.10.10.253\næ¥ç€åœ¨æµè§ˆå™¨åœ°å€æ è¾“å…¥ 10.10.10.253 ä¾¿å¯è¿›å» iKuai çš„åå°äº†ï¼Œè´¦å·å¯†ç å‡ä¸º admin\nç™»å½•åä¼šæç¤ºä¿®æ”¹ç®¡ç†å‘˜å¯†ç ï¼Œæ”¹ä¸æ”¹éƒ½æ— æ‰€è°“\nç™»å½•è¿›å»ä»¥åå¯ä»¥çœ‹åˆ°æˆ‘ä»¬é¢„å…ˆé…ç½®çš„ä¸¤ä¸ªç½‘å£ï¼ŒLAN å£æ˜¯ç»¿è‰²çš„è¯´æ˜æ­£åœ¨è¢«æ­£å¸¸ä½¿ç”¨ï¼Œè¿™ä¸ªå£å°±æ˜¯æˆ‘ä»¬è®¾ç½®çš„ PVE ç®¡ç†å£å…¼ LAN å£ï¼Œè€Œ WAN å£è¿˜æ˜¯ç°è‰²çš„ï¼Œéœ€è¦æˆ‘ä»¬ç‚¹è¿›å»ç»‘å®šä»¥ä¸‹åˆšåˆšæ–°å»ºçš„ç½‘å¡ã€‚\næ³¨æ„ï¼šæ­¤æ—¶å°†å®¶åº­æ•°æ®ä¸­å¿ƒæ‹‰å‡ºæ¥çš„ç½‘çº¿æ¥åˆ°è®¾ç½®çš„ WAN å£å¯¹åº”çš„ç‰©ç†ç½‘å£ä¸Šï¼å‡†å¤‡è¿›è¡Œæ‹¨å·ä¸Šç½‘ï¼\nå¡«å…¥è¿è¥å•†è´¦å·å¯†ç ï¼Œç„¶åæ‹¨å·ã€‚\nè¿™è¾¹æ˜¾ç¤ºå·²è¿æ¥è¯´æ˜çˆ±å¿«å·²ç»æ‹¨å·ä¸Šç½‘æˆåŠŸäº†ã€‚\næ¥ä¸‹æ¥é…ç½® DHCP æœåŠ¡ç«¯ï¼Œé€‰æ‹© DHCP è®¾ç½® DHCP æœåŠ¡ç«¯ï¼Œè¿›è¡Œå¡«å†™ã€‚\næ³¨ï¼šDHCP åè®®çš„åŠŸèƒ½ä¸ºé›†ä¸­çš„ç®¡ç†ã€åˆ†é… IP åœ°å€ã€‚\n å®¢æˆ·ç«¯åœ°å€ï¼šè¦†ç›–ç½‘æ®µå†…çš„æ‰€æœ‰ IP å³å¯ã€‚ å­ç½‘æ©ç ï¼šé»˜è®¤çš„ 255.255.255.0 ç½‘å…³ï¼š10.10.10.252 å°±æ˜¯ LEDE çš„åå°åœ°å€ DNSï¼šå¦‚æœä»¥ç§‘å­¦ä¸Šç½‘ä¸ºä¸»é€‰ 8.8.8.8 ä¸ç„¶å°±ç”¨ç½‘ç»œæ‰€å±è¿è¥å•†çš„  ä¿å­˜ååˆ·æ–°é¡µé¢ï¼Œç¡®è®¤æœåŠ¡æ­£å¸¸ï¼Œçˆ±å¿«è½¯è·¯ç”±çš„é…ç½®å°±å…¨éƒ¨å®Œæˆäº†ã€‚ æ€»ä¹‹ï¼Œçˆ±å¿«ä¸»è¦è´Ÿè´£æ‹¨å·ä¸Šç½‘å’Œæä¾› DHCP æœåŠ¡ï¼Œåœ¨é…ç½®å®Œæˆä¹‹åï¼Œå¯ä»¥å…ˆéªŒè¯ä¸‹æœ¬æœºæ˜¯å¦æœ‰ç½‘ç»œåœ¨è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œã€‚\n5ã€é…ç½® LEDE è½¯è·¯ç”±ã€‚é¦–å…ˆå›åˆ° LEDE çš„ç³»ç»Ÿç•Œé¢ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤å»æ›´æ”¹ LEDE çš„ IP åœ°å€ã€‚\nvi /etc/config/network  æ–¹å‘é”®æ§åˆ¶å…‰æ ‡æ‰¾åˆ°è¿™ä¸€è¡Œï¼ŒæŒ‰ä»¥ä¸‹ \u0026ldquo;i\u0026rdquo; é”®è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œæ›´æ”¹æˆ 10.10.10.252 å°±æ˜¯ä½ æƒ³è¦çš„ LEDE çš„åå° IP åœ°å€ã€‚\nç¼–è¾‘å®Œæˆåï¼ŒæŒ‰ä¸‹ \u0026ldquo;Esc\u0026rdquo; é”®ï¼Œå·¦ä¸‹è§’æœ‰å†’å·å‡ºæ¥åï¼Œè¾“å…¥ \u0026ldquo;wq\u0026rdquo; ä¿å­˜å¹¶é€€å‡ºã€‚ ä¹‹åè¾“å…¥\nreboot  é‡å¯ LEDE è½¯è·¯ç”±ã€‚ æ¥ç€å°±å¯ä»¥åœ¨æœ¬æœºçš„æµè§ˆå™¨ä¸Šè¾“å…¥ 10.10.10.252 è¿›å…¥ LEDE è½¯è·¯ç”±çš„åå°äº†ï¼Œé»˜è®¤å¯†ç æ˜¯ koolshare\nè¿›å…¥åå°åé¦–å…ˆæ¥é…ç½®ç½‘å£ã€‚\né€‰æ‹© LAN å£è¿™ä¸€è¡Œï¼Œç‚¹å‡» ç¼–è¾‘ã€‚\né¦–å…ˆåœ¨ç‰©ç†è®¾ç½®éƒ¨åˆ†å°†æ‰€æœ‰çš„ç½‘å£éƒ½å‹¾é€‰ä¸Šï¼Œå› ä¸ºæœ‰çˆ±å¿«çš„æƒ…å†µä¸‹ LEDE ä¸éœ€è¦ WAN å£ã€‚\nç„¶åå›åˆ°åŸºæœ¬è®¾ç½®ï¼Œå¦‚å›¾è®¾ç½®ã€‚\n IPï¼šLEDE åå°åœ°å€ 10.10.10.252 ç½‘å…³ï¼šçˆ±å¿«çš„åå°åœ°å€ 10.10.10.253 DNS æœåŠ¡å™¨ï¼šå’Œåˆšåˆšä¸€æ ·å¡«å†™å³å¯  æ¥ç€ä¸‹æ»‘ï¼Œåˆ° DHCP æœåŠ¡å™¨éƒ¨åˆ†ï¼Œå› ä¸º LEDE æ˜¯ä½œä¸ºçˆ±å¿«ä¸‹çš„äºŒçº§è·¯ç”±å­˜åœ¨çš„ï¼Œæˆ‘å¸Œæœ›æ‰€æœ‰çš„ DHCP æœåŠ¡éƒ½ç”± LEDE æ¥æä¾›è€Œä¸æ˜¯ä¸å…·æœ‰ç§‘å­¦ä¸Šç½‘åŠŸèƒ½çš„çˆ±å¿«æ¥æä¾›ï¼Œå› æ­¤è¦å»æ‰ å¿½ç•¥æ­¤æ¥å£ çš„å‹¾é€‰ã€‚ç„¶åè¿˜è¦å»é«˜çº§è®¾ç½®ä¸­ï¼Œå†æŠŠ å¼ºåˆ¶ çš„å‹¾å‹¾ä¸Šã€‚\næ¥ç€ä¿å­˜å³å¯ã€‚\nç”±äº LEDE ç”¨ä¸åˆ° WAN å£ï¼Œæ‰€ä»¥å°† WAN å£å’Œ WAN6 çš„æ¥å£ç»‘å®šåˆ°ç©ºçš„æ¥å£ä¸Šå°±å¯ä»¥äº†ã€‚\nè‡³æ­¤ LEDE çš„å®‰è£…å’Œé…ç½®å°±å…¨éƒ¨å®Œæˆäº†ï¼Œä¿®æ”¹ä»¥ä¸‹æœ¬æœºçš„ç½‘ç»œè®¾ç½®ï¼Œå°† IP å’Œ DNS éƒ½å‹¾é€‰è‡³è‡ªåŠ¨è·å–ï¼Œçœ‹çœ‹èƒ½ä¸èƒ½ä¸Šç½‘å§ï¼\n6ã€ç¡®ä¿å¯ä»¥ä¸Šç½‘åï¼Œæˆ‘ä»¬å›åˆ° LEDE çš„åå°ï¼Œå‡†å¤‡è¿›è¡Œç§‘å­¦ä¸Šç½‘ç­‰çš„é…ç½®æ“ä½œã€‚\nç‚¹å‡»å·¦ä¾§èœå•ä¸­çš„ é…·è½¯ä¸­å¿ƒï¼Œè¿›å…¥çš„æ—¶å€™å¦‚æœæç¤ºæ›´æ–°ï¼Œåƒä¸‡ä¸è¦å»æ›´æ–°ï¼Œæ–°ç‰ˆæœ¬ä¼šæœ‰å¤§é‡çš„è½¯ä»¶æ— æ³•ä½¿ç”¨ã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå³ä½¿ä½ ä¸æ›´æ–°è¿›å…¥é…·è½¯ä¸­å¿ƒï¼Œä¹Ÿæ— æ³•å†åœ¨å•†åŸæ‰¾åˆ°ç§‘å­¦ä¸Šç½‘çš„å·¥å…·ï¼Œåœ¨ 19 å¹´ 6 æœˆä»½çš„æ›´æ–°ä¸­ï¼Œé…·è½¯å°±å°†è¿™å‡ ä¸ªæ’ä»¶åˆ å»äº†ã€‚ä½ å¯ä»¥é€‰æ‹©å»ä¸‹è½½ç½‘å‹æä¾›çš„åŒ…ç¦»çº¿å®‰è£…ï¼Œä½†å¾ˆå¤§å‡ ç‡ä¸Šæ˜¯ä¸å…¼å®¹æ–°ç‰ˆæœ¬ç³»ç»Ÿçš„ï¼Œè¿™é‡Œæ¨èä½¿ç”¨é…·è½¯çš„ç³»ç»Ÿå¤‡ä»½è¿˜åŸï¼Œç›´æ¥å°†ç³»ç»Ÿå›å¤è‡³æœ‰æ’ä»¶çš„ç‰ˆæœ¬ã€‚\né€‰æ‹© ç³»ç»Ÿ å¤‡ä»½/å‡çº§\né€‰æ‹©æˆ‘ä¸Šé¢æä¾›çš„è€ç‰ˆæœ¬ï¼Œå†ç‚¹å‡»ä¸Šä¼ å¤‡ä»½ã€‚ä¸Šä¼ ä¹‹åç³»ç»Ÿä¼šè‡ªåŠ¨é‡å¯ã€‚\nç­‰å¾…é‡å¯å®Œæˆåï¼Œå†è¿›å…¥é…·è½¯ä¸­å¿ƒå°±å¯ä»¥çœ‹åˆ°æ¶ˆå¤±çš„ç§‘å­¦ä¸Šç½‘æ’ä»¶äº†ï¼\nèŠ‚ç‚¹çš„é…ç½®å°±ä¸å†é˜è¿°äº†ï¼ŒSSR å’Œ SS è®¢é˜…çš„ç¨³å®šæ€§åœ¨æˆ‘å®é™…ç”¨ä¸‹æ¥åè§‰å¾—å¹¶ä¸å¥½ï¼Œä¸å¦‚åªåœ¨ç”µè„‘ç«¯å¼€å¯ç›¸åº”ä»£ç†ï¼Œè€Œ V2Ray åˆ™æ¯”è¾ƒç¨³å®šï¼ŒåŸºæœ¬å…¨å¤© 24 å°æ—¶èŠ‚ç‚¹éƒ½ä¸ä¼šå‡ºç°æ–­è¿æƒ…å†µã€‚\n æ¨è2å®¶ä¾›åº”å•†ï¼š\nå¿è€…äº‘ æœ‰çº¿è·¯æä¾› V2Ray ä»£ç†ï¼Œç¨³å®š\nå¥‡å¹»ä¹‹æ—… ä¾¿å®œå®åœ¨\n è‡³æ­¤ï¼ŒPVE ä¸‹ LEDE+çˆ±å¿« åŒè½¯è·¯ç”±çš„éƒ¨ç½²å°±å…¨éƒ¨å®Œæˆäº†ï¼Œå¥½å¥½äº«å—ä¸–ç•Œå§ï¼\n","id":65,"section":"posts","summary":"æ­¤æ•™ç¨‹ç”±äºåˆç‰ˆç»“æ„æ··ä¹±ï¼Œå·²åºŸå¼ƒï¼Œè¯·å‚è€ƒæ–°ç‰ˆï¼ˆæ›´æ–°äº 2021-10-24ï¼‰ï¼šPVE ä¸‹ OpenWrt çº¯å‡€ç³»ç»Ÿ + çˆ±å¿«åŒè½¯è·¯ç”±éƒ¨ç½²é…ç½®æ–‡ä»¶çš„æ•´ç† èµ·å› ä»…ä»…æ˜¯ä¸æ»¡è¶³","tags":["ç¡¬ä»¶"],"title":"PVE ä¸‹ LEDE+çˆ±å¿« åŒè½¯è·¯ç”±éƒ¨ç½²ï¼ˆæ—§ï¼‰","uri":"https://senjianlu.com/2020/01/pve-lede-ikuai-bak/","year":"2020"},{"content":"è™½ç„¶ä¹Ÿæœ‰å…è´¹çš„å¯ä»¥ç”¨ï¼Œä½†æ˜¯æ—¢ç„¶è½¯è·¯ç”±å·²ç»é…ç½®äº†æ–¹ä¾¿çš„ä¸Šç½‘ç¯å¢ƒï¼ŒGitHub è®¿é—®èµ·æ¥æ¯”ä»¥å‰ä¾¿åˆ©äº†è®¸å¤šï¼Œé‚£å°±æŠŠå›¾åºŠç›´æ¥éƒ¨ç½²åœ¨ GitHub ä¸Šå¥½äº†ï¼Œè™½ç„¶éšç§æ€§æ˜¯ä¸€ç¼ºç‚¹ï¼Œä½†æ˜¯ä¸»è¦ä¹Ÿæ˜¯ç»™åšå®¢ä½¿ç”¨ï¼Œä¹Ÿå°±æ— æ‰€è°“äº†ã€‚\n ç¯å¢ƒï¼šWindows 10 64 ä½\néœ€è¦æ—¶é—´ï¼š0.5 å°æ—¶å·¦å³\nåŸæ•™ç¨‹ï¼šCSDN PicGo+GitHub æ­å»ºä¸ªäººå›¾åºŠå·¥å…·\n 1ã€åœ¨ GitHub ä¸Šæ–°å»ºä»“åº“ï¼Œå¹¶åœ¨ settings ä¸­è®¾ç½®ä¸º Public\n2ã€åˆ›å»º tokenï¼Œä¸ºäº†ç»™ PicGo å®¢æˆ·ç«¯é…ç½®ï¼Œä½¿å…¶èƒ½ä¸Šä¼ ç»™å¯¹åº” GitHub ä»“åº“ã€‚\næè¿°å¯ä»¥éšä¾¿å¡«å†™ï¼Œä½†æ˜¯ repo å¯¹åº”çš„éœ€è¦å…¨éƒ¨å‹¾é€‰ã€‚\næ³¨æ„ï¼štoken åªå‡ºç°ä¸€æ¬¡ï¼æ‰€ä»¥ä¸€å®šè¦ä¿å­˜ï¼\n3ã€ä¸‹è½½\u0026amp;å®‰è£… PicGoã€‚\n PicGo ï¼ˆç›®å‰ 2.2.1ï¼‰æ˜¯ä¸€ä¸ªå¼€æºçš„å›¾åºŠå·¥å…·ï¼Œéå¸¸ä¼˜ç§€ã€‚\n Git åœ°å€ï¼šhttps://github.com/Molunerfinn/PicGo\nWindows ç‰ˆä¸‹è½½åœ°å€ï¼šhttps://github.com/Molunerfinn/PicGo/releases\n4ã€é…ç½® PicGo\n ä»“åº“åï¼šè´¦å·å+ä»“åº“å åˆ†æ”¯åï¼šmaster Tokenï¼šåˆšåˆšä¿å­˜çš„ token å­˜å‚¨è·¯å¾„ï¼šimg/ è‡ªå®šä¹‰åŸŸåï¼šhttps://raw.githubusercontent.com/è´¦å·å/ä»“åº“å/master  é…ç½®ç‚¹å‡»è®¾ä¸ºé»˜è®¤å›¾åºŠï¼Œç„¶åç¡®å®šå³å¯ã€‚\nè‡³æ­¤ï¼ŒWindows ä¸‹ PicGo+GitHub çš„ä¸ªäººå›¾åºŠå·¥å…·æ­å»ºå®Œæˆï¼Œé€šè¿‡å¾®ä¿¡æˆ–è€… QQ æˆªå›¾å®Œæˆï¼Œé»˜è®¤å‰ªè´´æ¿ä¸­æ˜¯å›¾ç‰‡çš„æƒ…å†µä¸‹ï¼Œç›´æ¥ Ctrl+Shift+P å³å¯å°†å›¾ç‰‡ä¸ŠåºŠå›¾åºŠï¼Œè€Œ .md æ ¼å¼çš„å›¾ç‰‡é“¾æ¥ä¹Ÿä¼šæ›¿æ¢è‡³å‰ªè´´æ¿ï¼Œç›´æ¥ç²˜è´´åœ¨æ‰€éœ€åœ°æ–¹å³å¯ã€‚\n","id":66,"section":"posts","summary":"è™½ç„¶ä¹Ÿæœ‰å…è´¹çš„å¯ä»¥ç”¨ï¼Œä½†æ˜¯æ—¢ç„¶è½¯è·¯ç”±å·²ç»é…ç½®äº†æ–¹ä¾¿çš„ä¸Šç½‘ç¯å¢ƒï¼ŒGitHub è®¿é—®èµ·æ¥æ¯”ä»¥å‰ä¾¿åˆ©äº†è®¸å¤šï¼Œé‚£å°±æŠŠå›¾åºŠç›´æ¥éƒ¨ç½²åœ¨ GitHub ä¸Šå¥½äº†ï¼Œè™½ç„¶éšç§æ€§","tags":[],"title":"Windows ä¸‹ PicGo+GitHub æ­å»ºä¸ªäººå›¾åºŠå·¥å…·","uri":"https://senjianlu.com/2020/01/picgo-github/","year":"2020"},{"content":"ç¡®ç¡®å®å®æ„Ÿè§‰è®°æ€§è¶Šæ¥è¶Šå·®ï¼Œæœ‰è®°å½•åŒ…æ‹¬â€œé—®é¢˜è§£å†³æ–¹æ³•â€ã€â€œé…ç½®æ–‡ä»¶ä¿®æ”¹â€ç­‰ä¿¡æ¯çš„éœ€æ±‚äº†ï¼Œä½†åŒæ—¶ä¹Ÿå¸Œæœ›ä¸€åˆ‡ä»ç®€ï¼Œå¬ä»Vå‹å»ºè®®é€‰ç”¨ Hugo+GitHub Pages å…è´¹æ­å»ºä¸ªé™æ€åšå®¢æ¥åšæ ‘æ´å§ã€‚\n ç¯å¢ƒï¼šWindows 10 64 ä½\néœ€è¦æ—¶é—´ï¼š1 å°æ—¶å·¦å³\nåŸæ•™ç¨‹ï¼šCSDN Windows ä¸‹æ­å»º Hugo åšå®¢\n 1ã€åœ¨ https://github.com/gohugoio/hugo/releases åœ°å€ä¸‹æ‰¾åˆ°Windowså‹ç¼©æ–‡ä»¶ä¸‹è½½ï¼Œå¦‚ä¸‹å›¾ 64 ä½çš„ã€‚\n2ã€æ–°å»º Hugo å’Œ Hugo/bin æ–‡ä»¶å¤¹ï¼Œå°†ä¸‹è½½ä¸‹æ¥çš„ .exe æ–‡ä»¶æ”¾å…¥ bin æ–‡ä»¶å¤¹ï¼Œå¹¶æ·»åŠ è‡³ç¯å¢ƒå˜é‡ä¸­ã€‚\n3ã€åœ¨ Cmd ä¸­è¾“å…¥\nhugo version  æ£€æµ‹æ˜¯å¦å®‰è£…æˆåŠŸï¼Œå®‰è£…æˆåŠŸåè¿›å…¥ Hugo æ–‡ä»¶å¤¹ä¸­ï¼Œè¾“å…¥\nhugo new site myblog  myblog æ›¿æ¢æˆæƒ³è¦çš„åšå®¢æ–‡ä»¶å¤¹åå­—ã€‚\n4ã€è¿›å…¥æ–°å»ºçš„åšå®¢æ–‡ä»¶å¤¹ä¸‹ï¼Œå¯ä»¥çœ‹è§é¡¹ç›®ç»“æ„ï¼šcontent æ–‡ä»¶å¤¹å­˜æ”¾å†…å®¹ï¼Œthemes æ–‡ä»¶å¤¹ç”¨æ¥å­˜æ”¾ä¸»é¢˜ï¼Œconfig.toml ç”¨æ¥é…ç½®æ–‡ä»¶ï¼Œè¿™ä¹Ÿæ˜¯è¿™æ¬¡åˆæ­¥å»ºç«‹éœ€è¦åšå®¢éœ€è¦æ”¹çš„å†…å®¹ã€‚\n5ã€å»ºå®Œæ–‡ä»¶å¤¹åå…ˆå»æŒ‘é€‰ä¸»é¢˜ï¼Œåœ¨ https://themes.gohugo.io/ é€‰æ‹©è‡ªå·±å–œæ¬¢çš„ä¸»é¢˜è¿›è¡Œä¸‹è½½ï¼Œè¿™æ¬¡æˆ‘ä½¿ç”¨ hugo-theme-m10c è¿™æ¬¾ä¸»é¢˜ï¼Œå› ä¸ºé€‰æ‹©å®ƒé¿å…é…ç½® config.toml æ–‡ä»¶è€ŒèŠ±è´¹å¤§é‡æ—¶é—´ã€‚\n6ã€Cmd è¿›å…¥åšå®¢æ–‡ä»¶å¤¹ä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æŠŠ GitHub ä¸Šçš„ä¸»é¢˜æ–‡ä»¶ Clone åˆ°å¯¹åº”æ–‡ä»¶å¤¹ä¸‹ themes/m10c\ngit clone https://github.com/vaga/hugo-theme-m10c.git themes/m10c  7ã€æ­¤æ—¶å°±å·²ç»åœ¨æœ¬åœ°è¿è¡Œåšå®¢åšç¡®è®¤äº†ï¼Œæ‰§è¡Œ\nhugo server -t m10c --buildDrafts  å¯åŠ¨é¡¹ç›®ï¼Œç„¶åå‰å¾€ http://localhost:1313/ å°±å¯ä»¥çœ‹åˆ°äº†ã€‚\n8ã€æ¥ä¸‹æ¥å¼€å§‹æ–°å»ºä¸€ç¯‡åšå®¢ï¼Œä½¿ç”¨ Hugo å¾ˆå¤§ç¨‹åº¦ä¸Šå°±æ˜¯çœ‹ä¸­äº†å®ƒå°† .md æ–‡ä»¶æ¸²æŸ“æˆé™æ€åšå®¢é¡µé¢çš„èƒ½åŠ›ï¼Œå³ä½¿æ˜¯å‘å¸ƒå®Œæˆåï¼ŒåŸç¨¿ä¹Ÿå¯ä»¥ä¿å­˜æ–¹ä¾¿è„±æœºæŸ¥çœ‹ã€‚\né¦–é€‰ Ctrl+C ç»“æŸæœ¬åœ°çš„é¢„è§ˆï¼Œç„¶åæ–°å»ºåšæ–‡å¯¹åº”çš„ .md æ–‡ä»¶ã€‚\nhugo new post/blog.md  æ–°å»ºçš„ .md æ–‡ä»¶ä¼šå­˜å‚¨åœ¨ content/post ä¸­ï¼Œç›´æ¥å‰å¾€è¿›è¡Œç¼–è¾‘å³å¯ã€‚\n9ã€æ¨èä½¿ç”¨ VS Code è¿›è¡Œç¼–è¾‘ï¼Œå·¦ä¸Šè§’çš„é¢„è§ˆæŒ‰é’®ï¼Œç‚¹å‡»åå¯ä»¥å°†çª—å£åˆ†ä¸ºå·¦å³ä¸¤éƒ¨åˆ†ç”¨äºæŸ¥çœ‹å®æ–½æ•ˆæœã€‚ æ³¨æ„ï¼šdraft: true éœ€è¦æ”¹ä¸º draft: false å›¾ä¸­å¹¶æœªåšä¿®æ”¹ï¼Œå¦‚æœä¸ä¿®æ”¹å°±æ˜¯è‰ç¨¿ï¼Œä¸ä¼šåœ¨åšæ–‡é¡µé¢ä¸Šæ˜¾ç¤ºå†…å®¹ï¼\nå†™å®Œåç›´æ¥ Ctrl+S ä¿å­˜å³å¯ã€‚\n10ã€å†æ¬¡æœ¬åœ°å¯åŠ¨é¡¹ç›®ï¼Œå¯ä»¥çœ‹è§å·²ç»æœ‰å¯¹åº”çš„åšæ–‡äº†ã€‚è‡³æ­¤ï¼Œæœ¬åœ°åšå®¢ç¯å¢ƒå°±ç®—é…ç½®å®Œæˆäº†ã€‚\nhugo server -t m10c --buildDrafts  11ã€GitHub ä¸ºæ¯ä¸ªè´¦å·æä¾›äº†ä¸€ä¸ªå…è´¹çš„ç©ºé—´æ¥å­˜å‚¨é™æ€çš„ HTMLã€JS å’Œ CSSï¼Œè€Œæˆ‘ä»¬å°±å¯ä»¥å€Ÿæ­¤æ¥å‘å¸ƒåšå®¢ã€‚ é¦–å…ˆå»æ–°å»ºä»“åº“ï¼Œæ³¨æ„å‘½åï¼Œè¿™æ˜¯ GitHub è¾¨åˆ«æ˜¯å¦ä¸ºç½‘ç»œç©ºé—´çš„ä¾æ®ã€‚\nä»“åº“åéœ€æ»¡è¶³ è´¦æˆ·å.github.io çš„å‘½åè§„èŒƒï¼Œç„¶åç‚¹å‡»ç»¿è‰²çš„ create æŒ‰é’®è¿›è¡Œåˆ›å»ºã€‚\næˆ‘å› ä¸ºå·²ç»éƒ¨ç½²å®Œæˆï¼Œå› æ­¤è¿™é‡Œæ˜¾ç¤ºé‡å¤åˆ›å»ºã€‚\n12ã€åˆ›å»ºå®Œæˆåï¼Œå›åˆ° myblog åšå®¢ç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥ç”Ÿæˆ public ç›®å½•ï¼Œä¹Ÿå°±æ˜¯ GitHub ä»“åº“æ‰€éœ€çš„é™æ€åšå®¢çš„æ–‡ä»¶ã€‚ï¼ˆåç»­éƒ½ç”¨çš„åŸåšå®¢çš„å›¾ï¼Œè·¯å¾„å¯èƒ½æœ‰åå·®ï¼Œéƒ½æ˜¯åŸºç¡€çš„ Git æ“ä½œï¼‰\nhugo --theme=m10c --baseUrl=\u0026quot;åœ°å€\u0026quot; --buildDrafts  13ã€è¿›å…¥ public æ–‡ä»¶å¤¹ï¼Œå°†æ‰€æœ‰æ–‡ä»¶æ·»åŠ ã€æäº¤åˆ°æœ¬åœ°ã€‚\ngit init git add. git commit -m \u0026quot;é™„è¨€\u0026quot;  14ã€å°†æœ¬åœ° public ä¸ GitHub è¿›è¡Œå…³è”åï¼Œè¿›è¡Œæ¨é€ï¼Œç¬¬ä¸€æ¬¡æ¨é€ä¼šéœ€è¦è¾“å…¥ GitHub çš„è´¦å·å¯†ç ã€‚\ngit add origin http://github.com/m1801823/m1801823.github.io.git git push -u origin master  15ã€ç­‰å¾…æ¨é€å®Œæˆåï¼Œåˆ·æ–° GitHub é¡µé¢ï¼Œå¯¹åº”çš„æ–‡ä»¶å°±ä¸Šä¼ ä¸Šæ¥äº†ï¼Œè¿™æ—¶å€™è¾“å…¥ http://è´¦æˆ·å.github.io å°±å¯ä»¥è®¿é—®äº†\n16ã€å¦‚æœè‡ªå·±æœ‰åŸŸåçš„è¯ï¼Œä¹Ÿå¯ä»¥é…ç½® DNS ç›´æ¥è®©åŸŸåè§£æåˆ°ä½ çš„é™æ€åšå®¢ä¸Šï¼Œæ–¹ä¾¿å‘Šè¯‰å¥½å‹ä½ çš„åšå®¢ç½‘å€ã€‚\nè¿™é‡Œä»¥åœ¨ Namecheap ä¸Šè´­ä¹°çš„åŸŸåä¸ºä¾‹ï¼Œä¸æ¨èé˜¿é‡Œäº‘å’Œè…¾è®¯äº‘ï¼Œåªå› ä¸ºç®¡å±€å¤‡æ¡ˆå¤ªéº»çƒ¦ã€‚\né¦–å…ˆé€‰æ‹©å·²æœ‰åŸŸåè¿›å…¥ç®¡ç†é¢æ¿ã€‚\nç„¶åæ–°å¢æˆ–è€…ä¿®æ”¹ DNS è§£æè®°å½•ï¼Œå¯¹åº”ä»¥ä¸‹ä¿®æ”¹å³å¯ï¼Œåªéœ€è¦æŠŠ CNAME Record çš„ Value ä¿®æ”¹æˆä½ çš„åœ°å€å³å¯ã€‚\næœ€åå›åˆ° GitHub çš„ä»“åº“éƒ¨åˆ†ï¼Œé€‰æ‹© Settingsï¼Œæ‹‰åˆ° Custom domain éƒ¨åˆ†ä¿®æ”¹æˆä½ çš„åŸŸåä¿å­˜ã€‚\nå¤§æ¦‚ 5 åˆ†é’Ÿå·¦å³ï¼ŒåŸŸåå°±ä¼šè§£æåˆ°ä½ çš„åšå®¢ï¼Œåœ¨å¼€å§‹çš„å‡ å¤©æ˜¯ä¸æ”¯æŒ HTTPS çš„ï¼Œåªèƒ½å…ˆç”¨ http://ä½ çš„åŸŸå è¿›è¡Œè®¿é—®ã€‚\nä¹‹åå¦‚æœ HTTPS åŠ å¯†å¯ç”¨ï¼Œåˆ™éœ€è¦æ›´æ”¹ä¸€ä¸‹æ¨¡æ¿ï¼Œåœ¨ head éƒ¨åˆ†åŠ ä¸Š\n\u0026lt;meta http-equiv=\u0026quot;Content-Security-Policy\u0026quot; content=\u0026quot;upgrade-insecure-requests\u0026quot;\u0026gt;  æ¥è‡ªåŠ¨å°† HTTP çš„ä¸å®‰å…¨è¯·æ±‚å‡çº§ä¸º HTTPSï¼Œå¦åˆ™å¯èƒ½å‡ºç° CSS ç­‰åŠ è½½ä¸å‡ºæ¥çš„æƒ…å†µã€‚\nè‡³æ­¤åŸºäº Hugo å’Œ Github Pages çš„é™æ€åšå®¢æ­å»ºå®Œæˆï¼Œå¼€å§‹å…»æˆè®°å½•çš„å¥½ä¹ æƒ¯å§ï¼\n","id":67,"section":"posts","summary":"ç¡®ç¡®å®å®æ„Ÿè§‰è®°æ€§è¶Šæ¥è¶Šå·®ï¼Œæœ‰è®°å½•åŒ…æ‹¬â€œé—®é¢˜è§£å†³æ–¹æ³•â€ã€â€œé…ç½®æ–‡ä»¶ä¿®æ”¹â€ç­‰ä¿¡æ¯çš„éœ€æ±‚äº†ï¼Œä½†åŒæ—¶ä¹Ÿå¸Œæœ›ä¸€åˆ‡ä»ç®€ï¼Œå¬ä»Vå‹å»ºè®®é€‰ç”¨ Hugo+GitHub Pages å…è´¹æ­å»ºä¸ªé™","tags":[],"title":"Windows ä¸‹ Hugo+GitHub Pages æ­å»ºé™æ€åšå®¢","uri":"https://senjianlu.com/2020/01/hugo-github-pages/","year":"2020"},{"content":"æœåŠ¡å™¨çš„éƒ¨ç½²ç¬”è®°ã€‚\n å„éƒ¨åˆ†åŠŸèƒ½ä»‹ç»ï¼š\n Nginx æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ HTTP å’Œåå‘ä»£ç† Web æœåŠ¡å™¨ï¼ŒåŒæ—¶ä¹Ÿæä¾›äº† IMAP/POP3/SMTP æœåŠ¡ã€‚ uWSGI è´Ÿè´£å¤šçº¿ç¨‹ï¼Œå³æ”¯æŒå¤šäººåŒæ—¶è®¿é—®ç½‘ç«™ã€‚ Django æ˜¯ç”± Python ç¼–å†™çš„å¼€æº Web åº”ç”¨æ¡†æ¶ï¼Œé€‚åˆä¸ªäººå°é¡¹ç›®æ­å»ºã€‚   æœåŠ¡å™¨ç³»ç»Ÿä¸º CentOS7ï¼Œå½“ç„¶è®°å½•çš„æ‰€æœ‰å‘½ä»¤å†æ›´é«˜ç‰ˆæœ¬ä¸Šä¹Ÿéƒ½å¯ä»¥ä½¿ç”¨ã€‚\n1ã€æ—¢ç„¶æ­å»ºçš„æ˜¯ Python é¡¹ç›®ï¼Œé¦–å…ˆå‡çº§ä»¥ä¸‹æœåŠ¡å™¨ç«¯çš„ Python ç‰ˆæœ¬ï¼Œé»˜è®¤ Linux è‡ªå¸¦ Python2ï¼Œæˆ‘ä»¬æŠŠå®ƒå…ˆå‡çº§ä¸º Python3ã€‚\nå®‰è£…ä¾èµ–è½¯ä»¶\nyum -y install sqlite-devel yum -y install make zlib zlib-devel gcc-c++ libtool openssl openssl-devel  ä¸‹è½½å®‰è£… Python3.6\nwget https://www.python.org/ftp/python/3.6.1/Python-3.6.1.tgz tar zxvf Python-3.6.1.tgz cd Python-3.6.1 ./configure --prefix=/usr/local/python3 make \u0026amp;\u0026amp; make install  åˆ›å»º Python åŠ pip å‘½ä»¤è½¯é“¾æ¥\nln -s /usr/local/python3/bin/python3 /usr/bin/python3 ln -s /usr/local/python3/bin/pip3 /usr/bin/pip3  è¿™æ · Python3 å°±å·²ç»å®‰è£…å®Œæˆäº†ï¼Œé”®å…¥ Python3 å†å›è½¦å°±å¯ä»¥è¿›å…¥ Python ç¼–è¯‘äº†ã€‚\næ³¨ï¼šCtrl+Z é€€å‡º Python ç¼–è¯‘\n2ã€æ¥ä¸‹æ¥å®‰è£… Django å¹¶é…ç½®é¡¹ç›®ï¼Œè¿™é‡Œé€‰æ‹©çš„ç‰ˆæœ¬æ˜¯ 2.1.8ï¼Œå•çº¯çš„å› ä¸ºå¤Ÿç”¨ä¸”ç¨³å®šï¼Œæ–°ç‰ˆæœ¬çš„ç¯å¢ƒé…ç½®æ²¡æœ‰å‰äººæŒ‡å¯¼ã€‚\npip3 install django==2.1.8  ç­‰å¾…å®‰è£…å®Œæˆåï¼Œä¸Šä¼  Django é¡¹ç›®åˆ°æœåŠ¡å™¨ä¸Šä»»æ„ç›®å½•ï¼Œä½¿ç”¨ Xftp æˆ–è€… git clone éƒ½å¯ä»¥\ncd é¡¹ç›®æ–‡ä»¶å¤¹ python3 manage.py runserver 0.0.0.0:80  æ³¨æ„ï¼Œè¿è¡Œé¡¹ç›®æ—¶å¯èƒ½æŠ¥é”™ï¼š\n You have 15 unapplied migration(s). Your project may not work properly until you apply the migrations for app(s): admin, auth, contenttypes, sessions. Run \u0026lsquo;python manage.py migrate\u0026rsquo; to apply them.\n è¿™æ—¶åªéœ€è¦æŒ‰ç…§æç¤ºï¼Œè¾“å…¥ä»¥ä¸‹å†…å®¹å³å¯\npython3 manage.py migrate  å‡ºç°ä»¥ä¸‹ä¿¡æ¯åˆ™è¯´æ˜å¯åŠ¨æˆåŠŸã€‚\næ³¨æ„ï¼š å¦‚æœè®¿é—®é¡µé¢å‡ºç°äº†ä»¥ä¸‹é”™è¯¯ï¼Œé‚£ä¹ˆè¿›å…¥ä½ çš„é¡¹ç›®ï¼Œä¿®æ”¹ settings.py å°† ALLOWEDâ€”â€”HOSTS = [] ä¿®æ”¹ä¸º ['*'] å³å¯è§£å†³ã€‚\n DisallowedHost at / Invalid HTTP_HOST header: \u0026lsquo;47.56.227.27\u0026rsquo;. You may need to add \u0026lsquo;47.56.227.27\u0026rsquo; to ALLOWED_HOSTS.\n è‡³æ­¤ï¼ŒPython ç¯å¢ƒä¸ Django ç¯å¢ƒå°±å®‰è£…å®Œæˆã€‚\n3ã€æ¥ä¸‹æ¥å®‰è£… uWSGI Web ç½‘å…³ã€‚\né¦–å…ˆä¸‹è½½å®‰è£… uWSGI\nwget http://projects.unbit.it/downloads/uwsgi-2.0.1.tar.gz tar zxvf uwsgi-2.0.1.tar.gz cd uwsgi-2.0.1 python3 uwsgiconfig.py --build cp -R /home/uwsgi-2.0.1 /usr/local/uwsgi ln -s /usr/local/uwsgi/uwsgi /usr/bin/uwsgi  ç„¶åæµ‹è¯• uWSGI æ˜¯å¦å®‰è£…æˆåŠŸï¼Œåˆ›å»ºæµ‹è¯•æ–‡ä»¶\nvi test.py  æ–‡ä»¶å†…å®¹ä¸ºï¼š\ndef application(env, start_response): start_response('200 OK', [('Content-Type','text/html')]) return [b\u0026quot;Hello World\u0026quot;]  è¾“å…¥å®Œæˆå :wq ä¿å­˜ï¼Œç„¶åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œæµ‹è¯•ã€‚\n/usr/local/uwsgi/uwsgi --http :9090 --wsgi-file /home/test.py   é˜²ç«å¢™å¼€æ”¾ç«¯å£æŒ‡ä»¤ï¼š\n# æŸ¥çœ‹å½“å‰å¼€æ”¾çš„æ‰€æœ‰ç«¯å£ firewall-cmd --list-all # æ›¿æ¢ä¸ºä½ éœ€è¦å¼€æ”¾çš„ç«¯å£ firewall-cmd --add-port=80/tcp --permanent firewall-cmd --reload   ç„¶åå»å¯¹åº”æœåŠ¡å•†çš„å®‰å…¨ç»„å¤„å¼€æ”¾å®‰å…¨ç»„ã€‚è¿™é‡Œå°±ä»¥é˜¿é‡Œäº‘å›½é™…ä¸ºä¾‹ã€‚ å‰å¾€ä½ çš„ IP:9090 å‡ºç° Hello World å°±è¯´æ˜ uWSGI çš„å®‰è£…å·²ç»å®Œæˆäº†ï¼\n4ã€å¼€å§‹ uWSGI å’Œ Django ç»“åˆï¼Œæ‰§è¡Œ\nuwsgi --http :9090 --chdir /home/Django é¡¹ç›®æ–‡ä»¶å¤¹ --wsgi-file Django é¡¹ç›®(ä¸ manage.py åŒçº§)/wsgi.py --master --processes 4 --threads 2 --stats 127.0.0.1:9192  åŒæ ·è®¿é—® IP:9090 ï¼Œå¦‚æœå¯ä»¥è®¿é—® Django é¡µé¢åˆ™è¯´æ˜æˆåŠŸã€‚\næ³¨ï¼šå¦‚æœåœ¨è®¿é—® Django é¡¹ç›®æ—¶é™æ€æ–‡ä»¶åŠ è½½å¤±è´¥å¯ä»¥å…ˆå¿½ç•¥ï¼Œåœ¨ Nginx é…ç½®ä¸­ä¼šæŒ‡å®šé™æ€æ–‡ä»¶è·¯å¾„ï¼Œé…ç½®åå¯ä»¥æ­£å¸¸è®¿é—®ã€‚\n5ã€å®‰è£… Nginx\né¦–å…ˆä¸‹è½½å®‰è£…ä¾èµ–ç¬¬ä¸‰æ–¹è½¯ä»¶ PCRE\nwget http://jaist.dl.sourceforge.net/project/pcre/pcre/8.34/pcre-8.34.tar.bz2 tar jxvf pcre-8.34.tar.bz2   å¦‚æœæŠ¥é”™ï¼šbzip2: Cannot exec: No such file or directory\næ‰§è¡Œï¼šyum -y install bzip2\n cd pcre-8.34 ./configure --enable-utf8 make \u0026amp;\u0026amp; make install  ä¸‹è½½å®‰è£…ä¾èµ–ç¬¬ä¸‰æ–¹è½¯ä»¶ OpenSSL\nwget http://distfiles.macports.org/openssl/openssl-1.0.2h.tar.gz tar zxvf openssl-1.0.2h.tar.gz  ä¸‹è½½å®‰è£… Nginx\nwget http://nginx.org/download/nginx-1.9.9.tar.gz tar zxvf nginx-1.9.9.tar.gz ./configure --prefix=/usr/local/nginx --with-pcre --with-http_stub_status_module --with-http_ssl_module --with-openssl=/home/openssl-1.0.2h --with-http_gzip_static_module --with-http_sub_module --with-cc=/usr/bin/gcc make install  æ–°å»º www ç”¨æˆ·\nuseradd -s /sbin/nologin -M www  å¤‡ä»½ã€ä¿®æ”¹ Nginx é…ç½®æ–‡ä»¶\ncd /usr/local/nginx/conf cp -f nginx.conf nginx.conf_bak vi nginx.conf (ä¿®æ”¹æ–‡ä»¶) user www; # ä¿®æ”¹å¯åŠ¨ç”¨æˆ·ä¸º www worker_processes 4; # å¯åŠ¨4ä¸ªè¿›ç¨‹ï¼Œæ ¹æ®å®é™…éœ€æ±‚é…ç½®  å¯åŠ¨ Nginx\ncd /usr/local/nginx/sbin ./nginx   å¦‚æœæŠ¥é”™ï¼šnginx: [emerg] still could not bind()\nè¯´æ˜80ç«¯å£ç›®å‰è¢«å ç”¨\næ‰§è¡Œï¼š\nnetstat -apn | grep 80  ç„¶åï¼š\nkill -9 26105  26105 ä¸ºæœç´¢å‡ºæ¥çš„ 0.0.0.0/80 å¯¹åº”çš„ PID\næ³¨æ„ï¼šéœ€è¦åˆ é™¤ 5-6 æ¬¡ï¼Œå› ä¸ºæ‰§è¡Œçš„é€‚åˆæœ‰è¿›ç¨‹ä¿æŠ¤\n å†è®¿é—® IP:80 æ˜¾ç¤º Nginx é¡µé¢è¯´æ˜ Nginx å®‰è£…æˆåŠŸã€‚\n6ã€Nginx+uWSGI+Django ä¸‰è€…è¿æºã€‚\né¦–å…ˆåœ¨ Django é¡¹ç›®æ–‡ä»¶å¤¹ä¸­åˆ›å»º uwsgi.ini\nvi uwsgi.ini (æ–‡ä»¶å†…å®¹) [uwsgi] # uwsgiå¯åŠ¨ç«¯å£ socket = 127.0.0.1:9090 # djangoé¡¹ç›®ç›®å½• chdir=/home/SteamCash module=SteamCash.wsgi master = true processes=2 threads=2 max-requests=2000 chmod-socket=664 vacuum=true # æ—¥å¿—è·¯å¾„ daemonize = /home/SteamCash/logs/uwsgi.log  é…ç½® Nginx\nvi /usr/local/nginx/conf/nginx.conf (æ–‡ä»¶å†…å®¹) ...... server { listen 80; server_name localhost; #charset koi8-r; #access_log logs/host.access.log main; # é€‰æ‹©ä¸ºä½ é¡¹ç›®çš„staticæ–‡ä»¶å¤¹ location /static { alias /home/SteamCash/static; } location / { include uwsgi_params; uwsgi_pass 127.0.0.1:9090; root html; index index.html index.htm; } ......  å¯åŠ¨ uWSGI\nuwsgi --ini /home/SteamCash/uwsgi.ini  å¯åŠ¨ Nginx\n./usr/local/nginx/sbin/nginx  æ¥ç€è®¿é—®é¡µé¢å³å¯ã€‚\n","id":68,"section":"posts","summary":"æœåŠ¡å™¨çš„éƒ¨ç½²ç¬”è®°ã€‚ å„éƒ¨åˆ†åŠŸèƒ½ä»‹ç»ï¼š Nginx æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ HTTP å’Œåå‘ä»£ç† Web æœåŠ¡å™¨ï¼ŒåŒæ—¶ä¹Ÿæä¾›äº† IMAP/POP3/SMTP æœåŠ¡ã€‚ uWSGI è´Ÿè´£å¤šçº¿ç¨‹ï¼Œå³æ”¯æŒå¤šäººåŒæ—¶è®¿é—®ç½‘ç«™ã€‚ Django æ˜¯ç”± Python ç¼–","tags":["Python"],"title":"CentOS7 ä¸‹ Nginx+uWSGI é…ç½® Django é¡¹ç›®","uri":"https://senjianlu.com/2020/01/centos7-nginx-uwsgi-django/","year":"2020"},{"content":"å¦‚æœä½ æ€¥äºè§£å†³çˆ¬è™« HTTP ä»£ç†æ± è®¿é—® HTPPS å‡ºé”™ï¼Œå¹¶ä¸”è‡ªå·±æœ‰å¢ƒå¤–æœåŠ¡å™¨çš„è¯ï¼Œæˆ‘ç›´æ¥ç»™å‡ºè§£å†³æ–¹æ¡ˆï¼šæœåŠ¡å™¨æ­å»º SOCKS5 ä»£ç†å¹¶åœ¨ä»£ç ä¸­ä»¥ socks5h://è´¦å·:å¯†ç @IP:ç«¯å£ çš„æ ¼å¼ä½¿ç”¨\nä»¥ Python3 ä¸ºä¾‹ï¼š\nproxy = {\r\u0026quot;http\u0026quot;: \u0026quot;socks5h://username123:passwd456@128.129.139.201:13233\u0026quot;,\r\u0026quot;https\u0026quot;: \u0026quot;socks5h://username123:passwd456@128.129.139.201:13233\u0026quot;\r}\rresponse = requests.get(url,proxies=proxy,verify=False)\rprint(response.content)\r æ³¨æ„ï¼š ä»£ç†çš„åè®®é€‰æ‹©è¦ä½¿ç”¨ SOCKS5Hï¼Œä¸‹é¢æˆ‘ä¼šæ”¾ä½¿ç”¨ HTTP å’Œ SOCKS5 äº§ç”Ÿçš„é”™è¯¯ä¾›å‚è€ƒã€‚\n1ã€ä½¿ç”¨ HTTP ä»£ç†æ—¶ï¼š\nurl = \u0026quot;https://steamcommunity.com/market/priceoverview/?appid=730\u0026amp;currency=1\u0026amp;market_hash_name=Clutch%20Case\u0026quot;\rproxy = {\r\u0026quot;http\u0026quot;: \u0026quot;http://128.129.139.201:13233\u0026quot;,\r\u0026quot;https\u0026quot;: \u0026quot;http://128.129.139.201:13233\u0026quot;\r}\rresponse = requests.get(url,proxies=proxy,verify=False)\rprint(response.content)\r  requests.exceptions.ProxyError: HTTPSConnectionPool(host=\u0026lsquo;steamcommunity.com\u0026rsquo;, port=443): Max retries exceeded with url: /market/priceoverview/?appid=730\u0026amp;currency=1\u0026amp;market_hash_name=Clutch%20Case (Caused by ProxyError(\u0026lsquo;Cannot connect to proxy.\u0026rsquo;, ConnectionResetError(10054, \u0026lsquo;è¿œç¨‹ä¸»æœºå¼ºè¿«å…³é—­äº†ä¸€ä¸ªç°æœ‰çš„è¿æ¥ã€‚\u0026rsquo;, None, 10054, None)))\n 2ã€ä½¿ç”¨ HTTPS ä»£ç†æ—¶ï¼š\nurl = \u0026quot;https://steamcommunity.com/market/priceoverview/?appid=730\u0026amp;currency=1\u0026amp;market_hash_name=Clutch%20Case\u0026quot;\rproxy = {\r\u0026quot;http\u0026quot;: \u0026quot;http://128.129.139.201:13233\u0026quot;,\r\u0026quot;https\u0026quot;: \u0026quot;https://128.129.139.201:13233\u0026quot;\r}\rresponse = requests.get(url,proxies=proxy,verify=False)\rprint(response.content)\r  requests.exceptions.ProxyError: HTTPSConnectionPool(host=\u0026lsquo;steamcommunity.com\u0026rsquo;, port=443): Max retries exceeded with url: /market/priceoverview/?appid=730\u0026amp;currency=1\u0026amp;market_hash_name=Clutch%20Case (Caused by ProxyError(\u0026lsquo;Cannot connect to proxy.\u0026rsquo;, ConnectionResetError(10054, \u0026lsquo;è¿œç¨‹ä¸»æœºå¼ºè¿«å…³é—­äº†ä¸€ä¸ªç°æœ‰çš„è¿æ¥ã€‚\u0026rsquo;, None, 10054, None)))\n 3ã€ä½¿ç”¨ SOCKS5 ä»£ç†æ—¶ï¼š\nurl = \u0026quot;https://steamcommunity.com/market/priceoverview/?appid=730\u0026amp;currency=1\u0026amp;market_hash_name=Clutch%20Case\u0026quot;\rproxy = {\r\u0026quot;http\u0026quot;: \u0026quot;socks5://128.129.139.201:13233\u0026quot;,\r\u0026quot;https\u0026quot;: \u0026quot;socks5://128.129.139.201:13233\u0026quot;\r}\rresponse = requests.get(url,proxies=proxy,verify=False)\rprint(response.content)\r  socks.GeneralProxyError: Socket error: 0x05: Connection refused\nrequests.exceptions.ConnectionError: SOCKSHTTPSConnectionPool(host=\u0026lsquo;steamcommunity.com\u0026rsquo;, port=443): Max retries exceeded with url: /market/priceoverview/?appid=730\u0026amp;currency=1\u0026amp;market_hash_name=Clutch%20Case (Caused by NewConnectionError('\u0026lt;urllib3.contrib.socks.SOCKSHTTPSConnection object at 0x03C29450\u0026gt;: Failed to establish a new connection: 0x05: Connection refused'))\n 4ã€æœ€åä½¿ç”¨ SOCKS5 ä»£ç†ï¼Œä½†æ˜¯åè®®å¤„å˜ä¸º SOCKS5Hï¼š\nurl = \u0026quot;https://steamcommunity.com/market/priceoverview/?appid=730\u0026amp;currency=1\u0026amp;market_hash_name=Clutch%20Cahhse\u0026quot;\rproxy = {\r\u0026quot;http\u0026quot;: \u0026quot;socks5h://128.129.139.201:13233\u0026quot;,\r\u0026quot;https\u0026quot;: \u0026quot;socks5h://128.129.139.201:13233\u0026quot;\r}\rresponse = requests.get(url,proxies=proxy,verify=False)\rprint(response.content)\r  proxy 200 b'{\u0026ldquo;success\u0026rdquo;:true,\u0026ldquo;lowest_price\u0026rdquo;:\u0026quot;$0.18\u0026quot;,\u0026ldquo;volume\u0026rdquo;:\u0026ldquo;210,212\u0026rdquo;,\u0026ldquo;median_price\u0026rdquo;:\u0026quot;$0.18\u0026quot;}'\n è¿”å›äº†æˆ‘éœ€è¦çš„æ•°æ®ï¼ŒæˆåŠŸã€‚\n åœ¨å¤„ç†è¿™ä¸ªé—®é¢˜çš„æ—¶å€™ï¼Œæ„Ÿè§‰æŠŠå­¦çš„ç½‘ç»œå…¨è¿˜ç»™äº†è€å¸ˆã€‚\nHTTP å±äºåº”ç”¨å±‚ï¼Œè€Œ SOCKS5 å±äºä¼šè¯å±‚ï¼Œè¿™å°±æ„å‘³ç€ SOCKS5 æ‰€èƒ½ä»£ç†çš„èŒƒå›´ä¼šæ¯” HTTP åè®®æ›´å¹¿ã€‚\nè€Œ SOCKS5H ä¸ SOCKS5 çš„åŒºåˆ«åˆ™æ˜¯ï¼šSOCKS5 åœ¨æœ¬åœ°è§£æ Hostnameï¼Œè€Œ SOCKS5H åˆ™æœ‰ SOCKS5 ä»£ç†æ‰€éƒ¨ç½²çš„æœåŠ¡å™¨è§£æ Hostnameã€‚\næ¢å¥è¯è¯´ï¼ŒSOCKS5 é€‚åˆæœ¬åœ°èƒ½å¤Ÿè§£æç›®æ ‡ä¸»æœºåŸŸåï¼ˆæ¯”å¦‚ GitHubï¼‰ä½†æ˜¯è®¿é—®é€Ÿåº¦æ…¢çš„åŸŸåæ¥æé«˜ä¸‹è½½é€Ÿåº¦ï¼Œè€Œ SOCKS5H åˆ™å¯ä»¥ç”¨æ¥ä»£ç†æœ¬åœ°ä¸èƒ½è§£æçš„ç½‘ç«™ï¼ˆæ¯”å¦‚ Googleï¼‰ï¼Œç”±æœåŠ¡å™¨è§£æç›®æ ‡ä¸»æœºåŸŸåã€‚\næœ€åé™„ä¸ŠæœåŠ¡ç«¯ä»£ç†çš„æ­å»ºè„šæœ¬ï¼š\nHTTP ä»£ç†ï¼šCentOS7 ä¸‹ä¸€é”®å®‰è£… Tinyproxy ä»£ç†\nSOCKS5 ä»£ç†ï¼šCentOS7 ä¸‹ä¸€é”®å®‰è£… SOCKS5 ä»£ç†\nåŒæ—¶å®‰è£… HTTP å’Œ SOCKS5 ä»£ç†ï¼šCentOS7 ä¸‹ä¸€é”®å®‰è£… GOST å¹¶å¯åŠ¨ HTTP å’Œ SOCKS5 ä»£ç†æœåŠ¡\n","id":69,"section":"posts","summary":"å¦‚æœä½ æ€¥äºè§£å†³çˆ¬è™« HTTP ä»£ç†æ± è®¿é—® HTPPS å‡ºé”™ï¼Œå¹¶ä¸”è‡ªå·±æœ‰å¢ƒå¤–æœåŠ¡å™¨çš„è¯ï¼Œæˆ‘ç›´æ¥ç»™å‡ºè§£å†³æ–¹æ¡ˆï¼šæœåŠ¡å™¨æ­å»º SOCKS5 ä»£ç†å¹¶åœ¨ä»£ç ä¸­ä»¥ socks5h://è´¦å·:å¯†","tags":["Python"],"title":"CentOS7 ä¸‹é…ç½® HTTP å’Œ SOCKS5 ä»£ç†æœåŠ¡ç«¯ï¼Œç”¨ä»¥ä»£ç† HTPPS è§£å†³çˆ¬è™« SSL é”™è¯¯","uri":"https://senjianlu.com/2020/01/centos7-http-and-socks5-proxy/","year":"2020"}],"tags":[{"title":"Clash","uri":"https://senjianlu.com/tags/clash/"},{"title":"DataX","uri":"https://senjianlu.com/tags/datax/"},{"title":"Docker","uri":"https://senjianlu.com/tags/docker/"},{"title":"Fiddler","uri":"https://senjianlu.com/tags/fiddler/"},{"title":"Java","uri":"https://senjianlu.com/tags/java/"},{"title":"K3s","uri":"https://senjianlu.com/tags/k3s/"},{"title":"Linux","uri":"https://senjianlu.com/tags/linux/"},{"title":"MongoDB","uri":"https://senjianlu.com/tags/mongodb/"},{"title":"PostgreSQL","uri":"https://senjianlu.com/tags/postgresql/"},{"title":"Python","uri":"https://senjianlu.com/tags/python/"},{"title":"RabbitMQ","uri":"https://senjianlu.com/tags/rabbitmq/"},{"title":"å»ºç«™","uri":"https://senjianlu.com/tags/%E5%BB%BA%E7%AB%99/"},{"title":"æ—¥è¯­","uri":"https://senjianlu.com/tags/%E6%97%A5%E8%AF%AD/"},{"title":"æ¸¸æˆ","uri":"https://senjianlu.com/tags/%E6%B8%B8%E6%88%8F/"},{"title":"ç¡¬ä»¶","uri":"https://senjianlu.com/tags/%E7%A1%AC%E4%BB%B6/"},{"title":"ç½‘ç«™å»ºè®¾","uri":"https://senjianlu.com/tags/%E7%BD%91%E7%AB%99%E5%BB%BA%E8%AE%BE/"}]}